# CRADLE: Empowering Foundation Agents Towards General Computer Control
# CRADLE：赋能基础代理实现通用计算机控制


Weihao Tan ${}^{3}$ ; Wentao Zhang ${}^{3}$ ; Xinrun Xu ${}^{5}$ ; Haochong Xia ${}^{3}$ ; Ziluo Ding ${}^{2}$ ; Boyu Li ${}^{2}$ ; Bohan Zhou ${}^{4}$ ; Junpeng Yue ${}^{4}$ ; Jiechuan Jiang ${}^{4}$ ; Yewen Li ${}^{3}$ ; Ruyi An ${}^{3}$ ; Molei Qin ${}^{3}$ ; Chuqiao Zong ${}^{3}$ ; Longtao Zheng ${}^{3}$ ; Yujie Wu ${}^{1}$ ; Xiaoqiang Chai ${}^{1}$ ; Yifei ${\mathrm{{Bi}}}^{2}$ ,Tianbao ${\mathrm{{Xie}}}^{6}$ ,Pengjie ${\mathrm{{Gu}}}^{3}$ ,Xiyun ${\mathrm{{Li}}}^{2}$ ,Ceyao Zhang ${}^{7}$ , Long Tian ${}^{1}$ , Chaojie Wang ${}^{1}$ , Xinrun Wang ${}^{3}$ ; Börje F. Karlsson ${}^{2}$ ; Bo An ${}^{3,{18}}$ , Shuicheng Yan ${}^{1§}$ , Zongqing Lu ${}^{4,2§}$
谭伟豪 ${}^{3}$；张文涛 ${}^{3}$；徐欣润 ${}^{5}$；夏浩冲 ${}^{3}$；丁子洛 ${}^{2}$；李博宇 ${}^{2}$；周博涵 ${}^{4}$；岳俊鹏 ${}^{4}$；姜杰川 ${}^{4}$；李业文 ${}^{3}$；安如意 ${}^{3}$；秦墨磊 ${}^{3}$；宗楚乔 ${}^{3}$；郑龙涛 ${}^{3}$；吴宇杰 ${}^{1}$；柴晓强 ${}^{1}$；一飞 ${\mathrm{{Bi}}}^{2}$，天宝 ${\mathrm{{Xie}}}^{6}$，鹏杰 ${\mathrm{{Gu}}}^{3}$，熙云 ${\mathrm{{Li}}}^{2}$，张策尧 ${}^{7}$，田龙 ${}^{1}$，王超杰 ${}^{1}$，王欣润 ${}^{3}$；博耶·F·卡尔松（Börje F. Karlsson）${}^{2}$；安博 ${}^{3,{18}}$，闫水成 ${}^{1§}$，卢宗庆 ${}^{4,2§}$


${}^{1}$ Skywork AI ${}^{2}$ Beijing Academy of Artificial Intelligence
${}^{1}$ Skywork AI ${}^{2}$ 北京人工智能研究院


${}^{3}$ Nanyang Technological University,Singapore ${}^{4}$ Peking University
${}^{3}$ 新加坡南洋理工大学 ${}^{4}$ 北京大学


${}^{5}$ Institute of Software,Chinese Academy of Sciences
${}^{5}$ 中国科学院软件研究所


${}^{6}$ The University of Hong Kong ${}^{7}$ The Chinese University of Hong Kong,Shenzhen weihao001@ntu.edu.sg boan@ntu.edu.sg zongqing.lu@pku.edu.cn Project website: https://baai-agents.github.io/Cradle/
${}^{6}$ 香港大学 ${}^{7}$ 香港中文大学（深圳） weihao001@ntu.edu.sg boan@ntu.edu.sg zongqing.lu@pku.edu.cn 项目网站：https://baai-agents.github.io/Cradle/


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_0.jpg?x=341&y=965&w=1120&h=350&r=0"/>



Figure 1: The CRADLE framework empowers nascent foundation models to perform complex computer tasks via the same unified interface humans use, i.e., screenshots as input and keyboard & mouse operations as output.
图1：CRADLE框架使新兴基础模型能够通过人类使用的统一接口执行复杂的计算机任务，即以截图作为输入，以键盘和鼠标操作作为输出。


## Abstract
## 摘要


Despite the success in specific scenarios, existing foundation agents still struggle to generalize across various virtual scenarios, mainly due to the dramatically different encapsulations of environments with manually designed observation and action spaces. To handle this issue, we propose the General Computer Control (GCC) setting to restrict foundation agents to interact with software through the most unified and standardized interface, i.e., using screenshots as input and keyboard and mouse actions as output. We introduce CRADLE, a modular and flexible LMM-powered framework, as a preliminary attempt towards GCC. Enhanced by six key modules: Information Gathering, Self-Reflection, Task Inference, Skill Curation, Action Planning, and Memory, CRADLE is able to understand input screenshots and output executable code for low-level keyboard and mouse control after high-level planning, so that CRADLE can interact with any software and complete long-horizon complex tasks without relying on any built-in APIs. Experimental results show that CRADLE exhibits remarkable generalizability and impressive performance across four previously unexplored commercial video games, five software applications, and a comprehensive benchmark, OSWorld. To our best
尽管在特定场景中取得了成功，现有基础代理仍难以在各种虚拟场景中实现泛化，主要原因在于环境的封装差异巨大，且观察和动作空间多由人工设计。为解决此问题，我们提出了通用计算机控制（General Computer Control，GCC）设置，限制基础代理通过最统一和标准化的接口与软件交互，即使用截图作为输入，键盘和鼠标动作作为输出。我们引入了CRADLE，一种模块化且灵活的基于大语言模型（LMM）的框架，作为迈向GCC的初步尝试。CRADLE由六个关键模块增强：信息收集、自我反思、任务推断、技能策划、动作规划和记忆，能够理解输入截图并在高层规划后输出可执行的低层键盘和鼠标控制代码，从而无需依赖任何内置API即可与任何软件交互并完成长时复杂任务。实验结果表明，CRADLE在四款此前未探索的商业视频游戏、五款软件应用及综合基准OSWorld上展现出卓越的泛化能力和优异性能。我们尽最大努力


---



*Equal contribution ${}^{ \dagger  }$ Core contribution ${}^{ \ddagger  }$ Equal advising ${}^{§}$ Corresponding authors
*同等贡献 ${}^{ \dagger  }$ 核心贡献 ${}^{ \ddagger  }$ 同等指导 ${}^{§}$ 通讯作者


Weihao Tan's work was conducted during his internships at Skywork AI and BAAI. Longtao Zheng is also an intern at Skywork AI. Xinrun Xu, Bohan Zhou, and Junpeng Yue are interns at BAAI.
谭伟豪的工作在Skywork AI和BAAI实习期间完成。郑龙涛也是Skywork AI的实习生。徐欣润、周博涵和岳俊鹏是BAAI的实习生。


---



knowledge, CRADLE is the first to enable foundation agents to follow the main storyline and complete 40-minute-long real missions in the complex AAA game Red Dead Redemption 2 (RDR2). CRADLE can also create a city of a thousand people in Cities: Skylines, farm and harvest parsnips in Stardew Valley, and trade and bargain with a maximal weekly total profit of 87% in Dealer's Life 2. CRADLE can not only operate daily software, like Chrome, Outlook, and Feishu, but also edit images and videos using Meitu and CapCut. With a unified interface to interact with any software, CRADLE greatly extends the reach of foundation agents by enabling the easy conversion of any software, especially complex games, into benchmarks to evaluate agents' various abilities and facilitate further data collection, thus paving the way for generalist agents.
知识方面，CRADLE是首个使基础智能体能够遵循主线剧情并完成复杂AAA游戏《荒野大镖客救赎2》（Red Dead Redemption 2, RDR2）中长达40分钟真实任务的系统。CRADLE还可以在《城市：天际线》（Cities: Skylines）中创建千人城市，在《星露谷物语》（Stardew Valley）中种植和收获欧防风，并在《Dealer's Life 2》中进行交易和讨价还价，最高周利润达87%。CRADLE不仅能操作日常软件，如Chrome、Outlook和飞书，还能使用美图秀秀（Meitu）和剪映（CapCut）编辑图片和视频。通过统一接口与任何软件交互，CRADLE极大地扩展了基础智能体的应用范围，使任何软件，尤其是复杂游戏，能够轻松转化为评估智能体多种能力的基准，并促进进一步数据收集，从而为通用智能体铺平道路。


## 1 Introduction
## 1 引言


Artificial General Intelligence (AGI) has long been a north-star goal for the AI community [39]. The recent success of foundation agents, i.e., agents empowered by large multimodal models (LMMs) and advanced tools, in various environments, e.g., web browsing [13, 20, 22, 74-76], operating mobile applications [58, 69] and desktop software [63, 73], crafting and exploration in Minecraft [57, 60, 61], and some robotics scenarios $\left\lbrack  {6,7,{14},{24}}\right\rbrack$ ,have shown promise. However,current foundation agents still struggle to generalize across different scenarios, primarily due to the dramatic differences in the encapsulation of environments with human-designed observation and action space. Therefore, developing foundation agents applicable to various environments remains extremely challenging.
人工通用智能（Artificial General Intelligence, AGI）长期以来一直是人工智能领域的北极星目标[39]。近期，基础智能体，即由大型多模态模型（Large Multimodal Models, LMMs）和先进工具赋能的智能体，在多种环境中取得了成功，例如网页浏览[13, 20, 22, 74-76]、移动应用操作[58, 69]和桌面软件使用[63, 73]、《我的世界》（Minecraft）中的制作与探索[57, 60, 61]，以及部分机器人场景$\left\lbrack  {6,7,{14},{24}}\right\rbrack$，展现出良好前景。然而，目前的基础智能体仍难以跨场景泛化，主要原因在于环境封装中人类设计的观测和动作空间存在巨大差异。因此，开发适用于多种环境的基础智能体仍极具挑战性。


Computers, as the most important and universal interface that connects humans and the increasingly digital world, provide countless rich software, including applications and realistic video games for agents to interact with, while avoiding the challenges of robots in reality, such as hardware requirements, constraints of practicability, and possible catastrophic failures [48]. Mastering these virtual environments is a promising path for foundation agents to achieve generalizability. Therefore, we propose the General Computer Control (GCC) setting:
计算机作为连接人类与日益数字化世界的最重要且通用的接口，提供了无数丰富的软件，包括应用程序和逼真的电子游戏，供智能体交互，同时避免了现实中机器人面临的硬件需求、实用性限制及潜在灾难性故障等挑战[48]。掌握这些虚拟环境是基础智能体实现泛化能力的有希望路径。因此，我们提出通用计算机控制（General Computer Control, GCC）设定：


Building foundation agents that can master ANY computer task via the universal human-style interface by receiving input from screens and audio and outputting keyboard and mouse actions.
构建能够通过统一的人类风格接口，接收屏幕和音频输入并输出键盘和鼠标操作，掌握任何计算机任务的基础智能体。


There are many challenges to achieving GCC: i) good alignment across multi-modalities for better understanding and decision-making; ii) precise control of keyboard and mouse to interact with the computer, which has a large, hybrid action space, including not only which key to press and where the mouse to move, but also the duration of the press and the speed of the mouse movement; iii) long-horizontal reasoning due to the partial observability of complex GCC tasks, which also leads to the demand for long-term memory to maintain past useful experiences; and iv) efficient exploration in a structured manner to discover better strategies and solutions autonomously, i.e., self-improving, which can allow agents to generalize across the myriad tasks in the digital world.
实现GCC面临诸多挑战：i）多模态间良好对齐以提升理解和决策能力；ii）精确控制键盘和鼠标以与计算机交互，动作空间庞大且混合，不仅包括按键选择和鼠标移动位置，还涉及按压时长和鼠标移动速度；iii）由于复杂GCC任务的部分可观测性，需进行长时推理，同时要求具备长期记忆以维持过去有用经验；iv）以结构化方式高效探索以自主发现更优策略和解决方案，即自我提升，从而使智能体能够泛化至数字世界中的众多任务。


As shown in Figure 1, we introduce CRADLE, a novel modular LMM-powered framework that empowers foundation agents towards GCC. CRADLE consists of six key modules: 1) information gathering, to extract the relevant information from multimodal observations; 2) self-reflection, to rethink past experiences about whether the actions and tasks are successfully completed and reasons for possible failures; 3) task inference, to determine whether to continue current tasks or propose a new task given the current situation; 4) skill curation, for generating, updating, and retrieving useful skills for the current task; 5) action planning, to generate specific executable operations for keyboard and mouse control via skills; and 6) memory, for storage, summary, and retrieval of past experiences.
如图1所示，我们提出CRADLE，一种新颖的模块化大型多模态模型驱动框架，赋能基础智能体实现GCC。CRADLE包含六个关键模块：1）信息收集，从多模态观测中提取相关信息；2）自我反思，重新审视过去经验，评估动作和任务是否成功完成及失败原因；3）任务推断，根据当前情况决定继续当前任务或提出新任务；4）技能策划，生成、更新和检索当前任务所需的有用技能；5）动作规划，通过技能生成具体可执行的键盘和鼠标控制操作；6）记忆，用于存储、总结和检索过去经验。


As illustrated in Figure 2, tasks in GCC can be broadly divided into two categories: video game playing and software application manipulation. video games offer the most challenging tasks in GCC due to several key factors. First, the complexity of game environments requires sophisticated problem-solving and adaptive strategies. Second, long-term reasoning is essential to navigate and succeed in these intricate virtual worlds. Third, understanding and mastering new, complex mechanics within games demand rapid learning and cognitive flexibility. Finally, video games test a player's ability to react quickly and perform precise control and operations, which together create a unique and demanding computational challenge. In addition to the typical embodied control, classical UI manipulation, like menu use, is also common during gameplay, which is similar to the other software applications [48]. Therefore, games provide rich comprehensive and challenging testbeds to
如图2所示，GCC中的任务大致可分为两类：电子游戏玩法和软件应用操作。电子游戏因若干关键因素成为GCC中最具挑战性的任务。首先，游戏环境的复杂性要求复杂的问题解决和适应性策略。其次，长时推理对于在这些复杂虚拟世界中导航和取得成功至关重要。第三，理解并掌握游戏中新颖复杂的机制需要快速学习和认知灵活性。最后，电子游戏考验玩家快速反应和精确控制操作的能力，这些共同构成了独特且严苛的计算挑战。除典型的具身控制外，游戏过程中也常见经典的用户界面操作，如菜单使用，这与其他软件应用类似[48]。因此，游戏为


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_2.jpg?x=315&y=159&w=1174&h=514&r=0"/>



Figure 2: Taxonomy of GCC and the games and software investigated in this work.
图2：GCC的分类及本研究中考察的游戏和软件。


evaluate and improve agents' various abilities. In this work, we conduct extensive experiments to demonstrate the generalizability of CRADLE in such complex environments, while also mastering diverse everyday software applications in distinct domains. We managed to prove that commercial software is out-of-box testbeds under our framework. The four selected representative games are:
评估和提升智能体的多种能力。在本研究中，我们进行了大量实验，以展示CRADLE在复杂环境中的泛化能力，同时掌握不同领域的多样化日常软件应用。我们成功证明了商业软件在我们的框架下即开即用的测试平台。所选的四款代表性游戏为：


- Red Dead Redemption 2 (RDR2), an epic AAA 3D role-playing game (RPG) with rich storylines, realistic scenes, and an immersive open-ended world; where players can complete missions by following the instructions, freely explore the world, interact with non-player characters (NPCs) and engage in a variety of activities such as hunting and fishing, in a first- or third-person perspective. This game offers great challenges in 3D embodied navigation and interaction.
- 《荒野大镖客救赎2》（Red Dead Redemption 2，简称RDR2），一款史诗级AAA 3D角色扮演游戏（RPG），拥有丰富的剧情、逼真的场景和沉浸式的开放世界；玩家可通过完成任务指令，自由探索世界，与非玩家角色（NPC）互动，并以第一人称或第三人称视角参与狩猎、钓鱼等多种活动。该游戏在3D具身导航和交互方面具有极大挑战性。


- Stardew Valley, a 2D pixel-art farming simulation game where players can restore and expand a farm through carefully planned activities such as planting crops, mining, fishing, and crafting. Players can build relationships with the villagers, participate in seasonal events, and uncover the mysteries of the valley. The game encourages strategic planning and time management, as each day brings new opportunities and challenges. Players have to balance their energy and resources to maximize their farm's productivity and profitability.
- 《星露谷物语》（Stardew Valley），一款2D像素风格的农场模拟游戏，玩家通过精心规划的活动如种植作物、采矿、钓鱼和制作工艺品来恢复和扩展农场。玩家可以与村民建立关系，参与季节性活动，揭开山谷的秘密。游戏鼓励策略规划和时间管理，每一天都带来新的机遇和挑战。玩家需平衡精力和资源，以最大化农场的生产力和盈利能力。


- Dealer's Life 2, a simulation game where players manage a pawn shop. They must assess the value of items, haggle with customers, and make strategic decisions to grow their business. The game offers a dynamic market influenced by trends, customer preferences, and random events, requiring players to adapt and refine their negotiation tactics.
- 《当铺人生2》（Dealer's Life 2），一款模拟经营游戏，玩家管理一家当铺。需评估物品价值，与顾客讨价还价，并做出战略决策以发展业务。游戏市场动态受趋势、顾客偏好和随机事件影响，要求玩家不断调整和优化谈判策略。


- Cities: Skylines, a 3D, top-down view, city-building game where players take on the role of a city mayor, tasked with the development and management of a thriving metropolis, engaging in urban planning by controlling zoning, road placement, taxation, public services, and public transportation in an area. They must balance the needs and desires of the population with the city's budget,
- 《城市：天际线》（Cities: Skylines），一款3D俯视视角的城市建设游戏，玩家扮演市长，负责发展和管理繁荣的大都市，通过控制分区、道路布局、税收、公共服务和公共交通进行城市规划。玩家必须平衡居民需求与城市预算，


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_2.jpg?x=312&y=1513&w=1177&h=572&r=0"/>



Figure 3: Overview of all game tasks (left) in RDR2, Stardew Valley, Cities: Skylines, and Dealer's Life 2 and application tasks (right) in Chrome, Outlook, CapCut, Meitu, and Feishu.
图3：左侧为RDR2、星露谷物语、城市：天际线和当铺人生2中所有游戏任务的概览，右侧为Chrome、Outlook、CapCut、美图和飞书中的应用任务概览。


addressing issues such as traffic congestion, pollution, and citizen satisfaction. The game provides a sandbox environment where creativity and strategic thinking are key to building efficient and aesthetically pleasing urban landscapes. It also requires highly precise mouse control.
解决交通拥堵、污染和市民满意度等问题。游戏提供了一个沙盒环境，创造力和战略思维是构建高效且美观城市景观的关键，同时对鼠标操作的精确度要求极高。


The target set of diverse software applications for evaluation includes: Chrome, Outlook, CapCut, Meitu, and Feishu, as well as one comprehensive software benchmark, OSWorld [66].
评估所选的多样化软件应用包括：Chrome、Outlook、CapCut、美图和飞书，以及一个综合软件基准测试OSWorld [66]。


As shown in Figure 3, for each game and software application, representative tasks are designed to measure the various abilities of the agent comprehensively. Experimental results show that CRADLE exhibits remarkable generalization ability and impressive performance across the four previously unexplored commercial video games, the five target software applications, and the comprehensive contemporaneous OSWorld benchmark. To our best knowledge, CRADLE is the first to enable LMM-based agents to follow the main storyline and complete 40-minute-long real missions in a complex AAA game, RDR2. CRADLE also manages to create a city of a thousand people in Cities: Skylines, farm and harvest parsnips in Stardew Valley, trade and bargain with a maximal weekly total profit of 87% in Dealer's Life 2. Besides, CRADLE can not only operate daily software, like Chrome and Outlook, but also edit images and videos using Meitu and CapCut, and perform office tasks in Feishu. Able to interact with software in a unified manner, CRADLE greatly extends the reach of AI agents by making it easy to convert any software, especially complex games, into benchmarks to evaluate agents' various abilities and facilitate further data collection, paving the way for generalism. We hope the open-source CRADLE framework and its holistic evaluation protocol, i.e., tasks and metrics, on various environments, can accelerate the development of more powerful foundation agents, thereby advancing the path towards AGI.
如图3所示，对于每款游戏和软件应用，设计了代表性任务以全面衡量智能体的多种能力。实验结果表明，CRADLE在四款此前未被探索的商业视频游戏、五款目标软件应用及综合的当代OSWorld基准测试中展现出卓越的泛化能力和出色的性能。据我们所知，CRADLE是首个使基于大语言模型（LMM）的智能体能够遵循主线剧情并完成复杂AAA游戏RDR2中长达40分钟真实任务的系统。CRADLE还成功在城市：天际线中建造了千人城市，在星露谷物语中种植和收获欧防风，在当铺人生2中实现了最高87%的周总利润交易和讨价还价。此外，CRADLE不仅能操作日常软件如Chrome和Outlook，还能使用美图和CapCut编辑图像和视频，并在飞书中执行办公任务。通过统一方式与软件交互，CRADLE极大地扩展了AI智能体的应用范围，使任何软件，尤其是复杂游戏，易于转化为评估智能体多种能力的基准并促进进一步数据收集，为通用智能铺平道路。我们希望开源的CRADLE框架及其在多种环境下的整体评估协议（即任务和指标）能加速更强大基础智能体的发展，推动通向通用人工智能（AGI）的进程。


## 2 Related Work
## 2 相关工作


### 2.1 Environments and Benchmarks for Computer Control
### 2.1 计算机控制的环境与基准


Environments and Benchmarks on Software Applications. Simulated environments on computers have been popular benchmarks and testbeds for the research community. Earlier computer control environments primarily focused on web navigation tasks [13, 30, 34, 52, 70, 76]. Recent benchmarks start to include various common software [27, 66], aiming to develop a generalist agent in the digital world. However, none of them takes video games into consideration, missing a key component of computer control.
软件应用的环境与基准。计算机上的模拟环境一直是研究社区广泛使用的基准和测试平台。早期的计算机控制环境主要聚焦于网页导航任务[13, 30, 34, 52, 70, 76]。近期的基准开始涵盖各种常见软件[27, 66]，旨在开发数字世界中的通用智能体。然而，尚无研究将视频游戏纳入考虑，忽视了计算机控制的关键组成部分。


Environments and Benchmarks on Video Games. On the other side, many research environments are built on top of video games, significantly advancing the study of decision-making, especially, reinforcement learning (RL). Examples include but are not limited to Atari games [4], Super Mario Bros [28], Google Research Football [31], Minecraft [16, 21, 26], Dota II [5], StarCraft II [15, 50, 56], Quake III [25], Gran Turismo [64], Diplomacy [3] and Civilization [47]. Additionally, many custom-built environments, especially grid world and embodied scenarios, are created from scratch in a game-like manner to facilitate agent development, such as BabyAI [11], Melting Pot [32], Overcooked [9, 62, 65], VRKitchen [19], VirtualHome [45], iGibson [33, 51], ProcTHOR [12], Habitat [37, 46, 54], and Generative agents [44].
视频游戏的环境与基准。另一方面，许多研究环境构建于视频游戏之上，显著推动了决策制定，尤其是强化学习（Reinforcement Learning, RL）的研究。示例包括但不限于Atari游戏[4]、超级马里奥兄弟[28]、谷歌研究足球[31]、Minecraft[16, 21, 26]、Dota II[5]、星际争霸II[15, 50, 56]、Quake III[25]、Gran Turismo[64]、Diplomacy[3]和文明帝国[47]。此外，许多定制环境，尤其是网格世界和具身场景，以游戏化方式从零开始创建以促进智能体开发，如BabyAI[11]、Melting Pot[32]、Overcooked[9, 62, 65]、VRKitchen[19]、VirtualHome[45]、iGibson[33, 51]、ProcTHOR[12]、Habitat[37, 46, 54]和生成式智能体[44]。


Each of these environments highly relies on the accessibility of the open-source code or provided built-in APIs. Significant human efforts are required for implementation and encapsulation, enabling agent interaction. Therefore, despite the abundance of software and games available for human use, only a limited number are accessible to agents, especially for commercial closed-source games and software applications. Additionally, the lack of consensus on environment standards further complicates the interaction, as each environment has specific observation and action spaces, tailored to its unique requirements. This variation exacerbates the challenge of enabling agents to interact with diverse environments and collect data with a consistent level of fine-grained semantics to improve the agent's capabilities. Few agents can complete tasks across multiple environments so far.
这些环境高度依赖开源代码的可访问性或提供的内置API。实现和封装需要大量人力投入，以支持智能体的交互。因此，尽管人类可用的软件和游戏丰富，但可供智能体访问的数量有限，尤其是商业闭源游戏和软件应用。此外，环境标准缺乏共识进一步加剧了交互的复杂性，因为每个环境都有特定的观测空间和动作空间，针对其独特需求量身定制。这种差异加大了智能体与多样环境交互并以一致的细粒度语义收集数据以提升能力的难度。目前，能够跨多个环境完成任务的智能体寥寥无几。


Similar to OpenAI Universe [41] and SIMA [48], our goal is to explore a unified way that allows agents to interact for measuring and training agents' abilities across a wide range of games, websites, and other applications without heavy human efforts needed. This approach aims to prove that diverse software applications and games can serve as out-of-the-box environments for AI development.
类似于OpenAI Universe[41]和SIMA[48]，我们的目标是探索一种统一方式，使智能体能够在广泛的游戏、网站及其他应用中进行交互，以衡量和训练智能体能力，且无需大量人力投入。该方法旨在证明多样的软件应用和游戏可以作为开箱即用的AI开发环境。


### 2.2 LMM-based Agents for Computer Tasks
### 2.2 基于大语言模型（LMM）的计算机任务智能体


Agents for Software Manipulation. Agents for software applications are developed to complete tasks such as web navigation $\left\lbrack  {{13},{38},{76}}\right\rbrack$ and software application control $\left\lbrack  {{27},{49},{69}}\right\rbrack$ . While previous LLM-based web agents $\left\lbrack  {{13},{20},{75},{76}}\right\rbrack$ show some promising results in effectively interacting with content on webpages, they usually use raw HTML code and DOM tree as input and interact with the available element IDs, ignoring the rich visual patterns with key information, like icons, images, and spatial relations. Recently, multimodal web agents [18, 22, 40, 63, 67, 73, 74] and mobile app agents [58, 69] have been explored. Though using screenshots as input, they still rely on built-in APIs and advanced tools to get internal information, like available interactive element IDs, to execute corresponding actions, which greatly limits their applicability. Other train-based agents [10, 17, 23] also suffer from generalizing to unseen software and tasks. Moreover, all of these works primarily focus on static websites and software, which greatly reduces the need for timeliness and simplifies the setting by ignoring the dynamics between adjacent screenshots, i.e., animations, and incomplete action space without considering the duration of the key press and different mouse mode. It results in the failure of deployment to the tasks with rapid graphics changes, e.g., game playing.
软件操作智能体。针对软件应用的智能体被开发用于完成诸如网页导航$\left\lbrack  {{13},{38},{76}}\right\rbrack$和软件应用控制$\left\lbrack  {{27},{49},{69}}\right\rbrack$等任务。尽管先前基于大语言模型（LLM）的网页智能体$\left\lbrack  {{13},{20},{75},{76}}\right\rbrack$在有效交互网页内容方面展现出一定潜力，但它们通常使用原始HTML代码和DOM树作为输入，并通过可用元素ID进行交互，忽视了包含关键信息的丰富视觉模式，如图标、图像和空间关系。近期，多模态网页智能体[18, 22, 40, 63, 67, 73, 74]和移动应用智能体[58, 69]被探索。尽管使用截图作为输入，它们仍依赖内置API和高级工具获取内部信息，如可交互元素ID，以执行相应操作，这极大限制了其适用性。其他基于训练的智能体[10, 17, 23]也存在对未见软件和任务泛化能力不足的问题。此外，所有这些工作主要聚焦于静态网站和软件，极大降低了对时效性的需求，并通过忽略相邻截图间的动态变化（如动画）及未考虑按键持续时间和不同鼠标模式的不完整动作空间，简化了设置。这导致其无法部署于图形快速变化的任务，如游戏操作。


Agents for Game Playing. Several attempts try to develop foundation agents for complex video games, such as Minecraft [57, 60, 61], Starcraft II [36] and Civilization-like game [47] with textual observations obtained from internal APIs and pre-defined semantic actions. Although JARVIS-1 [60] claims to interact with the environment in a human-like manner with the screenshots as input and mouse and keyboard for control, its action space is predefined as a hybrid space composed of keyboard, mouse, and API. The game-specific observation and action spaces prohibit the generalization of them to other novel games. Pre-trained with videos with action labels, VPT [2] manages to output mouse and keyboard control with raw screenshots as input without any additional information. However, collecting videos with action labels is time-consuming and costly, which is difficult to generalize to multiple environments. Another concurrent work, SIMA [48] trained embodied agents to complete 10-second-long tasks over ten 3D video games. Though their results are promising to scale up, they focus on behavior cloning with gameplay data from human experts, resulting in a high expense.
游戏操作智能体。已有若干尝试开发复杂视频游戏的基础智能体，如Minecraft[57, 60, 61]、星际争霸II[36]和类似文明帝国的游戏[47]，其文本观测来自内部API，动作为预定义语义动作。尽管JARVIS-1[60]声称以人类方式交互环境，输入为截图，控制通过鼠标和键盘，其动作空间预定义为键盘、鼠标和API组成的混合空间。游戏特定的观测和动作空间限制了其向其他新游戏的泛化能力。通过带动作标签的视频预训练，VPT[2]能够以原始截图为输入输出鼠标和键盘控制，无需额外信息。然而，收集带动作标签的视频耗时且成本高，难以泛化至多环境。另一同期工作SIMA[48]训练具身智能体完成十个3D视频游戏中时长10秒的任务。尽管其结果有望扩展，但其侧重于利用人类专家的游戏数据进行行为克隆，成本较高。


In both targeting complex video games and diverse software applications, CRADLE attempts to explore a new way to efficiently interact with different complex environments in a unified manner and facilitate further data collection. In a nutshell, to our best knowledge, there are currently no agents under the GCC setting, reported to show superior performance and generalization in complex video games and across computer tasks. In this work, we make a preliminary attempt to explore and benchmark diverse environments in this setting, applying our framework to diverse challenging environments under GCC and proposing an approach where any software can be used to benchmark agentic capabilities in it.
在针对复杂视频游戏和多样化软件应用的目标中，CRADLE尝试探索一种以统一方式高效交互不同复杂环境并促进进一步数据收集的新方法。简而言之，据我们所知，目前尚无在GCC（通用计算控制）设置下，报告显示在复杂视频游戏和跨计算机任务中表现优异且具备良好泛化能力的智能体。在本工作中，我们初步尝试探索并基准测试该设置下的多样环境，将我们的框架应用于GCC下的多种挑战性环境，并提出一种方法，使任何软件都可用于基准测试智能体能力。


## 3 The CRADLE Framework
## 3 CRADLE框架


To pursue GCC, we propose CRADLE, illustrated in Figure 4, a modular and flexible LMM-powered framework that can properly handle the challenges GCC presents. The framework should have the ability to understand and interpret computer screens and dynamic changes between consecutive frames from arbitrary software and be able to generate reasonable computer control actions to be executed precisely. This suggests that a multimodal model with powerful vision and reasoning capabilities, in addition to rich knowledge of computer UI and control, is a requirement. In this work, we leverage GPT-4o [43] as the framework's backbone model.
为实现GCC，我们提出了CRADLE，如图4所示，这是一个模块化且灵活的基于大型多模态模型（LMM）的框架，能够妥善应对GCC带来的挑战。该框架应具备理解和解析任意软件的计算机屏幕及连续帧间动态变化的能力，并能生成合理的计算机控制操作以精确执行。这意味着需要一个具备强大视觉和推理能力、以及丰富计算机用户界面（UI）和控制知识的多模态模型。在本工作中，我们采用GPT-4o [43]作为框架的主干模型。


### 3.1 Environment IO
### 3.1 环境输入输出


Observation and Action Space. CRADLE only takes a video clip, recording the execution of the last action, as input and outputs keyboard and mouse operations to interact with environments. The observation space is made up of complete screen videos with different lengths. For the action space, it includes all possible keyboard and mouse operations, including key_press1, key_hold, key_release, mouse_move, and wheel_scroll. These operations can be combined in various ways to form combos and shortcuts, execute rapid key sequences, or coordinate timings. We choose to use Python code to simulate these operations and encapsulate them into an io_env class. Note that seldom previous work takes key_hold, key_release and mouse moving speed into consideration, which are critical in games (e.g., RDR2, for opening weapon wheel and changing view). The
观察与动作空间。CRADLE仅以记录上一次操作执行过程的视频片段作为输入，输出键盘和鼠标操作以与环境交互。观察空间由不同长度的完整屏幕视频组成。动作空间包括所有可能的键盘和鼠标操作，如按键按下（key_press）、按键保持（key_hold）、按键释放（key_release）、鼠标移动（mouse_move）和滚轮滚动（wheel_scroll）。这些操作可组合形成连招和快捷键，执行快速按键序列或协调时序。我们选择使用Python代码模拟这些操作，并封装为io_env类。值得注意的是，之前很少有工作考虑按键保持、按键释放和鼠标移动速度，这些在游戏中（如《荒野大镖客2》（RDR2）用于打开武器轮盘和视角切换）至关重要。


---



${}^{1}$ Keys include both keyboard keys and mouse buttons.
${}^{1}$ 键包括键盘按键和鼠标按钮。


---



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_5.jpg?x=305&y=157&w=1188&h=597&r=0"/>



Figure 4: An overview of the CRADLE framework. CRADLE takes video from the computer screen as input and outputs computer keyboard and mouse control determined through inner reasoning.
图4：CRADLE框架概览。CRADLE以计算机屏幕视频为输入，通过内部推理决定计算机键盘和鼠标控制输出。


asynchronization brought by these temporal-extended actions introduces additional challenges for the control.
这些时间扩展动作带来的异步性为控制带来了额外挑战。


Information Gathering. Provided with a video clip as input, it is critical for CRADLE to capture and extract all useful visual and textual information to understand the recent situation and perform further reasoning. Visual information includes layout, imagery, animations, and UI elements which pose high spatial perception and visual understanding requirements for LMM models. Moreover, we depend on their OCR capabilities to extract textual information in images, which usually includes content (headings and paragraphs), navigation labels (menus and links), notifications, and instructions to convey messages and guide users. Moreover, for each environment, we enhance LMMs' abilities with different tools such as template matching [8], Grounding DINO [35], and SAM [29] to provide additional grounding for object detection and localization.
信息采集。以视频片段为输入，CRADLE必须捕捉并提取所有有用的视觉和文本信息，以理解当前情境并进行进一步推理。视觉信息包括布局、图像、动画和UI元素，这对LMM模型提出了较高的空间感知和视觉理解要求。此外，我们依赖其光学字符识别（OCR）能力提取图像中的文本信息，通常包括内容（标题和段落）、导航标签（菜单和链接）、通知和指令，用以传递信息和引导用户。针对每个环境，我们还通过模板匹配[8]、Grounding DINO[35]和SAM[29]等工具增强LMM的能力，为目标检测和定位提供额外支撑。


Skill and Action Generation As shown in Figure 5, to bridge the gap between semantic actions generated by LMMs and OS-level executable actions, CRADLE uses LMMs to generate code functions as semantic-level skills, which encapsulate lower-level keyboard and mouse control. Similarly to how humans improve while playing, these skills can be developed from scratch according to in-game tutorials and guidance, game manuals and settings, or through self-exploration as the game progresses. These skills can also be pre-defined or composited to solve more complex tasks. An action usually consists of a single or multiple skills instantiated with any necessary parametric aspects, such as duration, position, and speed.
技能与动作生成。如图5所示，为弥合LMM生成的语义动作与操作系统级可执行动作之间的差距，CRADLE使用LMM生成代码函数作为语义层面的技能，封装底层键盘和鼠标控制。类似人类在游戏中通过教程、游戏手册和设置或自我探索逐步提升技能，这些技能可从零开始开发，也可预定义或组合以解决更复杂任务。一个动作通常由一个或多个技能组成，并带有必要的参数，如持续时间、位置和速度。


Action Execution. After CRADLE generates actions and decides to execute them in the environment, an Executor is then triggered to map these semantic actions to the OS-level keyboard and mouse commands to interact with the environment.
动作执行。在CRADLE生成动作并决定执行后，执行器（Executor）被触发，将这些语义动作映射为操作系统级的键盘和鼠标命令，以与环境交互。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_5.jpg?x=312&y=1627&w=1176&h=468&r=0"/>



Figure 5: Examples for skill generation according to in-game guidance in RDR2 (left), in-game manual in Stardew Valley (middle), self-exploration in Cities: Skylines (right). Code and comments are shown in brevity.
图5：根据《荒野大镖客2》（左）游戏内指导、《星露谷物语》（中）游戏内手册和《城市：天际线》（右）自我探索生成技能的示例。代码和注释简略展示。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_6.jpg?x=308&y=147&w=1178&h=975&r=0"/>



Figure 6: Illustrative examples of CRADLE's complete workflow in RDR2 (left), Stardew Valley (middle) and Cities: Skylines (right). Prompts are shown partially for brevity.
图6：CRADLE在《荒野大镖客2》（左）、《星露谷物语》（中）和《城市：天际线》（右）中的完整工作流程示例。提示部分简略展示。


### 3.2 Memory
### 3.2 记忆


CRADLE stores and maintains all the useful information from the environment or outputted by each module through a memory mechanism, consisting of episodic memory and procedural memory.
CRADLE通过记忆机制存储和维护来自环境或各模块输出的所有有用信息，该机制包括情景记忆和程序记忆。


Episodic Memory. Episodic memory is used to maintain current and past experiences, including key screenshots from each video observation, and everything useful outputted by LMMs and advanced tools, e.g., textual and visual information, actions, tasks, and reasoning from each module. To facilitate retrieval and storage, periodical summarization is conducted to abstract recently added multimodal information into long-term summaries. The incorporation of episodic memory enables CRADLE to effectively retain crucial information over extended periods.
情景记忆。情景记忆用于维护当前和过去的经历，包括每个视频观察的关键截图，以及由大规模多模态模型（LMMs）和高级工具输出的所有有用信息，例如文本和视觉信息、动作、任务以及各模块的推理。为了便于检索和存储，会定期进行总结，将最近添加的多模态信息抽象为长期摘要。情景记忆的引入使CRADLE能够有效地在较长时间内保留关键信息。


Procedural Memory. This memory is specific to storing and retrieving skills in code form, which can be learned from scratch, as shown in Figure 5, or pre-defined in procedural memory. Skills can be added, updated, or composed in the procedural memory. The most relevant skills for a given task and situation will be retrieved to support action planning, therefore, as CRADLE continuously acquires new skills during interactions, it is critical that this memory can effectively calculate skill relevance.
程序性记忆。此类记忆专门用于以代码形式存储和检索技能，这些技能可以从零开始学习，如图5所示，或预先定义在程序性记忆中。技能可以在程序性记忆中被添加、更新或组合。为了支持行动规划，将检索与特定任务和情境最相关的技能，因此，随着CRADLE在交互过程中不断获取新技能，确保该记忆能够有效计算技能相关性至关重要。


### 3.3 Reasoning
### 3.3 推理


Based on the extracted information from the video observations and relevant information from its memory, CRADLE needs to do high-level reasoning and then make the next decision. This process is analogous to "reflect on the past, summarize the present, and plan for the future", which is broken down into the following modules.
基于从视频观察中提取的信息及其记忆中的相关信息，CRADLE需要进行高级推理，然后做出下一步决策。这个过程类似于“回顾过去，总结现在，规划未来”，并分解为以下几个模块。


Self-Reflection. The reflection module initially evaluates whether the last executed action was successfully carried out and whether the task was completed. Sequential key screenshots from the last video observation, along with the previous context for action planning and task inference are fed to the LMM for reasoning. Additionally, we also request the LMM to provide an analysis of any failure. This valuable information enables CRADLE to try and remedy inappropriate decisions or less-than-ideal actions. Furthermore, reflection can also be leveraged to inform re-planning of the
自我反思。反思模块首先评估上一次执行的动作是否成功完成以及任务是否达成。来自最后一次视频观察的关键连续截图，以及用于动作规划和任务推断的先前上下文，被输入到大规模语言模型（LMM）进行推理。此外，我们还要求LMM对任何失败进行分析。这些宝贵的信息使CRADLE能够尝试纠正不当决策或不理想的动作。此外，反思还可以用于指导重新规划


task and bring the agent closer to target task completion, better understand the factors that led to previous successes, or suggest how to update or improve specific skills.
任务并使代理更接近目标任务的完成，更好地理解导致以往成功的因素，或建议如何更新或改进特定技能。


Task Inference. After reflecting on the outcome of the last executed action, CRADLE needs to analyze the current situation to infer the most suitable task for the current moment. We let LMMs estimate the highest priority task to perform and when to stop an ongoing task and start a new one.
任务推断。在反思上一次执行动作的结果后，CRADLE需要分析当前情况，以推断当前时刻最合适的任务。我们让大规模语言模型（LMMs）评估应执行的最高优先级任务，以及何时停止正在进行的任务并开始新任务。


Skill Curation. As the task is determined, CRADLE needs to prepare the tactics to accomplish it, by retrieving useful skills from the procedural memory, updating skills, or generating new ones. The new skill will be stored in the procedural memory for future utilization. Action Planning. CRADLE needs to select the appropriate skills from the curated skill set and instantiate these skills into a sequence of executable actions by specifying any necessary parametric aspects (e.g., duration, position, and target) according to the current task and history information. The generated action is then fed to the Executor for interaction with the environment.
技能策划。任务确定后，CRADLE需要准备完成任务的策略，通过从程序记忆中检索有用技能、更新技能或生成新技能。新技能将被存储在程序记忆中以备将来使用。行动规划。CRADLE需要从策划的技能集中选择合适的技能，并根据当前任务和历史信息，通过指定必要的参数（如持续时间、位置和目标）将这些技能实例化为一系列可执行的动作。生成的动作随后被传递给执行器以与环境交互。


Through these six modules, the input video is processed in stages: first into reasoning, then into semantic skills and actions, and finally into low-level keyboard and mouse operations. This comprehensive conversion covers all essential interactive data needed for both high-level planning and low-level control, enabling a unified approach to data collection for further self-improvement.
通过这六个模块，输入视频被分阶段处理：首先进行推理，然后转化为语义技能和动作，最后转化为低级的键盘和鼠标操作。这一全面的转换涵盖了高层规划和低层控制所需的所有关键交互数据，实现了统一的数据采集方法，便于后续的自我提升。


## 4 Empirical Studies
## 4 实证研究


In this section, we report empirical results of applying CRADLE in various challenging environments representative of GCC setting to demonstrate CRADLE's capabilities in decision-making, UI understanding,and manipulation ${}^{2}$ . To facilitate reproducibility,we also provide setup and load scripts (e.g., game saves and checkpoints) in the code repository to reset state for task execution where appropriate.
本节中，我们报告了在代表GCC环境的各种挑战性场景中应用CRADLE的实证结果，以展示CRADLE在决策、用户界面理解和操作方面的能力${}^{2}$。为便于复现，我们还在代码库中提供了设置和加载脚本（例如游戏存档和检查点），以在适当情况下重置任务执行状态。


### 4.1 Experimental Settings
### 4.1 实验设置


Here we provide a brief introduction to our experimental settings. More implementation details, environment and task descriptions, and prompts used can be found in Appendices A to H.
这里我们简要介绍我们的实验设置。更多的实现细节、环境和任务描述以及使用的提示可见附录A至H。


Implementation Details. To lower the frequency of interaction with the backbone model, video observation is recorded at 2 fps, which proves sufficient for information gathering without missing any important information in most situations. If not specifically mentioned, all experiments are conducted in five runs under a maximum step limit, using OpenAI's latest model, gpt-4o-2024-05-13 [43]. Same as Voyager [57], we use OpenAI's text-embedding-ada-002 model [42] to generate embeddings for each skill, stored in the procedural memory and retrieved according to the similarities. It is important to note that, due to the dynamism of the RDR2 and Stardew Valley and the LMM inference and communication latency, we must pause those game environments while waiting for backbone model responses. Other environments execute continuously. All software and games can be run on regular Windows 10 machines, except for RDR2, which is tested on two machines with an NVIDIA RTX-3060 GPU and RTX-4090 GPU separately. We observe a slight performance gain due to the stability of RTX-4090 GPU during the gameplay.
实现细节。为了降低与主干模型的交互频率，视频观察以2帧每秒的速度记录，这在大多数情况下足以收集信息且不会遗漏重要内容。除非特别说明，所有实验均在最大步数限制下进行五次运行，使用OpenAI最新模型gpt-4o-2024-05-13 [43]。与Voyager [57]相同，我们使用OpenAI的text-embedding-ada-002模型 [42]为每项技能生成嵌入，存储在程序记忆中并根据相似度进行检索。需要注意的是，由于《荒野大镖客2》（RDR2）和《星露谷物语》（Stardew Valley）的动态性以及大语言模型（LMM）推理和通信延迟，我们必须在等待主干模型响应时暂停这些游戏环境。其他环境则持续运行。除RDR2外，所有软件和游戏均可在普通Windows 10机器上运行，RDR2分别在配备NVIDIA RTX-3060 GPU和RTX-4090 GPU的两台机器上测试。我们观察到RTX-4090 GPU在游戏过程中因其稳定性带来轻微的性能提升。


Evaluation Methods. Unlike conventional research benchmarks, which usually provide grounding signals for evaluation, it is difficult to have a unified and general method to determine whether a task is completed automatically in diverse software, especially in video games. Similarly to SIMA [48], we apply human evaluation to all tasks across application software and games. Moreover, to provide more quantitative results and a comparison baseline, we provide results for the OSWorld [66] benchmark, a contemporaneous benchmark that provides evaluation scripts for at least one solution per task.
评估方法。与通常提供评估依据信号的传统研究基准不同，在多样化的软件中，尤其是视频游戏中，很难有统一且通用的方法自动判断任务是否完成。类似于SIMA [48]，我们对所有应用软件和游戏中的任务均采用人工评估。此外，为了提供更量化的结果和比较基线，我们提供了OSWorld [66]基准的结果，该基准是一个同期基准，为每个任务至少提供一个解决方案的评估脚本。


Task Introduction. For RDR2, we mainly focus on evaluating agents on the first two missions of the main storyline in Chapter I, which can be divided into 13 tasks according to the in-game checkpoints, which include but are not limited to NPC following, house exploration, and combat. A novice player typically takes about 40 minutes to complete these missions. Few studies tackle such long-duration tasks and rich semantic environments. It is an ideal scenario to emulate a new human player learning to play the game from scratch according to the rich in-game tutorials and hints. Despite the missions in the main storyline, we also designed an open-ended task, Buy Supply, in the open-ended world, Chapter II, where the agent is instructed to go to the General Store in Valentine town from the camp
任务介绍。对于《荒野大镖客救赎2》（Red Dead Redemption 2，简称RDR2），我们主要关注评估代理在第一章主线的前两个任务，这些任务根据游戏内检查点可分为13个子任务，包括但不限于NPC跟随、房屋探索和战斗。新手玩家通常需要约40分钟完成这些任务。很少有研究涉及如此长时间的任务和丰富的语义环境。这是一个理想场景，用以模拟新玩家根据丰富的游戏内教程和提示从零开始学习游戏。除了主线任务外，我们还设计了一个开放式任务“购买补给”，位于第二章的开放世界中，指示代理从营地前往瓦伦丁镇的杂货店购买补给。


---



${}^{2}$ Result tables present two main indicator formats: $\mu  \pm  \sigma$ ,representing mean and standard deviation of five runs; and $\left( {s/t}\right)$ representing $s$ successful runs out of a total of $t$ runs.
${}^{2}$ 结果表展示两种主要指标格式：$\mu  \pm  \sigma$，表示五次运行的均值和标准差；以及$\left( {s/t}\right)$，表示在总共$t$次运行中成功的$s$次。


---



for supplementary supply. For this open-ended task, seldom in-game guidance will appear. The agent needs to analyze and propose feasible solutions to complete the mission. For Stardew Valley, we propose three essential tasks at the stage of the game, i.e., Farm Clearup: Clear the obstacles on the farm, such as weeds, stones, and trees, as much as possible to prepare for farming; 2) Cultivation: Plant the parsnip seed, water every day and harvest at least one parsnip; 3) Shopping: Go to the general store in the town, which is out of the scope of the current map, to buy more seeds and return home. For Dealer's Life, the agent is tasked with managing a shop for a week, appraising item values and haggling with the customers to secure deals. For Cities: Skylines, the task is to build a reasonable city ending in as much population as possible, with the initial starting funds of C70,000, and basic road, water and power facilities. Moreover, we define five representative domain-specific tasks for each of the five Software Applications in our diverse target set.
用于补给的开放式任务中，几乎没有游戏内指导出现。代理需要分析并提出可行方案以完成任务。对于《星露谷物语》（Stardew Valley），我们提出了游戏阶段的三个核心任务：1）农场清理：尽可能清除农场上的障碍物，如杂草、石头和树木，为耕种做准备；2）种植：种植欧防风种子，每天浇水并至少收获一颗欧防风；3）购物：前往镇上的杂货店（当前地图范围之外）购买更多种子并返回家中。对于《商人生活》（Dealer's Life），代理需管理一家商店一周，评估物品价值并与顾客讨价还价以达成交易。对于《城市：天际线》（Cities: Skylines），任务是以7万货币的初始资金和基本的道路、水电设施，建设一个合理的城市，尽可能达到最大人口。此外，我们为多样目标集中的五款软件应用各定义了五个具有代表性的领域特定任务。


### 4.2 Performance across Tasks and Environments
### 4.2 任务与环境间的性能表现


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_8.jpg?x=312&y=634&w=1176&h=457&r=0"/>



Figure 7: Trajectory and success rates of 13 main storyline tasks and 1 open-world task in RDR2. Each task is run with a maximum of 500 steps. Agents can retry the checkpoint if the task fails or the character dies.
图7：《荒野大镖客救赎2》中13个主线任务和1个开放世界任务的轨迹及成功率。每个任务最多运行500步。任务失败或角色死亡时，代理可重试检查点。


Red Dead Red Redemption 2. As shown in Figure 7, CRADLE can achieve a high success rate in simple tasks like following an NPC or going to specific locations on the ground (e.g., Follow Dutch and Go to Barn). Another following task, Follow Javier, and the searching task, Search John, are dangerous for the rugged and winding path up to the snow mountain with cliffs. In addition, GPT-40 struggles with real-time combat tasks and searching tasks due to its inability to accurately locate enemies or objects and precisely time decisions. Even equipped with additional detection tools, like Grounding DINO [35], the success rate drops significantly to 20% in the task of Protect Dutch, which requires nighttime combat. Additionally, indoor tasks like Search for Supplies and Search Barn are also challenging due to GPT4-o's poor spatial perception, which finds it difficult to locate target objects and ends up circling aimlessly. The open-ended task, Buy Supply, shows that even without in-game guidance, CRADLE still manages to complete the task with its superior reasoning ability.
《荒野大镖客救赎2》。如图7所示，CRADLE在简单任务中表现出较高成功率，如跟随NPC或前往地面特定地点（例如，跟随Dutch和前往谷仓）。另一个跟随任务“跟随Javier”和搜索任务“搜索John”因通往雪山的崎岖蜿蜒路径及悬崖而较为危险。此外，GPT-4o在实时战斗和搜索任务中表现不佳，因其无法准确定位敌人或物体，也难以精准把握决策时机。即使配备了额外的检测工具，如Grounding DINO [35]，在需要夜间战斗的“保护Dutch”任务中成功率仍显著下降至20%。此外，室内任务如“搜索补给”和“搜索谷仓”也具有挑战性，因GPT-4o空间感知能力较差，难以定位目标物体，最终无目的地绕圈。开放式任务“购买补给”显示，即使没有游戏内指导，CRADLE依然凭借其卓越的推理能力完成了任务。


Stardew Valley. As shown in Table 1, we surprisingly find that GPT-4o struggles with accurately recognizing and locating objects near the player in this 2D game. This leads to difficulties for the agent to interact with objects or people, as it requires the player to stand precisely in front of them in the grid (e.g., when entering doors, using a pickaxe to break stones). It explains the inefficiency in the farming task though the agent manages to clear
《星露谷物语》。如表1所示，我们惊讶地发现GPT-4o在这款2D游戏中难以准确识别和定位玩家附近的物体。这导致代理与物体或人物交互时遇到困难，因为玩家需要精确站在格子前（例如，进入门、使用镐破石）。这解释了尽管代理能够清理农场任务，但效率不高的原因。


Table 1: CRADLE in Stardew Valley.
表1：CRADLE在《星露谷物语》中的表现。


<table><tr><td>Task</td><td>Results</td></tr><tr><td>Farm Clearup (Grids Num.) Cultivation Shopping</td><td>14.8±5.0 <br> 4/5 <br> $1/5$</td></tr></table>
<table><tbody><tr><td>任务</td><td>结果</td></tr><tr><td>农场清理（网格数量）耕作购物</td><td>14.8±5.0 <br/> 4/5 <br/> $1/5$</td></tr></tbody></table>


up most of the obstacles in front of the house within 100 steps (as shown in Figure 8a and 8b) and poor performance in the shopping task. On the other hand, relying on episodic summarization and task inference, CRADLE manages to obtain the parsnip by watering the seed for four days and harvesting.
在房屋前100步内的大部分障碍物（如图8a和8b所示）以及购物任务中的表现不佳。另一方面，依靠情节总结和任务推断，CRADLE成功通过浇水四天并收获，获得了欧防风（parsnip）。


Dealer's Life 2. Table 2 shows that CRADLE demonstrates robust performance and efficient profit-making on the Weekly Shop Management task, successfully finalizing 93.6% of potential transactions, with an average of 2 negotiation rounds per customer, and generally aiming for a profit rate of over 50% at the initial offer. It consistently generates profit across all runs, maintaining a total profit rate of +39.6%, peaking at +87.4% in a single run.
Dealer's Life 2。表2显示，CRADLE在每周商店管理任务中表现稳健且盈利高效，成功完成了93.6%的潜在交易，平均每位顾客进行2轮谈判，且通常在初始报价时目标利润率超过50%。它在所有运行中持续产生利润，总体利润率达到+39.6%，单次运行最高达到+87.4%。


Table 2: CRADLE in Dealer's Life 2.
表2：CRADLE在Dealer's Life 2中的表现。


<table><tr><td>Metrics</td><td>Results</td></tr><tr><td>Avg. Haggling Count</td><td>1.95±0.43</td></tr><tr><td>Turnover Rate (%)</td><td>93.6±6.9</td></tr><tr><td>Item Profit Rate (%)</td><td>37.8 ± 19.1</td></tr><tr><td>Total Profit Rate (%)</td><td>39.6 ± 27.3</td></tr></table>
<table><tbody><tr><td>指标</td><td>结果</td></tr><tr><td>平均讨价还价次数</td><td>1.95±0.43</td></tr><tr><td>周转率（%）</td><td>93.6±6.9</td></tr><tr><td>单品利润率（%）</td><td>37.8 ± 19.1</td></tr><tr><td>总利润率（%）</td><td>39.6 ± 27.3</td></tr></tbody></table>


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_9.jpg?x=309&y=201&w=1180&h=547&r=0"/>



Figure 8: Three tasks in Stardew Valley. Each task is run with a maximum Figure 9: The task in Dealer's Life 2 of 100 steps. of running the shop for a week.
图8：星露谷物语中的三个任务。每个任务最多运行100步。图9：Dealer's Life 2中经营商店一周的任务。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_9.jpg?x=315&y=844&w=1166&h=409&r=0"/>



Figure 10: CRADLE's craft work in Cities: Skylines, shown in water view (left) and zoning view (right) with the same city. After fixing the error shown on the left, the city can finally be built into what is shown on the right. Each task is run with a maximum of 1000 steps or the budget is used up.
图10：CRADLE在《城市：天际线》中的建造工作，左图为水视图，右图为分区视图，均为同一城市。修正左图所示错误后，城市最终可建成右图所示状态。每个任务最多运行1000步或预算用尽。


Cities: Skylines. Table 3 shows that while CRADLE manages to build the roads in a closed loop to ensure smooth traffic flow, place multiple wind turbines to provide sufficient electricity supply and cover more than 90% of available area with residential, commercial and industrial zones, it fails to provide sufficient water supply reliably. As shown in Figure 10a, the most common failure case is that water pipes are not connected with each other, resulting in localized water shortages in the city, and preventing new residents from moving in. As shown in Figure 10b,
《城市：天际线》。表3显示，CRADLE能够构建闭环道路以确保交通流畅，布置多个风力涡轮机以提供充足电力，并用住宅、商业和工业区覆盖超过90%的可用区域，但未能可靠地提供足够的供水。如图10a所示，最常见的失败情况是水管未相互连接，导致城市局部缺水，阻碍新居民入住。如图10b所示，


Table 3: CRADLE in Cities: Skylines.
表3：《城市：天际线》中的CRADLE表现。


<table><tr><td>Task & Metrics</td><td>Results</td></tr><tr><td>Roads in Closed Loop</td><td>4/5</td></tr><tr><td>Sufficient Water Supply</td><td>1/5</td></tr><tr><td>Sufficient Electricity Supply</td><td>5/5</td></tr><tr><td>Zones Area ≥ 90%</td><td>4/5</td></tr><tr><td>Maximal Population</td><td>450±224</td></tr><tr><td>Maximal Population-w-HA</td><td>850±142</td></tr></table>
<table><tbody><tr><td>任务与指标</td><td>结果</td></tr><tr><td>闭环道路</td><td>4/5</td></tr><tr><td>充足的供水</td><td>1/5</td></tr><tr><td>充足的供电</td><td>5/5</td></tr><tr><td>区域面积 ≥ 90%</td><td>4/5</td></tr><tr><td>最大人口</td><td>450±224</td></tr><tr><td>最大人口-含HA</td><td>850±142</td></tr></tbody></table>


with human assistance (-w-HA) to correct the mistakes within three unit operations (building or removing a road/facility/a place of zones is counted as one unit operation), the city built by CRADLE can eventually reach a population of more than one thousand. Table 3 also indicates that CRADLE nearly completes the city design, albeit with a few mistakes or omissions. With human assistance to fix these small issues, the final population can be doubled.
在人工协助（-w-HA）下纠正三个单元操作中的错误（建造或拆除一条道路/设施/区域地点计为一个单元操作），CRADLE构建的城市最终可以达到超过一千的人口规模。表3还显示，CRADLE几乎完成了城市设计，尽管存在一些错误或遗漏。通过人工协助修正这些小问题，最终人口数量可以翻倍。


Software Applications. Figure 11 shows CRADLE's success rates across tasks for all five applications. Multiple tasks remain challenging. Even with a well-known GUI, like Chrome and Outlook, GPT-4o still cannot recognize specific UI items to interact with and also struggles with visual context. For example, forgetting to press the Save button in an open dialog, or not distinguishing between a nearby enabled button vs. a distant and disabled one (e.g., when posting on Twitter). The phenomenon is more severe in the UI with non-standard layouts, like CapCut, Meitu, and Feishu. Lacking prior knowledge by GPT-40 leads to the failure of task inference and selecting the correct skills.
软件应用。图11展示了CRADLE在五个应用中各任务的成功率。多个任务仍然具有挑战性。即使是像Chrome和Outlook这样知名的图形用户界面（GUI），GPT-4o仍无法识别特定的UI元素进行交互，并且在视觉上下文理解上也存在困难。例如，忘记在打开的对话框中点击保存按钮，或无法区分附近的可用按钮与远处的禁用按钮（例如在Twitter发帖时）。这种现象在布局非标准的界面中更为严重，如CapCut、美图和飞书。GPT-40缺乏先验知识导致任务推断失败和技能选择错误。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_10.jpg?x=316&y=166&w=1170&h=292&r=0"/>



Figure 11: Success rates for tasks in software applications. Each task is run with a maximum of 30 steps.
图11：软件应用中各任务的成功率。每个任务最多执行30步。


OSWorld. Table 4 shows that CRADLE achieves the overall highest success rate in OSWorld, compared to the baselines without relying on any internal APIs to provide extra grounding labels, e.g., Set-of-Mark (SoM) [68]. The information gathering module improves grounding for more precise ac-
OSWorld。表4显示，CRADLE在OSWorld中实现了总体最高的成功率，相较于不依赖任何内部API提供额外定位标签的基线方法，如Set-of-Mark（SoM）[68]。信息收集模块提升了定位的准确性，进而提高了精确的...


Table 4: Success rates (%) of different methods on OSWorld tasks.
表4：不同方法在OSWorld任务中的成功率（%）。


<table><tr><td>Method</td><td>Office (117)</td><td>OS (24)</td><td>Daily (78)</td><td>Workfl-ow(101)</td><td>Professi- <br> onal (49)</td><td>All (369)</td></tr><tr><td>GPT-40</td><td>3.58</td><td>8.33</td><td>6.07</td><td>5.58</td><td>4.08</td><td>5.03</td></tr><tr><td>GPT-4o+SoM</td><td>3.58</td><td>20.83</td><td>3.99</td><td>3.60</td><td>2.04</td><td>4.59</td></tr><tr><td>Cradle</td><td>3.58</td><td>16.67</td><td>6.55</td><td>5.48</td><td>20.41</td><td>7.81</td></tr></table>
<table><tbody><tr><td>方法</td><td>办公 (117)</td><td>操作系统 (OS) (24)</td><td>日常 (78)</td><td>工作流程 (101)</td><td>专业的 (49)</td><td>全部 (369)</td></tr><tr><td>GPT-40</td><td>3.58</td><td>8.33</td><td>6.07</td><td>5.58</td><td>4.08</td><td>5.03</td></tr><tr><td>GPT-40+SoM</td><td>3.58</td><td>20.83</td><td>3.99</td><td>3.60</td><td>2.04</td><td>4.59</td></tr><tr><td>摇篮</td><td>3.58</td><td>16.67</td><td>6.55</td><td>5.48</td><td>20.41</td><td>7.81</td></tr></tbody></table>


tion execution, increasing the performance. The self-reflection module greatly helps it to correctly predict infeasible tasks and subsequently fix mistakes, as exemplified in the professional domain results, where it achieves a 20.41% success rate, significantly surpassing the baselines.
执行任务，提高性能。自我反思模块极大地帮助其正确预测不可行任务并随后修正错误，如专业领域结果所示，其成功率达到20.41%，显著超越基线方法。


### 4.3 Ablation Study & Baselines Comparison
### 4.3 消融研究与基线比较


Since no existing methods are fully applicable to the GCC setting, we select several representative methods with necessary adaptions to make them applicable to GCC, labeling them as "like" in Table 6. Compared to CRADLE, React [72]-like method only has gather information, skill curation and action planning module, while Reflextion [53]-like method adds a self-reflection and episodic memory, compared to React-like. To show the necessity of multimodal input without access to APIs, we let GPT-40 describe the image and then feed the textual description to Voyager [57]-like as input. Additionally, experiments with GPT-40 and Claude 3 Opus [1] as backbone are conducted. Due to the limitation of requests per minute, other prompting methods like self-consistency [59] and TOT [71] are not considered.
由于现有方法均不完全适用于GCC设置，我们选择了几种具有代表性的方法并进行必要调整以适配GCC，在表6中标注为“like”。与CRADLE相比，React [72]-like方法仅包含信息收集、技能策划和行动规划模块，而Reflextion [53]-like方法在React-like基础上增加了自我反思和情节记忆。为展示无API访问时多模态输入的必要性，我们让GPT-4o描述图像，再将文本描述作为输入提供给Voyager [57]-like方法。此外，还进行了以GPT-4o和Claude 3 Opus [1]为骨干的实验。由于每分钟请求次数限制，未考虑自洽性 [59] 和TOT [71]等其他提示方法。


As seen in Table 6, all the baseline methods can only complete simple and straightforward tasks without complex targets and time delays. Compared to React-like method, Reflextion-like method has better performance in the task of Follow Micah and still fails to complete more complex tasks, emphasizing the importance of task inference and procedural memory. Voyager-like method that loses vision suffers to accomplish tasks and are the worst of all comparison methods. CRADLE with GPT-4o always has the best performance across all tasks. CRADLE with GPT-4o has the best performance, while Claude 3 Opus fails frequently due to unreliable OCR ability of the guidance, leading to incorrect skill generation and failures of complex tasks.
如表6所示，所有基线方法仅能完成简单直接、无复杂目标和时间延迟的任务。与React-like方法相比，Reflextion-like方法在“跟随Micah”任务中表现更佳，但仍未能完成更复杂任务，凸显任务推断和程序记忆的重要性。失去视觉输入的Voyager-like方法难以完成任务，表现最差。搭载GPT-4o的CRADLE在所有任务中始终表现最佳。搭载GPT-4o的CRADLE表现最佳，而Claude 3 Opus因指导中的OCR能力不可靠，导致技能生成错误和复杂任务失败，频繁失败。


Figure 5 provides the detailed performance of each baseline method in the Cultivation task in Stardew Valley. Without task inference and episodic memory for summarization, even React-like and Reflexion-like methods sometimes managed to get the parsnip to sprout from the ground, they failed to successfully harvest it because GPT-4o failed to recognize the mature parsnip. Episodic summary can help CRADLE record the days of watering and know when the crop can be harvested. Voyager-like method struggles with getting out of the house and returning home due to the lack of visual input. Claude 3 Opus also has difficulties in localizing the position of the character and the crop. Moreover, it prefers moving characters much more frequently than GPT-4, resulting in the failure to position the character in front of the crop.
图5展示了各基线方法在《星露谷物语》耕作任务中的详细表现。缺乏任务推断和情节记忆总结，即使React-like和Reflexion-like方法有时能让欧防风从地里发芽，也未能成功收获，因为GPT-4o未能识别成熟的欧防风。情节总结帮助CRADLE记录浇水天数并判断作物成熟时间。缺乏视觉输入的Voyager-like方法难以走出房屋和返回家中。Claude 3 Opus在定位角色和作物位置上也存在困难，且比GPT-4更频繁地移动角色，导致无法将角色定位于作物前方。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_10.jpg?x=1009&y=1636&w=475&h=370&r=0"/>



Table 5: Performance of each baseline method in task Cultivation. Only if the parsnip (shown on the top of the y-axis) is obtained will this run be counted as a success.
表5：《耕作》任务中各基线方法的表现。仅当获得欧防风（y轴顶部所示）时，该次运行才计为成功。


Table 6: Ablation results for RDR2 and Stardew Valley Cultivation tasks. Numbers before the brackets are interaction steps averaged over five trials. N/A indicates failure in all five runs. For RDR2, each task is run at most 500 steps and for Stardew Valley, each task is run for at most 100 steps.
表6：RDR2和《星露谷物语》耕作任务的消融结果。括号前数字为五次试验的平均交互步数。N/A表示五次均失败。RDR2每个任务最多运行500步，《星露谷物语》每个任务最多运行100步。


<table><tr><td>Method</td><td>Follow Dutch</td><td>Follow Micah</td><td>Hitch Horse</td><td>Protect Dutch</td><td>Search for Supplies</td><td>Cultivation</td></tr><tr><td>React [72]-like (GPT-40)</td><td>${15} \pm  2\left( {5/5}\right)$</td><td>${74} \pm  0\left( {1/5}\right)$</td><td>N/A</td><td>N/A</td><td>N/A</td><td>N/A</td></tr><tr><td>Reflextion [53]-like (GPT-40)</td><td>${19} \pm  4\left( {5/5}\right)$</td><td>${58} \pm  {14}\left( {2/5}\right)$</td><td>N/A</td><td>N/A</td><td>N/A</td><td>N/A</td></tr><tr><td>Voyager [57]-like (GPT-40)</td><td>${32} \pm  {12}\left( {3/5}\right)$</td><td>N/A</td><td>N/A</td><td>N/A</td><td>N/A</td><td>N/A</td></tr><tr><td>CRADLE (Claude 3 Opus)</td><td>${30} \pm  7\left( {5/5}\right)$</td><td>${52} \pm  {17}\left( {4/5}\right)$</td><td>N/A</td><td>N/A</td><td>N/A</td><td>N/A</td></tr><tr><td>CRADLE (GPT-40) <br> (Ours)</td><td>${13} \pm  3$ <br> (5/5)</td><td>${33} \pm  3$ <br> (5/5)</td><td>26±5 <br> (4/5)</td><td>461±0 <br> (1/5)</td><td>134±0 <br> (1/5)</td><td>${24} \pm  4$ <br> (4/5)</td></tr></table>
<table><tbody><tr><td>方法</td><td>跟随Dutch</td><td>跟随Micah</td><td>拴马</td><td>保护Dutch</td><td>寻找补给</td><td>耕作</td></tr><tr><td>类似React [72]（GPT-40）</td><td>${15} \pm  2\left( {5/5}\right)$</td><td>${74} \pm  0\left( {1/5}\right)$</td><td>不适用</td><td>不适用</td><td>不适用</td><td>不适用</td></tr><tr><td>类似Reflextion [53]（GPT-40）</td><td>${19} \pm  4\left( {5/5}\right)$</td><td>${58} \pm  {14}\left( {2/5}\right)$</td><td>不适用</td><td>不适用</td><td>不适用</td><td>不适用</td></tr><tr><td>类似Voyager [57]（GPT-40）</td><td>${32} \pm  {12}\left( {3/5}\right)$</td><td>不适用</td><td>不适用</td><td>不适用</td><td>不适用</td><td>不适用</td></tr><tr><td>CRADLE（Claude 3 Opus）</td><td>${30} \pm  7\left( {5/5}\right)$</td><td>${52} \pm  {17}\left( {4/5}\right)$</td><td>不适用</td><td>不适用</td><td>不适用</td><td>不适用</td></tr><tr><td>CRADLE（GPT-40） <br/> （我们的）</td><td>${13} \pm  3$ <br/> （5/5）</td><td>${33} \pm  3$ <br/> （5/5）</td><td>26±5 <br/> （4/5）</td><td>461±0 <br/> （1/5）</td><td>134±0 <br/> （1/5）</td><td>${24} \pm  4$ <br/> （4/5）</td></tr></tbody></table>


## 5 Limitations and Future Work.
## 5 限制与未来工作。


Despite CRADLE's encouraging performance across games and software, several limitations remain. i) Due to the weaknesses of current LMM models, CRADLE struggles in recognizing out-of-distribution (OOD) icons and completing OOD tasks, such as games with non-realistic styles, i.e., Stardew Valley. As LMMs evolve, they can further improve CRADLE's performance. ii) Audio, as an important modality, often plays an important role in games and software; however, it has not been considered in this work. The future work will be enabling CRADLE to process the audio and graphical input simultaneously. iii) Most CRADLE's modules need to call LMM explicitly to process the input for best performance, resulting in frequent interactions with LMM and potentially high costs and long delays. The six modules represent a problem-solving mindset; as LMM capabilities improve, some or even all of these modules may be combined into a single request. iv) In this work, we mainly focus on enabling foundation agents to interact with various software in a unified manner without taking training into consideration. As SIMA [48] has already shown promising results in a similar setting with the trained agents, we will let CRADLE autonomously explore and improve over environments through RL [55] or collect expert demonstrations for supervised learning [48]. v) Though CRADLE is generally applicable to any computer task, only a few with limited tasks are investigated in this work. We will extend it to a wider range of targets, go deeper into the complex games, and make it easier for users to adapt on their own.
尽管CRADLE在多款游戏和软件中表现令人鼓舞，但仍存在若干限制。i) 由于当前大规模多模态模型（LMM）存在不足，CRADLE在识别分布外（OOD）图标和完成OOD任务（如非写实风格游戏，例如《星露谷物语》（Stardew Valley））方面表现较弱。随着LMM的发展，CRADLE的性能有望进一步提升。ii) 音频作为重要模态，在游戏和软件中常扮演关键角色；然而本工作未涉及音频处理。未来工作将使CRADLE能够同时处理音频和图形输入。iii) CRADLE的大多数模块需显式调用LMM以实现最佳性能，导致频繁与LMM交互，可能带来高成本和较长延迟。这六个模块体现了解决问题的思路；随着LMM能力提升，部分甚至全部模块可能合并为单一请求。iv) 本文主要关注使基础代理以统一方式与各种软件交互，未考虑训练。鉴于SIMA [48]在类似设置下训练代理已展现出良好效果，我们计划让CRADLE通过强化学习（RL）[55]自主探索和改进环境，或收集专家示范进行监督学习[48]。v) 虽然CRADLE普遍适用于任何计算机任务，但本工作仅研究了少数有限任务。未来将扩展至更广泛目标，深入复杂游戏，并简化用户自适应过程。


CRADLE holds great potential to improve effective general computer task completion and boost research and deployment of foundation agents. However, there is also a risk of unintended or unsuitable usage, including developing game cheats, incorrect operations of software with harmful failures, or other negative agent behavior. Therefore, additional regulations or safeguards are required for secure and responsible deployments across digital and physical environments.
CRADLE具备显著潜力提升通用计算机任务完成效率，推动基础代理的研究与应用。然而，也存在误用或不当使用风险，包括开发游戏作弊、软件误操作导致有害故障或其他负面代理行为。因此，需制定额外规章或安全措施，确保在数字及物理环境中的安全与负责任部署。


## 6 Conclusion
## 6 结论


In this work, we introduce GCC, a general and challenging setting with a unified and standard interface for control of diverse video games and other software (via screenshots, and keyboard and mouse operations), paving the way towards general foundation agents across all digital world tasks. To properly address the challenges GCC presents, we propose a novel open-source framework, CRADLE, which exhibits strong performance in reasoning and performing actions to accomplish real missions or tasks in a set of complex video games and common software applications. To the best of our knowledge, CRADLE is the first framework that enables foundation agents to succeed in such a diverse set of environments without relying on any built-in APIs. The success of CRADLE greatly extends the reach of foundation agents and demonstrates the feasibility of converting any software, especially complex games, into benchmarks to evaluate agents' general intelligence and facilitate further data collection for self-improvement. Although CRADLE still faces difficulties in certain tasks, it serves as a pioneering work to develop more powerful LMM-based agents across computer control tasks, combining both further framework enhancements and new advances in LMMs.
本文提出了GCC，一种通用且具挑战性的环境，提供统一标准接口以控制多样视频游戏及其他软件（通过截图、键盘和鼠标操作），为实现覆盖所有数字世界任务的通用基础代理奠定基础。为应对GCC带来的挑战，我们提出了新颖的开源框架CRADLE，在推理和执行动作以完成复杂视频游戏及常用软件中的真实任务方面表现出色。据我们所知，CRADLE是首个无需依赖任何内置API即可使基础代理在如此多样环境中成功的框架。CRADLE的成功极大拓展了基础代理的应用范围，展示了将任何软件，尤其是复杂游戏，转化为评估代理通用智能的基准并促进自我提升数据收集的可行性。尽管CRADLE在某些任务上仍面临挑战，但其作为开创性工作，为基于LMM的更强大计算机控制代理的发展提供了基础，结合框架改进与LMM新进展。


## 7 Acknowledgments and Disclosure of Funding
## 7 致谢与资金披露


We thank Ye Wang and Jiangxing Wang for their time and effort in helping us test the framework. Xinrun Xu is advised by Dr. Zhiming Ding from the Institute of Software, Chinese Academy of Sciences, and is supported by the National Key R&D Program of China (No. 2022YFF0503900).
感谢王烨和王江星在测试框架过程中付出的时间和努力。徐新润由中国科学院软件研究所丁志明博士指导，获得国家重点研发计划（编号2022YFF0503900）资助。


## 8 Team Members and Contributions
## 8 团队成员与贡献


### 8.1 Roles
### 8.1 角色分工


Program Leads: Zongqing Lu, Shuicheng Yan, and Bo An
项目负责人：卢宗庆、严水成、安博


Team Lead: Weihao Tan
团队负责人：谭伟豪


Framework Co-Leads: Börje F. Karlsson and Weihao Tan
框架联合负责人：Börje F. Karlsson、谭伟豪


General Advisors: Xinrun Wang and Börje F. Karlsson
总体顾问：王新润、Börje F. Karlsson


Core Contributors: Weihao Tan, Wentao Zhang, Xinrun Xu, Haochong Xia, Ziluo Ding, Boyu Li, Bohan Zhou, Junpeng Yue, Jiechuan Jiang, Yewen Li, Ruyi An, Molei Qin, Chuqiao Zong, Longtao Zheng, Yujie Wu, Xiaoqiang Chai, Xinrun Wang, and Börje F. Karlsson
核心贡献者：谭伟豪、张文涛、徐新润、夏浩冲、丁子洛、李博宇、周博涵、岳俊鹏、姜杰川、李业文、安如意、秦墨磊、宗楚乔、郑龙涛、吴宇杰、柴晓强、王新润、Börje F. Karlsson


### 8.2 Detailed Contributions
### 8.2 详细贡献


Framework Design. Weihao Tan, Börje F. Karlsson, Wentao Zhang, Ziluo Ding, and Xinrun Wang.
框架设计：谭伟豪、Börje F. Karlsson、张文涛、丁子洛、王新润。


RDR2. Implementation, experiments, and analysis by Weihao Tan, Börje F. Karlsson, Wentao Zhang, Ziluo Ding, Boyu Li, Bohan Zhou, Junpeng Yue, Haochong Xia, Jiechuan Jiang, Molei Qin, Longtao Zheng, Xinrun Xu, Yifei Bi, Pengjie Gu, and Yewen Li. Xinrun Wang provided insightful suggestions.
RDR2。由谭伟豪、博耶·F·卡尔松、张文涛、丁子洛、李博宇、周博涵、岳俊鹏、夏浩冲、姜杰川、秦墨雷、郑龙涛、徐新润、毕一飞、顾鹏杰和李业文负责实现、实验和分析。王新润提供了有见地的建议。


Stardew Valley. Implementation, experiments, and analysis by Weihao Tan, Wentao Zhang, Chuqiao Zong, Yujie Wu, Xiaoqiang Chai, Haochong Xia, Yewen Li, Ruyi An, and Molei Qin. Xinrun Wang, Long Tian, Chaojie Wang, and Börje F. Karlsson provided insightful suggestions.
星露谷物语。由谭伟豪、张文涛、宗楚乔、吴宇杰、柴晓强、夏浩冲、李业文、安如意和秦墨雷负责实现、实验和分析。王新润、田龙、王超杰和博耶·F·卡尔松提供了有见地的建议。


Cities: Skylines. Implementation, experiments, and analysis by Weihao Tan, Wentao Zhang, Haochong Xia, and Ceyao Zhang. Xinrun Wang provided insightful suggestions.
城市：天际线。由谭伟豪、张文涛、夏浩冲和张策尧负责实现、实验和分析。王新润提供了有见地的建议。


Dealer's Life 2. Implementation, experiments, and analysis by Yewen Li, Ruyi An. Weihao Tan, Wentao Zhang, and Xinrun Wang provided insightful suggestions.
经销商生活2。由李业文、安如意负责实现、实验和分析。谭伟豪、张文涛和王新润提供了有见地的建议。


Software Applications (including Chrome, Outlook, CapCut, Meitu, and Feishu). Implementation, experiments, and analysis by Xinrun Xu, Börje F. Karlsson, and Xiyun Li. Weihao Tan and Xinrun Wang provided insightful suggestions.
软件应用（包括Chrome、Outlook、CapCut、美图和飞书）。由徐新润、博耶·F·卡尔松和李希云负责实现、实验和分析。谭伟豪和王新润提供了有见地的建议。


OSWorld. Implementation, experiments, and analysis by Haochong Xia, Tianbao Xie, Pengjie Gu. Weihao Tan, Xinrun Xu, Xinrun Wang, and Börje F. Karlsson provided insightful suggestions.
OSWorld。由夏浩冲、谢天宝、顾鹏杰负责实现、实验和分析。谭伟豪、徐新润、王新润和博耶·F·卡尔松提供了有见地的建议。


Paper Writing. Weihao Tan, Xinrun Wang, Börje F. Karlsson, Wentao Zhang, Xinrun Xu, Yewen Li, Ruyi An, and Chuqiao Zong. Haochong Xia, Molei Qin, and Ceyao Zhang further contributed with writers in appendix organization.
论文写作。谭伟豪、王新润、博耶·F·卡尔松、张文涛、徐新润、李业文、安如意和宗楚乔。夏浩冲、秦墨雷和张策尧在附录组织方面进一步贡献。


Organization. Zongqing Lu, Shuicheng Yan, and Bo An provided directional research advice and organizational support.
组织。卢宗庆、闫水成和安博提供了方向性研究建议和组织支持。


## References
## 参考文献


[1] Anthropic. The claude 3 model family: Opus, sonnet, haiku, 2024.
[1] Anthropic。Claude 3模型系列：Opus、Sonnet、Haiku，2024年。


[2] Bowen Baker, Ilge Akkaya, Peter Zhokov, Joost Huizinga, Jie Tang, Adrien Ecoffet, Brandon Houghton, Raul Sampedro, and Jeff Clune. Video pretraining (VPT): Learning to act by watching unlabeled online videos. Advances in Neural Information Processing Systems, 35:24639-24654, 2022.
[2] Bowen Baker、Ilge Akkaya、Peter Zhokov、Joost Huizinga、Jie Tang、Adrien Ecoffet、Brandon Houghton、Raul Sampedro和Jeff Clune。视频预训练（VPT）：通过观看无标签在线视频学习行动。神经信息处理系统进展，35：24639-24654，2022年。


[3] Anton Bakhtin, Noam Brown, Emily Dinan, Gabriele Farina, Colin Flaherty, Daniel Fried, Andrew Goff, Jonathan Gray, Hengyuan Hu, et al. Human-level play in the game of diplomacy by combining language models with strategic reasoning. Science, 378(6624):1067-1074, 2022.
[3] Anton Bakhtin、Noam Brown、Emily Dinan、Gabriele Farina、Colin Flaherty、Daniel Fried、Andrew Goff、Jonathan Gray、Hengyuan Hu等。通过结合语言模型与战略推理实现《外交》游戏的人类水平玩法。科学，378(6624)：1067-1074，2022年。


[4] Marc G Bellemare, Yavar Naddaf, Joel Veness, and Michael Bowling. The Arcade learning environment: An evaluation platform for general agents. Journal of Artificial Intelligence Research, 47:253-279, 2013.
[4] Marc G Bellemare、Yavar Naddaf、Joel Veness和Michael Bowling。街机学习环境：通用智能体的评估平台。人工智能研究杂志，47：253-279，2013年。


[5] Christopher Berner, Greg Brockman, Brooke Chan, Vicki Cheung, Przemysław Dębiak, Christy Dennison, David Farhi, Quirin Fischer, Shariq Hashme, Chris Hesse, et al. Dota 2 with large scale deep reinforcement learning. arXiv preprint arXiv:1912.06680, 2019.
[5] Christopher Berner、Greg Brockman、Brooke Chan、Vicki Cheung、Przemysław Dębiak、Christy Dennison、David Farhi、Quirin Fischer、Shariq Hashme、Chris Hesse等。基于大规模深度强化学习的Dota 2。arXiv预印本 arXiv:1912.06680，2019年。


[6] Anthony Brohan, Noah Brown, Justice Carbajal, Yevgen Chebotar, Xi Chen, Krzysztof Choro-manski, Tianli Ding, Danny Driess, Avinava Dubey, Chelsea Finn, et al. RT-2: Vision-language-action models transfer web knowledge to robotic control. arXiv preprint arXiv:2307.15818, 2023.
[6] Anthony Brohan、Noah Brown、Justice Carbajal、Yevgen Chebotar、Xi Chen、Krzysztof Choromański、Tianli Ding、Danny Driess、Avinava Dubey、Chelsea Finn等。RT-2：视觉-语言-动作模型将网络知识转移到机器人控制。arXiv预印本 arXiv:2307.15818，2023年。


[7] Anthony Brohan, Yevgen Chebotar, Chelsea Finn, Karol Hausman, Alexander Herzog, Daniel Ho, Julian Ibarz, Alex Irpan, Eric Jang, Ryan Julian, et al. Do as I can, not as I say: Grounding language in robotic affordances. In Conference on Robot Learning, pages 287-318. PMLR, 2023.
[7] Anthony Brohan、Yevgen Chebotar、Chelsea Finn、Karol Hausman、Alexander Herzog、Daniel Ho、Julian Ibarz、Alex Irpan、Eric Jang、Ryan Julian等。言行合一：将语言基础植入机器人可操作性。机器人学习会议论文集，页287-318。PMLR，2023年。


[8] Roberto Brunelli. Template matching techniques in computer vision: theory and practice. John Wiley & Sons, 2009.
[8] Roberto Brunelli. 计算机视觉中的模板匹配技术：理论与实践。John Wiley & Sons, 2009。


[9] Micah Carroll, Rohin Shah, Mark K Ho, Tom Griffiths, Sanjit Seshia, Pieter Abbeel, and Anca Dragan. On the utility of learning about humans for human-ai coordination. Advances in neural information processing systems, 32, 2019.
[9] Micah Carroll, Rohin Shah, Mark K Ho, Tom Griffiths, Sanjit Seshia, Pieter Abbeel, 和 Anca Dragan. 关于学习人类行为以促进人机协作的效用。神经信息处理系统进展, 32, 2019。


[10] Kanzhi Cheng, Qiushi Sun, Yougang Chu, Fangzhi Xu, Yantao Li, Jianbing Zhang, and Zhiyong Wu. SeeClick: Harnessing GUI grounding for advanced visual GUI agents. arXiv preprint arXiv:2401.10935, 2024.
[10] 程坤志, 孙秋实, 褚有刚, 徐方志, 李彦涛, 张建兵, 和 吴志勇. SeeClick：利用GUI定位实现高级视觉GUI代理。arXiv预印本 arXiv:2401.10935, 2024。


[11] Maxime Chevalier-Boisvert, Dzmitry Bahdanau, Salem Lahlou, Lucas Willems, Chitwan Sa-haria, Thien Huu Nguyen, and Yoshua Bengio. BabyAI: First steps towards grounded language learning with a human in the loop. In International Conference on Learning Representations, 2019.
[11] Maxime Chevalier-Boisvert, Dzmitry Bahdanau, Salem Lahlou, Lucas Willems, Chitwan Sa-haria, Thien Huu Nguyen, 和 Yoshua Bengio. BabyAI：迈向带有人类参与的基础语言学习的第一步。国际学习表征会议论文集, 2019。


[12] Matt Deitke, Eli VanderBilt, Alvaro Herrasti, Luca Weihs, Kiana Ehsani, Jordi Salvador, Winson Han, Eric Kolve, Aniruddha Kembhavi, and Roozbeh Mottaghi. Procthor: Large-scale embodied ai using procedural generation. Advances in Neural Information Processing Systems, 35:5982-5994, 2022.
[12] Matt Deitke, Eli VanderBilt, Alvaro Herrasti, Luca Weihs, Kiana Ehsani, Jordi Salvador, Winson Han, Eric Kolve, Aniruddha Kembhavi, 和 Roozbeh Mottaghi. Procthor：利用程序生成的大规模具身人工智能。神经信息处理系统进展, 35:5982-5994, 2022。


[13] Xiang Deng, Yu Gu, Boyuan Zheng, Shijie Chen, Samuel Stevens, Boshi Wang, Huan Sun, and Yu Su. Mind2Web: Towards a generalist agent for the web. arXiv preprint arXiv:2306.06070, 2023.
[13] 邓翔, 顾宇, 郑博远, 陈世杰, Samuel Stevens, 王博实, 孙焕, 和 苏宇. Mind2Web：迈向通用网络代理。arXiv预印本 arXiv:2306.06070, 2023。


[14] Danny Driess, Fei Xia, Mehdi SM Sajjadi, Corey Lynch, Aakanksha Chowdhery, Brian Ichter, Ayzaan Wahid, Jonathan Tompson, Quan Vuong, Tianhe Yu, et al. Palm-e: An embodied multimodal language model. arXiv preprint arXiv:2303.03378, 2023.
[14] Danny Driess, Fei Xia, Mehdi SM Sajjadi, Corey Lynch, Aakanksha Chowdhery, Brian Ichter, Ayzaan Wahid, Jonathan Tompson, Quan Vuong, Tianhe Yu, 等. Palm-e：一个具身多模态语言模型。arXiv预印本 arXiv:2303.03378, 2023。


[15] Benjamin Ellis, Jonathan Cook, Skander Moalla, Mikayel Samvelyan, Mingfei Sun, Anuj Mahajan, Jakob Nicolaus Foerster, and Shimon Whiteson. SMACv2: An improved benchmark for cooperative multi-agent reinforcement learning. In Thirty-seventh Conference on Neural Information Processing Systems Datasets and Benchmarks Track, 2023.
[15] Benjamin Ellis, Jonathan Cook, Skander Moalla, Mikayel Samvelyan, Mingfei Sun, Anuj Mahajan, Jakob Nicolaus Foerster, 和 Shimon Whiteson. SMACv2：改进的合作多智能体强化学习基准。第三十七届神经信息处理系统会议数据集与基准赛道, 2023。


[16] Linxi Fan, Guanzhi Wang, Yunfan Jiang, Ajay Mandlekar, Yuncong Yang, Haoyi Zhu, Andrew Tang, De-An Huang, Yuke Zhu, and Anima Anandkumar. Minedojo: Building open-ended embodied agents with internet-scale knowledge. Advances in Neural Information Processing Systems, 35:18343-18362, 2022.
[16] 范林曦, 王冠志, 蒋云帆, Ajay Mandlekar, 杨云聪, 朱浩毅, Andrew Tang, 黄德安, 朱宇珂, 和 Anima Anandkumar. Minedojo：构建具备互联网规模知识的开放式具身代理。神经信息处理系统进展, 35:18343-18362, 2022。


[17] Hiroki Furuta, Ofir Nachum, Kuang-Huei Lee, Yutaka Matsuo, Shixiang Shane Gu, and Izzeddin Gur. Multimodal web navigation with instruction-finetuned foundation models. arXiv preprint arXiv:2305.11854, 2023.
[17] 古田浩树, Ofir Nachum, Kuang-Huei Lee, 松尾丰, Shixiang Shane Gu, 和 Izzeddin Gur. 基于指令微调基础模型的多模态网页导航。arXiv预印本 arXiv:2305.11854, 2023。


[18] Difei Gao, Lei Ji, Zechen Bai, Mingyu Ouyang, Peiran Li, Dongxing Mao, Qinchen Wu, Weichen Zhang, Peiyi Wang, Xiangwu Guo, et al. ASSISTGUI: Task-oriented desktop graphical user interface automation. arXiv preprint arXiv:2312.13108, 2023.
[18] 高迪飞, 纪磊, 白泽辰, 欧阳明宇, 李沛然, 毛东兴, 吴秦辰, 张伟晨, 王培怡, 郭祥武, 等. ASSISTGUI：面向任务的桌面图形用户界面自动化。arXiv预印本 arXiv:2312.13108, 2023。


[19] Xiaofeng Gao, Ran Gong, Tianmin Shu, Xu Xie, Shu Wang, and Song-Chun Zhu. Vrkitchen: an interactive 3d virtual environment for task-oriented learning. arXiv preprint arXiv:1903.05757, 2019.
[19] 高晓峰, 龚然, 舒天民, 谢旭, 王舒, 和 朱松纯. Vrkitchen：一个用于任务导向学习的交互式3D虚拟环境。arXiv预印本 arXiv:1903.05757, 2019。


[20] Izzeddin Gur, Hiroki Furuta, Austin Huang, Mustafa Safdari, Yutaka Matsuo, Douglas Eck, and Aleksandra Faust. A real-world webagent with planning, long context understanding, and program synthesis. arXiv preprint arXiv:2307.12856, 2023.
[20] Izzeddin Gur, 古田浩树, Austin Huang, Mustafa Safdari, 松尾丰, Douglas Eck, 和 Aleksandra Faust. 一个具备规划、长上下文理解和程序合成能力的真实世界网页代理。arXiv预印本 arXiv:2307.12856, 2023。


[21] William H Guss, Brandon Houghton, Nicholay Topin, Phillip Wang, Cayden Codel, Manuela Veloso, and Ruslan Salakhutdinov. Minerl: A large-scale dataset of Minecraft demonstrations. arXiv preprint arXiv:1907.13440, 2019.
[21] William H Guss, Brandon Houghton, Nicholay Topin, Phillip Wang, Cayden Codel, Manuela Veloso, 和 Ruslan Salakhutdinov. Minerl：一个大规模Minecraft演示数据集。arXiv预印本 arXiv:1907.13440, 2019。


[22] Hongliang He, Wenlin Yao, Kaixin Ma, Wenhao Yu, Yong Dai, Hongming Zhang, Zhenzhong Lan, and Dong Yu. WebVoyager: Building an end-to-end web agent with large multimodal models. arXiv preprint arXiv:2401.13919, 2024.
[22] 何洪亮，姚文林，马凯欣，余文浩，戴勇，张洪明，兰振中，余东。WebVoyager：基于大型多模态模型构建端到端网页代理。arXiv预印本 arXiv:2401.13919，2024年。


[23] Wenyi Hong, Weihan Wang, Qingsong Lv, Jiazheng Xu, Wenmeng Yu, Junhui Ji, Yan Wang, Zihan Wang, Yuxiao Dong, Ming Ding, et al. CogAgent: A visual language model for GUI agents. arXiv preprint arXiv:2312.08914, 2023.
[23] 洪文怡，王伟涵，吕庆松，徐家正，余文萌，季俊辉，王岩，王子涵，董宇霄，丁明，等。CogAgent：面向GUI代理的视觉语言模型。arXiv预印本 arXiv:2312.08914，2023年。


[24] Wenlong Huang, Fei Xia, Ted Xiao, Harris Chan, Jacky Liang, Pete Florence, Andy Zeng, Jonathan Tompson, Igor Mordatch, Yevgen Chebotar, et al. Inner monologue: Embodied reasoning through planning with language models. arXiv preprint arXiv:2207.05608, 2022.
[24] 黄文龙，夏飞，肖特德，陈哈里斯，梁杰奇，弗洛伦斯·皮特，曾安迪，汤普森乔纳森，莫尔达奇伊戈尔，切博塔耶夫叶夫根，等。内心独白：通过语言模型规划实现具身推理。arXiv预印本 arXiv:2207.05608，2022年。


[25] Max Jaderberg, Wojciech M Czarnecki, Iain Dunning, Luke Marris, Guy Lever, Antonio Garcia Castaneda, Charles Beattie, Neil C Rabinowitz, Ari S Morcos, Avraham Ruderman, et al. Human-level performance in 3D multiplayer games with population-based reinforcement learning. Science, 364(6443):859-865, 2019.
[25] 马克斯·贾德伯格，沃伊切赫·M·查尔内茨基，伊恩·邓宁，卢克·马里斯，盖伊·莱弗，安东尼奥·加西亚·卡斯塔涅达，查尔斯·比蒂，尼尔·C·拉宾诺维茨，阿里·S·莫科斯，阿夫拉罕·鲁德曼，等。基于群体强化学习的3D多人游戏中达到人类水平表现。科学，364(6443):859-865，2019年。


[26] Matthew Johnson, Katja Hofmann, Tim Hutton, and David Bignell. The Malmo platform for artificial intelligence experimentation. In Ijcai, pages 4246-4247, 2016.
[26] 马修·约翰逊，卡佳·霍夫曼，蒂姆·哈顿，大卫·比格内尔。Malmo平台：人工智能实验平台。发表于国际人工智能联合会议（IJCAI），第4246-4247页，2016年。


[27] Raghav Kapoor, Yash Parag Butala, Melisa Russak, Jing Yu Koh, Kiran Kamble, Waseem Al-shikh, and Ruslan Salakhutdinov. OmniACT: A dataset and benchmark for enabling multimodal generalist autonomous agents for desktop and web, 2024.
[27] 拉加夫·卡普尔，亚什·帕拉格·布塔拉，梅丽莎·鲁萨克，许静瑜，基兰·坎布尔，瓦西姆·阿尔-希克，鲁斯兰·萨拉胡丁诺夫。OmniACT：支持桌面和网页多模态通用自主代理的数据集与基准，2024年。


[28] Christian Kauten. Super Mario Bros for OpenAI Gym. GitHub, 2018.
[28] 克里斯蒂安·考滕。OpenAI Gym的超级马里奥兄弟。GitHub，2018年。


[29] Alexander Kirillov, Eric Mintun, Nikhila Ravi, Hanzi Mao, Chloe Rolland, Laura Gustafson, Tete Xiao, Spencer Whitehead, Alexander C Berg, Wan-Yen Lo, et al. Segment anything. In Proceedings of the IEEE/CVF International Conference on Computer Vision, pages 4015-4026, 2023.
[29] 亚历山大·基里洛夫，埃里克·明顿，尼基拉·拉维，毛汉子，克洛伊·罗兰，劳拉·古斯塔夫森，肖特特，斯宾塞·怀特黑德，亚历山大·C·伯格，罗万·洛，等。Segment anything（任意分割）。发表于IEEE/CVF国际计算机视觉会议，4015-4026页，2023年。


[30] Jing Yu Koh, Robert Lo, Lawrence Jang, Vikram Duvvur, Ming Chong Lim, Po-Yu Huang, Graham Neubig, Shuyan Zhou, Ruslan Salakhutdinov, and Daniel Fried. VisualWebArena: Evaluating multimodal agents on realistic visual web tasks. arXiv preprint arXiv:2401.13649, 2024.
[30] 许静瑜，罗伯特·洛，劳伦斯·姜，维克拉姆·杜弗，林明聪，黄柏宇，格雷厄姆·纽比格，周书妍，鲁斯兰·萨拉胡丁诺夫，丹尼尔·弗里德。VisualWebArena：评估多模态代理在真实视觉网页任务中的表现。arXiv预印本 arXiv:2401.13649，2024年。


[31] Karol Kurach, Anton Raichuk, Piotr Stańczyk, Michał Zajac, Olivier Bachem, Lasse Espeholt, Carlos Riquelme, Damien Vincent, Marcin Michalski, Olivier Bousquet, et al. Google research football: A novel reinforcement learning environment. In Proceedings of the AAAI conference on artificial intelligence, pages 4501-4510, 2020.
[31] 卡罗尔·库拉赫，安东·赖丘克，皮奥特·斯坦奇克，米哈乌·扎亚茨，奥利维耶·巴谢姆，拉塞·埃斯佩霍尔特，卡洛斯·里克尔梅，达米安·文森特，马尔钦·米哈尔斯基，奥利维耶·布斯凯，等。谷歌研究足球：一种新颖的强化学习环境。发表于AAAI人工智能会议，4501-4510页，2020年。


[32] Joel Z Leibo, Edgar A Duéñez-Guzman, Alexander Vezhnevets, John P Agapiou, Peter Sunehag, Raphael Koster, Jayd Matyas, Charlie Beattie, Igor Mordatch, and Thore Graepel. Scalable evaluation of multi-agent reinforcement learning with melting pot. In International conference on machine learning, pages 6187-6199. PMLR, 2021.
[32] 乔尔·Z·莱博，埃德加·A·杜涅兹-古兹曼，亚历山大·韦兹涅维茨，约翰·P·阿加皮乌，彼得·苏内哈格，拉斐尔·科斯特，杰伊德·马蒂亚斯，查理·比蒂，伊戈尔·莫尔达奇，托雷·格雷佩尔。使用Melting Pot进行多智能体强化学习的可扩展评估。发表于国际机器学习会议，6187-6199页，PMLR，2021年。


[33] Chengshu Li, Fei Xia, Roberto Martín-Martín, Michael Lingelbach, Sanjana Srivastava, Bokui Shen, Kent Vainio, Cem Gokmen, Gokul Dharan, Tanish Jain, et al. igibson 2.0: Object-centric simulation for robot learning of everyday household tasks. arXiv preprint arXiv:2108.03272, 2021.
[33] 李成书，夏飞，罗伯托·马丁-马丁，迈克尔·林格尔巴赫，桑贾纳·斯里瓦斯塔瓦，申博奎，肯特·瓦伊尼奥，杰姆·戈克门，戈库尔·达兰，塔尼什·贾因，等。iGibson 2.0：面向机器人学习日常家务任务的以物体为中心的仿真环境。arXiv预印本 arXiv:2108.03272，2021年。


[34] Evan Zheran Liu, Kelvin Guu, Panupong Pasupat, Tianlin Shi, and Percy Liang. Reinforcement learning on web interfaces using workflow-guided exploration. In International Conference on Learning Representations (ICLR), 2018.
[34] 刘哲然，郭凯文，帕努蓬·帕苏帕特，石天霖，梁帕西。基于工作流引导探索的网页界面强化学习。发表于国际学习表征会议（ICLR），2018年。


[35] Shilong Liu, Zhaoyang Zeng, Tianhe Ren, Feng Li, Hao Zhang, Jie Yang, Chunyuan Li, Jianwei Yang, Hang Su, Jun Zhu, et al. Grounding Dino: Marrying dino with grounded pre-training for open-set object detection. arXiv preprint arXiv:2303.05499, 2023.
[35] 刘世龙, 曾昭阳, 任天河, 李峰, 张浩, 杨杰, 李春元, 杨建伟, 苏航, 朱军, 等. Grounding Dino: 将Dino与基于定位的预训练结合用于开放集目标检测. arXiv预印本 arXiv:2303.05499, 2023.


[36] Weiyu Ma, Qirui Mi, Xue Yan, Yuqiao Wu, Runji Lin, Haifeng Zhang, and Jun Wang. Large language models play StarCraft II: Benchmarks and a chain of summarization approach. arXiv preprint arXiv:2312.11865, 2023.
[36] 马伟宇, 米启睿, 颜雪, 吴玉桥, 林润吉, 张海峰, 王军. 大型语言模型玩星际争霸II：基准测试与链式摘要方法. arXiv预印本 arXiv:2312.11865, 2023.


[37] Manolis Savva*, Abhishek Kadian*, Oleksandr Maksymets*, Yili Zhao, Erik Wijmans, Bhavana Jain, Julian Straub, Jia Liu, Vladlen Koltun, Jitendra Malik, Devi Parikh, and Dhruv Batra. Habitat: A Platform for Embodied AI Research. In Proceedings of the IEEE/CVF International Conference on Computer Vision (ICCV), 2019.
[37] Manolis Savva*, Abhishek Kadian*, Oleksandr Maksymets*, 赵一力, Erik Wijmans, Bhavana Jain, Julian Straub, 刘佳, Vladlen Koltun, Jitendra Malik, Devi Parikh, 和 Dhruv Batra. Habitat: 一个用于具身人工智能研究的平台. 载于IEEE/CVF国际计算机视觉会议(ICCV)论文集, 2019.


[38] Grégoire Mialon, Clémentine Fourrier, Craig Swift, Thomas Wolf, Yann LeCun, and Thomas Scialom. GAIA: a benchmark for general AI assistants. arXiv preprint arXiv:2311.12983, 2023.
[38] Grégoire Mialon, Clémentine Fourrier, Craig Swift, Thomas Wolf, Yann LeCun, 和 Thomas Scialom. GAIA: 通用人工智能助手的基准测试. arXiv预印本 arXiv:2311.12983, 2023.


[39] Meredith Ringel Morris, Jascha Sohl-dickstein, Noah Fiedel, Tris Warkentin, Allan Dafoe, Aleksandra Faust, Clement Farabet, and Shane Legg. Levels of AGI: Operationalizing progress on the path to AGI. arXiv preprint arXiv:2311.02462, 2023.
[39] Meredith Ringel Morris, Jascha Sohl-dickstein, Noah Fiedel, Tris Warkentin, Allan Dafoe, Aleksandra Faust, Clement Farabet, 和 Shane Legg. AGI的层级：实现通用人工智能进展的操作化路径. arXiv预印本 arXiv:2311.02462, 2023.


[40] Runliang Niu, Jindong Li, Shiqi Wang, Yali Fu, Xiyu Hu, Xueyuan Leng, He Kong, Yi Chang, and Qi Wang. ScreenAgent: A vision language model-driven computer control agent. arXiv preprint arXiv:2402.07945, 2024.
[40] 牛润良, 李金东, 王世奇, 傅雅丽, 胡希宇, 冷学元, 孔贺, 常毅, 和 王琦. ScreenAgent: 一个视觉语言模型驱动的计算机控制代理. arXiv预印本 arXiv:2402.07945, 2024.


[41] OpenAI. Universe, 2016.
[41] OpenAI. Universe, 2016.


[42] OpenAI. New and improved embedding model, 2022.
[42] OpenAI. 新版改进的嵌入模型, 2022.


[43] OpenAI. Hello gpt-4o, 2024.
[43] OpenAI. 你好 gpt-4o, 2024.


[44] Joon Sung Park, Joseph O'Brien, Carrie Jun Cai, Meredith Ringel Morris, Percy Liang, and Michael S Bernstein. Generative agents: Interactive simulacra of human behavior. In Proceedings of the 36th Annual ACM Symposium on User Interface Software and Technology, pages 1-22, 2023.
[44] Joon Sung Park, Joseph O'Brien, Carrie Jun Cai, Meredith Ringel Morris, Percy Liang, 和 Michael S Bernstein. 生成代理：人类行为的交互式模拟. 载于第36届ACM用户界面软件与技术年会论文集, 页码1-22, 2023.


[45] Xavier Puig, Kevin Ra, Marko Boben, Jiaman Li, Tingwu Wang, Sanja Fidler, and Antonio Torralba. Virtualhome: Simulating household activities via programs. In Proceedings of the IEEE conference on computer vision and pattern recognition, pages 8494-8502, 2018.
[45] Xavier Puig, Kevin Ra, Marko Boben, 李佳曼, 王廷武, Sanja Fidler, 和 Antonio Torralba. Virtualhome: 通过程序模拟家庭活动. 载于IEEE计算机视觉与模式识别会议论文集, 页码8494-8502, 2018.


[46] Xavier Puig, Eric Undersander, Andrew Szot, Mikael Dallaire Cote, Tsung-Yen Yang, Ruslan Partsey, Ruta Desai, Alexander William Clegg, Michal Hlavac, So Yeon Min, et al. Habitat 3.0: A co-habitat for humans, avatars and robots. arXiv preprint arXiv:2310.13724, 2023.
[46] Xavier Puig, Eric Undersander, Andrew Szot, Mikael Dallaire Cote, 杨宗彦, Ruslan Partsey, Ruta Desai, Alexander William Clegg, Michal Hlavac, Min So Yeon, 等. Habitat 3.0: 人类、虚拟形象与机器人共存的环境. arXiv预印本 arXiv:2310.13724, 2023.


[47] Siyuan Qi, Shuo Chen, Yexin Li, Xiangyu Kong, Junqi Wang, Bangcheng Yang, Pring Wong, Yifan Zhong, Xiaoyuan Zhang, Zhaowei Zhang, et al. CivRealm: A learning and reasoning odyssey in Civilization for decision-making agents. In ICLR, 2024.
[47] 齐思远, 陈硕, 李业新, 孔祥宇, 王俊奇, 杨邦成, Pring Wong, 钟一凡, 张晓媛, 张兆伟, 等. CivRealm: 文明游戏中面向决策代理的学习与推理探索. 载于ICLR, 2024.


[48] Maria Abi Raad, Arun Ahuja, Catarina Barros, Frederic Besse, Andrew Bolt, Adrian Bolton, Bethanie Brownfield, Gavin Buttimore, Max Cant, Sarah Chakera, et al. Scaling instructable agents across many simulated worlds. arXiv preprint arXiv:2404.10179, 2024.
[48] Maria Abi Raad, Arun Ahuja, Catarina Barros, Frederic Besse, Andrew Bolt, Adrian Bolton, Bethanie Brownfield, Gavin Buttimore, Max Cant, Sarah Chakera, 等. 跨多个模拟世界扩展可指导代理. arXiv预印本 arXiv:2404.10179, 2024.


[49] Christopher Rawles, Alice Li, Daniel Rodriguez, Oriana Riva, and Timothy Lillicrap. Android in the wild: A large-scale dataset for Android device control. arXiv preprint arXiv:2307.10088, 2023.
[49] Christopher Rawles, Alice Li, Daniel Rodriguez, Oriana Riva, 和 Timothy Lillicrap. Android in the wild: 一个用于Android设备控制的大规模数据集. arXiv预印本 arXiv:2307.10088, 2023.


[50] Mikayel Samvelyan, Tabish Rashid, Christian Schroeder De Witt, Gregory Farquhar, Nan-tas Nardelli, Tim GJ Rudner, Chia-Man Hung, Philip HS Torr, Jakob Foerster, and Shimon Whiteson. The Starcraft multi-agent challenge. arXiv preprint arXiv:1902.04043, 2019.
[50] Mikayel Samvelyan, Tabish Rashid, Christian Schroeder De Witt, Gregory Farquhar, Nantas Nardelli, Tim GJ Rudner, Chia-Man Hung, Philip HS Torr, Jakob Foerster, 和 Shimon Whiteson. 星际争霸多智能体挑战. arXiv预印本 arXiv:1902.04043, 2019.


[51] Bokui Shen, Fei Xia, Chengshu Li, Roberto Martín-Martín, Linxi Fan, Guanzhi Wang, Claudia Pérez-D'Arpino, Shyamal Buch, Sanjana Srivastava, Lyne Tchapmi, et al. igibson 1.0: a simulation environment for interactive tasks in large realistic scenes. In 2021 IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS), pages 7520-7527. IEEE, 2021.
[51] Bokui Shen, Fei Xia, Chengshu Li, Roberto Martín-Martín, Linxi Fan, Guanzhi Wang, Claudia Pérez-D'Arpino, Shyamal Buch, Sanjana Srivastava, Lyne Tchapmi, 等. igibson 1.0：用于大规模真实场景交互任务的仿真环境. 载于2021年IEEE/RSJ国际智能机器人与系统会议（IROS），页7520-7527. IEEE, 2021.


[52] Tianlin Shi, Andrej Karpathy, Linxi Fan, Jonathan Hernandez, and Percy Liang. World of bits: An open-domain platform for web-based agents. In International Conference on Machine Learning, pages 3135-3144. PMLR, 2017.
[52] Tianlin Shi, Andrej Karpathy, Linxi Fan, Jonathan Hernandez, 和 Percy Liang. World of bits：基于网络代理的开放域平台. 载于国际机器学习会议，页3135-3144. PMLR, 2017.


[53] Noah Shinn, Federico Cassano, Ashwin Gopinath, Karthik R Narasimhan, and Shunyu Yao. Reflexion: language agents with verbal reinforcement learning. In Thirty-seventh Conference on Neural Information Processing Systems, 2023.
[53] Noah Shinn, Federico Cassano, Ashwin Gopinath, Karthik R Narasimhan, 和 Shunyu Yao. Reflexion：具备语言强化学习的语言代理. 载于第三十七届神经信息处理系统会议，2023.


[54] Andrew Szot, Alex Clegg, Eric Undersander, Erik Wijmans, Yili Zhao, John Turner, Noah Maestre, Mustafa Mukadam, Devendra Chaplot, Oleksandr Maksymets, Aaron Gokaslan, Vladimir Vondrus, Sameer Dharur, Franziska Meier, Wojciech Galuba, Angel Chang, Zsolt Kira, Vladlen Koltun, Jitendra Malik, Manolis Savva, and Dhruv Batra. Habitat 2.0: Training home assistants to rearrange their habitat. In Advances in Neural Information Processing Systems (NeurIPS), 2021.
[54] Andrew Szot, Alex Clegg, Eric Undersander, Erik Wijmans, Yili Zhao, John Turner, Noah Maestre, Mustafa Mukadam, Devendra Chaplot, Oleksandr Maksymets, Aaron Gokaslan, Vladimir Vondrus, Sameer Dharur, Franziska Meier, Wojciech Galuba, Angel Chang, Zsolt Kira, Vladlen Koltun, Jitendra Malik, Manolis Savva, 和 Dhruv Batra. Habitat 2.0：训练家庭助理重新布置其生活环境. 载于神经信息处理系统进展（NeurIPS），2021.


[55] Weihao Tan, Wentao Zhang, Shanqi Liu, Longtao Zheng, Xinrun Wang, and Bo An. True knowledge comes from practice: Aligning large language models with embodied environments via reinforcement learning. In ICLR, 2023.
[55] Weihao Tan, Wentao Zhang, Shanqi Liu, Longtao Zheng, Xinrun Wang, 和 Bo An. 真正的知识来自实践：通过强化学习使大型语言模型与具身环境对齐. 载于ICLR，2023.


[56] Oriol Vinyals, Igor Babuschkin, Junyoung Chung, Michael Mathieu, Max Jaderberg, Wo-jciech M Czarnecki, Andrew Dudzik, Aja Huang, Petko Georgiev, Richard Powell, et al. AlphaStar: Mastering the real-time strategy game Starcraft II. DeepMind blog, 2:20, 2019.
[56] Oriol Vinyals, Igor Babuschkin, Junyoung Chung, Michael Mathieu, Max Jaderberg, Wojciech M Czarnecki, Andrew Dudzik, Aja Huang, Petko Georgiev, Richard Powell, 等. AlphaStar：掌握实时战略游戏星际争霸II. DeepMind博客, 2:20, 2019.


[57] Guanzhi Wang, Yuqi Xie, Yunfan Jiang, Ajay Mandlekar, Chaowei Xiao, Yuke Zhu, Linxi Fan, and Anima Anandkumar. Voyager: An open-ended embodied agent with large language models. Transactions on Machine Learning Research, 2024.
[57] Guanzhi Wang, Yuqi Xie, Yunfan Jiang, Ajay Mandlekar, Chaowei Xiao, Yuke Zhu, Linxi Fan, 和 Anima Anandkumar. Voyager：具备大型语言模型的开放式具身代理. 机器学习研究汇刊, 2024.


[58] Junyang Wang, Haiyang Xu, Jiabo Ye, Ming Yan, Weizhou Shen, Ji Zhang, Fei Huang, and Jitao Sang. Mobile-Agent: Autonomous multi-modal mobile device agent with visual perception. arXiv preprint arXiv:2401.16158, 2024.
[58] Junyang Wang, Haiyang Xu, Jiabo Ye, Ming Yan, Weizhou Shen, Ji Zhang, Fei Huang, 和 Jitao Sang. Mobile-Agent：具备视觉感知的自主多模态移动设备代理. arXiv预印本 arXiv:2401.16158, 2024.


[59] Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. Self-consistency improves chain of thought reasoning in language models. arXiv preprint arXiv:2203.11171, 2022.
[59] Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Chi, Sharan Narang, Aakanksha Chowdhery, 和 Denny Zhou. 自洽性提升语言模型中的链式思维推理. arXiv预印本 arXiv:2203.11171, 2022.


[60] Zihao Wang, Shaofei Cai, Anji Liu, Yonggang Jin, Jinbing Hou, Bowei Zhang, Haowei Lin, Zhaofeng He, Zilong Zheng, Yaodong Yang, and Yitao Liang. Jarvis-1: Open-world multi-task agents with memory-augmented multimodal language models. arXiv preprint arXiv:2311.05997, 2023.
[60] Zihao Wang, Shaofei Cai, Anji Liu, Yonggang Jin, Jinbing Hou, Bowei Zhang, Haowei Lin, Zhaofeng He, Zilong Zheng, Yaodong Yang, 和 Yitao Liang. Jarvis-1：具备记忆增强多模态语言模型的开放世界多任务代理. arXiv预印本 arXiv:2311.05997, 2023.


[61] Zihao Wang, Shaofei Cai, Anji Liu, Xiaojian Ma, and Yitao Liang. Describe, explain, plan and select: Interactive planning with large language models enables open-world multi-task agents. In ICML, 2023.
[61] Zihao Wang, Shaofei Cai, Anji Liu, Xiaojian Ma, 和 Yitao Liang. 描述、解释、规划与选择：利用大型语言模型的交互式规划实现开放世界多任务代理. 载于ICML，2023.


[62] Sarah A. Wu, Rose E. Wang, James A. Evans, Joshua B. Tenenbaum, David C. Parkes, and Max Kleiman-Weiner. Too many cooks: Coordinating multi-agent collaboration through inverse planning. Topics in Cognitive Science, n/a(n/a), 2021.
[62] Sarah A. Wu, Rose E. Wang, James A. Evans, Joshua B. Tenenbaum, David C. Parkes, 和 Max Kleiman-Weiner. 厨师太多：通过逆向规划协调多智能体协作。《认知科学专题》，无卷号(无期号)，2021年。


[63] Zhiyong Wu, Chengcheng Han, Zichen Ding, Zhenmin Weng, Zhoumianze Liu, Shunyu Yao, Tao Yu, and Lingpeng Kong. OS-copilot: Towards generalist computer agents with self-improvement. arXiv preprint arXiv:2402.07456, 2024.
[63] 吴志勇，韩成成，丁子辰，翁振民，刘周勉泽，姚顺宇，余涛，和孔令鹏。OS-copilot：迈向具备自我提升能力的通用计算机代理。arXiv预印本 arXiv:2402.07456，2024年。


[64] Peter R. Wurman, Samuel Barrett, Kenta Kawamoto, James MacGlashan, Kaushik Subrama-nian, Thomas J. Walsh, Roberto Capobianco, Alisa Devlic, Franziska Eckert, Florian Fuchs, et al. Outracing champion Gran Turismo drivers with deep reinforcement learning. Nature, 602(7896):223-228, 2022.
[64] Peter R. Wurman, Samuel Barrett, Kenta Kawamoto, James MacGlashan, Kaushik Subramanian, Thomas J. Walsh, Roberto Capobianco, Alisa Devlic, Franziska Eckert, Florian Fuchs 等。用深度强化学习超越冠军《Gran Turismo》赛车手。《自然》，602(7896):223-228，2022年。


[65] Yuchen Xiao, Weihao Tan, and Christopher Amato. Asynchronous actor-critic for multi-agent reinforcement learning. Advances in Neural Information Processing Systems, 35:4385-4400, 2022.
[65] 肖宇晨，谭伟豪，和 Christopher Amato。多智能体强化学习中的异步演员-评论家方法。《神经信息处理系统进展》，35:4385-4400，2022年。


[66] Tianbao Xie, Danyang Zhang, Jixuan Chen, Xiaochuan Li, Siheng Zhao, Ruisheng Cao, Toh Jing Hua, Zhoujun Cheng, Dongchan Shin, Fangyu Lei, et al. Osworld: Benchmarking multimodal agents for open-ended tasks in real computer environments. arXiv preprint arXiv:2404.07972, 2024.
[66] 谢天宝，张丹阳，陈继轩，李晓川，赵思恒，曹瑞升，卓靖华，程周俊，申东灿，雷方宇 等。Osworld：在真实计算机环境中对多模态代理执行开放式任务的基准测试。arXiv预印本 arXiv:2404.07972，2024年。


[67] An Yan, Zhengyuan Yang, Wanrong Zhu, Kevin Lin, Linjie Li, Jianfeng Wang, Jianwei Yang, Yiwu Zhong, Julian McAuley, Jianfeng Gao, Zicheng Liu, and Lijuan Wang. GPT-4V in wonderland: Large multimodal models for zero-shot smartphone GUI navigation. arXiv preprint arXiv:2311.07562, 2023.
[67] 安安，杨正远，朱万荣，林凯文，李林杰，王建峰，杨建伟，钟义武，Julian McAuley，高建峰，刘子成，和王丽娟。GPT-4V奇境：用于零样本智能手机GUI导航的大型多模态模型。arXiv预印本 arXiv:2311.07562，2023年。


[68] Jianwei Yang, Hao Zhang, Feng Li, Xueyan Zou, Chunyuan Li, and Jianfeng Gao. Set-of-mark prompting unleashes extraordinary visual grounding in gpt-4v, 2023.
[68] 杨建伟，张昊，李峰，邹雪艳，李春元，和高建峰。集合标记提示释放GPT-4V中卓越的视觉定位能力，2023年。


[69] Zhao Yang, Jiaxuan Liu, Yucheng Han, Xin Chen, Zebiao Huang, Bin Fu, and Gang Yu. AppAgent: Multimodal agents as smartphone users. arXiv preprint arXiv:2312.13771, 2023.
[69] 赵阳，刘嘉轩，韩宇成，陈昕，黄泽彪，傅斌，和余刚。AppAgent：作为智能手机用户的多模态代理。arXiv预印本 arXiv:2312.13771，2023年。


[70] Shunyu Yao, Howard Chen, John Yang, and Karthik Narasimhan. Webshop: Towards scalable real-world web interaction with grounded language agents. Advances in Neural Information Processing Systems, 35:20744-20757, 2022.
[70] 姚顺宇，陈豪，杨健，和 Karthik Narasimhan。Webshop：迈向具备落地语言代理的可扩展真实网络交互。《神经信息处理系统进展》，35:20744-20757，2022年。


[71] Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Tom Griffiths, Yuan Cao, and Karthik Narasimhan. Tree of thoughts: Deliberate problem solving with large language models. Advances in Neural Information Processing Systems, 36, 2024.
[71] 姚顺宇，余点，赵杰弗里，Izhak Shafran，Tom Griffiths，曹元，和 Karthik Narasimhan。思维树：利用大型语言模型进行深思熟虑的问题解决。《神经信息处理系统进展》，36，2024年。


[72] Shunyu Yao, Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Karthik Narasimhan, and Yuan Cao. ReAct: Synergizing reasoning and acting in language models. In International Conference on Learning Representations (ICLR), 2023.
[72] Shunyu Yao, Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Karthik Narasimhan, and Yuan Cao. ReAct：在语言模型中协同推理与行动。发表于国际学习表征会议（ICLR），2023年。


[73] Chaoyun Zhang, Liqun Li, Shilin He, Xu Zhang, Bo Qiao, Si Qin, Minghua Ma, Yu Kang, Qingwei Lin, Saravan Rajmohan, et al. UFO: A UI-focused agent for Windows OS interaction. arXiv preprint arXiv:2402.07939, 2024.
[73] Chaoyun Zhang, Liqun Li, Shilin He, Xu Zhang, Bo Qiao, Si Qin, Minghua Ma, Yu Kang, Qingwei Lin, Saravan Rajmohan, 等。UFO：面向Windows操作系统交互的用户界面代理。arXiv预印本 arXiv:2402.07939，2024年。


[74] Boyuan Zheng, Boyu Gou, Jihyung Kil, Huan Sun, and Yu Su. GPT-4V(ision) is a generalist web agent, if grounded. arXiv preprint arXiv:2401.01614, 2024.
[74] Boyuan Zheng, Boyu Gou, Jihyung Kil, Huan Sun, and Yu Su. GPT-4V(ision) 是一个通用的网络代理，前提是有基础支持。arXiv预印本 arXiv:2401.01614，2024年。


[75] Longtao Zheng, Rundong Wang, Xinrun Wang, and Bo An. Synapse: Trajectory-as-exemplar prompting with memory for computer control. In ICLR, 2024.
[75] Longtao Zheng, Rundong Wang, Xinrun Wang, and Bo An. Synapse：基于轨迹示例的提示与记忆用于计算机控制。发表于ICLR，2024年。


[76] Shuyan Zhou, Frank F. Xu, Hao Zhu, Xuhui Zhou, Robert Lo, Abishek Sridhar, Xianyi Cheng, Yonatan Bisk, Daniel Fried, Uri Alon, et al. WebArena: A realistic web environment for building autonomous agents. arXiv preprint arXiv:2307.13854, 2023.
[76] Shuyan Zhou, Frank F. Xu, Hao Zhu, Xuhui Zhou, Robert Lo, Abishek Sridhar, Xianyi Cheng, Yonatan Bisk, Daniel Fried, Uri Alon, 等。WebArena：用于构建自主代理的真实网页环境。arXiv预印本 arXiv:2307.13854，2023年。


## Appendix
## 附录


Table of Contents
目录


A General Implementation 21
A 通用实现 21


B Red Dead Redemption II 23
B 荒野大镖客2 23


B.1 Introduction to RDR2 23
B.1 荒野大镖客2简介 23


B. 2 Objectives 23
B.2 目标 23


B.3 Implementation Details 25
B.3 实现细节 25


B.4 Case Studies 29
B.4 案例研究 29


B.5 Limitations of GPT-4o and GPT-4V 32
B.5 GPT-4o和GPT-4V的局限性 32


C Stardew Valley 35
C 星露谷物语 35


C. 1 Introduction to Stardew Valley 35
C.1 星露谷物语简介 35


C. 2 Objectives 35
C. 2 目标 35


C. 3 Implementation Details 36
C. 3 实施细节 36


C. 4 Case Studies 38
C. 4 案例研究 38


C. 5 Limitations of GPT-4o 39
C. 5 GPT-4o的局限性 39


D Dealer's Life 2 39
D Dealer's Life 2 39


D. 1 Introduction to Dealer's Life 2 39
D. 1 Dealer's Life 2简介 39


D. 2 Objectives 40
D. 2 目标 40


D. 3 Implementation Details 40
D. 3 实施细节 40


D. 4 Case Studies 41
D. 4 案例研究 41


D.5 Quantitative Evaluation 43
D.5 定量评估 43


D. 6 Evaluation Metrics 43
D. 6 评估指标 43


E Cities: Skylines 45
E Cities: Skylines 45


E.1 Introduction to Cities: Skylines 45
E.1 Cities: Skylines简介 45


E.2 Objectives 46
E.2 目标 46


E.3 Evaluation Metric 46
E.3 评估指标 46


E. 4 Implementation Details 47
E. 4 实施细节 47


E.5 Case Studies 50
E.5 案例研究 50


F Software Applications 52
F 软件应用 52


F.1 Selected Software Applications 52
F.1 选定的软件应用 52


F. 2 Software Tasks 52
F.2 软件任务 52


F.3 Quantitative Evaluation 53
F.3 定量评估 53


F.4 Implementation Details 56
F.4 实现细节 56


F.5 Case Studies 60
F.5 案例研究 60


F. 6 Limitations of GPT-40 62
F.6 GPT-40的局限性 62


G OSWorld 63
G OSWorld 63


G.1 Introduction to OSWorld 63
G.1 OSWorld简介 63


G.2 OSWorld Tasks 63
G.2 OSWorld任务 63


G.3 Implementation Details 64
G.3 实现细节 64


G.4 Application Target and Setting Challenges 65
G.4 应用目标与设置挑战 65


G.5 Case Studies 66
G.5 案例研究 66


G.6 Quantitative Evaluation 66
G.6 定量评估 66


H Cradle Prompts 68
H Cradle提示 68


H. 1 Prompts for RDR2 68
H. 1 RDR2 的提示 68


H.2 Prompts for Cities: Skylines 78
H.2 Cities: Skylines 的提示 78


H. 3 Prompts for Stardew Valley 85
H. 3 Stardew Valley 的提示 85


H. 4 Prompts for Dealer's Life 2 104
H. 4 Dealer's Life 2 的提示 104


H. 5 Prompts for Software Applications 109
H. 5 软件应用的提示 109


## A General Implementation
## 一般实现


Here we introduce the general implementation details of CRADLE. For specialized implementations addressing issues unique to their own environment, please refer to the corresponding section.
这里介绍 CRADLE 的一般实现细节。针对各自环境特有问题的专门实现，请参阅相应章节。


Backbone Model. We employ GPT-40 [43], currently one of the most capable LMM models, as the framework's backbone model. If not mentioned explicitly, all the experiments are done with gpt-40-2024-05-13. Temperature is set to 0 to lower the variance of the text generation.
骨干模型。我们采用 GPT-40 [43]，目前最强大的大型多模态模型（LMM）之一，作为框架的骨干模型。除非特别说明，所有实验均使用 gpt-40-2024-05-13。温度参数设为0，以降低文本生成的方差。


Observation Space. CRADLE only takes a video clip, which records the progress of execution of the last action, as input. To lower the frequency of interaction with backbone models and reduce the strain on the computer, video is recorded at 2 fps (a screenshot every 0.5 seconds), which proves to be sufficient in most cases for information gathering without missing any important information.
观测空间。CRADLE 仅以视频片段作为输入，该视频记录了上一次动作执行的进展。为降低与骨干模型的交互频率及减轻计算机负担，视频以2帧每秒录制（每0.5秒截屏一次），在大多数情况下足以收集信息且不遗漏重要内容。


Action Space. For the action space, it includes all possible keyboard and mouse operations, including key_press, key_hold, key_release, mouse_move, mouse_click, mouse_hold, mouse_release, and wheel_scroll, which can be combined in different ways to form combos and shortcuts, use keys in fast sequence, or coordinate timings. We choose to use Python code to simulate these operations and encapsulate them into an io_env class. Skill code needs to be generated by the agent in order to utilize such functions and affordances so executed actions take effect. Table 7 illustrates CRADLE's action space.
动作空间。动作空间包括所有可能的键盘和鼠标操作，如按键按下（key_press）、按键保持（key_hold）、按键释放（key_release）、鼠标移动（mouse_move）、鼠标点击（mouse_click）、鼠标按住（mouse_hold）、鼠标释放（mouse_release）和滚轮滚动（wheel_scroll），这些操作可组合形成连招和快捷键，快速连续使用按键，或协调时序。我们选择用 Python 代码模拟这些操作，并封装成 io_env 类。代理需生成技能代码以利用这些功能和操作，从而使执行的动作生效。表7展示了 CRADLE 的动作空间。


Table 7: Action space in the CRADLE framework, including action attributes. Coordinate system is either absolute or relative. Actions with durations can be either synchronous or asynchronous
表7：CRADLE 框架中的动作空间及动作属性。坐标系可为绝对或相对。带持续时间的动作可为同步或异步


<table><tr><td>Type</td><td>Action</td><td>Attributes</td></tr><tr><td rowspan="6">Keyboard</td><td>Key Press</td><td>Key name (string), <br> Key press duration (seconds:float)</td></tr><tr><td>Key Hold</td><td>Key name (string)</td></tr><tr><td>Key Release</td><td>Key name (string)</td></tr><tr><td>Key Combo</td><td>Key names (strings), <br> Key combo duration (seconds:float), Wait behaviour (sync/async)</td></tr><tr><td>Hotkey</td><td>Key names (strings), <br> Hotkey sequence duration (seconds:float), Wait behaviour (sync/async)</td></tr><tr><td>Text Type</td><td>String to type (string), <br> Typing duration (seconds:float)</td></tr><tr><td rowspan="5">Mouse</td><td>Button Click</td><td>Mouse button (left/middle/right), <br> Button click duration (seconds:float)</td></tr><tr><td>Button Hold</td><td>Mouse button (left/middle/right)</td></tr><tr><td>Button Release</td><td>Mouse button (left/middle/right)</td></tr><tr><td>Move</td><td>Mouse position (width:int, height:int), Mouse speed (seconds:float), <br> Coordinate system (relative/absolute), Tween mode (enum) ${}^{3}$</td></tr><tr><td>Scroll</td><td>Orientation (vertical), <br> Distance (pixels:int), <br> Duration (seconds:float)</td></tr><tr><td>Wait</td><td>Noop</td><td>-</td></tr></table>
<table><tbody><tr><td>类型</td><td>动作</td><td>属性</td></tr><tr><td rowspan="6">键盘</td><td>按键按下</td><td>按键名称（字符串），<br/>按键按下持续时间（秒：浮点数）</td></tr><tr><td>按键保持</td><td>按键名称（字符串）</td></tr><tr><td>按键释放</td><td>按键名称（字符串）</td></tr><tr><td>按键组合</td><td>按键名称（字符串），<br/>按键组合持续时间（秒：浮点数），等待行为（同步/异步）</td></tr><tr><td>快捷键</td><td>按键名称（字符串），<br/>快捷键序列持续时间（秒：浮点数），等待行为（同步/异步）</td></tr><tr><td>文本输入</td><td>输入字符串（字符串），<br/>输入持续时间（秒：浮点数）</td></tr><tr><td rowspan="5">鼠标</td><td>按钮点击</td><td>鼠标按钮（左/中/右），<br/>按钮点击持续时间（秒：浮点数）</td></tr><tr><td>按钮保持</td><td>鼠标按钮（左/中/右）</td></tr><tr><td>按钮释放</td><td>鼠标按钮（左/中/右）</td></tr><tr><td>移动</td><td>鼠标位置（宽度：整数，高度：整数），鼠标速度（秒：浮点数），<br/>坐标系（相对/绝对），缓动模式（枚举）${}^{3}$</td></tr><tr><td>滚动</td><td>方向（垂直），<br/>距离（像素：整数），<br/>持续时间（秒：浮点数）</td></tr><tr><td>等待</td><td>无操作</td><td>-</td></tr></tbody></table>


It is important to note that, while some works (e.g., AssistantGUI [18], OmniACT [27] and OS-World [66]) use PyAutoGUI ${}^{4}$ for keyboard and mouse control,this approach does not work in all applications,particularly in modern video games using DirectX ${}^{5}$ . Moreover,such work chooses to
需要注意的是，虽然一些工作（例如 AssistantGUI [18]、OmniACT [27] 和 OS-World [66]）使用 PyAutoGUI ${}^{4}$ 进行键盘和鼠标控制，但这种方法并不适用于所有应用，尤其是使用 DirectX ${}^{5}$ 的现代视频游戏。此外，这些工作选择


---



${}^{4}$ Python library that provides a cross-platform GUI automation module - https://github.com/ asweigart/pyautogui
${}^{4}$ 提供跨平台 GUI 自动化模块的 Python 库 - https://github.com/ asweigart/pyautogui


${}^{5}$ Microsoft DirectX graphics provides a set of APIs for high-performance multimedia apps - https:// learn.microsoft.com/en-us/windows/win32/directx
${}^{5}$ 微软 DirectX 图形提供了一套用于高性能多媒体应用的 API - https:// learn.microsoft.com/en-us/windows/win32/directx


---



expose a subset of the library functionality in its action space, ignoring dimensions like press duration and movement speed, which are critical in many scenarios (e.g., RDR2, for opening the weapon wheel and changing view).
在其动作空间中仅暴露库功能的子集，忽略了按键持续时间和移动速度等维度，而这些在许多场景中（例如 RDR2 中打开武器轮盘和切换视角）至关重要。


To ensure wide game and software compatibility and accommodate different operating systems, in our current implementation we use the similar PyDirectInput library ${}^{6}$ and PyAutoGUI for keyboard control,utilize ${AH}{K}^{7}$ and write our own abstraction (using the ctypes library ${}^{8}$ ) to send low-level mouse commands to the operating system for mouse control. For increased portability and ease of maintenance, all keyboard and mouse control is encapsulated in a class, called IO_env.
为了确保广泛的游戏和软件兼容性并适应不同操作系统，在我们当前的实现中，我们使用类似的 PyDirectInput 库 ${}^{6}$ 和 PyAutoGUI 进行键盘控制，利用 ${AH}{K}^{7}$ 并编写自己的抽象层（使用 ctypes 库 ${}^{8}$）向操作系统发送低级鼠标命令以实现鼠标控制。为了提高可移植性和维护便利性，所有键盘和鼠标控制都封装在一个名为 IO_env 的类中。


Notably, our low-level control wrapper is adapted for both MacOS and Windows systems, making the OS transparent to us. At the software window level, we implemented automatic switching between the target software window and the window running the agent (using Python ctypes for Windows and AppleScript for MacOS ${}^{9}$ ).
值得注意的是，我们的低级控制封装适配了 MacOS 和 Windows 系统，使操作系统对我们透明。在软件窗口层面，我们实现了目标软件窗口与运行代理窗口之间的自动切换（Windows 使用 Python ctypes，MacOS 使用 AppleScript ${}^{9}$）。


Procedure Memory. This memory stores pre-defined basic skills and the generated skills captured from the Skill Curation. However, as we continuously obtain new skills during game playing, the number of skills in procedural memory keeps increasing, and it is hard for GPT-40 to precisely select the most suitable skill from the large memory. Thus, similar to Voyager [57], we use OpenAI's text-embedding-ada-002 model [42] to generate embeddings for each skill and store pre-defined basic skills and any generated skills captured from Skill Curation, along with their embeddings in a procedural memory. We retrieve a subset of skills, that are relevant to the given task, and then let GPT-40 select the most suitable one from the subset. In the skill retrieval, we pre-compute the embeddings of the documentations (code, comments and descriptions) of skill functions, which describe the skill functionality, and compute the embedding of the given task. Then we compute the cosine similarities between the skill documentation embeddings and the task embedding. The higher similarity means that the skill's functionality is more relevant to the given task. We select the top K skills with the highest similarities as the subset. Using similarity matching to select a small candidate set simplifies the process of choosing skills.
过程记忆。该记忆存储预定义的基础技能和从技能策划中捕获的生成技能。然而，随着游戏进行中不断获得新技能，过程记忆中的技能数量持续增加，GPT-40 很难从庞大的记忆中精确选择最合适的技能。因此，类似于 Voyager [57]，我们使用 OpenAI 的 text-embedding-ada-002 模型 [42] 为每个技能生成嵌入，并将预定义基础技能及从技能策划捕获的生成技能连同其嵌入存储在过程记忆中。我们检索与给定任务相关的技能子集，然后让 GPT-40 从该子集中选择最合适的技能。在技能检索中，我们预先计算技能函数文档（代码、注释和描述）的嵌入，这些文档描述了技能功能，并计算给定任务的嵌入。随后计算技能文档嵌入与任务嵌入之间的余弦相似度。相似度越高，说明技能功能与给定任务越相关。我们选择相似度最高的前 K 个技能作为子集。使用相似度匹配选择小的候选集简化了技能选择过程。


Episodic Memory. This memory stores all the useful information provided by the environment and LMM, which consists of short-term memory and long-term summary.
情景记忆。该记忆存储环境和大规模语言模型（LMM）提供的所有有用信息，包含短期记忆和长期摘要。


The short-term memory stores the screenshots within the recent $\mathrm{k}$ interactions in game playing and the corresponding information from other modules, e.g., screenshot descriptions, task guidance, actions, and reasoning. We set $\mathrm{k}$ to five,and it can be regarded as the memory length. Information stored over $\mathrm{k}$ interactions ago will be forgotten from direct short-term memory. Empirically,we found that recent information is crucial for decision-making, while a too-long memory length would cause hallucinations. In addition, other modules continuously retrieve recent information from short-term memory and update the short-term memory by storing the newest information.
短期记忆存储最近 $\mathrm{k}$ 次游戏交互中的截图及其他模块对应的信息，例如截图描述、任务指导、动作和推理。我们设置 $\mathrm{k}$ 为五，可视为记忆长度。超过 $\mathrm{k}$ 次交互之前的信息将从直接短期记忆中遗忘。经验表明，近期信息对决策至关重要，而过长的记忆长度会导致幻觉。此外，其他模块持续从短期记忆中检索近期信息，并通过存储最新信息更新短期记忆。


For some long-horizon tasks, short-term memory is not enough. This is because the completion of a long-horizon task might require historical information from a long steps ago. For example, the agent might do a series of short-horizon tasks during a long-horizon task, which makes the original long-horizon task forgotten in short-term memory. To maintain the long-term valuable information while avoiding the long-token burden of GPT-4o, we propose a recurrent information summary as long-term memory, which is the text summarization of experiences in game playing, including the ongoing task, the past entities that the player met, and the past behaviors of the player and NPCs.
对于一些长时间跨度的任务，短期记忆不足以应对。这是因为完成长时间跨度任务可能需要很久之前的历史信息。例如，代理可能在执行长时间跨度任务期间完成一系列短时间跨度任务，这会导致原始长时间跨度任务在短期记忆中被遗忘。为保持长期有价值的信息，同时避免 GPT-40 的长令牌负担，我们提出了递归信息摘要作为长期记忆，即对游戏体验的文本总结，包括当前任务、玩家遇到的过去实体以及玩家和 NPC 的过去行为。


In more detail, we provide GPT-4o with the summarization before the current screenshot and the recent screenshots with corresponding descriptions, and GPT-4o will make a new summarization by organizing the tasks, entities, and behaviors in the time order with sentence number restriction. Then we update the summarization to be the newly generated one, which includes the information in
更具体地，我们在当前截图之前向 GPT-40 提供摘要和最近截图及其对应描述，GPT-40 将通过按时间顺序组织任务、实体和行为并限制句子数来生成新的摘要。然后我们将摘要更新为新生成的版本，其中包含


---



${}^{6}$ Python library encapsulating Microsoft’s DirectInput calls for convenience manipulating keyboard keys - https://github.com/learncodebygaming/pydirectinput
${}^{6}$ 封装微软DirectInput调用的Python库，方便操作键盘按键 - https://github.com/learncodebygaming/pydirectinput


${}^{7}$ A fully typed Python wrapper around AutoHotkey to keyboard and mouse control - https://github.com/spyoungtech/ahk
${}^{7}$ 基于AutoHotkey的全类型Python封装，用于键盘和鼠标控制 - https://github.com/spyoungtech/ahk


${}^{8}$ Python library that provides C compatible data types,and allows calling functions in DLL/.so binaries - https://docs.python.org/3/library/ctypes.html
${}^{8}$ 提供C兼容数据类型并允许调用DLL/.so二进制函数的Python库 - https://docs.python.org/3/library/ctypes.html


${}^{9}$ AppleScript is a scripting language created by Apple,which allows users to directly control scriptable applications, as well as parts of MacOS - https://developer.apple.com/library/archive/documentation/ AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html
${}^{9}$ AppleScript是苹果公司开发的一种脚本语言，允许用户直接控制可脚本化应用程序及MacOS部分功能 - https://developer.apple.com/library/archive/documentation/ AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html


---



the current screenshot. The recurrent summarization update, inspired by RNN, achieves linear-time inference by preserving a hidden state that encapsulates historical input. This method ensures the compactness of summarization token lengths and recent input data. Furthermore, the incorporation of long-term memory enables the agent to effectively retain crucial information over extended periods, thereby enhancing decision-making capabilities.
当前截图。受循环神经网络（RNN）启发的递归摘要更新，通过保留封装历史输入的隐藏状态，实现线性时间推理。该方法确保摘要标记长度和近期输入数据的紧凑性。此外，长时记忆的引入使代理能够有效保留关键长时间信息，从而增强决策能力。


Information Gathering. Given the video clip as input, we mainly depend on GPT-4o's OCR capabilities to extract textual information in the keyframes, which usually contain critical guidance and notifications for the current situation. We also rely on GPT-4o's visual understanding to analyze the visual information in the frames. Besides, we augment LMMs' visual understanding via some tools, like template matching [8], Grounding DINO [35], and SAM [29], to provide additional grounding for object detection and segmentation. Some visual prompting tricks, like drawing axes and colorful directional bands, are also applied to enhance the GPT-4o's visual ability.
信息收集。以视频片段为输入，我们主要依赖GPT-4o的OCR能力提取关键帧中的文本信息，这些信息通常包含当前情境的重要指引和通知。我们还依赖GPT-4o的视觉理解分析帧中的视觉信息。此外，我们通过一些工具如模板匹配[8]、Grounding DINO[35]和SAM[29]增强大规模模型（LMMs）的视觉理解，为目标检测和分割提供额外的定位支持。还应用了一些视觉提示技巧，如绘制坐标轴和彩色方向带，以提升GPT-4o的视觉能力。


Task Inference. After reflecting on the outcome of the last executed action, We let GPT-4o analyze the current situation to infer the most suitable task for the current moment and estimate the highest priority task to perform and when to stop an ongoing task and start a new one.
任务推断。在反思上一次执行动作的结果后，我们让GPT-4o分析当前情境，推断当前最合适的任务，评估执行优先级最高的任务，以及何时停止正在进行的任务并开始新任务。


Skill Curation. GPT-40 is required to strictly follow the provided interfaces and examples to generate the corresponding code for new skills. Moreover, GPT-40 is required to include documentation/comments within the generated code, delineating the functionality of each skill. Procedural Memory where skills are stored will then check whether the code is valid, whether the format of documentation is right, and whether any skill with the same name already exists. If all conditions are passed, the newly generated skill is persisted for future utilization.
技能策划。要求GPT-40严格遵循提供的接口和示例生成新技能的对应代码。此外，GPT-40需在生成代码中包含文档/注释，说明每个技能的功能。存储技能的过程记忆将检查代码有效性、文档格式是否正确及是否存在同名技能。若所有条件满足，则新生成的技能将被保存以供后续使用。


Action Planning. GPT-40 needs to select the appropriate skills from the curated skill set and instantiate these skills into a sequence of executable actions by specifying any necessary parametric aspects (e.g., duration, position, and target) according to the current task and history information. The generated action is then fed to the Executor for interaction with the environment.
动作规划。GPT-40需从策划的技能集中选择合适技能，并根据当前任务和历史信息，通过指定必要的参数（如持续时间、位置和目标）将这些技能实例化为可执行动作序列。生成的动作随后交由执行器与环境交互。


## B Red Dead Redemption II
## B 荒野大镖客救赎2


### B.1 Introduction to RDR2
### B.1 RDR2简介


Red Dead Redemption II (RDR2) is an epic AAA Western-themed action-adventure game by Rockstar Games. As one of the most famous and highest-selling games in the world, it is widely acknowledged for its movie-like realistic scenes, rich storylines, and immersive open-ended world. The game applies a typical role-playing game (RPG) control system, played from a first- or third-person perspective, which uses WASD for movement, mouse control for view changing, first- or third-person shooting for combat, and inventory and manipulation.
《荒野大镖客救赎2》（Red Dead Redemption II，简称RDR2）是Rockstar Games出品的一款史诗级AAA西部题材动作冒险游戏。作为全球最著名且销量最高的游戏之一，它以电影般逼真的场景、丰富的剧情和沉浸式开放世界著称。游戏采用典型的角色扮演游戏（RPG）控制系统，支持第一人称或第三人称视角，使用WASD键移动，鼠标控制视角切换，第一或第三人称射击进行战斗，以及物品栏和操作管理。


For most of the game, players need to control the main character, Arthur Morgan, upon choosing to complete mission scenarios following the main storyline. Otherwise, they can freely explore the interactive world, such as going hunting, fishing, chatting with non-player characters (NPCs), training horses, witnessing or partaking in random events, and participating in side quests. As the main storyline progresses, different skills are gradually unlocked. As a close-source commercial game, no APIs are available for obtaining additional game-internal information nor pre-defined automation actions. Following its characteristics, this game serves as a fitting and challenging environment for the GCC setting and a comprehensive benchmark for embodiment.
游戏大部分时间，玩家需控制主角亚瑟·摩根（Arthur Morgan），选择完成主线剧情任务。否则，玩家可自由探索互动世界，如狩猎、钓鱼、与非玩家角色（NPC）交谈、训练马匹、目睹或参与随机事件及支线任务。随着主线推进，不同技能逐步解锁。作为闭源商业游戏，无法通过API获取额外游戏内部信息或预定义自动化操作。基于其特性，该游戏为GCC环境提供了合适且具挑战性的测试场景，也是体现能力的综合基准。


### B.2 Objectives
### B.2 目标


In Chapter 1 of RDR2, the first two missions of the main storyline are Outlaws from the West and Enter, Pursued by a Memory. These missions serve as the tutorial content for RDR2, guiding players step-by-step into the role of Arthur. They immerse the player in the story's development while teaching the game's controls and mechanics.
在RDR2第一章中，主线的前两个任务分别是《西部亡命徒》和《进入，被记忆追逐》。这些任务作为RDR2的教程内容，逐步引导玩家进入亚瑟的角色，沉浸于故事发展，同时教授游戏的操作和机制。


We divided Mission 1 and Mission 2 into 8 and 5 tasks respectively based on the checkpoints within each mission. Each checkpoint may present failure scenarios. For example, in Mission 1, there are six failure scenarios: i) Assaults, kills, or abandons Dutch or Micah; ii) Allows Dutch or Micah to be killed; iii) Abandons the homestead; iv) Assaults, kills, or abandons their horse; v) Assaults, kills, or
我们根据每个任务中的检查点，将任务1和任务2分别划分为8个和5个子任务。每个检查点可能会出现失败场景。例如，在任务1中，有六种失败场景：i) 攻击、杀害或遗弃Dutch或Micah；ii) 允许Dutch或Micah被杀；iii) 遗弃家园；iv) 攻击、杀害或遗弃他们的马；v) 攻击、杀害或


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_23.jpg?x=368&y=203&w=1065&h=415&r=0"/>



Figure 12: Trajectory and success rates of 13 main storyline tasks and 1 open-world task in RDR2.
图12：RDR2中13个主线任务和1个开放世界任务的轨迹及成功率。


abandons the horse in the barn; vi) Dies. We categorized each sub-task as either "Easy" or "Hard" based on the likelihood of failure at each checkpoint and the need to retry the checkpoint.
遗弃马厩中的马；vi) 死亡。我们根据每个检查点失败的可能性及是否需要重试，将每个子任务分类为“简单”或“困难”。


To evaluate CRADLE's capabilities in an open-world environment, Mission 3 is designed as a hard open-ended task. Unlike the first two tutorial missions, it does not include any checkpoints. Consequently, the entire Mission 3 is treated as a single, comprehensive task. Although we do not subdivide Mission 3 into finer tasks, we aim to identify key points to facilitate a clearer understanding of Mission 3 for the reader.
为了评估CRADLE在开放世界环境中的能力，任务3被设计为一个困难的开放式任务。与前两个教程任务不同，它不包含任何检查点。因此，整个任务3被视为一个完整的综合任务。虽然我们没有将任务3细分为更小的任务，但我们旨在识别关键点，以便读者更清晰地理解任务3。


Tables 8 and 9 provide a brief introduction of each task in the first two missions of the main storyline and an open-ended mission, along with approximate estimates of their difficulty. Due to GPT-40's poor performance in spatial understanding and fine-manipulation skills, it can be challenging for our agent to perform certain actions, like entering or leaving a building, or going to precise indoor locations to retrieve specific items. Additionally, the high latency of GPT-40's responses also makes it harder for an agent to deal with time-sensitive events, e.g., during combat.
表8和表9简要介绍了主线前两个任务和一个开放式任务中的各个子任务，并给出了难度的近似估计。由于GPT-40在空间理解和精细操作技能方面表现较差，我们的代理在执行某些动作时可能会遇到困难，比如进入或离开建筑物，或前往精确的室内位置取回特定物品。此外，GPT-40响应的高延迟也使代理更难应对时间敏感事件，例如战斗期间。


Table 8: Tasks in the first two missions of RDR2. In the tutorial guide, the prompt text Start Dialogue signifies the end of the previous checkpoint and the beginning of the current checkpoint. Difficulty refers to how hard to accomplish the corresponding tasks. Figures 13 and 14 showcase snapshots of each task (specific sub-figures marked in parenthesis in the table). The maximal number of steps (agent takes one action) for each task is 500.
表8：RDR2前两个任务中的子任务。在教程指南中，提示文本“开始对话”表示前一个检查点结束和当前检查点开始。难度指完成相应任务的难易程度。图13和图14展示了每个任务的快照（表中括号内标注具体子图）。每个任务的最大步骤数（代理执行一次动作）为500步。


<table><tr><td>Mission 1: Outlaws from the West</td><td>Description</td><td>Start Dialogue</td><td>Difficulty</td></tr><tr><td>Follow Dutch (Fig. 13a)</td><td>Arthur follows Dutch on horseback into the snow to find their scouting gang members.</td><td>Use [W] to Follow Dutch</td><td>Easy</td></tr><tr><td>Go to Town (Fig. 13b)</td><td>Arthur rides his horse, following Micah to the vicinity of a little homestead Micah discovered.</td><td>Hold [W] to match speed with Dutch and Micah</td><td>Easy</td></tr><tr><td>Hitch Horse (Fig. 13c)</td><td>Arthur hitches the horse to the hitching post, then goes to the old shed and takes cover.</td><td>Hold [E] to hitch your horse</td><td>Easy</td></tr><tr><td>Protect Dutch (Fig. 13d)</td><td>Arthur uses his gun to shoot all of the O'Driscolls inhabiting the house and protect Dutch.</td><td>Use [W] to peak out of cover</td><td>Hard</td></tr><tr><td>Search for Supplies (Fig. 13e)</td><td>Arthur follows Dutch to the house to search for supplies.</td><td>Hold [R] near items to pick the up while searching house.</td><td>Hard</td></tr><tr><td>Go to Barn (Fig. 13f)</td><td>Arthur follows Dutch's directions and goes to the barn to see if there's anything inside.</td><td>Dutch: Micah, Arthur, keep looking for stuff</td><td>Easy</td></tr><tr><td>Search Barn (Fig. 13g)</td><td>Arthur searches the barn and defeats the O'Driscoll hiding inside.</td><td>[F] Attack the O'Driscoll</td><td>Hard</td></tr><tr><td>Lead Horse (Fig. 13h)</td><td>Arthur calms the horse and takes it out of the barn.</td><td>Hold [Right Mouse Button] to focus on the horse</td><td>Easy</td></tr><tr><td>Mission 2: Enter, Pursued by a Memory</td><td>Description</td><td>Start Dialogue</td><td>Difficulty</td></tr><tr><td>Follow Javier (Fig. 14a)</td><td>Arthur rides his horse following Javier up the mountain through the blizzard searching for John's trail.</td><td>Follow Javier</td><td>Hard</td></tr><tr><td>Search John (Fig. 14b)</td><td>After dismounting, Arthur followed Javier over slopes and ledges to find John and carry him away.</td><td>Javier: Down this way</td><td>Hard</td></tr><tr><td>Keep Wolves away (Fig. 14c)</td><td>Arthur manages to shoot all of the wolves before they can attack Javier and John.</td><td>Keep the wolves away from Javier and John</td><td>Hard</td></tr><tr><td>Kill Wolves (Fig. 14d)</td><td>Three people ride horses down the mountain. Arthur eliminate the wolves, protecting Javier and John ahead.</td><td>Javier: Come on, let's get back to the others</td><td>Hard</td></tr><tr><td>Return to Camp (Fig. 14e)</td><td>Arthur followed Javier on horseback back to camp.</td><td>Yea...c'mon. Let's push hard and get back</td><td>Easy</td></tr></table>
<table><tbody><tr><td>任务1：来自西部的亡命之徒</td><td>描述</td><td>开始对话</td><td>难度</td></tr><tr><td>跟随Dutch（图13a）</td><td>Arthur骑马跟随Dutch进入雪地，寻找他们的侦察队成员。</td><td>使用[W]跟随Dutch</td><td>简单</td></tr><tr><td>前往城镇（图13b）</td><td>Arthur骑马跟随Micah来到Micah发现的小农舍附近。</td><td>按住[W]以与Dutch和Micah保持同速</td><td>简单</td></tr><tr><td>拴马（图13c）</td><td>Arthur将马拴在拴马桩上，然后走到旧棚子里躲藏。</td><td>按住[E]拴马</td><td>简单</td></tr><tr><td>保护Dutch（图13d）</td><td>Arthur用枪射击屋内所有O'Driscoll帮派成员，保护Dutch。</td><td>使用[W]从掩体中探出头</td><td>困难</td></tr><tr><td>搜寻补给（图13e）</td><td>Arthur跟随Dutch到房子里搜寻补给。</td><td>靠近物品时按住[R]拾取，搜寻房屋时使用</td><td>困难</td></tr><tr><td>前往谷仓（图13f）</td><td>Arthur按照Dutch的指示前往谷仓，查看里面是否有物品。</td><td>Dutch：Micah，Arthur，继续找东西</td><td>简单</td></tr><tr><td>搜查谷仓（图13g）</td><td>Arthur搜查谷仓并击败藏在里面的O'Driscoll帮派成员。</td><td>[F] 攻击O'Driscoll</td><td>困难</td></tr><tr><td>牵马（图13h）</td><td>Arthur安抚马匹，将其牵出谷仓。</td><td>按住[鼠标右键]聚焦马匹</td><td>简单</td></tr><tr><td>任务2：进入，被记忆追逐</td><td>描述</td><td>开始对话</td><td>难度</td></tr><tr><td>跟随Javier（图14a）</td><td>Arthur骑马跟随Javier穿越暴风雪上山，寻找John的踪迹。</td><td>跟随Javier</td><td>困难</td></tr><tr><td>寻找John（图14b）</td><td>下马后，Arthur跟随Javier穿过山坡和悬崖，找到John并将他带走。</td><td>Javier：这边走</td><td>困难</td></tr><tr><td>驱赶狼群（图14c）</td><td>Arthur成功射杀所有狼群，防止它们攻击Javier和John。</td><td>保护Javier和John，驱赶狼群</td><td>困难</td></tr><tr><td>击杀狼群（图14d）</td><td>三人骑马下山，Arthur消灭狼群，保护前方的Javier和John。</td><td>Javier：快点，我们回去找其他人</td><td>困难</td></tr><tr><td>返回营地（图14e）</td><td>Arthur骑马跟随Javier返回营地。</td><td>是的……快点。我们加把劲回去</td><td>简单</td></tr></tbody></table>


Table 9: Key points in the open-ended mission, Buy Supply in RDR2. Figure 15 showcases snapshots of key points (specific sub-figures marked in parenthesis in the table).
表9：RDR2中开放式任务“购买补给”的关键点。图15展示了关键点的快照（表中括号内标注了具体子图）。


<table><tr><td>Mission 3: Buy Supply</td><td>Description</td></tr><tr><td>Find Horse (Fig. 15a)</td><td>Find and mount the horse in the camp.</td></tr><tr><td>Prepare to Navigate to Saloon (Fig. 15b)</td><td>Open map, find the saloon and create waypoint.</td></tr><tr><td>Go to Saloon (Fig. 15c)</td><td>Ride horse to the saloon.</td></tr><tr><td>Prepare to Navigate to Shop (Fig. 15d)</td><td>Open map, find the general store and create waypoint.</td></tr><tr><td>Go to Shop (Fig. 15e)</td><td>Ride horse to the shop.</td></tr><tr><td>Enter Shop (Fig. 15f)</td><td>Dismount the horse and enter the shop.</td></tr><tr><td>Talk to Shopkeeper(Fig. 15g)</td><td>Approach the shopkeeper and talk.</td></tr><tr><td>Buy Target Product (Fig. 15h)</td><td>Open the menu, find and buy the target product.</td></tr></table>
<table><tbody><tr><td>任务3：购买物资</td><td>描述</td></tr><tr><td>找到马匹（图15a）</td><td>在营地找到并骑上马。</td></tr><tr><td>准备导航到酒馆（图15b）</td><td>打开地图，找到酒馆并创建路径点。</td></tr><tr><td>前往酒馆（图15c）</td><td>骑马前往酒馆。</td></tr><tr><td>准备导航到商店（图15d）</td><td>打开地图，找到杂货店并创建路径点。</td></tr><tr><td>前往商店（图15e）</td><td>骑马前往商店。</td></tr><tr><td>进入商店（图15f）</td><td>下马并进入商店。</td></tr><tr><td>与店主交谈（图15g）</td><td>走近店主并交谈。</td></tr><tr><td>购买目标产品（图15h）</td><td>打开菜单，找到并购买目标产品。</td></tr></tbody></table>


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_24.jpg?x=322&y=602&w=1155&h=791&r=0"/>



Figure 13: Image examples of tasks in the first mission of Outlaws from the West. (The picture has been brightened for easier reading.)
图13：西部亡命徒第一任务中的图像示例。（图片已调亮以便阅读。）


### B.3 Implementation Details
### B.3 实现细节


Our experiments are based on the latest version of RDR2, 'Build 1491.50'. As shown in Figure 16, strictly following the GCC setting, our agent takes the video of the screen as input and outputs keyboard and mouse operations to interact with the computer and the game. An observation thread is responsible for the collection of video frames from the screen and each video clip records the whole in-game process since executing the last action.
我们的实验基于最新版本的《荒野大镖客2》（RDR2），“Build 1491.50”。如图16所示，严格遵循GCC设置，我们的代理以屏幕视频作为输入，输出键盘和鼠标操作以与计算机和游戏交互。一个观察线程负责从屏幕采集视频帧，每个视频片段记录自上次执行动作以来的整个游戏过程。


Information Gathering. To extract keyframes from the video observation, we utilize the VideoSub-Finder tool ${}^{10}$ , a professional subtitle discovery and extraction tool. These keyframes usually contain rich meaningful textual information in the game, which are highly relevant to the completion of tasks and missions (such as character status, location, dialogues, in-game prompts and tips, etc.) We use GPT-4o to extract and categorize all the meaningful contexts in these keyframes and perform OCR, and call this processing "gathering text information". Then, to save interactions with GPT-40, we only let GPT-4o provide a detailed description of the last frame of the video.
信息收集。为了从视频观察中提取关键帧，我们使用了VideoSub-Finder工具${}^{10}$，这是一款专业的字幕发现和提取工具。这些关键帧通常包含游戏中丰富且有意义的文本信息，与任务和使命的完成高度相关（如角色状态、位置、对话、游戏内提示等）。我们使用GPT-4o提取并分类这些关键帧中的所有有意义内容并执行OCR，将此过程称为“收集文本信息”。随后，为节省与GPT-4o的交互，我们仅让GPT-4o对视频的最后一帧提供详细描述。


While GPT-40 exhibits impressive visual understanding abilities across various CV tasks, we find that it struggles with spatial reasoning and recognizing some game-specific icons. To address these
尽管GPT-4o在多种计算机视觉任务中展现了出色的视觉理解能力，但我们发现它在空间推理和识别某些游戏特定图标方面存在困难。为了解决这些


---



${}^{10}$ VideoSubFinder standalone tool - https://sourceforge.net/projects/videosubfinder/
${}^{10}$ VideoSubFinder独立工具 - https://sourceforge.net/projects/videosubfinder/


---



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_25.jpg?x=320&y=324&w=1158&h=533&r=0"/>



Figure 14: Image examples of tasks in the second mission of Enter, Pursued by a Memory.
图14：进入“被记忆追逐”第二任务中的图像示例。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_25.jpg?x=319&y=1157&w=1160&h=796&r=0"/>



Figure 15: Image examples of key points in the open-ended task of Buy Supply.
图15：购买补给开放式任务关键点的图像示例。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_26.jpg?x=311&y=205&w=1178&h=645&r=0"/>



Figure 16: The detailed illustration of how CRADLE is instantiated as a game agent to play RDR2.
图16：CRADLE作为游戏代理玩《荒野大镖客2》的详细示意图。


limitations, we add a visual augmentation sub-module within our Information Gathering module. This augmentation step serves two main purposes: i) utilize Grounding DINO [35], an open-set object detector, to output precise bounding boxes of possible targets in an image and serve as spatial clues for GPT-40; and ii) perform template matching [8] to provide icon recognition grounding truth for GPT-4o when interpreting instructions or menus shown on screen. As LMM capabilities mature, it should be possible to disable such augmentation.
限制，我们在信息收集模块中增加了视觉增强子模块。该增强步骤主要有两个目的：一是利用Grounding DINO [35]，一种开放集目标检测器，输出图像中可能目标的精确边界框，作为GPT-4o的空间线索；二是执行模板匹配[8]，为GPT-4o在解释屏幕上显示的指令或菜单时提供图标识别的标注真值。随着大规模多模态模型（LMM）能力的成熟，未来应可关闭此类增强。


Self-Reflection. The reflection module mainly serves to evaluate whether the previously executed action was successfully carried out and whether the current executing task is finished. To achieve this, we uniformly sample at most 8 sequential frames from the video observation since the execution of the last action and use GPT-4o to estimate the success of its execution. Additionally, we expect GPT-40 can also provide analysis for any failure of the last action (e.g., the move-forward action failed and the cause could be the agent was blocked by an obstacle). With such valuable information as input for Action Planning, including the failure/success of the last action and the corresponding analysis, the agent is capable of attempting to remedy an inappropriate decision or action execution.
自我反思。反思模块主要用于评估先前执行的动作是否成功完成，以及当前执行的任务是否已完成。为此，我们从自上次动作执行以来的视频观察中均匀采样最多8帧连续图像，使用GPT-4o评估动作执行的成功与否。此外，我们期望GPT-4o还能对上次动作失败的原因进行分析（例如，前进动作失败，可能是代理被障碍物阻挡）。利用这些宝贵信息作为动作规划的输入，包括上次动作的成败及相应分析，代理能够尝试纠正不当的决策或动作执行。


Moreover, some actions require prolonged durations, such as holding down specific keys, which can coexist or interfere with other actions decided by subsequent decisions. Consequently, the reflection module must also decide whether an ongoing action should continue to be executed. Furthermore, self-reflection can be leveraged to dissect why the last action failed to bring the agent close to the target task completion, better understand the factors that led to the successful completion of the preceding task, and so on.
此外，某些动作需要较长时间持续执行，如按住特定按键，这些动作可能与后续决策决定的其他动作共存或产生干扰。因此，反思模块还必须决定是否应继续执行正在进行的动作。进一步地，自我反思可用于剖析为何上次动作未能使代理接近目标任务完成，更好地理解导致前一任务成功完成的因素等。


Besides, we observe that instead of providing GPT-40 with sequential high-resolution images for self-reflection, low-resolution images make it easier for GPT-4o to understand the relation among the sequential screenshots and capture dynamic changes, resulting in a significantly higher success rate of detecting whether the action is executed successfully and take any effect. We hypothesize that since a high-resolution image can cost as many as 2000 tokens, too many high-resolution images make GPT-4o fail to capture the overall changes across screenshots and be caught up in the local details.
此外，我们观察到，与向GPT-4o提供连续高分辨率图像进行自我反思相比，低分辨率图像更易于GPT-4o理解连续截图之间的关系并捕捉动态变化，从而显著提高检测动作是否成功执行及产生效果的成功率。我们推测，高分辨率图像可能消耗多达2000个token，过多高分辨率图像使GPT-4o难以捕捉截图间的整体变化，反而陷入局部细节。


Task Inference. During gameplay, we let GPT-4o propose the current task to perform whenever it believes it is time to start a new task. GPT-4o also outputs whether the task is a long- or short-horizon task when proposing a new task. Long-horizon tasks, such as traveling to a location, typically require multiple iterations, whereas short-horizon tasks, like picking up an item or conversing with someone, involve fewer iterations. The agent will follow the newly generated task for the next 3 interactions. After 3 interactions, the agent returns to the last long-horizon task in the stack. Deciding on a binary task horizon is much easier and more robust for GPT-4o, than re-planning at every iteration. Since
任务推断。在游戏过程中，每当GPT-4o认为是时候开始新任务时，会提出当前应执行的任务。GPT-4o还会在提出新任务时输出该任务是长周期任务还是短周期任务。长周期任务，如前往某地，通常需要多次迭代；而短周期任务，如拾取物品或与人交谈，迭代次数较少。代理将在接下来的3次交互中遵循新生成的任务。3次交互后，代理返回任务栈中的上一个长周期任务。相比每次迭代重新规划，决定二元任务周期对GPT-4o来说更简单且更稳健。由于


a long-horizon task frequently includes multiple short-horizon sub-tasks, this implementation also helps avoid forgetting the long-horizon tasks under execution.
一个长远任务通常包含多个短期子任务，这种实现方式也有助于避免在执行过程中遗忘长远任务。


Skill Curation. As shown in Figure 18, during gameplay, instructions often appear on the screen, such as "press [Q] to take over" and "hold [TAB] to view your stored weapons", which serve as essential directives for completing current and future tasks proficiently. To save interactions with GPT-40, we implement a simple version of this module inside Information Gathering to reduce interactions with GPT-4o. When GPT-4o detects and classifies some instructional text in the recent observation, which usually contains key and button hints, it will directly generate the corresponding code and description.
技能策划。如图18所示，在游戏过程中，屏幕上经常会出现指令，例如“按 [Q] 接管”和“按住 [TAB] 查看已存储武器”，这些都是完成当前及未来任务的关键指示。为了减少与GPT-4o的交互，我们在信息收集模块内实现了该模块的简化版本。当GPT-4o检测并分类最近观察到的指令文本（通常包含关键字和按键提示）时，会直接生成相应的代码和描述。


Action Planning. Upon execution of this module,we first retrieve the top $\mathrm{k}$ relevant skills for the task from procedural memory, alongside the newly generated skills. We then provide GPT-4o with the current task, the set of retrieved skills, and other information collected in Information Gathering that may be helpful for decision-making (e.g., recent screenshots with corresponding descriptions, previous decisions, and examples) and let it suggest which skills should be executed. We also request that GPT-40 provide the reasons for choosing these skills, which increases the accuracy, stability, and explainability of skill selection and thus greatly improves framework performance. While GPT-40 sometimes may generate a sequence of actions, we currently only execute the first one, and perform Self-Reflection, since we observe a tendency for the second action to usually suffer from severe hallucinations.
行动规划。执行此模块时，我们首先从程序记忆中检索与任务最相关的前$\mathrm{k}$项技能，以及新生成的技能。然后，我们将当前任务、检索到的技能集合以及在信息收集阶段获得的其他可能有助于决策的信息（例如，最近的截图及其对应描述、先前的决策和示例）提供给GPT-4o，让其建议应执行哪些技能。我们还要求GPT-4o说明选择这些技能的理由，这提高了技能选择的准确性、稳定性和可解释性，从而大幅提升了框架性能。虽然GPT-4o有时会生成一系列动作，但我们目前只执行第一个动作，并进行自我反思，因为我们观察到第二个动作通常会出现严重的幻觉问题。


Action Execution. Unlike the conventional mouse operation in standard software, where the cursor is restricted to a 2D grid and remains visible on the screen to navigate and interact with elements, the utilization of the mouse in 3D games like RDR2 introduces a varied control scheme. In menu screens, the mouse behaves traditionally, offering familiar point-and-click functionality. However, during gameplay, the mouse cursor disappears, requiring players to move the mouse according to specific action semantics. For example, to alter the character's viewpoint, the player needs to map the actual mouse movement to in-game direction angle changes, which differ in magnitude in the X and Y axes. Another special transition applies to shooting mode, where the front sight is fixed at the center of the screen, and players must maneuver the mouse to align the sight with target enemies. This nuanced approach to mouse control in different contexts adds an extra layer of challenge to general computer handling, showcasing the adaptability required in game environments, compared to regular software applications.
动作执行。与标准软件中传统的鼠标操作不同，传统软件中光标被限制在二维网格内并始终可见以便导航和交互，而在像《荒野大镖客2》（RDR2）这样的3D游戏中，鼠标的使用引入了多样化的控制方案。在菜单界面中，鼠标表现传统，提供熟悉的点选功能。然而，在游戏过程中，鼠标光标消失，玩家需根据特定的动作语义移动鼠标。例如，为了改变角色的视角，玩家需要将实际鼠标移动映射到游戏内视角角度的变化，且X轴和Y轴的变化幅度不同。另一个特殊转换发生在射击模式中，准星固定在屏幕中心，玩家必须操控鼠标使准星与目标敌人对齐。这种在不同场景下对鼠标控制的细致处理，为一般的电脑操作增加了额外的挑战，展示了游戏环境中相较于常规软件应用所需的适应能力。


Procedural Memory. In our target setting, We intend to let the agent learn all skills from scratch, to the extent possible for the main storyline missions. The procedural memory is initialized with only preliminary skills for basic movement, which are not clearly provided by the in-game tutorial and guidance.
程序性记忆。在我们的目标环境中，我们打算让代理从零开始学习所有技能，尽可能覆盖主线任务。程序性记忆仅初始化了基本移动的初步技能，这些技能并未在游戏内教程和指导中明确提供。


- turn(degree), move_forward(duration): Since the game does not precisely introduce how to move in the world through in-game instructions, we provide these two basic actions in advance, so GPT-40 can perform basic mobility, while greatly reducing the number of calls to the model.
- 转向（度数），前进（持续时间）：由于游戏中没有通过游戏内指令精确介绍如何在世界中移动，我们提前提供这两个基本动作，以便GPT-40能够执行基本的移动操作，同时大幅减少对模型的调用次数。


- shoot(x, y): RDR2 also does not provide detailed instructions on how to aim and shoot. Moreover, due to limitations with GPT-4o spatial reasoning and the need to sometimes augment images with object bounding boxes, we provide such basic skill for the agent to complete relevant tasks.
- 射击(x, y)：RDR2（荒野大镖客2）同样未提供关于如何瞄准和射击的详细指导。此外，由于GPT-4o在空间推理方面的限制，以及有时需要通过物体边界框增强图像，我们为代理提供了此类基本技能以完成相关任务。


- select_item_at $\left( {x,y}\right)$ : Similarly to shoot(),due to the lack of instructions,we provide such skill for the agent to move the mouse to a certain place to select a given item.
- select_item_at $\left( {x,y}\right)$ ：与shoot()类似，由于缺乏具体指令，我们为智能体提供此技能，以便将鼠标移动到指定位置选择给定的物品。


Beyond these basic atomic low-level actions, we introduce a few composite skills to facilitate the game playing progress. The agent should be able to complete tasks using only the basic skills above and the skills it learns, but these composite skills streamline the process by greatly reducing calls to the backend model.
除了这些基本的原子级低层动作外，我们引入了一些复合技能以促进游戏进程。代理应能够仅使用上述基本技能和其学习到的技能完成任务，但这些复合技能通过大幅减少对后端模型的调用，使过程更加简化。


- turn_and_move_forward(degree, duration): This skill is just a simple composition of turn() and move_forward() to save frequent calls to GPT-4o in a common sequence.
- turn_and_move_forward(角度, 持续时间)：此技能只是turn()和move_forward()的简单组合，用于节省在常见序列中频繁调用GPT-4o的次数。


- follow(duration) and navigate_path(duration): In RDR2, tasks often guide players to follow NPCs or generated paths (red lines) in the minimap to certain locations. This can be reliably
- follow(duration) 和 navigate_path(duration)：在《荒野大镖客救赎2》（RDR2）中，任务通常引导玩家在小地图上跟随NPC或生成的路径（红线）前往特定地点。这一过程可以被可靠地


accomplished via the basic movement skills, but requires numerous interactions with GPT- 4o. To control both cost and time budgets involving GPT-4o's responses, we leverage the information shown in the minimap to implement a composite skill to follow target NPCs or red lines for a short set of game iterations. The default duration is 20 iterations. Increasing the duration can dramatically improve the performance in task Follow Dutch, Follow Javier and Killing Wolves but significantly decrease the success rate of Search John since this task requires frequent exchange of the skills between climbing and following.
通过基本的移动技能实现，但需要与GPT-4o进行大量交互。为了控制涉及GPT-4o响应的成本和时间预算，我们利用小地图中显示的信息，实施一种复合技能，在短时间的游戏迭代中跟随目标NPC或红线。默认持续时间为20次迭代。延长持续时间可以显著提升“跟随Dutch”、“跟随Javier”和“猎杀狼”任务的表现，但会显著降低“搜索John”任务的成功率，因为该任务需要频繁在攀爬和跟随技能之间切换。


- fight(): As output of an interaction with GPT-4o, the agent will only take one action per step. However, though the action is generated correctly, specifically in fight scenarios, the action frequency may not be high enough to defeat an opponent. In order to allow sub-second punches, we provide a pre-defined action that wraps this multi-action punching, which can be selected by GPT-40 to effectively win fights.
- fight(): 作为与GPT-4o交互的输出，代理每步只执行一个动作。然而，尽管动作生成正确，特别是在战斗场景中，动作频率可能不足以击败对手。为了实现亚秒级的连击，我们提供了一个预定义动作，封装了多次连击动作，GPT-4o可以选择该动作以有效赢得战斗。


For the open-ended mission, since the agent skips all the tutorials in Chapter I, we provide all the necessary skills in the procedural memory at the beginning of the mission.
对于开放式任务，由于代理跳过了第一章的所有教程，我们在任务开始时将所有必要技能存储在程序记忆中提供给代理。


Episodic Memory. This module stores all the useful information, e.g., input and output of GPT-4o. In each iteration, after the self-reflection, we will request GPT-4o to summary the event that happened in the last action and the past experiences.
情景记忆（Episodic Memory）。该模块存储所有有用信息，例如GPT-4o的输入和输出。在每次迭代中，自我反思后，我们会请求GPT-4o总结上一次动作发生的事件及过去的经验。


Game Pause. To prevent in-game time from passing in real-time games like RDR2, we have to pause the game while waiting for LMMs' response. The time interval between two consecutive actions can be as long as one minute. In RDR2, after the agent finishes executing outputted actions, esc will be automatically pressed to pause the game and when the agent determines the next action, esc will be automatically pressed again to unpause the game. Note that there will be an animation lasting up to 0.5 seconds for both pausing and unpausing. During this animation, we can not control the character, but the dynamics of the game world keep changing, e.g., the wolves are still moving. It introduces additional challenges for the tasks that require precise timing, like combat.
游戏暂停。为了防止像《荒野大镖客2》（RDR2）这类实时游戏中的游戏时间流逝，我们必须在等待大语言模型（LMMs）响应时暂停游戏。两次连续动作之间的时间间隔最长可达一分钟。在RDR2中，代理执行完输出动作后，系统会自动按下Esc键暂停游戏；当代理确定下一动作时，Esc键会再次自动按下以取消暂停。注意，暂停和取消暂停时各有最长0.5秒的动画，在此期间无法控制角色，但游戏世界的动态仍在变化，例如狼群仍在移动。这为需要精确时机的任务（如战斗）带来了额外挑战。


### B.4 Case Studies
### B.4 案例研究


Here we present a few game-specific case studies for more in-depth discussion of the framework capabilities and the challenges of the GCC setting.
这里我们展示几个针对特定游戏的案例研究，以更深入讨论框架能力及GCC设置的挑战。


#### B.4.1 Self-Reflection
#### B.4.1 自我反思


Self-reflection is an essential component in CRADLE as it allows our framework reasoning to correct previous mistakes or address ineffective actions taken in-game. Figure 17 provides an example of the self-reflection module. The task requires the agent to select a weapon to equip, in the context of the "Protect Dutch" task. Initially, the agent selects a knife as its weapon by chance, but since the game requires a gun to be chosen, this is incorrect and the game still prompts the player to re-open the weapon wheel. The self-reflection module is able to determine that the previous action was incorrect and on a subsequent iteration the agent successfully opts for the gun, correctly fulfilling the task requirement and advancing to the next stage in the story.
自我反思是CRADLE中的核心组成部分，它使框架能够推理纠正之前的错误或解决游戏中采取的无效动作。图17展示了自我反思模块的示例。任务要求代理在“保护Dutch”任务背景下选择装备武器。起初，代理偶然选择了刀作为武器，但游戏要求选择枪械，因此这是错误的，游戏仍提示玩家重新打开武器轮盘。自我反思模块能够判断之前的动作错误，在后续迭代中代理成功选择了枪械，正确完成任务要求并推进故事下一阶段。


#### B.4.2 Skill Curation
#### B.4.2 技能策划


For skill curation, we first provide GPT-4o with examples of general mouse and keyboard control APIs, e.g., io_env.key_press and io_env.mouse_click. Figure 18 shows that GPT-40 can capture and understand the prompts appearing on screenshots, i.e., icons and text, and strictly follow the provided skill examples using our IO interface to generate correct skill code. Moreover, GPT-40 also generates comments in the code to demonstrate the functionality of this skill, which are essential for computing similarity and relevance with a given task during skill retrieval. The quality of the generated comment directly determines the results of skill retrieval, and further impacts reasoning to action planning. Curation can also re-generate code for a given skill, which is useful if GPT-4o wrongly recognized a key or mouse button in a previous iteration.
在技能策划中，我们首先向GPT-4o提供了通用鼠标和键盘控制API示例，如io_env.key_press和io_env.mouse_click。图18显示GPT-4o能够捕捉并理解截图中出现的提示（图标和文本），并严格按照提供的技能示例，使用我们的IO接口生成正确的技能代码。此外，GPT-4o还会在代码中生成注释，说明该技能的功能，这对于计算与给定任务的相似度和相关性以进行技能检索至关重要。生成注释的质量直接决定技能检索结果，进而影响推理到动作规划。策划还可以为给定技能重新生成代码，这在GPT-4o之前迭代错误识别键或鼠标按钮时非常有用。


#### B.4.3 Action Execution and Feedback
#### B.4.3 动作执行与反馈


Proper reasoning about environment feedback is critical due to the generality of the GCC setting and the level of abstraction to interact with the complex game world. The semantic gaps between
由于GCC设置的通用性及与复杂游戏世界交互的抽象层次，正确推理环境反馈至关重要。动作执行、其在游戏世界中的效果以及观察相关结果以进行进一步推理之间的语义差距导致了CRADLE需要处理的若干潜在问题。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_29.jpg?x=354&y=318&w=1089&h=1576&r=0"/>



Figure 17: Case study of self-reflection on re-trying a failed task. Task instruction and context require the agent to equip the gun. A wrong weapon (knife) is first selected, but the agent equips the gun after self-reflection. Only relevant modules are shown for better readability, though all modules (Figure 4) are executed per iteration.
图17：自我反思重试失败任务的案例研究。任务指令和背景要求代理装备枪械。起初错误选择了刀，但经过自我反思后代理装备了枪。为提高可读性，仅显示相关模块，尽管每次迭代都会执行所有模块（见图4）。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_30.jpg?x=308&y=200&w=1184&h=340&r=0"/>



Figure 18: Skill code generation based on in-game instructions. As the storyline progresses, the game will continually provide prompts on how to use a new skill via keystrokes or utilizing the mouse.
图18：基于游戏内指令的技能代码生成。随着剧情推进，游戏会持续通过按键或鼠标操作提示如何使用新技能。


the execution of an action, its effects in the game world, and observing the relevant outcomes for further reasoning lead to several potential issues that CRADLE needs to deal with. Such issues can be categorized into four major cases:
动作执行、其在游戏世界中的效果与观察相关结果以进行进一步推理之间的语义差距导致了CRADLE需要处理的若干潜在问题。这些问题可归纳为四大类：


Lack of grounding feedback. In many situations, due to the lack of precise information from the environment, it can be difficult for the system to deduce the applicability or outcome of a given action. For example, when picking an item from the floor, the action may fail due to the distance to the object not yet being close enough. Or, if within pick up range, the chosen action may not exactly apply due to other factors (e.g., character's package is full).
缺乏基础反馈。在许多情况下，由于环境缺乏精确信息，系统难以推断某动作的适用性或结果。例如，从地上拾取物品时，动作可能因与物体距离尚未足够近而失败；或者即使在拾取范围内，所选动作也可能因其他因素（如角色包裹已满）而无法执行。


Even if the right action is selected and executed successfully, the agent still needs to figure out its results from the partial visual observation of the game world. If the agent needs to pick or manipulate an object that is occluded from view, the action may execute correctly, but no outcome can be seen.
即使选择并成功执行了正确的动作，智能体仍需从游戏世界的部分视觉观察中推断其结果。如果智能体需要拾取或操作一个被遮挡的物体，动作可能执行正确，但无法看到任何结果。


A representative example in RDR2 happens when the agent tries to pick up its gun from the floor after a fight. Getting to the right distance, without completely occluding the object, can lead to multiple re-trials. Figure 19a showcases a situation where, though the character is already standing near the gun (as seen in the minimap), it's still not possible to pick it up.
在《荒野大镖客2》（RDR2）中的一个典型例子是，智能体在战斗后尝试从地上捡起枪。达到合适距离且不完全遮挡物体，可能导致多次重试。图19a展示了这样一种情况：尽管角色已经站在枪附近（如小地图所示），仍无法捡起枪。


Previous efforts [57, 61] that utilize in-game state APIs unreasonably bypass such issues by leveraging internal structured information from the game and the full semantics of responses (data) or failures (error messages).
之前的研究[57, 61]利用游戏内状态API，不合理地绕过了这些问题，通过利用游戏的内部结构化信息以及响应（数据）或失败（错误信息）的完整语义。


Imprecise timing in IO-level calls. This issue is caused by the ambiguity in the game instructions or differences in specific in-game action behaviors, where even the execution of a correct action may fail due to minor timing mismatches. For example, when executing an action like 'open cabinet', which requires pressing the [R] key on the keyboard, if the press is too fast, no effect happens in the game world. However, as there is no visual change in the game nor other forms of feedback, it can be difficult for GPT-4o to figure out if an inappropriate action was chosen at this game state or if the minor timing factor was the problem. Pressing the key for longer triggers an animation around the button (only if the helper menu is on screen), but this is easily missed and any key release before the circle completes also results in no effect. Figure 19b illustrates the situation.
输入输出层调用时序不精确。该问题源于游戏指令的模糊性或特定游戏动作行为的差异，即使执行了正确动作，也可能因微小的时序不匹配而失败。例如，执行“打开柜子”动作时，需要按下键盘上的[R]键，如果按得过快，游戏中不会产生效果。然而，由于游戏中没有视觉变化或其他反馈，GPT-4o难以判断是在该游戏状态下选择了不合适的动作，还是时序因素导致的问题。长按按键会触发按钮周围的动画（仅当辅助菜单显示时），但这很容易被忽略，且在动画完成前松开按键同样无效。图19b说明了这一情况。


The same problem also manifests in other situations in the game, where pressing the same key for longer triggers a completely different action (e.g., lightly pressing the [Left Alt] key vs. holding it for longer).
同样的问题也出现在游戏中的其他情境中，长按同一按键会触发完全不同的动作（例如，轻按[左Alt]键与长按的区别）。


Change in the semantics of key and button. A somewhat similar situation occurs when the same keyboard key or mouse button gets attributed different semantics in different situations (or even in a multi-step action). GPT-4o may decide to execute a given skill, but the original semantics no longer hold. The lack of in-game effect parallels the previous situations. Worse yet, an undesired effect will confuse the system regarding the correct action being selected or not.
按键和按钮语义的变化。类似情况发生在同一键盘键或鼠标按钮在不同情境（甚至多步骤动作中）被赋予不同语义时。GPT-4o可能决定执行某项技能，但原有语义不再适用。缺乏游戏内效果与之前情况类似。更糟的是，产生的非预期效果会使系统混淆是否选择了正确动作。


For example, when approaching a farm in the beginning of the game, the agent needs to hitch the horse to a pole to continue. The operation to perform the action consists of pressing the [E] key near a hitching post (as shown in Figure 19c). However, the same [E] key press is the only constituting step in other actions with different semantics, like dismount the horse or open the door. Wrongly triggering a horse dismount at the situation shown in the figure can lead to undesired side effects, i.e.,
例如，在游戏初期接近农场时，智能体需要将马拴在柱子上以继续。执行该动作需在拴马桩附近按下[E]键（如图19c所示）。然而，同一[E]键在其他动作中也作为唯一步骤，且语义不同，如下马或开门。在图示情境中错误触发下马动作可能导致不良副作用，即


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_31.jpg?x=320&y=201&w=1157&h=275&r=0"/>



Figure 19: Examples of action execution uncertainty. Lack of environmental feedback to actions and semantic gaps between action intent and game command can lead to challenging situations for agent reasoning.
图19：动作执行不确定性的示例。动作缺乏环境反馈以及动作意图与游戏指令之间的语义差距，可能导致智能体推理面临挑战。


it may mislead the system about the actual effects of the action or affect the planning of which next actions to perform.
这可能误导系统对动作实际效果的判断，或影响后续动作的规划。


Interference issues. Lastly, completion of some actions requires the correct execution of multiple steps sequentially, which could be interrupted in many ways not related to the agent's own actions. Without the use of APIs that expose internal states or other forms of feedback, it is much harder for the agent to decide when to repeat sub-actions or try different strategies. For example, if the agents gets shot and loses aim while in combat, or an unrelated in-game animation is triggered mid-action, canceling it.
干扰问题。最后，某些动作的完成需要正确顺序执行多个步骤，这些步骤可能被许多与智能体自身动作无关的因素中断。若不使用暴露内部状态或其他反馈形式的API，智能体更难判断何时重复子动作或尝试不同策略。例如，智能体在战斗中被射击失去瞄准，或在动作中途触发无关动画导致动作取消。


Since there is no direct environment feedback, the agent needs to carefully analyze the situation and try to infer if any action step needs re-execution.
由于没有直接的环境反馈，智能体需要仔细分析情况，尝试推断是否需要重新执行某个动作步骤。


### B.5 Limitations of GPT-4o and GPT-4V
### B.5 GPT-4o和GPT-4V的局限性


Deploying CRADLE in a complex game like RDR2 requires the backbone LMM model to handle multimodal input, which revealed several limitations of both GPT-4V and GPT-4o, necessitating external tools to enhance overall framework performance. Initial tests and exploration were performed using GPT-4V, as GPT-4o was not yet available. These tests highlighted significant weaknesses in spatial perception, icon understanding, history processing, and world understanding. Upon the release of GPT-40, further testing demonstrated some notable improvements in spatial perception. However, enhancements in other areas remained marginal, while some regressions were also observed, all indicating the need for additional tools to aid decision-making.
在像《荒野大镖客2》这样复杂的游戏中部署CRADLE，需要骨干大规模语言模型（LMM）处理多模态输入，这暴露了GPT-4V和GPT-4o的若干局限，需借助外部工具提升整体框架性能。最初测试和探索使用了GPT-4V，因为当时GPT-4o尚未发布。测试揭示了空间感知、图标理解、历史处理和世界理解方面的显著弱点。GPT-4o发布后，进一步测试显示空间感知有所改善，但其他方面提升有限，且出现了一些退步，均表明需要额外工具辅助决策。


Spatial Perception. As shown in Figure 20a and 21a, GPT-4V's spatial-visual recognition capability is insufficient for precise fine-grained control, particularly in detecting whether the character is being or going to be blocked and in estimating the accurate relative positions of target objects. In contrast, GPT-4o exhibits a significant enhancement in spatial perception, capable of recognizing obstacles ahead and estimating the approximate relative positions between objects. However, both models require supplementary information, such as bounding boxes of potential target objects, to make fine-grained decisions. These led to the need to augment certain images to provide auxiliary visual clues for decision-making, i.e., bounding boxes of possible target objects.
空间感知。如图20a和21a所示，GPT-4V的空间视觉识别能力不足以实现精细的细粒度控制，尤其是在检测角色是否被阻挡或即将被阻挡以及估算目标物体的准确相对位置方面。相比之下，GPT-4o在空间感知方面有显著提升，能够识别前方障碍物并估算物体间的大致相对位置。然而，两种模型都需要辅助信息，如潜在目标物体的边界框，才能做出细粒度决策。因此，需要对某些图像进行增强，以提供辅助视觉线索用于决策，即可能目标物体的边界框。


Icon Understanding. Both GPT-4o and GPT-4V struggle with domain-specific concepts, such as unique icons within the game, which may represent specific targets or refer to certain mouse and key actions. As shown in Figure 20b and 21b, GPT-4V and GPT-4o fail to recognize the left shift, right mouse button, and space icons. Attempts to incorporate few-shot learning to improve image understanding cannot be generalized. Therefore, we match prepared pattern templates, e.g., icon images, against each screenshot to continuously detect and highlight any appearing icons.
图标理解。GPT-4o和GPT-4V都难以处理领域特定概念，例如游戏中的独特图标，这些图标可能代表特定目标或指代某些鼠标和按键操作。如图20b和21b所示，GPT-4V和GPT-4o未能识别左Shift键、鼠标右键和空格键图标。尝试通过少量示例学习提升图像理解能力未能实现泛化。因此，我们通过匹配预先准备的模式模板（如图标图像）与每个截图，持续检测并高亮显示出现的任何图标。


Figure 20c and Figure 21c also demonstrate that although GPT-4o performs better than GPT-4V in understanding the mini-map, it still fails to consistently interpret this crucial information regarding the position and direction of the character. This failure in localization leads the agent to sometimes get lost in the town and miss the task target. While the aforementioned issues can be slightly alleviated by providing additional few-shot examples, a significant improvement is only achieved by cropping the image and providing GPT-40 with the exact region containing the icon to be recognized. This dependency on precise input makes the issue challenging and unreliable for decision-making. Although the above issues can be slightly alleviated by providing additional few-shot examples, it
图20c和图21c还显示，尽管GPT-4o在理解小地图方面优于GPT-4V，但仍未能持续准确解读关于角色位置和方向的关键信息。这种定位失败导致智能体有时在城镇中迷路，错过任务目标。上述问题虽可通过提供额外的少量示例略微缓解，但只有通过裁剪图像并向GPT-4o提供包含待识别图标的精确区域，才能实现显著改进。这种对精确输入的依赖使得问题在决策时具有挑战性且不可靠。尽管上述问题可通过提供额外少量示例略微缓解，


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_32.jpg?x=341&y=202&w=1122&h=533&r=0"/>



(a) GPT-4V fails to recognize obstacles in the environment and the position of the shopkeeper.
(a) GPT-4V未能识别环境中的障碍物及店主的位置。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_32.jpg?x=343&y=817&w=1120&h=640&r=0"/>



(b) GPT-4V struggles to recognize the icons for keys on keyboard and mouse buttons.
(b) GPT-4V难以识别键盘和鼠标按钮的图标。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_32.jpg?x=339&y=1538&w=1121&h=485&r=0"/>



(c) GPT-4V cannot understand the correct direction of arrow points, i.e., character, towards in the mini-map. Figure 20: Example situations of GPT-4V's limitations in understanding visual information from the game.
(c) GPT-4V无法理解小地图中箭头指向的正确方向，即角色所朝向的方向。图20：GPT-4V在理解游戏视觉信息方面的局限性示例情境。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_33.jpg?x=345&y=200&w=539&h=322&r=0"/>



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_33.jpg?x=919&y=203&w=535&h=319&r=0"/>



## ChatGPT
## ChatGPT


ChatGPT
ChatGPT


There is an obstacle in front of the character. It appears to be a small wooden railing or barrier along the edge of the platform. The character would need to navigate around it or find a way over it to proceed forward. The shopkeeper in the image is on the left side
角色前方有一个障碍物，看起来像是平台边缘的一小段木质栏杆或障碍。角色需要绕过它或找到越过它的方法才能继续前进。图中的店主位于左侧。


(a) GPT-40 can recognize obstacles in the environment and the position of the shopkeeper.
(a) GPT-4o能够识别环境中的障碍物及店主的位置。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_33.jpg?x=348&y=825&w=541&h=328&r=0"/>



## ChatGPT
## ChatGPT


## ChatGPT
## ChatGPT


Based on the provided image, the control prompt shown is: From the provided image screenshot from the game,
根据提供的图像，显示的控制提示为：从游戏提供的截图中，


- "Hold L to ride faster'.
- “按住L以加速骑行”。


I can identify the following keyboard and mouse control prompts:
我可以识别以下键盘和鼠标控制提示：


The 'L' refers to the left analog stick on a controller, indicating that the player should hold the left analog stick in a forward position to increase the speed of their character's movement, typically while riding a horse. 1. Toggle View: V
“L”指的是手柄上的左摇杆，表示玩家应将左摇杆向前推以增加角色的移动速度，通常是在骑马时。1. 切换视角：V


2. Zoom: Mouse Scroll Wheel
2. 缩放：鼠标滚轮


3. Flip: R
3. 翻转：R键


4. Back: Esc
4. 返回：Esc键


5. Photograph: (No specific key assigned, just a
5. 拍照：（未指定具体按键，只是一个


label)
标签）


(b) GPT-4o struggles to recognize the icons for keys on keyboard and mouse buttons.
(b) GPT-4o难以识别键盘按键和鼠标按钮的图标。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_33.jpg?x=404&y=1538&w=367&h=331&r=0"/>



## ChatGPT
## ChatGPT


## ChatGPT
## ChatGPT


The central white arrow in the mini-map is facing The central white arrow on the mini-map is facing
小地图中央的白色箭头朝向 小地图中央的白色箭头朝向


to the right. down.
右侧。下方。


(c) GPT-40 occasionally accurately determines the direction of arrow points, i.e., character, towards in the mini-map.
(c) GPT-4o偶尔能准确判断小地图中箭头指向的方向，即角色朝向。


Figure 21: Example situations of GPT-4o's limitations in understanding visual information from the game.
图21：GPT-4o在理解游戏视觉信息方面局限性的示例情境。


can only have an obvious effect if we crop the image and provide the GPT-4o with the region exactly containing the icon to be recognized, which makes the issue intractable.
只有当我们裁剪图像并向GPT-4o提供恰好包含待识别图标的区域时，才能产生明显效果，这使得问题难以解决。


History Processing. Moreover, both GPT-40 and GPT-4V can easily get distracted by irrelevant information in longer contexts, resulting in hallucinations. For example, when action planning utilizes too many historical screenshots, they may confuse past and present frames. Additionally, performance fluctuates and both model versions frequently generate output not adhering to the rules in the provided prompts. To mitigate the issue of hallucinations, we more strictly control input information by further summarizing long-term memory.
历史处理。此外，GPT-4o和GPT-4V在较长上下文中容易被无关信息干扰，导致幻觉现象。例如，当动作规划使用过多历史截图时，模型可能混淆过去与当前帧。此外，性能波动较大，两个模型版本经常生成不符合提示规则的输出。为缓解幻觉问题，我们通过进一步总结长期记忆，更严格地控制输入信息。


World Understanding. Lastly, the absence of an RDR2 world model limits GPT-4V and GPT-4o's understanding of the consequences of its actions in the game. This often results in inappropriate action selection, such as overestimating the necessary adjustments for aligning targets or misjudging the duration required for certain actions. To alleviate this problem, we introduced extra prompt rules regarding action parameters and more flexibility into the self-reflection module.
世界理解。最后，缺乏《荒野大镖客救赎2》（RDR2）世界模型限制了GPT-4V和GPT-4o对游戏中行为后果的理解。这常导致动作选择不当，如高估调整目标所需的幅度或误判某些动作所需的时间。为缓解此问题，我们引入了关于动作参数的额外提示规则，并在自我反思模块中增加了更多灵活性。


## C Stardew Valley
## C 星露谷物语


### C.1 Introduction to Stardew Valley
### C.1 星露谷物语简介


Stardew Valley is an open-ended country-life RPG game developed by ConcernedApe, which has a 98% positive rating on Steam and is rated as Overwhelmingly Positive. Players take on the role of a character disillusioned with city life who inherits a dilapidated farm from their late grandfather. Initially, the farmland is overrun with boulders, trees, stumps, and weeds, which players must clear to make way for crops, buildings, and placeable items. The main goal is to restore and expand the farm through activities such as planting crops, raising animals, mining, fishing, and crafting. Additionally, players can interact with NPCs in town, forming relationships that can lead to marriage and children. Players complete quests for money or to restore the town's Community Center by completing "bundles," which reward items like seeds and tools and unlock new areas and game mechanics. All activities are balanced against the character's health, energy, and the game's clock. Food provides buffs, health, and energy. The game features a simplified calendar with four 28-day months representing each season, affecting crop growth and activities. Compared to RDR2, this game is more lightweight and easy to control. This game features a wealth of production and social activities, presenting a comprehensive test of an agent's abilities, which is an ideal platform to observe and evaluate agents' comprehensive behaviors and abilities, like in the Generative Agents [44]. We use the latest version (1.6.8) of the game to conduct all the experiments.
星露谷物语是一款由ConcernedApe开发的开放式乡村生活角色扮演游戏，在Steam上拥有98%的好评率，被评为“极度好评”。玩家扮演一位对城市生活感到失望的角色，继承了已故祖父的一座破旧农场。起初，农田被巨石、树木、树桩和杂草覆盖，玩家必须清理这些障碍，为种植作物、建造建筑和摆放物品腾出空间。主要目标是通过种植作物、养殖动物、采矿、钓鱼和制作工艺品等活动来恢复和扩展农场。此外，玩家可以与镇上的NPC互动，建立关系，最终可能结婚生子。玩家通过完成任务赚取金钱，或通过完成“捆绑包”修复镇上的社区中心，奖励包括种子和工具，并解锁新的区域和游戏机制。所有活动都需平衡角色的健康、能量和游戏时间。食物提供增益效果、恢复健康和能量。游戏采用简化的日历系统，每个季节有四个月，每月28天，影响作物生长和活动。与《荒野大镖客2》（RDR2）相比，本游戏更轻量且易于操作。游戏包含丰富的生产和社交活动，是全面考察智能体能力的理想平台，类似于生成式智能体（Generative Agents）[44]。我们使用游戏的最新版本（1.6.8）进行所有实验。


### C.2 Objectives
### C.2 目标


We find that GPT-40 surprisingly struggles with accurately recognizing and locating objects near the player in this 2D game. This leads to difficulties for the agent to interact with objects or people, as it requires the player to stand precisely in front of them in the grid (e.g., when entering doors, using a pickaxe to break stones). Even some basic tasks are already challenging enough for current agents in this game. Therefore, as shown in Figure 22, we evaluate three essential tasks in the early stages of the game:
我们发现GPT-40在这款二维游戏中，准确识别和定位玩家附近的物体方面表现令人意外地困难。这导致智能体难以与物体或人物互动，因为它要求玩家必须精确站在网格的正前方（例如，进入门时，使用镐子砸石头时）。即使是一些基本任务，对于当前的智能体来说也已经相当具有挑战性。因此，如图22所示，我们评估游戏早期的三个核心任务：


- Farm Clearup. Clear the obstacles on the farm, such as weeds, stones, and trees, as much as possible to prepare for farming. This task requires agents to move precisely to be in front of the obstacles, identify the type of obstacles correctly and select corresponding tools to deal with them.
- 农场清理。尽可能清除农场上的障碍物，如杂草、石头和树木，为耕种做准备。该任务要求智能体精确移动至障碍物正前方，正确识别障碍物类型，并选择相应工具进行处理。


- Cultivation. Use the hoe to till the soil, use a parsnip seed packet on the tilled soil to sow a crop, water the crop every day and harvest at least one parsnip. This task requires long-horizontal memory and reasoning.
- 种植。使用锄头耕地，在耕好的土地上使用欧防风（parsnip）种子包播种作物，每天浇水，并至少收获一颗欧防风。该任务需要较长时间的横向记忆和推理能力。


- Shopping. Go to the general store in the town, which is on the other map, to buy more seeds and return home. This task is used to evaluate agents' long-distance navigation ability.
- 购物。前往位于另一张地图上的镇上杂货店购买更多种子，然后返回家中。该任务用于评估智能体的长距离导航能力。


For each task, the maximal steps is 100 .
每个任务的最大步数为100步。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_35.jpg?x=315&y=199&w=1174&h=759&r=0"/>



Figure 22: Three tasks in Stardew Valley.
图22：星露谷物语中的三个任务。


### C.3 Implementation Details
### C.3 实现细节


Visual Prompting. As a cartoon-style pixel game, the game screen of Stardew is quite different from the real world. Although GPT-40 can observe coarse-grained information from screenshots, more fine-grained information is required to complete tasks. Therefore, as shown in Figure 23, we divide each screenshot into $3 \times  5$ grids and require GPT-40 to describe the screenshot in a grid-by-grid format. We empirically find that it can result in a more precise and accurate description. And GPT-40 can also make better control based on the grids. In addition, we also augment the image with two blue and yellow bands on the left and right sides, respectfully, with the prompt, "The blue band represents the left side and the yellow band represents the right side". Our empirical results show that this method significantly improves GPT-4o's ability to accurately distinguish left from right.
视觉提示。作为一款卡通风格的像素游戏，星露谷(Stardew)的游戏画面与现实世界有很大不同。虽然GPT-40可以从截图中观察到粗粒度的信息，但完成任务需要更细粒度的信息。因此，如图23所示，我们将每张截图划分为$3 \times  5$个网格，并要求GPT-40以网格为单位描述截图。经验表明，这样可以得到更精确准确的描述，GPT-40也能基于网格做出更好的控制。此外，我们还在图像左右两侧分别添加了蓝色和黄色条带，并附加提示“蓝色条带代表左侧，黄色条带代表右侧”。我们的实验证明，该方法显著提升了GPT-40准确区分左右的能力。


Information Gathering. As mentioned in the introduction of visual prompting, we let GPT-4o describe the image grid by grid, which is helpful in locating the position of the character, surrounding objects and buildings and facilitates the understanding of the relative positions among them for GPT-40. Besides, while compared to GPT-4V, GPT-4o is able to recognize most of the icons and their quality in the toolbar shown at the bottom of the screenshot, GPT-4o cannot output the items in the inventory sequentially one by one as it always skips a few in between. We have to clip the box for each item out of the toolbar and feed them to GPT-40 independently, augmented with template matching, for recognition, which turns out to be more accurate. The success of recognition of the tools in the toolbar is critical to tasks like Farm Clearup and Cultivation.
信息收集。如视觉提示介绍中所述，我们让GPT-40逐网格描述图像，这有助于定位角色、周围物体和建筑的位置，并促进GPT-40理解它们之间的相对位置。此外，与GPT-4V相比，GPT-40能够识别截图底部工具栏中的大多数图标及其品质，但无法按顺序逐一输出背包中的物品，因为它总是跳过其中几个。我们不得不将工具栏中每个物品的框单独裁剪出来，独立输入给GPT-40，并辅以模板匹配进行识别，结果更为准确。工具栏中工具的识别成功对于农场清理(Farm Clearup)和耕作(Cultivation)等任务至关重要。


Self-Reflection. The duration of actions in Stardew is usually much shorter than in RDR2, so we only use the first and last frame from the video observation to reduce the number of tokens used per request. Additionally, we provide some helpful prior information for GPT-40. For example, a screenshot of the inside of the store is provided to check whether the store was successfully entered. This is useful because there are many other buildings near the store, and sometimes GPT-40 controls the character to enter the wrong one. However, this is not realized if the screenshot is not provided.
自我反思。星露谷中动作持续时间通常远短于《荒野大镖客2》(RDR2)，因此我们仅使用视频观察的第一帧和最后一帧，以减少每次请求使用的token数量。此外，我们为GPT-40提供了一些有用的先验信息。例如，提供商店内部的截图以检查是否成功进入商店。这很重要，因为商店附近有许多其他建筑，有时GPT-40会控制角色进入错误的建筑，如果不提供截图则无法察觉。


Skill Curation. For skill curation, as mentioned in Figure 5, we mainly rely on the in-game manual to generate atomic skills, like move_up(), do_action() and use_tool(). In addition, to handle the challenges of locating objects, especially doors, we have a special set of composite skills specifically for Stardew. e.g., go_through_door, buy_item, get_out_of_house and enter_door_and_sleep. With the restrictions of GPT-40 in fine-grained control, we designed go_through_door composite skills for
技能策划。如图5所示，技能策划主要依赖游戏内手册生成原子技能，如move_up()、do_action()和use_tool()。此外，为应对定位物体（尤其是门）的挑战，我们为星露谷专门设计了一套复合技能，例如go_through_door、buy_item、get_out_of_house和enter_door_and_sleep。鉴于GPT-40在细粒度控制上的限制，我们设计了go_through_door复合技能用于


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_36.jpg?x=315&y=208&w=1170&h=554&r=0"/>



Figure 23: Augmented screenshot via visual prompting. The full screenshot is divided into $3 \times  5$ grids and each grid has a unique white coordinate. Additionally, we augment all input images with color bands, with the prompt, "The blue band represents the left side and the yellow band represents the right side", which significantly improves GPT-4o's ability to accurately distinguish left from right.
图23：通过视觉提示增强的截图。完整截图被划分为$3 \times  5$个网格，每个网格有唯一的白色坐标。此外，我们为所有输入图像添加了彩色条带，并附加提示“蓝色条带代表左侧，黄色条带代表右侧”，这显著提升了GPT-40准确区分左右的能力。


the agent to control the game character to accurately reach various doors and successfully enter, such as the house and the store door. and in order to buy certain items such as parsnip seeds, we designed the composite skills buy_item to control the game character to interact with the salesman and buy parsnip seeds. similarly, we designed the get_out_of_house and enter_door_and_sleep composite skills to accurately exit the house from the bed and enter the house and walk to the bed.
代理控制游戏角色准确到达各个门并成功进入，如房屋和商店门。为了购买某些物品如欧防风种子(parsnip seeds)，我们设计了复合技能buy_item，控制角色与商人互动并购买欧防风种子。同样，我们设计了get_out_of_house和enter_door_and_sleep复合技能，实现从床上准确离开房屋，以及进入房屋并走向床铺。


Action Planning. In this game, we let GPT-4o output at most two skills in a single action every time, which turns out to be efficient. The agent usually needs to select the correct tool first and then use the tool or do action.
动作规划。在本游戏中，我们让GPT-40每次输出最多两个技能的单一动作，事实证明这样效率较高。代理通常需要先选择正确的工具，然后使用该工具或执行动作。


Procedure Memory. Procedure Memory is used to store and retrieve skills in code form. In order for agents to quickly get started and complete some special tasks in Stardew, we have predefined skills in Procedure Memory. These skills are divided into atomic and composite skills. atomic skill consists of basic operations such as moving, selecting tools, etc. The description of all the atomic skills is listed as follows:
过程记忆。过程记忆用于存储和检索代码形式的技能。为了让代理快速启动并完成星露谷中的一些特殊任务，我们在过程记忆中预定义了技能。这些技能分为原子技能和复合技能。原子技能包括移动、选择工具等基本操作。所有原子技能的描述如下：


- do_action(): The function to perform a context-specific action on objects or characters.
- do_action(): 对对象或角色执行上下文相关动作的函数。


- use_tool(): The function to execute an in-game action commonly assigned to using the character's current selected tool.
- use_tool(): 执行游戏中通常分配给使用当前选中工具的动作的函数。


- move_up(duration): The function to move the character upward (south) by pressing the 'w' key for the specified duration.
- move_up(duration): 通过按下“w”键指定时间，使角色向上（南）移动的函数。


- move_down(duration): The function to move the character downward (north) by pressing the 'w' key for the specified duration.
- move_down(duration): 通过按下“w”键指定时间，使角色向下（北）移动的函数。


- move_left(duration): The function to move the character left (west) by pressing the 'w' key for the specified duration.
- move_left(duration)：通过按下“w”键指定时间，使角色向左（西）移动的函数。


- move_right(duration): The function to move the character right (east) by pressing the 'w' key for the specified duration.
- move_right(duration)：通过按下“w”键指定时间，使角色向右（东）移动的函数。


- select_tool(key): The function to select a specific tool from the in-game toolbar based on the given tool number.
- select_tool(key)：根据给定的工具编号，从游戏内工具栏中选择特定工具的函数。


and the composite skills are designed for the agent to complete a variety of special tasks. The description of all the composite skills is listed as follows:
复合技能旨在让智能体完成各种特殊任务。所有复合技能的描述如下：


- buy_item(): The function to interact with the salesman and buy the item.
- buy_item()：与商人交互并购买物品的函数。


- enter_door_and_sleep(): The function to enter the house and walk to the bed.
- enter_door_and_sleep()：进入房屋并走向床铺的函数。


- get_out_of_house(): The function to accurately exit the house from the bed
- get_out_of_house()：从床铺准确地走出房屋的函数。


- go_through_door(): The function to reach and enter all kinds of doors.
- go_through_door()：到达并进入各种门的函数。


Game Pause. The game will pause automatically when the game window is not focused. So when the character finishes executing actions, we will activate another window, e.g., code window, to pause the game and stop the passage of the time in the game.
游戏暂停。当游戏窗口未获得焦点时，游戏会自动暂停。因此，当角色完成动作后，我们会激活另一个窗口，例如代码窗口，以暂停游戏并停止游戏内时间流逝。


### C.4 Case Studies
### C.4 案例研究


Here we present a few game-specific case studies to further discuss CRADLE's self-reflection and task-inference processes in the GCC setting.
这里展示几个特定游戏的案例研究，进一步讨论CRADLE在GCC环境中的自我反思和任务推断过程。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_37.jpg?x=366&y=611&w=1040&h=944&r=0"/>



Figure 24: Case study of self-reflection on re-trying a failed task. Task instruction and context require the agent to exit town. A wrong direction is first selected, but the agent moves up after self-reflection. Only relevant modules are shown for better readability, though all modules (Figure 4) are executed per iteration.
图24：关于重试失败任务的自我反思案例研究。任务指令和背景要求智能体离开城镇。最初选择了错误方向，但智能体在自我反思后向上移动。为提高可读性，仅显示相关模块，尽管所有模块（图4）均在每次迭代中执行。


#### C.4.1 Self-Reflection
#### C.4.1 自我反思


The Self-reflection module plays an important role in the completion of game missions in Stardew, giving our framework the ability to determine if the actions performed are complete and effective and to correct the errors of invalid actions. In the "Purchasing Seeds" task, the Agent is asked to return home from the store after purchasing items. At the "Home is on the left side of the store" prompt, the Agent controls the character to go left, but there are obstacles to keep going left, and the character must go up to circumnavigate the obstacles. As shown in the Fingure 24, the role will initially be stuck at the obstacle and cannot continue to the left. Through Self-Reflection, the Agent can judge that it is currently in a state of obstruction, and moving to the left cannot be implemented smoothly. Therefore, the agent can adjust the direction upward to bypass the obstacle and enable the role to continue to the left until it returns home.
自我反思模块在《星露谷物语》（Stardew）游戏任务完成中起着重要作用，使框架能够判断所执行动作是否完整有效，并纠正无效动作的错误。在“购买种子”任务中，智能体被要求在购买物品后从商店返回家中。提示“家在商店左侧”时，智能体控制角色向左移动，但左侧有障碍物，角色必须向上绕行。如图24所示，角色最初被障碍物阻挡，无法继续向左。通过自我反思，智能体能判断当前处于阻塞状态，向左移动无法顺利进行，因此调整方向向上绕过障碍，继而继续向左直到回家。


#### C.4.2 Task-inference
#### C.4.2 任务推断


Task Inference is a very effective module for completing game quests in Stardew. Its function is to decompose a vague and grand task into a specific sub-task, which effectively guides the Agent to complete the overall task. For example, in the Farming task, as shown in Figure 25, the task that the character needs to complete is "cultivate and harvest a parsinp." This is a complete but vague task. Through the Task Inference module, the Agent breaks down the task into (1) till the soil with the hoe, (2) plant the parsnip seeds, (3) water the planted seeds once daily for four days, (4) harvest the fully grown parsnip. This enables the Agent to know more clearly the steps needed to complete and finish the task successfully.
任务推断模块在完成《星露谷物语》游戏任务中非常有效。其功能是将模糊宏大的任务分解为具体子任务，有效指导智能体完成整体任务。例如，在农耕任务中，如图25所示，角色需要完成的任务是“种植并收获欧防风（parsnip）”。这是一个完整但模糊的任务。通过任务推断模块，智能体将任务细分为（1）用锄头耕地，（2）种植欧防风种子，（3）连续四天每天浇水一次，（4）收获成熟的欧防风。这样使智能体更清晰地了解完成任务所需的步骤，从而成功完成任务。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_38.jpg?x=308&y=557&w=1183&h=736&r=0"/>



Figure 25: Case study of task inference on decomposing a task into specific sub-tasks. The complete task is to cultivate and harvest a parsnip. CRADLE decomposes the task into four sub-tasks by task inference. Only relevant modules are shown for better readability, though all modules (Figure 4) are executed per iteration.
图25：任务推理案例研究，将一个任务分解为具体的子任务。完整任务是种植和收获欧防风。CRADLE通过任务推理将任务分解为四个子任务。为提高可读性，仅显示相关模块，尽管所有模块（图4）均在每次迭代中执行。


### C.5 Limitations of GPT-4o
### C.5 GPT-4o的局限性


Fine-grained Control. Stardew Valley requires that players are positioned precisely to interact with objects, such as doors and NPCs. However, it is difficult for GPT-4o to take a pixel-level precise action. For example, GPT-4o can not take a precise movement even though the speed at which the figure moves is known. To alleviate this problem, we make some composite skills that use template-matching to complete some complex interaction tasks, such as purchasing items.
细粒度控制。《星露谷物语》（Stardew Valley）要求玩家精确定位以与物体（如门和NPC）互动。然而，GPT-4o难以执行像素级的精确操作。例如，尽管已知角色移动速度，GPT-4o仍无法实现精确移动。为缓解此问题，我们设计了一些复合技能，利用模板匹配完成诸如购买物品等复杂交互任务。


Perception in a 2D virtual world . In Stardew Valley, it's common for a character to be blocked by rocks or trees, and GPT-4o fails to tell if a character is blocked by looking at the image once, and can't predict if the next move will be blocked, which is very easy for a human to do by looking at the image. This indicates that GPT-4o is relatively weak in perceiving the virtual world in this game. In order to solve this problem, we compare the successive frames before and after in Self-Reflection to enable GPT-40 to judge the corresponding changes.
二维虚拟世界中的感知。在《星露谷物语》中，角色常被岩石或树木阻挡，GPT-4o仅凭一次图像无法判断角色是否被阻挡，也无法预测下一步移动是否会被阻挡，而人类通过观察图像很容易做到。这表明GPT-4o在感知该游戏虚拟世界方面相对较弱。为解决此问题，我们在自我反思阶段比较前后连续帧，使GPT-4o能够判断相应变化。


## D Dealer's Life 2
## D Dealer's Life 2


### D.1 Introduction to Dealer's Life 2
### D.1 Dealer's Life 2简介


Dealer's Life 2 is a captivating indie simulation game developed by Abyte Entertainment. Renowned for its intricate negotiation mechanics and humorous portrayal of a pawn shop environment, the
Dealer's Life 2是一款由Abyte Entertainment开发的引人入胜的独立模拟游戏。该游戏以其复杂的谈判机制和幽默的当铺环境描绘而闻名，


game is celebrated for its engaging gameplay that combines strategy with a quirky, cartoonish art style. As a simulation game with role-playing elements, Dealer's Life 2 is played from a first-person perspective, utilizing a mouse for point-and-click interactions and a keyboard for price inputs. This interface facilitates item appraisals, customer interactions, and comprehensive shop management.
游戏以策略与古怪卡通风格相结合的玩法著称。作为一款带有角色扮演元素的模拟游戏，Dealer's Life 2采用第一人称视角，使用鼠标进行点选操作，键盘输入价格。该界面便于物品鉴定、客户互动及全面的店铺管理。


In the game, players assume the role of a pawn shop manager, tasked with acquiring and selling various items to make a profit while managing their store's reputation and inventory. Players engage with a wide range of unique non-player characters (NPCs), each with their own distinct behaviors and negotiation styles. Whether bartering over the price of a rare collectible or managing unforeseen shop events, players must hone their haggling and strategic decision-making skills to succeed. Dealer's Life 2 operates in a closed-source format with no APIs available for accessing in-game data or automating gameplay functions. This setup ensures a hands-on experience where players are immersed in the day-to-day challenges of running a pawn shop. This game environment provides a unique and entertaining setting for testifying the GCC's haggling and strategic decision-making abilities. We run our experiments using the latest version, V. 1.013_W96 of the game.
在游戏中，玩家扮演当铺经理，负责收购和出售各种物品以盈利，同时管理店铺声誉和库存。玩家将与众多独特的非玩家角色（NPC）互动，每个NPC拥有不同的行为和谈判风格。无论是为稀有收藏品讨价还价，还是应对突发店铺事件，玩家都需磨练讨价还价和战略决策能力以取得成功。Dealer's Life 2为闭源格式，未提供访问游戏数据或自动化游戏功能的API，确保玩家亲身体验经营当铺的日常挑战。该游戏环境为验证GCC的讨价还价及战略决策能力提供了独特且有趣的场景。我们使用游戏最新版本V.1.013_W96进行实验。


### D.2 Objectives
### D.2 目标


We concentrate on evaluating the sustained management skills required to maximize profits through buying and selling a diverse range of items from customers. Therefore, the task in this game is defined as Weekly shop management, i.e., managing a shop for a week automatically. This game could effectively demonstrate the negotiation ability of the LMM in a trade and bargain. For example, giving an unacceptable price to the customers, i.e., a pretty low price for a seller customer or a very high price for a buyer customer, could cause the deal to fail directly, which brings no profit in this situation. The key is to carefully analyze the description of the item, e.g., the rarity and condition of the item, and more importantly, the response of the customer, i.e., the customer's mood changes.
我们重点评估通过买卖多样物品实现利润最大化所需的持续管理技能。因此，本游戏任务定义为每周店铺管理，即自动管理店铺一周。该游戏能有效展示大规模语言模型（LMM）在交易和讨价还价中的能力。例如，给客户不可接受的价格——对卖家客户报价过低或对买家客户报价过高——会直接导致交易失败，无法获利。关键在于仔细分析物品描述，如物品稀有度和状况，更重要的是客户的反应，即客户情绪变化。


Contrary to many games that feature detailed tutorials highlighting specific operations and objectives through each crucial step, Dealer's Life 2 does not provide such guidance. This absence transforms the game into a zero-shot, hard open-world task, where the LMM must directly apply its prior knowledge of haggling and strategic decision-making to a new and unfamiliar environment. To provide readers with a clear and straightforward understanding of the task, we illustrate the typical flow of a day's shop management through several key steps, presented in Table 10.
与许多游戏通过详细教程突出每个关键步骤的具体操作和目标不同，Dealer's Life 2不提供此类指导。这使游戏成为一个零样本、困难的开放世界任务，LMM必须直接将其讨价还价和战略决策的先验知识应用于全新且陌生的环境。为使读者清晰直观地理解任务，我们通过表10展示了一天店铺管理的典型流程及若干关键步骤。


Table 10: Key points in the open-ended mission, Weekly shop management in Dealer's Life 2. Figure 26 showcases snapshots of key points (specific sub-figures marked in parenthesis in the table).
表10：Dealer's Life 2中开放式任务“每周店铺管理”的关键点。图26展示了关键点的快照（表中括号标注具体子图）。


<table><tr><td>Task: Weekly shop management</td><td>Description</td></tr><tr><td>Open shop (Fig. 26a)</td><td>Start a new day shop management.</td></tr><tr><td>Dialog (Fig. 26b)</td><td>Choose an option in a dialog.</td></tr><tr><td>Item Description (Fig. 26c)</td><td>View the item information</td></tr><tr><td>Haggle (Fig. 26d)</td><td>Give a price for the item.</td></tr><tr><td>Deal Result (Fig. 26e)</td><td>View the deal results.</td></tr><tr><td>Stats (Fig. 26f)</td><td>View shop stats.</td></tr></table>
<table><tbody><tr><td>任务：每周商店管理</td><td>描述</td></tr><tr><td>开店（图26a）</td><td>开始新一天的商店管理。</td></tr><tr><td>对话（图26b）</td><td>在对话中选择一个选项。</td></tr><tr><td>物品描述（图26c）</td><td>查看物品信息</td></tr><tr><td>讨价还价（图26d）</td><td>为物品出价。</td></tr><tr><td>交易结果（图26e）</td><td>查看交易结果。</td></tr><tr><td>统计（图26f）</td><td>查看商店统计数据。</td></tr></tbody></table>


### D.3 Implementation Details
### D.3 实现细节


The implementation of Dealers' Life 2 also strictly follows the GCC framework, which includes Information Gathering, Self-Reflection, Task Inference, Skill Curation, Action Planning, and Action Execution. The details are described in Appendix A. Therefore, we emphasize the specific implementations for Dealers' Life 2.
《Dealer's Life 2》的实现同样严格遵循GCC框架，包括信息收集、 自我反思、任务推断、技能策划、行动规划和行动执行。具体细节见附录A。因此，我们重点强调《Dealer's Life 2》的具体实现。


Procedural Memory. Due to the absence of a new-user guide, the LMM cannot directly and accurately know the operation method or effect of an action in the game, e.g., giving the price can only use the keyboard to input an integer in an abstract box in the bottom right of the haggle screen as shown in Figure 26d, by directly observing the screen. Unless the player executes an action and observes what is happening, the player cannot know what its effect is. However, this could easily cause severe errors in an open-world environment. For example, if the player gives a price at \$100,000 for an item without knowing what the box is, it could cause the player to lose all the money.
程序记忆。由于缺乏新手引导，语言大模型（LMM）无法直接且准确地了解游戏中某个动作的操作方法或效果，例如，给出价格只能通过键盘在讨价还价界面右下角的抽象框中输入整数，如图26d所示，需直接观察屏幕。除非玩家执行动作并观察发生了什么，否则无法知道其效果。然而，这在开放世界环境中极易导致严重错误。例如，若玩家在不知该框含义的情况下为某物品报价10万美元，可能导致玩家损失全部资金。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_40.jpg?x=322&y=199&w=1155&h=536&r=0"/>



Figure 26: Image examples of key points in the open-ended task of Dealers' Life 2.
图26：《Dealer's Life 2》开放式任务关键点的图像示例。


Besides, this game is very simplified with finite types of screen content and fixed buttons positions for processing the deal, where we could categorize the screen types and design general atomic skills for them. Thus, with a focus on evaluating the LMM's zero-shot haggling and strategic decision-making ability in managing a shop, we believe it is reasonable to skip the skill curation by directly setting several atomic skills as the initialization of the procedural memory, such as "process_dialog()" for clicking on the option of a dialog screen to keep the deal going on as shown in Figure 26b. The description of all the atomic skills is listed as follows:
此外，该游戏非常简化，屏幕内容类型有限，处理交易的按钮位置固定，我们可以对屏幕类型进行分类并设计通用的原子技能。因此，鉴于重点评估LMM在零样本讨价还价和店铺管理中的策略决策能力，我们认为直接将若干原子技能设为程序记忆的初始化，跳过技能策划是合理的，例如“process_dialog()”用于点击对话界面选项以继续交易，如图26b所示。所有原子技能描述如下：


- open_shop(): The function to open the dealer's shop to start dealing for today.
- open_shop(): 打开商店开始当天交易的功能。


- give_price(price): The function to give a price for the item in the deal. The price must be an integer number.
- give_price(price): 为交易物品报价的功能，价格必须为整数。


- process_dialog(): The function to click on to choose the first option of the dialog to make the game go on.
- process_dialog(): 点击选择对话框第一个选项以继续游戏的功能。


- close_description_page(): The function to close a description page showing information about the item details, daily stats, or the traits of the buyer or seller.
- close_description_page(): 关闭显示物品详情、每日统计或买卖双方特征信息的描述页面的功能。


- accept_deal(): The function to click on the check mark to accept the deal on the confirmation dialog.
- accept_deal(): 点击确认对话框中的勾选标记以接受交易的功能。


- reject_deal(): The function to click on the cross mark to reject the deal on the confirmation dialog.
- reject_deal(): 点击确认对话框中的叉号以拒绝交易的功能。


- finish_buy(): The function to click on the ok button to finish the deal on the confirmation dialog.
- finish_buy(): 点击确认对话框中的确定按钮以完成购买的功能。


- finish_sell(): The function to click on the ok button to finish the selling on the confirmation dialog.
- finish_sell(): 点击确认对话框中的确定按钮以完成销售的功能。


Self-Reflection. Additionally, as Dealers' Life 2 has no heavy need for a long-term reflection, so we only use the first and last frame of the video as input to reduce the number of tokens used per request. Finally, this self-reflection module could help to keep the game going, instead of sticking to the same point in the game.
自我反思。此外，由于《Dealer's Life 2》对长期反思需求不高，我们仅使用视频的首尾帧作为输入，以减少每次请求使用的token数量。最终，该自我反思模块有助于游戏继续进行，避免停滞在同一游戏点。


Action Planning. In this game, we restrict GPT-4 to output only one skill per action because it is a round-based game that does not require frequent execution of actions, and the state of the next time-step after an action is executed is highly uncertain, e.g., the unpredictable mood changes in a customer's response.
行动规划。在本游戏中，我们限制GPT-4每次行动仅输出一个技能，因为这是回合制游戏，不需要频繁执行动作，且动作执行后下一时间步的状态高度不确定，例如顾客反应中不可预测的情绪变化。


### D.4 Case Studies
### D.4 案例研究


Here we present a few game-specific case studies to further discuss CRADLE's reasoning and decision-making process in the GCC setting.
这里我们展示几个特定游戏的案例研究，以进一步讨论CRADLE在GCC环境中的推理和决策过程。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_41.jpg?x=399&y=189&w=995&h=855&r=0"/>



Figure 27: The reasoning of CRADLE in a successful deal with haggling. The price provided by CRADLE is keyed in by keyboard and mouse operations in the digital display box in the bottom-right corner.
图27：CRADLE在成功讨价还价交易中的推理过程。CRADLE提供的价格通过键盘和鼠标操作输入到右下角的数字显示框中。


#### D.4.1 Successful Negotiation
#### D.4.1 成功的谈判


Figure 27 illustrates a successful negotiation by CRADLE with an NPC seller over an item valued at \$280. CRADLE determines a strategic starting offer by considering both the item's quality and the customer's initial proposal. Throughout subsequent negotiation rounds, CRADLE leverages its memory to maintain an offer close to the initially assessed \$160, applying pressure on the customer to reduce their expectations. However, CRADLE also demonstrates flexibility, adapting its strategy when faced with the customer's final offer-signaled by their incline to leave. This allows CRADLE to secure a final agreement that still yields a profitable deal.
图27展示了CRADLE与NPC卖家就一件价值280美元的物品进行成功谈判的过程。CRADLE通过考虑物品质量和客户的初始报价，确定了一个战略性的起始报价。在随后的谈判回合中，CRADLE利用其记忆保持报价接近最初评估的160美元，施压客户降低期望。然而，面对客户最终报价并表现出离开的倾向时，CRADLE也表现出灵活性，调整策略，从而达成一个仍然有利可图的最终协议。


#### D.4.2 Unsuccessful Negotiation
#### D.4.2 失败的谈判


Figure 28 illustrates a scenario where CRADLE engages in an unsuccessful negotiation. The seller consistently demands a price above the estimated value of the item, while CRADLE, aiming to secure a profit, steadfastly offers a price below the estimated value. A common price cannot be arrived at after rounds of negotiation. Consequently, the negotiation fails to reach an agreement, resulting in the departure of the high-expectation customer.
图28展示了CRADLE参与的一次失败谈判场景。卖家始终坚持高于物品估价的价格，而CRADLE为了确保利润，坚定地提出低于估价的报价。经过多轮谈判，双方未能达成共识。结果，谈判失败，高期望的客户离开了。


#### D.4.3 Acquiring and Selling of a Counterfeit Item
#### D.4.3 购买和出售赝品


Figure 29 depicts a complete buying and selling cycle involving an item later identified as counterfeit by a buyer. Notably, CRADLE initially acquires the item without a known price estimate, basing its purchase solely on the seller's initial offer. In subsequent transactions, although CRADLE recognizes the item's potential forgery, it continues to trade the item in pursuit of maximizing profit. This strategy yields a substantial profit margin of 145%. However, it also poses a risk to the in-game character's reputation, highlighting a strategic decision made under the directive to prioritize profit.
图29描绘了一个完整的买卖循环，涉及一件后来被买家识别为赝品的物品。值得注意的是，CRADLE最初在没有已知价格估计的情况下，仅基于卖家的初始报价购买了该物品。在后续交易中，尽管CRADLE识别出该物品可能为赝品，但仍继续交易以追求最大利润。该策略带来了145%的可观利润率，但也对游戏角色的声誉构成风险，凸显了在优先考虑利润指令下做出的战略决策。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_42.jpg?x=402&y=198&w=995&h=820&r=0"/>



Figure 28: The reasoning of CRADLE in an unsuccessful deal with haggling. The price provided by CRADLE is keyed in by keyboard and mouse operations in the digital display box in the bottom-right corner.
图28：CRADLE在失败讨价还价交易中的推理过程。CRADLE提供的价格通过键盘和鼠标操作输入到右下角的数字显示框中。


### D.5 Quantitative Evaluation
### D.5 定量评估


The effectiveness of CRADLE in terms of game performance is evaluated through experiments conducted over a 7-day gaming scenario using nine quantitative financial metrics. A comprehensive description of these metrics is provided in Section D.6.
通过在为期7天的游戏场景中进行实验，使用九个定量财务指标评估CRADLE在游戏性能方面的有效性。关于这些指标的详细描述见D.6节。


### D.6 Evaluation Metrics
### D.6 评估指标


Assuming the buying price for item $i$ is denoted by ${B}_{i}$ ,the selling price by ${S}_{i}$ ,the market valuation by ${V}_{i}$ ,and the number of successfully traded items is $n$ . To evaluate CRADLE’s profitability and performance in Dealer's Life 2, we use the following evaluation metrics:
假设物品$i$的购买价格为${B}_{i}$，销售价格为${S}_{i}$，市场估价为${V}_{i}$，成功交易的物品数量为$n$。为了评估CRADLE在《Dealer's Life 2》中的盈利能力和表现，我们使用以下评估指标：


- Turnover Rate (TR) can be calculated as the ratio of the number of successfully traded items to the total number of items considered (both successfully and unsuccessfully traded). It reflects the Agent's ability to successfully complete transactions and can indicate operational efficiency, market competitiveness,and negotiation effectiveness. The calculation formula is ${TR} = \frac{n}{n + m}$ .
- 周转率（TR）可计算为成功交易物品数量与考虑的物品总数（包括成功和失败交易）的比率。它反映了代理完成交易的能力，并可指示运营效率、市场竞争力和谈判效果。计算公式为${TR} = \frac{n}{n + m}$。


- Gross Profit Margin (GPM) is the ratio of gross profit to sales revenue, reflecting the dealer's direct profit capability after selling items. The calculation formula is ${GPM} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i} - {B}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i}}$ .
- 毛利率（GPM）是毛利润与销售收入的比率，反映经销商售出物品后的直接盈利能力。计算公式为${GPM} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i} - {B}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i}}$。


- Return on Investment (ROI) is the ratio of profit to investment, used to measure the dealer's return on investment for items. The calculation formula is ${ROI} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i} - {B}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{B}_{i}}$ .
- 投资回报率（ROI）是利润与投资的比率，用于衡量经销商对物品的投资回报。计算公式为${ROI} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i} - {B}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{B}_{i}}$。


- Valuation Deviation (VD) reflects the difference between the selling price and the market valuation, used to evaluate the reasonableness of the pricing strategy. It is denoted as ${VD} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i} - {V}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{V}_{i}}$ .
- 估值偏差（Valuation Deviation，VD）反映售价与市场估值之间的差异，用于评估定价策略的合理性。表示为${VD} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i} - {V}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{V}_{i}}$。


- Buying Price to Valuation Ratio (BPVR) can help determine whether the buying price is lower than the market valuation, reflecting the success of the procurement. The calculation formula is ${BPVR} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{B}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{V}_{i}}.$
- 采购价与估值比率（Buying Price to Valuation Ratio，BPVR）有助于判断采购价是否低于市场估值，反映采购的成功与否。计算公式为${BPVR} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{B}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{V}_{i}}.$


- Selling Price to Valuation Ratio (SPVR) reflects the selling price relative to the market valuation, helping to assess the success of the sales. The calculation formula is ${SPVR} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{V}_{i}}$ .
- 售价与估值比率（Selling Price to Valuation Ratio，SPVR）反映售价相对于市场估值的情况，有助于评估销售的成功。计算公式为${SPVR} = \frac{\mathop{\sum }\limits_{{i = 1}}^{n}{S}_{i}}{\mathop{\sum }\limits_{{i = 1}}^{n}{V}_{i}}$。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=414&y=208&w=474&h=273&r=0"/>



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=911&y=208&w=475&h=273&r=0"/>



(a) Agent: Given that we do not know the estimated price, I proceed with 70%-80% of the asked price, around \$4,200 to \$4,480.
(a) 代理：由于我们不知道估价，我按要价的70%-80%进行，大约在4200美元到4480美元之间。


(b) Agent: Since the seller is willing to lower the price, the current counteroffer may still be negotiated.
(b) 代理：既然卖家愿意降价，目前的还价仍有谈判空间。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=414&y=583&w=475&h=267&r=0"/>



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=912&y=583&w=474&h=267&r=0"/>



(c) Agent: The counteroffer of \$4,900 seems reasonable, but I can go further for the best possible price.
(c) 代理：4900美元的还价看起来合理，但我可以继续争取更好的价格。


(d) Agent: The response will be final. Given this, accepting the deal is a sensible to secure the item.
(d) 代理：这是最终回复。鉴于此，接受交易是确保获得该物品的明智选择。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=415&y=953&w=475&h=268&r=0"/>



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=913&y=952&w=472&h=270&r=0"/>



(e) Agent: As I am selling the item, I'll try for a higher price for higher profits.
(e) 代理：既然我是卖方，我会争取更高的价格以获得更大利润。


(f) Agent: I note that the customer rejected my counter-offer, calling the item fake.
(f) 代理：我注意到客户拒绝了我的还价，称该物品为赝品。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=413&y=1296&w=477&h=269&r=0"/>



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=913&y=1297&w=474&h=261&r=0"/>



(g) Agent: The seller is in an urgent need to buy the jeweled necklace.
(g) 代理：卖家急需购买这条镶宝石的项链。


(h) Agent: From the warning window, I am told that this necklace is fake.
(h) 代理：从警告窗口得知这条项链是赝品。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=413&y=1636&w=479&h=267&r=0"/>



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_43.jpg?x=913&y=1636&w=474&h=269&r=0"/>



(i) Agent: Though the jeweled necklace is fake, accepting this offer provides substantial profit with the buyer's offer at \$11,400.
(i) 代理：虽然这条镶宝石的项链是赝品，但接受买方11400美元的报价仍能带来可观利润。


(j) Agent: Despite the successful sale at a good price, the item is revealed as a fake. The added profit is good (+145%)
(j) 代理：尽管以好价成功售出，但该物品被证实为赝品。额外利润可观（+145%）。


Figure 29: Case in acquiring and selling an item for multiple attempts with reasoning, and dealing with unexpected information on the authenticity. The price provided by CRADLE is keyed in by keyboard and mouse operations in the digital display box in the bottom-right corner.
图29：多次尝试获取和出售物品的案例，包含推理过程及应对真实性意外信息。CRADLE提供的价格通过数字显示框右下角的键盘和鼠标操作输入。


- Average Profit Rate (APR) reflects the overall profitability of the dealer on items. Assuming the return rate for item $i$ is $\frac{{S}_{i} - {B}_{i}}{{B}_{i}}$ ,the calculation formula of average return rate is denoted as ${APR} = \frac{1}{n}\mathop{\sum }\limits_{{i = 1}}^{n}\frac{{S}_{i} - {B}_{i}}{{B}_{i}}.$
- 平均利润率（Average Profit Rate，APR）反映经销商对物品的整体盈利能力。假设物品$i$的回报率为$\frac{{S}_{i} - {B}_{i}}{{B}_{i}}$，平均回报率的计算公式表示为${APR} = \frac{1}{n}\mathop{\sum }\limits_{{i = 1}}^{n}\frac{{S}_{i} - {B}_{i}}{{B}_{i}}.$


- Maximum Return Rate (MRR) is the highest return rate among all items. The calculation formula is ${MRR} = \max \left( {\frac{{S}_{1} - {B}_{1}}{{B}_{1}},\frac{{S}_{2} - {B}_{2}}{{B}_{2}},\ldots ,\frac{{S}_{n} - {B}_{n}}{{B}_{n}}}\right)$ .
- 最大回报率（Maximum Return Rate，MRR）是所有物品中最高的回报率。计算公式为${MRR} = \max \left( {\frac{{S}_{1} - {B}_{1}}{{B}_{1}},\frac{{S}_{2} - {B}_{2}}{{B}_{2}},\ldots ,\frac{{S}_{n} - {B}_{n}}{{B}_{n}}}\right)$。


- Minimum Return Rate (mRR) is the lowest return rate among all items. The calculation formula is ${mRR} = \min \left( {\frac{{S}_{1} - {B}_{1}}{{B}_{1}},\frac{{S}_{2} - {B}_{2}}{{B}_{2}},\ldots ,\frac{{S}_{n} - {B}_{n}}{{B}_{n}}}\right)$ .
- 最低回报率（mRR）是所有物品中最低的回报率。计算公式为${mRR} = \min \left( {\frac{{S}_{1} - {B}_{1}}{{B}_{1}},\frac{{S}_{2} - {B}_{2}}{{B}_{2}},\ldots ,\frac{{S}_{n} - {B}_{n}}{{B}_{n}}}\right)$。


Table 11: Performance of CRADLE with GPT-4o in Dealer's Life 2 gameplay. "# attempts" represents the total number of all negotiation attempts on items, including both successful and unsuccessful transactions.
表11：CRADLE结合GPT-4o在《Dealer's Life 2》游戏中的表现。“#尝试次数”表示所有物品的谈判总次数，包括成功和失败的交易。


<table><tr><td>Exp</td><td>#attempts</td><td>TR↑</td><td>GPM↑</td><td>ROI↑</td><td>VD↑</td><td>BPVR $\downarrow$</td><td>SPVR↑</td><td>APR↑</td><td>MRR↑</td><td>mRR↑</td></tr><tr><td>01</td><td>13</td><td>92.86</td><td>20.38</td><td>25.60</td><td>13.17</td><td>90.10</td><td>113.17</td><td>42.97</td><td>105.56</td><td>0.00</td></tr><tr><td>02</td><td>12</td><td>91.67</td><td>18.89</td><td>23.30</td><td>23.30</td><td>100.00</td><td>123.30</td><td>17.98</td><td>97.76</td><td>0.00</td></tr><tr><td>03</td><td>12</td><td>83.33</td><td>26.81</td><td>36.63</td><td>34.39</td><td>98.36</td><td>134.39</td><td>38.68</td><td>127.27</td><td>-8.06</td></tr><tr><td>04</td><td>9</td><td>100.00</td><td>49.35</td><td>87.45</td><td>80.69</td><td>93.53</td><td>165.74</td><td>66.45</td><td>145.16</td><td>0.00</td></tr><tr><td>05</td><td>12</td><td>100.00</td><td>20.61</td><td>25.25</td><td>25.25</td><td>100.00</td><td>125.25</td><td>23.08</td><td>44.33</td><td>0.00</td></tr><tr><td>Avg.</td><td>11.6</td><td>93.57</td><td>27.21</td><td>39.65</td><td>35.36</td><td>96.40</td><td>132.37</td><td>37.83</td><td>104.02</td><td>-1.61</td></tr></table>
<table><tbody><tr><td>实验</td><td>尝试次数</td><td>TR↑</td><td>GPM↑</td><td>ROI↑</td><td>VD↑</td><td>BPVR $\downarrow$</td><td>SPVR↑</td><td>APR↑</td><td>MRR↑</td><td>mRR↑</td></tr><tr><td>01</td><td>13</td><td>92.86</td><td>20.38</td><td>25.60</td><td>13.17</td><td>90.10</td><td>113.17</td><td>42.97</td><td>105.56</td><td>0.00</td></tr><tr><td>02</td><td>12</td><td>91.67</td><td>18.89</td><td>23.30</td><td>23.30</td><td>100.00</td><td>123.30</td><td>17.98</td><td>97.76</td><td>0.00</td></tr><tr><td>03</td><td>12</td><td>83.33</td><td>26.81</td><td>36.63</td><td>34.39</td><td>98.36</td><td>134.39</td><td>38.68</td><td>127.27</td><td>-8.06</td></tr><tr><td>04</td><td>9</td><td>100.00</td><td>49.35</td><td>87.45</td><td>80.69</td><td>93.53</td><td>165.74</td><td>66.45</td><td>145.16</td><td>0.00</td></tr><tr><td>05</td><td>12</td><td>100.00</td><td>20.61</td><td>25.25</td><td>25.25</td><td>100.00</td><td>125.25</td><td>23.08</td><td>44.33</td><td>0.00</td></tr><tr><td>平均</td><td>11.6</td><td>93.57</td><td>27.21</td><td>39.65</td><td>35.36</td><td>96.40</td><td>132.37</td><td>37.83</td><td>104.02</td><td>-1.61</td></tr></tbody></table>


## E Cities: Skylines
## E 城市：天际线


### E.1 Introduction to Cities: Skylines
### E.1 城市：天际线简介


Cities: Skylines is a single-player open-ended city-building simulation game developed by Colossal Order. In the game, players assume the role of a city planner, tasked with building and managing various aspects of a city to ensure its growth and prosperity. Players engage with a wide range of urban challenges, from managing traffic flow to balancing the budget, and from providing essential services to fostering a vibrant economy. Each decision impacts the city's development, requiring players to hone their planning and strategic decision-making skills to succeed. Effective city management leads to thriving neighborhoods, a growing economy, and high citizen satisfaction, while mismanagement can result in traffic congestion, service shortages, and a decline in population and reputation. Proper planning and responsive governance are crucial for a city that flourishes and remains appealing to its residents and visitors.
《城市：天际线》是一款由Colossal Order开发的单人开放式城市建设模拟游戏。在游戏中，玩家扮演城市规划者的角色，负责建设和管理城市的各个方面，以确保其增长和繁荣。玩家需要应对各种城市挑战，从管理交通流量到平衡预算，从提供基本服务到促进经济活力。每一个决策都会影响城市的发展，要求玩家磨练规划和战略决策能力以取得成功。有效的城市管理能够带来繁荣的社区、不断增长的经济和高市民满意度，而管理不善则可能导致交通拥堵、服务短缺、人口和声誉下降。合理规划和灵活治理是城市繁荣并保持对居民和游客吸引力的关键。


As the city's infrastructure and various supporting resources are well-developed, it can attract more people. And a larger population brings more tax revenue and also brings greater expenses to the city's operations. If operated properly, the increasing population can continuously unlock richer urban facilities; if operated improperly, such as road congestion, insufficient services, housing shortage, water and electricity shortage, noise pollution, water pollution, excessive garbage, disease, fire Situation, etc., will all lead to population decline.
随着城市基础设施和各种配套资源的完善，城市能够吸引更多人口。更大的人口带来更多税收收入，同时也增加了城市运营的开支。如果运营得当，人口增长可以持续解锁更丰富的城市设施；若运营不当，如道路拥堵、服务不足、住房短缺、水电供应不足、噪音污染、水污染、垃圾过多、疾病、火灾等情况，都会导致人口减少。


This game could be used to evaluate agents' strategies in managing urban development and resource allocation. By simulating different scenarios, agents can experiment with various policies and infras-tructural changes to see their impacts on the city's growth and sustainability. Effective strategies may involve optimizing public transportation systems to reduce road congestion, investing in renewable energy sources to prevent power shortages, and implementing comprehensive waste management programs to handle excessive garbage. It offers a risk-free environment to test innovative ideas and learn from the consequences of their actions, ultimately promoting a deeper understanding of sustainable urban development.
该游戏可用于评估智能体在城市发展和资源分配管理中的策略。通过模拟不同场景，智能体可以尝试各种政策和基础设施变更，观察其对城市增长和可持续性的影响。有效策略可能包括优化公共交通系统以减少道路拥堵，投资可再生能源以防止电力短缺，以及实施全面的垃圾管理计划以处理过量垃圾。它提供了一个无风险的环境来测试创新想法并从行动后果中学习，最终促进对可持续城市发展的深入理解。


Though this game is ranked very positive on Steam, it is notorious for its extremely high difficulty for beginners, as it lacks a detailed tutorial in the beginning, which introduces more challenges for CRADLE to deal with. On the other side, Although the successor, Cities: Skylines 2, simplified the controls and provided a detailed tutorial for beginners, it became notorious for poor optimization and frequent crashes that caused computer blue screens. As a result, we had to back to using Cities: Skylines 1 instead of 2. And we do not apply any modes to the game. We use the latest version of the game (version 1.17.1-f4).
尽管该游戏在Steam上评价非常正面，但因缺乏详细的新手教程而以极高的入门难度著称，这给CRADLE带来了更多挑战。另一方面，虽然续作《城市：天际线2》简化了操作并为新手提供了详细教程，但因优化差和频繁崩溃导致蓝屏而声名狼藉。因此，我们不得不回归使用《城市：天际线1》而非2，并且未对游戏应用任何模组。我们使用的是游戏的最新版本（版本1.17.1-f4）。


### E.2 Objectives
### E.2 目标


Our mission is to build cities so that they can support as many people as possible. Maps in this game are usually very large, which usually costs human players dozens of hours to cover all areas. Besides, the technology tree unlocks as the population grows, which requires multiple turns of planning and building. In this work, we simplified the problem by starting the game near the water and fixing the viewpoint (as shown in Figure 30), so that CRADLE can leverage the pixel position in the screenshot to locate the position of placed buildings and facilities. Agents start with a plot of land, which is equipped with an entry and an exit from a major highway, providing crucial access for future traffic flow, and proximity to the water source, which is essential for the city's water supply needs. And we focus on the first turn of planning, i.e., pause the game and stop the passage of the in-game time, use the initial starting funds of C70,000 and the most basic road, water, and electricity facilities provided at the beginning of the game, which is enough to achieve the first milestone, Little Hamlet with the population of 440 in the game. Then what kind of city can CRADLE create? Can this city ensure water and electricity supply to keep functioning normally while reasonably dividing residential, commercial, and industrial zones? A run is terminated when it reaches the maximal steps, 1000, or the budget is used up (less than C 1000).
我们的任务是建设能够容纳尽可能多人口的城市。游戏中的地图通常非常大，普通玩家通常需要数十小时才能覆盖所有区域。此外，科技树会随着人口增长而解锁，需要多轮规划和建设。在本工作中，我们简化问题，从靠近水源的位置开始游戏并固定视角（如图30所示），以便CRADLE利用截图中的像素位置定位已建建筑和设施的位置。智能体从一块地皮开始，该地块配备了通往主要高速公路的入口和出口，为未来的交通流提供关键通道，并靠近水源，满足城市的供水需求。我们关注第一轮规划，即暂停游戏并停止游戏内时间流逝，使用初始资金7万C和游戏开始时提供的最基本的道路、水和电设施，这足以实现游戏中的第一个里程碑“小村庄”，人口为440。CRADLE能建造出怎样的城市？该城市能否确保水电供应正常运行，同时合理划分住宅、商业和工业区？当达到最大步数1000或预算用尽（低于1000C）时，运行终止。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_45.jpg?x=311&y=780&w=580&h=335&r=0"/>



Figure 30: Demonstration for the initialization location of our mission in City: Skylines, which is near the river and contains the entry and exit of the highways.
图30：我们在《城市：天际线》中任务初始化位置的示意图，位于河流附近，包含高速公路的入口和出口。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_45.jpg?x=906&y=781&w=580&h=335&r=0"/>



Figure 31: Visual prompting methods we use for Cities: Skylines. The full screenshot is divided into $3 \times  5$ grids and each grid is assigned a unique white coordinate.
图31：我们在《城市：天际线》中使用的视觉提示方法。完整截图被划分为$3 \times  5$个网格，每个网格分配一个唯一的白色坐标。


### E.3 Evaluation Metric
### E.3 评估指标


To measure the completeness of the city built by the agent, we design the following preliminary metrics:
为了衡量智能体建造城市的完整性，我们设计了以下初步指标：


- Roads in closed loop: Whether the road is a closed loop, which is crucial for ensuring smooth traffic flow and is beneficial for the city's future development.
- 闭合环路的道路：道路是否形成闭合环路，这对于确保交通流畅至关重要，有利于城市的未来发展。


- Sufficient water supply: To ensure a sufficient water supply, the player needs to construct a water pumping station at the shoreline and then use water pipes to cover every district along the roads. To manage the effluent effectively, the other end of the water pipe network must be equipped with the water drain pipe which is also required to be placed near the shoreline.
- 充足的供水：为了确保充足的供水，玩家需要在海岸线建造水泵站，然后使用水管沿道路覆盖每个区域。为了有效管理排放，水管网络的另一端必须配备排水管，且排水管也需放置在靠近海岸线的位置。


- Sufficient electricity supply: Both zones and water facilities need electricity to power. To provide sufficient electricity supply, the player can build a coal power plant or wind turbine. Considering coal power plants cost too much and will create heavy pollution, wind turbines combined with the power lines are a better choice at the beginning. The electricity area extends automatically based on the presence of buildings and infrastructure that consume electricity.
- 充足的电力供应：区域和水务设施都需要电力支持。为了提供充足的电力供应，玩家可以建造燃煤电厂或风力发电机。考虑到燃煤电厂成本高且会造成严重污染，风力发电机结合电力线路是初期更好的选择。电力覆盖范围会根据建筑和基础设施的存在自动扩展，这些建筑和设施会消耗电力。


- Zones Area > 90%: The built two-lane road will provide empty space for the development of zones, i.e., residential zone, commercial zone and industrial zone. Residential zones provide houses for people to live in, which is the most essential zone to increase the population. Commercial zones provide places for small businesses, shops, and services produced in the industrial zones or imported. Industrial zones provide jobs for the residents and products for commercial buildings, which is also important to attract more people to move to the city. This metric is used to evaluate whether ${90}\%$ of the available areas are covered by the zones. The agent needs to reasonably allocate the areas and proportions of various zones to achieve better city development and attract a larger population.
- 区域面积 > 90%：已建成的双车道道路将为区域发展提供空地，即住宅区、商业区和工业区。住宅区为居民提供居住场所，是增加人口的最关键区域。商业区为小型企业、商店及工业区生产或进口的服务提供场所。工业区为居民提供就业岗位和为商业建筑提供产品，这对于吸引更多人口迁入城市也非常重要。该指标用于评估可用区域中有${90}\%$被区域覆盖。代理需要合理分配各类区域的面积和比例，以实现更好的城市发展并吸引更多人口。


- Maximal population: After CRADLE finishes building, we will unpause the game and start the simulation. Then houses start to be built and residents start to move in. We will record the maximal population during the simulation as the value for this metric.
- 最大人口：CRADLE完成建造后，我们将取消暂停游戏并开始模拟。随后开始建造住宅，居民开始迁入。我们将在模拟过程中记录最大人口作为该指标的数值。


- Maximal population with human assistance: We find that cities built by CRADLE manage to meet most of the requirements but suffer a significant population loss due to a few easy-to-fix mistakes. So after CRADLE finishes the design of the city, we apply human assistance that attempts to address these small mistakes within 3 unit operations (building or removing a road/facility/a place of zones is counted as one unit operation). We will also record the maximum population during the simulation in the city with human assistance.
- 人工辅助下的最大人口：我们发现CRADLE建造的城市能够满足大部分需求，但由于一些容易修正的小错误导致人口显著流失。因此，在CRADLE完成城市设计后，我们进行人工辅助，尝试在3个单位操作内（建造或拆除道路/设施/区域位置均计为一个单位操作）修正这些小错误。我们也将在人工辅助的城市模拟过程中记录最大人口。


### E.4 Implementation Details
### E.4 实现细节


The implementation of Cities: Skylines also strictly follows the GCC framework, which includes Information Gathering, Self-Reflection, Task Inference, Skill Curation, Action Planning and Action Execution. The details are described in Appendix A. Therefore, we emphasize the specific design for Cities: Skylines.
Cities: Skylines的实现同样严格遵循GCC框架，包括信息收集、自我反思、任务推断、技能策划、行动规划和行动执行。具体细节见附录A。因此，我们重点强调Cities: Skylines的具体设计。


Pause. Since the game is stopped before starting the simulation, there is no need to unpause and pause the game while executing actions.
暂停。由于游戏在开始模拟前处于暂停状态，执行操作时无需取消暂停或再次暂停游戏。


Visual Prompting. As shown in Figure 31, similar to Stardew Valley, we divide each screenshot into $3 \times  5$ grids with an axis based on the resolution of the game screen. Then CRADLE can utilize the pixel-level position in the screenshot to locate the building and facility. We empirically find that this visual prompting method can result in a more precise control of GPT-4o.
视觉提示。如图31所示，类似于Stardew Valley，我们将每张截图根据游戏屏幕分辨率划分为$3 \times  5$个网格。CRADLE可以利用截图中的像素级位置来定位建筑和设施。经验表明，这种视觉提示方法能使GPT-4o实现更精确的控制。


Information Gathering. In Cities: Skylines, the game's perspective is typically adjustable, allowing players to zoom in and out, rotate, and pan across their cityscape to get a detailed view of their urban development. To ensure consistency and ease of navigation for GPT-40, we have locked the camera angle and applied a visual prompting method to enhance GPT-4o's visual understanding. Besides, we use GPT-40 to extract key information, such as budget, population, construction information and error messages, in the game.
信息收集。在Cities: Skylines中，游戏视角通常可调，允许玩家缩放、旋转和平移城市景观以获得详细视图。为确保GPT-40的一致性和便捷导航，我们锁定了摄像机角度，并采用视觉提示方法增强GPT-4o的视觉理解。此外，我们使用GPT-40提取游戏中的关键信息，如预算、人口、建设信息和错误信息。


It is worth noting that in this module, we feed the original screenshot to GPT-40, rather than the augmented screenshot with axis and coordinates. We find that the numbers and lines may cover some key information and result in wrong OCR recognition. For example, the construction information, "Estimated Production: 120,000m3/week" may be mistakenly interpreted as "Estimated Production: 000,000m3/week" by GPT-40, due to interference from the lines and numbers. This construction information is a key signal for the suitable place of the water pumping station. For the other modules, we feed GPT-4o with the augmented screenshots.
值得注意的是，在此模块中，我们向GPT-40输入的是原始截图，而非带有坐标轴和坐标的增强截图。我们发现数字和线条可能遮挡关键信息，导致OCR识别错误。例如，建设信息“预计产量：120,000立方米/周”可能被GPT-40误识为“预计产量：000,000立方米/周”，这是由于线条和数字的干扰。该建设信息是确定水泵站合适位置的关键信号。其他模块则输入增强截图给GPT-4o。


Self-Reflection. Since actions in this game are very short, and each of them has a significant effect shown in the last screenshot. We only use the first screenshot and the last screenshot of the video clip as input to this module, which is proved to be enough for not missing any important information.
自我反思。由于游戏中的操作非常简短，且每个操作的效果都在最后一张截图中明显体现，我们仅使用视频片段的第一张和最后一张截图作为该模块的输入，事实证明这足以捕捉所有重要信息。


Task Inference. Due to the lack of a detailed tutorial, we have to provide a draft blueprint for the GPT-40 as the plan at the beginning to help GPT-40 to determine the next step to do. This plan provides guidance to the orders of building each facility and how to build a closed road, how to ensure water and electricity supply and zone placement. Even so, we find that GPT-4o failed frequently to follow the plan, resulting in the lack of building some important facilities, like water pumping stations.
任务推断。由于缺乏详细的教程，我们不得不在一开始为GPT-40提供一个草案蓝图作为计划，帮助GPT-40确定下一步的行动。该计划指导了各设施的建设顺序、如何建造封闭道路、如何确保水电供应及区域划分。即便如此，我们发现GPT-40经常未能遵循计划，导致缺少一些重要设施的建设，如水泵站。


Skill Curation. Due to the lack of detailed tutorials in the game, we generate the skills through self-exploration in this game. The skill generation basically involves manipulating the toolbar to understand the items on it. The pseudo-code for skill generation is described in Algorithm 1. This process leverages SAM for objective grounding and GPT-40 to gather information about the objects provided by the game, subsequently generating skills based on a predefined template. An example of the process is shown in Fig 32, 33, 34, 35, 36 and 37.
技能策划。由于游戏中缺乏详细教程，我们通过自我探索生成技能。技能生成基本涉及操作工具栏以理解其上的项目。技能生成的伪代码描述见算法1。该过程利用SAM进行目标定位，GPT-40收集游戏提供的对象信息，随后基于预定义模板生成技能。该过程示例见图32、33、34、35、36和37。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_46.jpg?x=436&y=1991&w=926&h=59&r=0"/>



Figure 32: The toolbar in Cities: Skylines
图32：Cities: Skylines中的工具栏


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_47.jpg?x=451&y=207&w=905&h=100&r=0"/>



Figure 33: The grounding result of the toolbar in Cities: Skylines
图33：Cities: Skylines中工具栏的定位结果


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_47.jpg?x=311&y=388&w=581&h=336&r=0"/>



Figure 34: When hovering the mouse over a toolbar item, the pop-up description is "Water & Sewage". The skill generated is then called "open_water_sewage_menu".
图34：当鼠标悬停在工具栏项目上时，弹出描述为“水与污水”。生成的技能称为“open_water_sewage_menu”。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_47.jpg?x=908&y=388&w=580&h=336&r=0"/>



Figure 35: When hovering the mouse over a toolbar item, the pop-up description is "Education - Reach a population of 440". As this is not selectable for now, GPT-4o does not generate a new skill for it.
图35：当鼠标悬停在工具栏项目上时，弹出描述为“教育 - 达到440人口”。由于当前不可选择，GPT-40未为其生成新技能。


Action Planning. In this game, we only let GPT-4o output one skill for each action since we observe that GPT-40 tends to output try_place and confirm placement together if we allow it to output and execute multiple skills in one action, which is against the intention of our design for the try_place action.
行动规划。在本游戏中，我们仅允许GPT-40每次行动输出一个技能，因为观察到若允许其在一次行动中输出并执行多个技能，GPT-40倾向于同时输出try_place和确认放置，这违背了我们对try_place动作设计的初衷。


Procedure Memory. Skills generated through self-exploration are listed below:
过程记忆。通过自我探索生成的技能如下：


- open_roads_menu(): The function to open the roads options in the lower menu bar for further determination of which types of roads to build.
- open_roads_menu()：打开下方菜单栏中的道路选项，以进一步确定建设哪种类型的道路。


- open_electricity_menu(): The function to open the electricity options in the lower menu bar for further determination of which types of power facility to build.
- open_electricity_menu()：打开下方菜单栏中的电力选项，以进一步确定建设哪种类型的电力设施。


- open_water_sewage_menu(): The function to open the water and sewage options in the lower menu bar for further determination of which types of water and sewage to build.
- open_water_sewage_menu()：打开下方菜单栏中的水与污水选项，以进一步确定建设哪种类型的水与污水设施。


- open_zoning_menu(): The function to open the zoning options in the lower menu bar for further determination of which types of zonings to build.
- open_zoning_menu()：打开下方菜单栏中的分区选项，以进一步确定建设哪种类型的分区。


- try_place_two_lane_road $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ : Previews the placement of a road between two specified points, $\left( {{x}_{1},{y}_{1}}\right)$ and $\left( {{x}_{2},{y}_{2}}\right)$ ,with ${x}_{1},{y}_{1}$ being the coordinate of start point of the road,and $\left( {{x}_{2},{y}_{2}}\right)$ being the coordinate of end point of the road. This function does not actually construct the road, but rather displays a visual representation of where the road would be placed if confirmed.
- try_place_two_lane_road $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ ：预览在两个指定点$\left( {{x}_{1},{y}_{1}}\right)$和$\left( {{x}_{2},{y}_{2}}\right)$之间放置一条双车道道路，${x}_{1},{y}_{1}$为道路起点坐标，$\left( {{x}_{2},{y}_{2}}\right)$为终点坐标。该函数不实际建造道路，仅显示若确认放置，道路将被放置的位置的视觉效果。


- try_place_wind_turbine $\left( {x,y}\right)$ : Previews the placement of a wind turbine on point, $\left( {x,y}\right)$ . This function does not actually construct the wind turbine, but rather displays a visual representation of where the wind turbine would be placed if confirmed.
- try_place_wind_turbine $\left( {x,y}\right)$ ：预览在点$\left( {x,y}\right)$放置风力涡轮机。该函数不实际建造风力涡轮机，仅显示若确认放置，风力涡轮机将被放置的位置的视觉效果。


- try_place_water_pumping_station $\left( {x,y}\right)$ : Previews the placement of a water pumping station on point, $\left( {x,y}\right)$ . This function does not actually construct the water pumping station,but rather displays a visual representation of where the water pumping station would be placed if confirmed.
- try_place_water_pumping_station $\left( {x,y}\right)$ ：预览在点$\left( {x,y}\right)$放置水泵站。该函数不实际建造水泵站，仅显示若确认放置，水泵站将被放置的位置的视觉效果。


- try_place_water_pipe $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ : Previews the placement of a water pipe between two specified points, $\left( {{x}_{1},{y}_{1}}\right)$ and $\left( {{x}_{2},{y}_{2}}\right)$ . This function does not actually construct the water pipe, but rather displays a visual representation of where the water pipe would be placed if confirmed.
- try_place_water_pipe $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ ：预览在两个指定点$\left( {{x}_{1},{y}_{1}}\right)$和$\left( {{x}_{2},{y}_{2}}\right)$之间放置水管。该函数不实际建造水管，仅显示若确认放置，水管将被放置的位置的视觉效果。


- try_place_water_drain_pipe $\left( {x,y}\right)$ : Previews the placement of a water drain pipe on point, $\left( {x,y}\right)$ . This function does not actually construct the water drain pipe,but rather displays a visual representation of where the water drain pipe would be placed if confirmed.
- try_place_water_drain_pipe $\left( {x,y}\right)$ ：预览在点 $\left( {x,y}\right)$ 上放置排水管的位置。此功能并不实际构建排水管，而是显示如果确认放置，排水管将被放置的位置的可视化表示。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_48.jpg?x=311&y=202&w=581&h=336&r=0"/>



Figure 36: The Water & Sewage menu is opened by executing the new skill "open_water_sewage_menu". The Agent then hovers the mouse over a second-level tool-bar item, the pop-up description is "Water Pipe", and the generated skill is called "try_place_water_pipe".
图36：通过执行新技能“open_water_sewage_menu”打开水与污水菜单。代理随后将鼠标悬停在二级工具栏项上，弹出描述为“水管”，生成的技能称为“try_place_water_pipe”。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_48.jpg?x=908&y=202&w=580&h=336&r=0"/>



Figure 37: The Roads menu is opened by executing the new skill "open_roads_menu". The Agent then hovers the mouse over a second-level toolbar item, the pop-up description is "Two-Lane Road", and the generated skill is called "try_place_two_lane_road".
图37：通过执行新技能“open_roads_menu”打开道路菜单。代理随后将鼠标悬停在二级工具栏项上，弹出描述为“双车道道路”，生成的技能称为“try_place_two_lane_road”。


Algorithm 1: Skill Generation
算法1：技能生成


---



Input: Toolbar with objects, Skill template
输入：带有对象的工具栏，技能模板


Output: Procedure memory with generated skills
输出：包含生成技能的过程内存


Initialize procedure memory;
初始化过程内存；


for each object in the toolbar do
对工具栏中的每个对象执行


	Hover the mouse on the object to get the description;
	将鼠标悬停在对象上以获取描述；


	Generate skill using GPT-4o based on the object description and the skill template;
	基于对象描述和技能模板，使用GPT-4o生成技能；


	Store generated skill in procedure memory;
	将生成的技能存储在过程内存中；


	Execute the generated skill to enter the second-level toolbar;
	执行生成的技能以进入二级工具栏；


	for each object in the second-level toolbar do
	对二级工具栏中的每个对象执行


		Hover the mouse on the object to get the description;
		将鼠标悬停在对象上以获取描述；


		Generate skill using GPT-4o based on the object description and skill template;
		基于对象描述和技能模板，使用GPT-4o生成技能；


		Store generated skill in procedure memory;
		将生成的技能存储在过程内存中；


return procedure memory
返回过程内存


---



- try_place_commercial_zone $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ : Previews the placement of a commercial zone within a rectangular region with diagonal corners at $\left( {{x}_{1},{y}_{1}}\right)$ and $\left( {{x}_{2},{y}_{2}}\right)$ . This function does not actually construct the commercial zone, but rather displays a visual representation of where the commercial zone would be placed if confirmed.
- try_place_commercial_zone $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ ：预览在以 $\left( {{x}_{1},{y}_{1}}\right)$ 和 $\left( {{x}_{2},{y}_{2}}\right)$ 为对角顶点的矩形区域内放置商业区的位置。该函数并不实际构建商业区，而是显示商业区确认放置后的位置的可视化表示。


- try_place_industrial_zone $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ : Previews the placement of a industrial zone within a rectangular region with diagonal corners at $\left( {{x}_{1},{y}_{1}}\right)$ and $\left( {{x}_{2},{y}_{2}}\right)$ . This function does not actually construct the industrial zone, but rather displays a visual representation of where the industrial zone would be placed if confirmed.
- try_place_industrial_zone $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ ：预览在以 $\left( {{x}_{1},{y}_{1}}\right)$ 和 $\left( {{x}_{2},{y}_{2}}\right)$ 为对角顶点的矩形区域内放置工业区的位置。该函数并不实际构建工业区，而是显示工业区确认放置后的位置的可视化表示。


- try_de_zone $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ : The function to remove the zone in the game. The zone must cover the road.
- try_de_zone $\left( {{x}_{1},{y}_{1},{x}_{2},{y}_{2}}\right)$ ：游戏中移除区域的函数。该区域必须覆盖道路。


- confirm_placement(): The function to confirm the placement and build the object after the try_place_[object] function.
- confirm_placement()：在 try_place_[object] 函数之后确认放置并建造对象的函数。


- cancel_placement(): The function to cancel the placement of the object after the try_place_[object] function.
- cancel_placement()：在 try_place_[object] 函数之后取消对象放置的函数。


Episodic Memory. Besides the common information to store in the episodic memory. We initialize the memory with the coordinates of the entry and exit of the highway. Then CRADLE is able to extend the roads according to these two points at the beginning. When a road or a facility such as wind turbine, water pumping station, water drain pipe and water pipe is placed on the map, the corresponding coordinates will also be stored in the memory for future development of the city.
情景记忆。除了存储在情景记忆中的常见信息外，我们还用高速公路的入口和出口坐标初始化记忆。然后 CRADLE 能够根据这两个点在初期扩展道路。当道路或风力涡轮机、水泵站、排水管和水管等设施被放置在地图上时，相应的坐标也会存储在记忆中，以便未来城市的发展。


### E.5 Case Studies
### E.5 案例研究


#### E.5.1 Failure for Road Building.
#### E.5.1 道路建设失败。


As shown in Figure 38, sometimes GPT-40 will build a long road, which ends on the top of water. The recorded endpoint of the road is actually the projection of the road on the sea level, resulting in the offset from the projection point and the real endpoint of the road. It leads to the failure of extending the road to the other places.
如图38所示，有时 GPT-40 会建造一条长路，终点位于水面上方。道路的记录终点实际上是道路在海平面上的投影，导致投影点与道路实际终点存在偏差。这导致无法将道路延伸到其他地方。


Figure 38b, 38c, 38d and 38e tells a story that GPT-40 sometimes forgets to confirm the placement (from 38c to 38d) and directly moves to the next step of building the next road (from 38d to 38e), resulting in the disconnection of the roads.
图38b、38c、38d和38e讲述了一个故事：GPT-40 有时会忘记确认放置（从38c到38d），直接进入下一步建造下一条道路（从38d到38e），导致道路断开。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_49.jpg?x=323&y=595&w=1154&h=531&r=0"/>



Figure 38: Failure cases of building roads in a closed loop. Figure 38a shows that the road is built over the water and is difficult to continue. Figure 38b, 38c, 38d and 38e tells a story that GPT-40 sometimes forgets to confirm the placement (from 38c to 38d) and directly moves to the next step of building (from 38d to 38e), resulting in the disconnection of the roads.
图38：闭环道路建设失败案例。图38a显示道路建在水面上，难以继续。图38b、38c、38d和38e讲述了 GPT-40 有时忘记确认放置（从38c到38d），直接进入下一步建造（从38d到38e），导致道路断开。


#### E.5.2 Failure for Sufficient Water Supply.
#### E.5.2 供水不足失败。


Figure 39 displays three cases where CRADLE fails to ensure the water supply due to the disconnection of water pipes and the missing water pumping station. All of them can be fixed within three unit operations. As shown in Figure 39b and 39f, we observe a significant increase in the population if these mistakes are fixed, which proves that CRADLE already has the ability to build a reasonable city but some minor adjustments are needed.
图39展示了三种因水管断开和缺少水泵站导致 CRADLE 供水失败的情况。所有问题均可在三次单元操作内修复。如图39b和39f所示，修复这些错误后人口显著增加，证明 CRADLE 已具备建设合理城市的能力，但需要一些细微调整。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_50.jpg?x=292&y=183&w=1206&h=1752&r=0"/>



(f) CRADLE's craftwork III with human assistant within three unit operations to place the water pumping station, lay water pipe on the right side and develop the bottom area with industrial zones. Population: 780+.
(f) CRADLE 在人类助手协助下的第三阶段工艺，三次单元操作内放置水泵站、铺设右侧水管并在底部区域发展工业区。人口：780+。


Figure 39: Demonstrations of three cities built by CRADLE in zoning view (left), water view (middle) and electricity view (right). Figures 39b, 39d, 39f show the cities with human assistance to address construction issues (shown in red arrow). Populations shown in the figures are close to but not exactly the maximal population since they are changed dynamically.
图39：CRADLE 建造的三个城市示意图，分别为分区视图（左）、水资源视图（中）和电力视图（右）。图39b、39d、39f显示了人类协助解决建设问题（红色箭头所示）的城市。图中显示的人口接近但不完全是最大人口，因为人口数动态变化。


## F Software Applications
## F 软件应用


### F.1 Selected Software Applications
### F.1 选定的软件应用


Besides targeting complex digital games, CRADLE also includes an initial benchmark task set across diverse software applications. The selected applications include Chrome, Outlook, Feishu, CapCut, and Meitu. These applications cover popular applications for daily tasks in different usage categories, such as web browsing, communication, work, and media manipulation. Table 12 shows the exact application versions benchmarked in this paper. Five distinct tasks were designed for each application to represent their target domains and explore the difficulties posed to LMM-based agents and analyze their limitations. Figure 3 shows an overview of all tasks across applications and Tables 13 and 14 detail each task.
除了针对复杂的数字游戏，CRADLE还包含了一个涵盖多样软件应用的初始基准任务集。所选应用包括Chrome、Outlook、飞书（Feishu）、剪映（CapCut）和美图（Meitu）。这些应用覆盖了不同使用类别中日常任务的热门应用，如网页浏览、通信、办公和媒体处理。表12展示了本文基准测试中使用的具体应用版本。为每个应用设计了五个不同的任务，以代表其目标领域，探讨基于大规模语言模型（LMM）代理面临的挑战并分析其局限性。图3展示了所有应用任务的概览，表13和表14详细说明了每个任务。


Chrome and Outlook were selected as common representatives for web browsing and e-mail, with well-known functionality and UI design. CapCut and Meitu are two popular media editing applications for video/image editing with their own interaction styles. Lastly, Feishu (also known ads Lark) is an office collaboration and productivity application, which includes messaging, calendar/meetings, and approval workflows. It represents a complex business application that doesn't strictly follow OS-specific UI guidelines. To the best of our knowledge, this is the first agent targeting applications like CapCut, Meitu, and Feishu.
Chrome和Outlook被选为网页浏览和电子邮件的常见代表，具有广为人知的功能和用户界面设计。剪映（CapCut）和美图（Meitu）是两款流行的媒体编辑应用，分别用于视频/图像编辑，拥有各自的交互风格。最后，飞书（Feishu，也称Lark）是一款办公协作和生产力应用，包含消息、日历/会议和审批流程。它代表了一类不严格遵循操作系统特定用户界面指南的复杂商务应用。据我们所知，这是首个针对剪映、美图和飞书等应用的代理。


#### F.1.1 Brief Descriptions
#### F.1.1 简要描述


<table><tr><td>Software</td><td>Version</td></tr><tr><td>Chrome</td><td>125.0.6422.142</td></tr><tr><td>Outlook</td><td>1.2024.529.200</td></tr><tr><td>CapCut</td><td>4.0.0</td></tr><tr><td>Meitu</td><td>7.5.6.1</td></tr><tr><td>Feishu</td><td>7.19.5</td></tr></table>
<table><tbody><tr><td>软件</td><td>版本</td></tr><tr><td>Chrome（谷歌浏览器）</td><td>125.0.6422.142</td></tr><tr><td>Outlook（微软邮箱）</td><td>1.2024.529.200</td></tr><tr><td>CapCut（剪映）</td><td>4.0.0</td></tr><tr><td>美图</td><td>7.5.6.1</td></tr><tr><td>飞书</td><td>7.19.5</td></tr></tbody></table>


Table 12: Exact software versions utilized in the described experiments. Similar versions should behave similarly.
表12：所述实验中使用的确切软件版本。相似版本应具有相似的表现。


Chrome is a web browser developed by Google. It allows users to access and utilize online resources through activities such as browsing websites, streaming videos, and using web applications. Additionally, users can customize their browsing experience with various extensions, manage bookmarks and passwords, and synchronize their data across multiple devices for seamless access.
Chrome是由谷歌开发的网页浏览器。它允许用户通过浏览网站、观看视频和使用网页应用等活动访问和利用在线资源。此外，用户可以通过各种扩展程序自定义浏览体验，管理书签和密码，并在多设备间同步数据，实现无缝访问。


Outlook is an application by that allows users to manage emails, calendars, contacts, and tasks. It includes tools for communication and scheduling through features such as sending and receiving emails, setting up meetings, and
Outlook是一款应用程序，允许用户管理电子邮件、日历、联系人和任务。它包含用于通信和日程安排的工具，如发送和接收邮件、安排会议等功能。


keeping track of appointments. Additionally, users can customize their experience and integrate Outlook with other Microsoft Office applications.
并跟踪预约。此外，用户可以自定义使用体验，并将Outlook与其他Microsoft Office应用程序集成。


CapCut is a popular video editing application developed by ByteDance. It provides easy-to-use editing tools and and enables users to create quality videos with a range of advanced features. CapCut offers a set of editing tools, including trimming, cutting, merging, and splitting video clips; the application of various effects, filters, and transitions; as well as adjusting speed, and adding music or text overlays.
CapCut是字节跳动开发的一款流行视频编辑应用。它提供易用的编辑工具，使用户能够利用多种高级功能制作高质量视频。CapCut提供一套编辑工具，包括剪裁、切割、合并和拆分视频片段；应用各种特效、滤镜和转场；调整速度，以及添加音乐或文字覆盖。


Meitu is a photo editing application. It is designed to cater to a broad audience and enables users to enhance and transform their photos with minimal effort. Meitu offers editing tools, including basic adjustments like cropping, rotating, and resizing, as well as advanced features such as beauty retouching, filters, and special effects. Additionally, Meitu offers a wide range of stickers, frames, and text options to further personalize photos.
美图是一款照片编辑应用，面向广泛用户，帮助用户轻松提升和变换照片。美图提供编辑工具，包括裁剪、旋转和调整大小等基础操作，以及美颜修饰、滤镜和特效等高级功能。此外，美图还提供丰富的贴纸、边框和文字选项，进一步个性化照片。


Feishu, also known as Lark, is a business communication and collaboration platform by ByteDance. It integrates various tools for office workflows and project management. Feishu offers a wide array of functionalities, including instant messaging, video conferencing, file sharing, and collaboration within the app. It also includes an integrated calendar, which helps users schedule and manage meetings and events, and task management tools that allow users to assign and track tasks.
飞书（Feishu，也称Lark）是字节跳动推出的企业通信与协作平台。它整合了多种办公流程和项目管理工具。飞书提供丰富功能，包括即时消息、视频会议、文件共享和应用内协作。还内置日历，帮助用户安排和管理会议及活动，以及任务管理工具，支持任务分配和跟踪。


### F.2 Software Tasks
### F.2 软件任务


For each of the five applications, we selected a set of representative tasks for their respective domains. For example, search, navigation, and settings tasks on Chrome; sending, searching, and deleting emails, plus changing settings on Outlook; basic video and image editing operations on CapCut and Meitu (e.g., adding special effects and creating a collage); and communication and organization
针对这五款应用，我们为各自领域选择了一组代表性任务。例如，Chrome上的搜索、导航和设置任务；Outlook上的发送、搜索和删除邮件，以及更改设置；CapCut和美图上的基础视频和图像编辑操作（如添加特效和制作拼贴）；以及通信和组织相关任务。


Table 13: Task Descriptions for Chrome, Outlook, and CapCut. Difficulty refers to how hard it is for our agent to accomplish the corresponding tasks. Figures 40, 41, and 42 illustrate each task (specific sub-figures marked in parenthesis in the left-most column along with task name).
表13：Chrome、Outlook和CapCut的任务描述。难度指我们的代理完成相应任务的难易程度。图40、41和42展示了每个任务（最左列任务名称旁括号内标注具体子图）。


<table><tr><td>Software</td><td>Description</td><td>Difficulty</td></tr><tr><td colspan="3">Chrome</td></tr><tr><td>Download Paper (Fig. 40a)</td><td>Search for an article with a title like \{paper_title\} and download its PDF file.</td><td>Hard</td></tr><tr><td>Post in Twitter (Fig. 40b)</td><td>Post "It's a good day." on my Twitter.</td><td>Hard</td></tr><tr><td>Open Closed Page (Fig. 40c)</td><td>Open the last closed page.</td><td>Easy</td></tr><tr><td>Go to Profile (Fig. 40d)</td><td>Find and navigate to \{person_name\}'s homepage on GitHub.</td><td>Medium</td></tr><tr><td>Change Mode (Fig. 40e)</td><td>Customize Chrome to dark mode.</td><td>Medium</td></tr><tr><td colspan="3">Outlook</td></tr><tr><td>Send New E-mail (Fig. 41a)</td><td>Create a new e-mail to \{email_address\} with subject "Hello friend" and send it.</td><td>Medium</td></tr><tr><td>Empty Junk Folder (Fig. 41b)</td><td>Open the junk folder and delete all messages in it, if any.</td><td>Medium</td></tr><tr><td>Reply to Person (Fig. 41c)</td><td>Open an e-mail from \{person_name\} in the inbox. reply to it with "Got it. Thanks.", and click send.</td><td>Medium</td></tr><tr><td>Find Target E-mail (Fig. 41d)</td><td>Find the e-mail whose subject is "Urgent meeting" and open it.</td><td>Easy</td></tr><tr><td>Setup Forwarding (Fig. 41e)</td><td>Set up email forwarding for every email received to go to \{email_address\}.</td><td>Medium</td></tr><tr><td colspan="3">CapCut</td></tr><tr><td>Create Media Project (Fig. 42a)</td><td>Create a new project, then import \{video_file_name\} to the media, click the "Audio" button to add music to the timeline, and finally export the video.</td><td>Hard</td></tr><tr><td>Add Transition (Fig. 42b)</td><td>Open the first existing project. Switch to Transitions panel. Drag a transition effect between the two videos, and then export the video.</td><td>Medium</td></tr><tr><td>Crop by Timestamp (Fig. 42c)</td><td>Delete the video frames after five seconds and then before one second in this video, and then export the video.</td><td>Medium</td></tr><tr><td>Add Sticker (Fig. 42d)</td><td>Open the first existing project. Switch to Stickers panel. Drag a sticker of a person's face to the video, and then export the video.</td><td>Hard</td></tr><tr><td>Crop by Content (Fig. 42e)</td><td>Crop the video when the ball enters the goal, and then export the video.</td><td>Very hard</td></tr></table>
<table><tbody><tr><td>软件</td><td>描述</td><td>难度</td></tr><tr><td colspan="3">Chrome浏览器</td></tr><tr><td>下载论文（图40a）</td><td>搜索标题类似于\{paper_title\}的文章并下载其PDF文件。</td><td>困难</td></tr><tr><td>在Twitter发帖（图40b）</td><td>在我的Twitter上发布“今天天气真好。”</td><td>困难</td></tr><tr><td>打开关闭的页面（图40c）</td><td>打开最后关闭的页面。</td><td>简单</td></tr><tr><td>进入个人主页（图40d）</td><td>查找并进入\{person_name\}在GitHub上的主页。</td><td>中等</td></tr><tr><td>切换模式（图40e）</td><td>将Chrome浏览器自定义为暗黑模式。</td><td>中等</td></tr><tr><td colspan="3">Outlook邮箱</td></tr><tr><td>发送新邮件（图41a）</td><td>创建一封发给\{email_address\}的新邮件，主题为“Hello friend”，并发送。</td><td>中等</td></tr><tr><td>清空垃圾邮件文件夹（图41b）</td><td>打开垃圾邮件文件夹，删除其中所有邮件（如有）。</td><td>中等</td></tr><tr><td>回复某人（图41c）</td><td>打开收件箱中\{person_name\}的邮件，回复“收到，谢谢。”并点击发送。</td><td>中等</td></tr><tr><td>查找目标邮件（图41d）</td><td>查找主题为“紧急会议”的邮件并打开。</td><td>简单</td></tr><tr><td>设置邮件转发（图41e）</td><td>设置所有收到的邮件自动转发到\{email_address\}。</td><td>中等</td></tr><tr><td colspan="3">CapCut视频编辑</td></tr><tr><td>创建媒体项目（图42a）</td><td>新建项目，导入\{video_file_name\}视频，点击“音频”按钮添加音乐到时间线，最后导出视频。</td><td>困难</td></tr><tr><td>添加转场效果（图42b）</td><td>打开第一个已有项目，切换到转场面板，将转场效果拖拽到两个视频间，然后导出视频。</td><td>中等</td></tr><tr><td>按时间戳裁剪（图42c）</td><td>删除视频中五秒后和一秒前的画面，然后导出视频。</td><td>中等</td></tr><tr><td>添加贴纸（图42d）</td><td>打开第一个已有项目，切换到贴纸面板，将一个人物脸部贴纸拖到视频上，然后导出视频。</td><td>困难</td></tr><tr><td>按内容裁剪（图42e）</td><td>在球进入球门时裁剪视频，然后导出视频。</td><td>非常困难</td></tr></tbody></table>


operations on Feishu. Tables 13 and 14 describe in detail the 25 tasks CRADLE performs and analyzes on the five selected applications; also illustrated in Figures 40, 41, 42, 43, 44, and 3.
Feishu上的操作。表13和表14详细描述了CRADLE在五个选定应用上执行和分析的25个任务；这些任务也在图40、41、42、43、44和3中有所展示。


It is worth noting that we add a special task on CapCut to demonstrate the agent's ability for tool use. In this task, a pre-defined skill uses GPT-40 as a tool for video understanding capabilities. The skill can be selected to answer content-based questions about a video (e.g., "when the ball enters the goal") and the response be used during task completion. This task is illustrated in detail in Figure 51.
值得注意的是，我们在CapCut上添加了一个特殊任务，以展示代理工具使用能力。在该任务中，预定义技能使用GPT-40作为视频理解工具。该技能可被选用来回答基于视频内容的问题（例如，“球何时进入球门”），并在任务完成过程中使用该回答。该任务在图51中有详细说明。


### F.3 Quantitative Evaluation
### F.3 定量评估


We calculate CRADLE's performance over the 25 tasks in the applications set. Each task is executed five times and performance is measured in three metrics: success rate, average number of steps taken by the agent (and variance over the five runs), and efficiency. Efficiency is defined as the ratio between the expected number of steps in a given task and the total number of steps taken by the agent. The expected number of steps per task is calculated by having humans perform each task.
我们计算了CRADLE在应用集中的25个任务上的表现。每个任务执行五次，性能通过三个指标衡量：成功率、代理执行的平均步骤数（及五次运行的方差）和效率。效率定义为给定任务的预期步骤数与代理实际执行总步骤数的比值。每个任务的预期步骤数由人工执行该任务计算得出。


Table 14: Task Descriptions for: Meitu, and Feishu. Difficulty refers to how hard it is for our agent to accomplish the corresponding tasks. Figures 43, and 44 illustrate each task (specific sub-figures marked in parenthesis in the left-most column along with task name).
表14：Meitu和Feishu的任务描述。难度指代理完成相应任务的难易程度。图43和44展示了每个任务（左侧最列中任务名称旁括号内标注了具体子图）。


<table><tr><td>Software</td><td>Description</td><td>Difficulty</td></tr><tr><td colspan="3">Meitu</td></tr><tr><td>Apply Filter (Fig. 43a)</td><td>Apply a filter from Meitu to \{pic- 1 ture_file_name\} and save the project.</td><td>Easy</td></tr><tr><td>Cutout (Fig. 43b)</td><td>Cutout a person from \{picture_file_name\} and save the project.</td><td>Easy</td></tr><tr><td>Add Sticker (Fig. 43c)</td><td>Add a flower sticker to \{picture_file_name\} and save the picture.</td><td>Middle</td></tr><tr><td>Create Collage (Fig. 43d)</td><td>Make a collage using 3 pictures and save the project.</td><td>Hard</td></tr><tr><td>Add Frame (Fig. 43e)</td><td>Add a circle-shaped frame to \{picture_file_name\} and save the picture.</td><td>Hard</td></tr><tr><td colspan="3">Feishu</td></tr><tr><td>Create Appointment (Fig. 44a)</td><td>Create a new appointment in my calendar anytime later today with title "Focus time".</td><td>Hard</td></tr><tr><td>Message Contact (Fig. 44b)</td><td>Please send a "Hi" chat message to \{contact_name\}.</td><td>Easy</td></tr><tr><td>Send File (Fig. 44c)</td><td>Send the AWS bill file at $\{ {pdf}\_ {path}\}$ in a chat with \{contact_name\}.</td><td>Hard</td></tr><tr><td>Set User Status (Fig. 44d)</td><td>Open the user profile menu and set my status to "In meeting".</td><td>Medium</td></tr><tr><td>Start Video Conference (Fig. 44e)</td><td>Create a new meeting and meet now.</td><td>Easy</td></tr></table>
<table><tbody><tr><td>软件</td><td>描述</td><td>难度</td></tr><tr><td colspan="3">美图</td></tr><tr><td>应用滤镜（图43a）</td><td>对\{picture_file_name\}应用美图滤镜并保存项目。</td><td>简单</td></tr><tr><td>抠图（图43b）</td><td>从\{picture_file_name\}中抠出人物并保存项目。</td><td>简单</td></tr><tr><td>添加贴纸（图43c）</td><td>给\{picture_file_name\}添加一朵花贴纸并保存图片。</td><td>中等</td></tr><tr><td>制作拼贴（图43d）</td><td>使用3张图片制作拼贴并保存项目。</td><td>困难</td></tr><tr><td>添加边框（图43e）</td><td>给\{picture_file_name\}添加一个圆形边框并保存图片。</td><td>困难</td></tr><tr><td colspan="3">飞书</td></tr><tr><td>创建预约（图44a）</td><td>在我的日历中今天稍晚时间创建一个标题为“专注时间”的新预约。</td><td>困难</td></tr><tr><td>发送消息给联系人（图44b）</td><td>请向\{contact_name\}发送一条“Hi”的聊天消息。</td><td>简单</td></tr><tr><td>发送文件（图44c）</td><td>在与\{contact_name\}的聊天中发送AWS账单文件$\{ {pdf}\_ {path}\}$。</td><td>困难</td></tr><tr><td>设置用户状态（图44d）</td><td>打开用户资料菜单，将我的状态设置为“开会中”。</td><td>中等</td></tr><tr><td>开始视频会议（图44e）</td><td>创建一个新会议并立即开始。</td><td>简单</td></tr></tbody></table>


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_53.jpg?x=321&y=1440&w=1157&h=533&r=0"/>



Figure 40: Screenshots of Chrome tasks.
图40：Chrome任务的截图。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_54.jpg?x=319&y=227&w=1160&h=534&r=0"/>



Figure 41: Screenshots of Outlook tasks.
图41：Outlook任务的截图。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_54.jpg?x=322&y=871&w=1157&h=531&r=0"/>



Figure 42: Screenshots of CapCut tasks.
图42：CapCut任务的截图。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_54.jpg?x=320&y=1510&w=1159&h=538&r=0"/>



Figure 43: Screenshots of Meitu tasks.
图43：美图任务的截图。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_55.jpg?x=320&y=199&w=1157&h=533&r=0"/>



Figure 44: Screenshots of Feishu tasks.
图44：飞书任务的截图。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_55.jpg?x=315&y=794&w=1171&h=294&r=0"/>



Figure 45: Success rates for tasks in software applications
图45：软件应用中任务的成功率


Table 15 and Figure 45 show the details of the evaluation. CRADLE presents overall good performance over the diverse tasks and applications (compared to Expected Steps, CRADLE achieves an overall efficiency of 50%). However, performance for certain tasks can vary considerably due to different factors. The main reason for the higher number of task step during agent execution is the frequent incorrect positioning decisions for the mouse, i.e., the backbone model chooses a position of bounding box tag that does not correspond to the UI item described in the model reasoning. We discuss examples of task-specific issues in Sections F.5 and F.6 below.
表15和图45展示了评估的详细情况。CRADLE在多样化的任务和应用中表现整体良好（与预期步骤相比，CRADLE实现了50%的整体效率）。然而，某些任务的表现可能因不同因素而有较大差异。代理执行过程中任务步骤数较多的主要原因是鼠标定位决策频繁错误，即骨干模型选择的边界框标签位置与模型推理中描述的UI项不符。我们在下面的F.5和F.6节中讨论了任务特定问题的示例。


It is worth noting that in Chrome's task 3 ("Open the last closed page"), CRADLE knows how to use the shortcut key directly, calling the key_press skill directly with the correct keyboard shortcut: 'Ctrl + Shift $+ {T}^{\prime }$ ,whereas humans typically do not know this.
值得注意的是，在Chrome的任务3（“打开最后关闭的页面”）中，CRADLE知道如何直接使用快捷键，直接调用key_press技能并使用正确的键盘快捷键：“Ctrl + Shift $+ {T}^{\prime }$”，而人类通常并不知晓这一点。


To further evaluate the performance of CRADLE in diverse software applications scenarios, we provide quantitative results over OSWorld, a new contemporaneous benchmark with similar characteristics to our settings. More details in Appendix G and overview of the results in Table 16.
为了进一步评估CRADLE在多样软件应用场景中的表现，我们提供了在OSWorld上的定量结果，OSWorld是一个具有与我们设置相似特征的新近基准测试。更多细节见附录G，结果概览见表16。


### F.4 Implementation Details
### F.4 实现细节


The implementation of CRADLE targeting all five software applications follows the GCC setting and framework modules (which include Information Gathering, Self-Reflection, Task Inference, Skill Curation, Action Planning, and Action Execution). Implementation details of the overall framework are described in Appendix A. Therefore, here we emphasize any application-specific differences or customization.
针对所有五个软件应用的CRADLE实现遵循GCC设置和框架模块（包括信息收集、自我反思、任务推断、技能策划、行动规划和行动执行）。整体框架的实现细节描述见附录A。因此，这里重点说明任何应用特定的差异或定制内容。


To apply CRADLE to the target application set described in this appendix, we start with base common prompts, and customize those prompts for specific modules, if necessary, to handle application-specific characteristics. For example, for CapCut we add few-shot examples for Self-Reflection, to let it properly perform success detection, as the application UI by itself is non-standard and sometimes provides little post-action feedback to users, making it harder for the backend model to determine action success.
为了将CRADLE应用于本附录描述的目标应用集，我们从基础通用提示开始，必要时为特定模块定制提示以处理应用特性。例如，对于CapCut，我们为自我反思模块添加了少量示例，以使其能够正确执行成功检测，因为该应用的UI本身非标准且有时对用户的操作后反馈较少，增加了后端模型判断操作成功的难度。


Table 15: Application Software results. Success Rate determines the ratio of successful completions over five runs. Average Steps refers to the number of actions the agent takes to fulfil a task, if successful. Expected Steps represents the number of steps as estimated by humans performing the task. Efficiency represents the ratio between the expected number of steps and the total number of steps taken by the agent.
表15：应用软件结果。成功率表示五次运行中成功完成的比例。平均步骤数指代理成功完成任务所采取的动作数。预期步骤数表示人类执行任务时估计的步骤数。效率表示预期步骤数与代理实际采取总步骤数的比率。


<table><tr><td>Software</td><td>Success Rate</td><td>Average Steps</td><td>Expected Steps</td><td>Efficiency</td></tr><tr><td>Chrome</td><td>88%</td><td>8.74</td><td>4.20</td><td>48.05%</td></tr><tr><td>Download Paper</td><td>80%</td><td>16.00 ± 5.52</td><td>6</td><td>37.50%</td></tr><tr><td>Post in Twitter</td><td>80%</td><td>11.75 ± 5.26</td><td>7</td><td>61.14%</td></tr><tr><td>Open Closed Page</td><td>100%</td><td>1.00 ± 0</td><td>3</td><td>300.00%</td></tr><tr><td>Go to Profile</td><td>100%</td><td>4.00 ± 0.63</td><td>1</td><td>25.00%</td></tr><tr><td>Change Mode</td><td>80%</td><td>11.25 ± 4.71</td><td>4</td><td>35.56%</td></tr><tr><td>Outlook</td><td>60%</td><td>8.25</td><td>4</td><td>48.48%</td></tr><tr><td>Send New E-mail</td><td>40%</td><td>11.00 ± 4</td><td>5</td><td>45.45%</td></tr><tr><td>Empty Junk Folder</td><td>40%</td><td>8.50 ± 3.50</td><td>3</td><td>35.29%</td></tr><tr><td>Reply to Person</td><td>60%</td><td>8.33 ± 4.71</td><td>4</td><td>48.02%</td></tr><tr><td>Find Target E-mail</td><td>100%</td><td>1.40 ± 0.80</td><td>1</td><td>71.43%</td></tr><tr><td>Setup forwarding</td><td>60%</td><td>12.00 ± 4.90</td><td>7</td><td>58.33%</td></tr><tr><td>CapCut</td><td>56%</td><td>10.87</td><td>4.80</td><td>44.16%</td></tr><tr><td>Create Media Project</td><td>60%</td><td>13.67 ± 5.25</td><td>7</td><td>51.20%</td></tr><tr><td>Add transition</td><td>60%</td><td>10.67 ± 4.03</td><td>4</td><td>37.49%</td></tr><tr><td>Crop by Timestamp</td><td>60%</td><td>11.00 ± 5.66</td><td>5</td><td>45.45%</td></tr><tr><td>Add Sticker</td><td>40%</td><td>12.00 ± 8.00</td><td>4</td><td>33.33%</td></tr><tr><td>Crop by Content</td><td>60%</td><td>7.00 ± 1.41</td><td>4</td><td>57.14%</td></tr><tr><td>Meitu</td><td>44%</td><td>12.5</td><td>8.00</td><td>64%</td></tr><tr><td>Apply Filter</td><td>60%</td><td>14.67 ± 2.36</td><td>7</td><td>47.72%</td></tr><tr><td>Cutout</td><td>60%</td><td>9.33 ± 1.89</td><td>5</td><td>53.59%</td></tr><tr><td>Add Sticker</td><td>40%</td><td>9.50 ± 0.50</td><td>8</td><td>84.21%</td></tr><tr><td>Create Collage</td><td>40%</td><td>16.00 ± 2.00</td><td>12</td><td>75.00%</td></tr><tr><td>Add Frame</td><td>20%</td><td>13.00 ± 0.00</td><td>7</td><td>53.85%</td></tr><tr><td>Feishu</td><td>56%</td><td>8.82</td><td>4</td><td>46.07%</td></tr><tr><td>Create Appointment</td><td>40%</td><td>8.00 ± 1.00</td><td>4</td><td>50.00%</td></tr><tr><td>Message Contact</td><td>40%</td><td>6.00 ± 1.00</td><td>3</td><td>50.00%</td></tr><tr><td>Send file</td><td>20%</td><td>11.00 ± 0.00</td><td>7</td><td>63.64%</td></tr><tr><td>Set User Status</td><td>100%</td><td>14.60 ± 7.50</td><td>3</td><td>20.55%</td></tr><tr><td>Start Video Conference</td><td>80%</td><td>4.50 ± 2.60</td><td>3</td><td>46.15%</td></tr></table>
<table><tbody><tr><td>软件</td><td>成功率</td><td>平均步骤数</td><td>期望步骤数</td><td>效率</td></tr><tr><td>Chrome浏览器</td><td>88%</td><td>8.74</td><td>4.20</td><td>48.05%</td></tr><tr><td>下载论文</td><td>80%</td><td>16.00 ± 5.52</td><td>6</td><td>37.50%</td></tr><tr><td>在Twitter发布</td><td>80%</td><td>11.75 ± 5.26</td><td>7</td><td>61.14%</td></tr><tr><td>打开已关闭页面</td><td>100%</td><td>1.00 ± 0</td><td>3</td><td>300.00%</td></tr><tr><td>进入个人资料</td><td>100%</td><td>4.00 ± 0.63</td><td>1</td><td>25.00%</td></tr><tr><td>切换模式</td><td>80%</td><td>11.25 ± 4.71</td><td>4</td><td>35.56%</td></tr><tr><td>Outlook邮箱</td><td>60%</td><td>8.25</td><td>4</td><td>48.48%</td></tr><tr><td>发送新邮件</td><td>40%</td><td>11.00 ± 4</td><td>5</td><td>45.45%</td></tr><tr><td>清空垃圾邮件文件夹</td><td>40%</td><td>8.50 ± 3.50</td><td>3</td><td>35.29%</td></tr><tr><td>回复联系人</td><td>60%</td><td>8.33 ± 4.71</td><td>4</td><td>48.02%</td></tr><tr><td>查找目标邮件</td><td>100%</td><td>1.40 ± 0.80</td><td>1</td><td>71.43%</td></tr><tr><td>设置邮件转发</td><td>60%</td><td>12.00 ± 4.90</td><td>7</td><td>58.33%</td></tr><tr><td>CapCut视频剪辑</td><td>56%</td><td>10.87</td><td>4.80</td><td>44.16%</td></tr><tr><td>创建媒体项目</td><td>60%</td><td>13.67 ± 5.25</td><td>7</td><td>51.20%</td></tr><tr><td>添加转场效果</td><td>60%</td><td>10.67 ± 4.03</td><td>4</td><td>37.49%</td></tr><tr><td>按时间戳裁剪</td><td>60%</td><td>11.00 ± 5.66</td><td>5</td><td>45.45%</td></tr><tr><td>添加贴纸</td><td>40%</td><td>12.00 ± 8.00</td><td>4</td><td>33.33%</td></tr><tr><td>按内容裁剪</td><td>60%</td><td>7.00 ± 1.41</td><td>4</td><td>57.14%</td></tr><tr><td>美图秀秀</td><td>44%</td><td>12.5</td><td>8.00</td><td>64%</td></tr><tr><td>应用滤镜</td><td>60%</td><td>14.67 ± 2.36</td><td>7</td><td>47.72%</td></tr><tr><td>抠图</td><td>60%</td><td>9.33 ± 1.89</td><td>5</td><td>53.59%</td></tr><tr><td>添加贴纸</td><td>40%</td><td>9.50 ± 0.50</td><td>8</td><td>84.21%</td></tr><tr><td>创建拼贴</td><td>40%</td><td>16.00 ± 2.00</td><td>12</td><td>75.00%</td></tr><tr><td>添加边框</td><td>20%</td><td>13.00 ± 0.00</td><td>7</td><td>53.85%</td></tr><tr><td>飞书</td><td>56%</td><td>8.82</td><td>4</td><td>46.07%</td></tr><tr><td>创建预约</td><td>40%</td><td>8.00 ± 1.00</td><td>4</td><td>50.00%</td></tr><tr><td>发送消息给联系人</td><td>40%</td><td>6.00 ± 1.00</td><td>3</td><td>50.00%</td></tr><tr><td>发送文件</td><td>20%</td><td>11.00 ± 0.00</td><td>7</td><td>63.64%</td></tr><tr><td>设置用户状态</td><td>100%</td><td>14.60 ± 7.50</td><td>3</td><td>20.55%</td></tr><tr><td>开始视频会议</td><td>80%</td><td>4.50 ± 2.60</td><td>3</td><td>46.15%</td></tr></tbody></table>


Information Gathering. Noticeably, GPT-4o presents the same limitations in both spatial reasoning (e.g., confusing up/down, left/right) and image understanding identifying specific UI items or the state of the forefront GUI, across all applications.
信息收集。显著的是，GPT-4o在空间推理（例如，混淆上下、左右方向）和图像理解（识别特定UI元素或前端GUI状态）方面，在所有应用中均表现出相同的局限性。


To help mitigate such issues, we perform augmentation on the captured screenshots similarly to the Set-of-Mark (SoM) approach [68], by only utilizing SAM [29] to generate potential UI items bounding boxes and assign them numerical tags. Our SoM-like augmentation differs from recent agent-related work (e.g., [66, 73]), which use OS-specific APIs to draw ground-truth bounding boxes for interactable elements (plus UI structure info, like types and element tree) to the results, while CRADLE relies only on image input and the segmentation output as augmentation. To make this distinction explicit,we call our augmentation approach SAM2SOM ${}^{11}$ . Figure 49 illustrates the difference. While our approach produces many more potential bounding boxes, it is more general by relying only on a screenshot (or video frame).
为帮助缓解此类问题，我们对捕获的截图进行增强，方法类似于Set-of-Mark（SoM）方法[68]，仅利用SAM[29]生成潜在UI元素的边界框并分配数字标签。我们的SoM类增强不同于近期的代理相关工作（如[66, 73]），后者使用操作系统特定API绘制可交互元素的真实边界框（以及UI结构信息，如类型和元素树）作为结果，而CRADLE仅依赖图像输入和分割输出作为增强。为明确区分，我们将此增强方法称为SAM2SOM${}^{11}$。图49展示了差异。虽然我们的方法生成了更多潜在边界框，但其更通用，仅依赖截图（或视频帧）。


---



${}^{11}$ We do not claim the method itself as a core contribution. SAM2SOM is used to illustrate a possible extra capability of the backend model, as mitigation for current spatial reasoning issues.
${}^{11}$ 我们不将该方法本身视为核心贡献。SAM2SOM用于展示后端模型可能具备的额外能力，以缓解当前的空间推理问题。


---



<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_57.jpg?x=308&y=199&w=1185&h=772&r=0"/>



Figure 47: Image examples of the two SAM2SOM augmentation styles. As CapCut's UI (top row) has very dark background, we utilize single-color borders with IDs in black text over white background, placed within the bounding box area. Other application software and OSWorld use the "standard" SAM2SOM multi-color style, as shown for Meitu (bottom row).
图47：两种SAM2SOM增强样式的图像示例。由于CapCut的UI（顶行）背景非常暗，我们采用单色边框，标签为黑色文字白色背景，置于边界框内。其他应用软件和OSWorld使用“标准”SAM2SOM多色样式，如美图（底行）所示。


To ensure all bounding box labels are consistently positioned, CRADLE's SAM2SOM implements two rendering styles, as shown in Figure 47 first and second rows. In the standard style, we pad the SAM2SOM-enhanced image when showing the label IDs in the upper left corner of the bounding boxes (to prevent labels from hiding the contents of small areas), so no numerical label ID is drawn outside the image area). In the uniform style, all bounding boxes utilize single-color borders with labels in black text over white background, placed within the bounding box area (top left corner).
为确保所有边界框标签位置一致，CRADLE的SAM2SOM实现了两种渲染样式，如图47第一和第二行所示。在标准样式中，显示标签ID于边界框左上角时，会对SAM2SOM增强图像进行填充（防止标签遮挡小区域内容），因此无数字标签ID绘制在图像外部。在统一样式中，所有边界框均采用单色边框，标签为黑色文字白色背景，置于边界框内左上角。


Moreover, in specific situations we may still need to refine SAM2SOM's output further. For example, in the Feishu case, we observe that watermarks generated by the software affect the segmentation negatively, complicating GPT-4o's selection of the correct bounding boxes to interact with. Therefore, we implement a simple filtering method for such watermarks. This filter is enabled only in the Feishu benchmark and, as shown in Figure 48, can greatly reduce the number of unnecessary bounding boxes (from 216 to 166, in this example).
此外，在特定情况下，我们可能仍需进一步优化SAM2SOM的输出。例如，在飞书案例中，软件生成的水印会负面影响分割，增加GPT-4o选择正确交互边界框的难度。因此，我们实现了针对该水印的简单过滤方法。该过滤器仅在飞书基准中启用，如图48所示，可显著减少不必要的边界框数量（本例中从216减少到166）。


In addition to using the SAM2SOM method for image augmentation, we also redraw the mouse pointer not present in captured screenshots in a more prominent magenta color based on its screen position, to emphasize both its presence and position for image understanding (e.g., Figure 46). The augmentation process in Information Gathering can then result in four versions of a screenshot: a) base image, b) SAM2SOM image, c) base image with mouse pointer, and d) SAM2SOM image with mouse pointer.
除了使用SAM2SOM方法进行图像增强外，我们还根据鼠标指针在屏幕上的位置，将截图中未出现的鼠标指针以更显眼的品红色重新绘制，以突出其存在和位置，辅助图像理解（例如图46）。信息收集中的增强过程可生成四种截图版本：a）基础图像，b）SAM2SOM图像，c）带鼠标指针的基础图像，d）带鼠标指针的SAM2SOM图像。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_57.jpg?x=919&y=1628&w=541&h=308&r=0"/>



Figure 46: Sample augmented image w/ drawn mouse pointer. Zoom overlay shows the image difference.
图46：带绘制鼠标指针的示例增强图像。放大叠加显示图像差异。


Self-Reflection. As the applications in the software set are much less dynamic than complex games, there is no need to send multiple video
自我反思。由于软件集中的应用远不如复杂游戏动态，因此无需向自我反思模块发送多帧视频


frames to Self-Reflection. For the software applications, pre- and post-action screenshot usually suffice, i.e., one image before and one image after an action is executed. Digital games often have
帧。对于软件应用，动作前后截图通常足够，即动作执行前后各一张图像。数字游戏通常具有


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_58.jpg?x=309&y=201&w=1182&h=395&r=0"/>



Figure 48: Examples of filtering watermark in Feishu. The number of labels is greatly reduced from 216 to 166.
图48：飞书中水印过滤示例。标签数量从216大幅减少至166。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_58.jpg?x=312&y=661&w=1176&h=591&r=0"/>



Figure 49: Comparison of CRADLE's visual-only SAM2SOM and OSWorld's API-based SOM image results. Chrome: 78 vs. 53 bounding boxes; GIMP: 227 vs. 98 bounding boxes.
图49：CRADLE仅视觉SAM2SOM与OSWorld基于API的SOM图像结果对比。Chrome：78 vs. 53个边界框；GIMP：227 vs. 98个边界框。


continuous and dynamic environments that require multiple frames to properly capture the full context and thus help the backbone LMMs understand what happened. In contrast, software operations are typically more discrete and static, where the state before and after an action provides sufficient information for most analysis.
连续且动态的环境，需多帧捕捉完整上下文，帮助骨干大规模多模态模型（LMMs）理解发生了什么。相比之下，软件操作通常更离散和静态，动作前后状态即可为大多数分析提供充分信息。


Nonetheless, we find that irrespective of images used, GPT-40 sometimes can have difficulty determining the success of certain tasks. For example, when downloading a file on Chrome, after either pressing 'Ctrl + S', or using a 'Save' menu, the agent must also press 'Enter' or click the 'Save' button to complete the task. However, GPT-4o often assumes the task is complete when the dialog opens and before this final step. Similar cases of incorrect conclusion happen when an action correctly closes a new panel or dialog. To address this category of issues, we add mandatory reasoning rules in the prompt for the Self-Reflection module to help mitigate such mistakes. If for specific applications this still remains an issue, we can use few-shot image examples to reinforce how the backend model should correctly judge success.
尽管如此，我们发现无论使用何种图像，GPT-4o 有时在判断某些任务是否成功时仍会遇到困难。例如，在 Chrome 浏览器下载文件时，无论是按下“Ctrl + S”还是使用“保存”菜单，代理还必须按“Enter”键或点击“保存”按钮才能完成任务。然而，GPT-4o 经常在对话框打开且未执行最后一步时就假设任务已完成。当某个操作正确关闭新面板或对话框时，也会出现类似的错误结论。为了解决这类问题，我们在自我反思模块的提示中添加了强制推理规则，以帮助减少此类错误。如果在特定应用中问题依然存在，我们可以使用少量示例图像来强化后端模型如何正确判断任务成功。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_59.jpg?x=923&y=214&w=537&h=482&r=0"/>



Figure 50: Shortcuts screen in CapCut.
图50：CapCut中的快捷键界面。


Skill Curation. In software tasks, direct skill generation was not necessary, as UI operations generally map closely to specific mouse or keyboard actions, making them more straightforward. In contrast, digital game environments involve continuous interactions and decision-making, raising new previously undiscovered information, and requiring the development of new skills to handle novel scenarios and adapt to changing contexts.
技能策划。在软件任务中，通常不需要直接生成技能，因为UI操作通常与特定的鼠标或键盘动作紧密对应，使得操作更为直接。相比之下，数字游戏环境涉及持续的交互和决策，带来新的未曾发现的信息，并需要开发新技能以应对新场景和适应变化的环境。


However, we do add some additional predefined skills, on a per-application basis, for specific knowledge like less-widely known keyboard shortcuts which could be learnt from the application. For example, CapCut's shortcuts screen, shown in Figure 50, or toolbar/icon processing output similarly to the process described for Cities: Skylines. Moreover, we also intro-
然而，我们确实为每个应用添加了一些额外的预定义技能，用于特定知识，如应用中可学习的较少为人知的键盘快捷键。例如，图50所示的CapCut快捷键界面，或类似于《城市：天际线》（Cities: Skylines）中描述的工具栏/图标处理输出。此外，我们还引入了


duce pre-defined complex skills to demonstrate CRADLE's capability to leverage tools into novel functionality, such as using GPT-4o as a tool to extract information from a video to complete task 5 in CapCut.
预定义的复杂技能，以展示CRADLE利用工具实现新功能的能力，例如使用GPT-4o作为工具从视频中提取信息以完成CapCut中的任务5。


When dealing with shortcuts, e.g., as alternatives to mouse operations, it may be the case that specific shortcuts require "calibration". For example, using the keyboard to navigate the timeline in CapCut (as seen in the bottom area of Figure 47b) requires mapping the keyboard shortcut ('Alt + arrow keys') to pixels or time, which we perform a priori and use the mapping in the pre-defined skill go_to_timestamp(seconds).
在处理快捷键时，例如作为鼠标操作的替代方案，可能需要对特定快捷键进行“校准”。例如，使用键盘导航CapCut时间线（见图47b底部区域）需要将键盘快捷键（“Alt + 方向键”）映射到像素或时间，我们事先完成此映射，并在预定义技能go_to_timestamp(seconds)中使用该映射。


Task Inference. During the execution of an application task, we let GPT-40 decompose the execution strategy for the next step based on the overall task description and the subtask description. If the previous task decomposition is found to be unreasonable, a new decomposition plan should be proposed and this is evaluated at each iteration round.
任务推断。在执行应用任务时，我们让GPT-4o根据整体任务描述和子任务描述分解下一步的执行策略。如果发现之前的任务分解不合理，应提出新的分解方案，并在每轮迭代中进行评估。


Action Planning. To enable usage of SAM2SOM, for Action Planning, we insert new mouse skills, which mirror existing coordinates-based mouse skills (i.e., that use x,y coordinates), but take a bounding box numerical label as an argument.
动作规划。为了支持SAM2SOM的使用，在动作规划中我们插入了新的鼠标技能，这些技能与现有基于坐标的鼠标技能（即使用x,y坐标）相对应，但以边界框的数字标签作为参数。


Furthermore, unlike in game playing, which focuses on performing one action per turn, when manipulating software CRADLE can be configured to perform two actions in sequence and thus lower interaction frequency requirements to the backend model. We find that GPT4-o can usually correctly output two-step compound actions. For example, when performing a search in the browser, it can typically output two consecutive action steps, e.g., type_text(text='\{user_query\}'), followed by the required press_key(key='enter').
此外，与游戏中每回合执行单一动作不同，操作软件时CRADLE可以配置为连续执行两个动作，从而降低对后端模型的交互频率要求。我们发现GPT-4o通常能正确输出两步复合动作。例如，在浏览器中执行搜索时，通常能输出连续的两个动作步骤，如type_text(text='\{user_query\}')，随后是必需的press_key(key='enter')。


Action Execution. While atomic and composite skills can involve complex operations, Action Execution happens over the regular CRADLE action space, as shown in Table 7. For example, during Action Execution, a post-processing step converts the bounding box calls into regular mouse actions, using the centroid of a given bounding box as its coordinates for regular mouse operations.
动作执行。尽管原子技能和复合技能可能涉及复杂操作，动作执行仍在常规CRADLE动作空间内进行，如表7所示。例如，在动作执行过程中，后处理步骤将边界框调用转换为常规鼠标操作，使用给定边界框的中心点作为常规鼠标操作的坐标。


Tool usage, like calling GPT-40 separately to analyze the contents of a media file, is not considered as an action, as tools do not operate on the environment, only as code steps inside a composite skill.
工具使用，如单独调用GPT-4o分析媒体文件内容，不被视为动作，因为工具不直接作用于环境，仅作为复合技能内的代码步骤。


### F.5 Case Studies
### F.5 案例研究


#### F.5.1 Task Hardness
#### F.5.1 任务难度


It is well known that the difficulty of task completion can vary widely between humans and agents. The results in Table 15 help illustrate some such cases. While many application operation issues may be attributed to UI variety or non-conformity, that is not necessarily the main source of task hardness (i.e., how unexpectedly complex performing an operation is).
众所周知，任务完成的难度在人类和代理之间差异很大。表15中的结果有助于说明一些此类情况。虽然许多应用操作问题可能归因于UI多样性或不一致性，但这不一定是任务难度的主要来源（即执行操作的复杂程度出乎意料）。


Here we use Outlook, a well-known e-mail client, as a case study to discuss how different factors affect CRADLE task completion in real-world application situations (the exact version used is listed in Table 12). Taking task 1 ("Create a new e-mail to \{email_address\} with the subject 'Hello friend' and send it.") as an example, a success rate of 40% and efficiency of 45.45% may seem lower than expected.
这里我们以知名电子邮件客户端Outlook为例，讨论不同因素如何影响CRADLE在真实应用场景中的任务完成情况（具体版本见表12）。以任务1（“创建一封主题为‘Hello friend’并发送至\{email_address\}的新邮件。”）为例，40%的成功率和45.45%的效率可能显得低于预期。


Such a task could be reasonably broken down into steps like: a) Create new e-mail, b) Add recipient, c) Write title, and d) Send e-mail. And the Task Inference module performs such decomposition consistently. However, Action Planning needs to define specific actionable operations with mouse and keyboard to execute each step.
这样一个任务可以合理地分解为以下步骤：a) 创建新邮件，b) 添加收件人，c) 编写标题，d) 发送邮件。任务推断模块能够稳定地执行这种分解。然而，动作规划需要定义具体的鼠标和键盘操作来执行每一步。


Firstly, CRADLE needs to decide based on the knowledge and visual understanding capabilities available to it to either use a known keyboard shortcut (e.g., 'Ctrl + N') or to click at the "New mail" button. In our experiments, CRADLE tends to chose clicking on the button, which is then affected by the previously discussed issues that led to the integration of SAM2SOM into the framework. Issues in spatial reasoning issues or icon/image understanding may cause a few incorrect click attempts.
首先，CRADLE需要基于其可用的知识和视觉理解能力决定是使用已知的键盘快捷键（例如“Ctrl + N”）还是点击“新建邮件”按钮。在我们的实验中，CRADLE倾向于选择点击按钮，这就受到之前讨论过的问题影响，促使将SAM2SOM集成到框架中。空间推理或图标/图像理解的问题可能导致几次错误的点击尝试。


Adding the recipient to the e-mail requires typing an address at the appropriate location, i.e., the typical "To" field. This can be accomplished in multiple ways, mainly by typing the address on the UI next to the "To" item or choosing a pre-existing contact.
向邮件中添加收件人需要在合适的位置输入地址，即典型的“收件人”字段。这可以通过多种方式完成，主要是直接在“收件人”项旁的界面上输入地址，或选择已有联系人。


Clicking on the "To" button triggers the UI to search and select a pre-existing contact e-mail address (with no option of adding a new contact entry, which requires first accessing the "Contacts" menu, outside of "Mail"). Moreover, the UI interaction sequence to select an existing contact can be unintuitive even to experienced users, requiring a minimum of four steps, at each step offering multiple UI options that go away from contact selection. Attempting this flow usually leads CRADLE to exceed the maximum number of allowed step as it gets confused by the UI design.
点击“收件人”按钮会触发界面搜索并选择已有的联系人邮箱地址（没有添加新联系人条目的选项，添加新联系人需要先进入“联系人”菜单，位于“邮件”之外）。此外，选择已有联系人的界面交互流程即使对有经验的用户来说也可能不直观，至少需要四个步骤，每一步都有多个界面选项，且这些选项会偏离联系人选择。尝试此流程通常导致CRADLE超出允许的最大步骤数，因为它被界面设计弄得困惑。


Nonetheless, choosing the simpler alternative of typing the e-mail address (assuming the correct text field is selected) triggers assistive UI pop-ups (as shown in Figure 52), which lead GPT-4o to falsely conclude the e-mail address is either already typed at the correct location or that it is duplicated and needs to be edited/removed. Furthermore, the pop-ups partially hide the subject area, making it harder for CRADLE to choose the next UI item to interact with for the next task step.
尽管如此，选择更简单的输入邮箱地址的方式（假设选中了正确的文本框）会触发辅助界面弹窗（如图52所示），这导致GPT-4o错误地判断邮箱地址要么已正确输入，要么是重复的，需要编辑或删除。此外，弹窗部分遮挡了主题区域，使CRADLE更难选择下一步要交互的界面元素。


Similar issues with positioning and correctly identifying the typed subject text can also occur, but at a much smaller frequency.
类似的定位和正确识别已输入主题文本的问题也会发生，但频率要低得多。


Lastly, completing the task and sending the e-mail requires step similar to creating a new message. But determining send success requires additional attention/reflection as not all cases of the "Send mail" interface disappearing indicate a successful send (e.g., clicking on an unrelated e-mail on the Inbox or closing the current window pop-up).
最后，完成任务并发送邮件需要类似于创建新邮件的步骤。但判断发送是否成功需要额外关注和反思，因为“发送邮件”界面消失并不总是表示发送成功（例如点击收件箱中无关的邮件或关闭当前弹窗）。


The Self-Reflection module plays a key role in moving task completion forward by detecting failed attempts at executing each sub-task and providing rationale for failures, even if Information Gathering and Action Planning make repeated mistakes. Such feedback from Self-Reflection and allows Action Planning to tune its process and move ahead.
自我反思模块在推动任务完成中起关键作用，它能检测每个子任务执行失败的尝试并提供失败原因，即使信息收集和动作规划反复出错。来自自我反思的反馈使动作规划能够调整流程并继续前进。


#### F.5.2 Tool Use in CapCut
#### F.5.2 CapCut中的工具使用


Some general computer control tasks may require additional capabilities during execution preparation that can benefit from external tools to enhance agent abilities.
一些通用的计算机控制任务在执行准备阶段可能需要额外能力，这些能力可以通过外部工具提升代理的能力。


When performing video editing, like in CapCut, a user may need to determine the precise frames to operate on based on video content. For such scenarios, CRADLE can easily leverage tool-using skills, like the LMM's ability to understand actions in a sequence of video frames, enabling it to comprehend video content and identify the exact frames for editing.
在进行视频编辑时，如在CapCut中，用户可能需要根据视频内容确定精确的帧进行操作。对于此类场景，CRADLE可以轻松利用工具使用技能，比如大型多模态模型（LMM）理解视频帧序列中动作的能力，从而理解视频内容并识别具体的编辑帧。


We exemplify such tasks with task 5 ("Crop the video when the ball enters the goal, and then export the video") for CapCut, as illustrated in Figure 51. This means our agent can effectively execute tool usage to find the specific frame where "the ball enters the goal". After the first round of Task Inference, CRADLE decomposes the task into three subtasks: 1. Identify the exact frame, 2. Crop the video, and 3. Export the video. Action Planning can then plan to execute 'get_information_from_video(event)' from our curated skills and generate "ball enters the goal" as its required argument for execution.
我们以任务5（“当球进入球门时裁剪视频，然后导出视频”）为例，如图51所示。这意味着我们的代理能够有效执行工具使用，找到“球进入球门”的具体帧。经过第一轮任务推断，CRADLE将任务分解为三个子任务：1. 确定具体帧，2. 裁剪视频，3. 导出视频。动作规划随后可以计划执行我们策划技能中的“get_information_from_video(event)”，并生成“球进入球门”作为执行所需参数。


In this skill, we input a frame set of the video at 1 fps to identify the specific frame where the event occurs. The response is then recorded in Episodic Memory to ensure that subsequent operations can accurately utilize it and target the moment when the action occurs. Across subsequent iterations, CRADLE can then correctly plan and execute the remaining necessary actions for task completion: 'go_to_timestamp(seconds=8)', 'delete_right()', and 'export_project()'].
在此技能中，我们以1帧每秒的帧集输入视频，以识别事件发生的具体帧。响应结果被记录在情景记忆中，确保后续操作能准确利用该信息，定位动作发生的时刻。在后续迭代中，CRADLE能够正确规划并执行完成任务所需的剩余操作：‘go_to_timestamp(seconds=8)’, ‘delete_right()’, 和 ‘export_project()’。


We have integrated few-shot learning into Self-Reflection to ensure CRADLE recognizes that following export_project(), the expected screen is the CapCut application main window. This information allows it to verify the successful execution of the task, leading to success detection for the overall task.
我们已将少量示例学习集成到自我反思模块，确保CRADLE认识到执行完‘export_project()’后，预期界面是CapCut应用主窗口。此信息使其能够验证任务执行成功，从而实现整体任务的成功检测。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_61.jpg?x=309&y=552&w=1179&h=1030&r=0"/>



Figure 51: Showcase of Task 5 ("Crop the video when the ball enters the goal, and then export the new video") in CapCut.
图51：CapCut中任务5（“当球进入球门时裁剪视频，然后导出新视频”）的展示。


### F.6 Limitations of GPT-4o
### F.6 GPT-4o的局限性


Besides the previously discussed limitations of GPT-4o, it is important to highlight a couple other GUI grounding issues.
除了之前讨论过的GPT-4o的局限性外，还需强调其他几个GUI定位问题。


## Non-standard UI and Noise.
## 非标准用户界面和干扰。


Non-standard UI, be it in visual style or in behaviour, can lead GPT-4o to misinterpret UI item functionality and application context state. The same applies to visual noise in the form of update pop-up, external contents (e.g., ads), new e-mail/chat messages, etc.
无论是视觉风格还是行为上的非标准用户界面，都可能导致GPT-4o误解界面元素的功能和应用上下文状态。同样，更新弹窗、外部内容（如广告）、新邮件/聊天消息等视觉干扰也会产生类似影响。


CapCut is affected by both factors, as further illustrated in Figure 53. Moreover, its UI includes non-standard layouts involving precise positioning and drag/dropping. Lack of such prior knowledge by GPT4-o and differences in behaviour between similar functions, may also lead to mistakes in
CapCut同时受到这两方面因素的影响，如图53所示。此外，其界面包含涉及精确定位和拖放的非标准布局。GPT-4o缺乏此类先验知识，以及类似功能间行为差异，也可能导致错误。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_62.jpg?x=325&y=206&w=1149&h=276&r=0"/>



Figure 52: Visual behaviour in Outlook that may lead GPT-4o to visual understanding mistakes.
图52：Outlook中的视觉行为，可能导致GPT-4o在视觉理解上出错。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_62.jpg?x=319&y=564&w=1163&h=317&r=0"/>



Figure 53: Different CapCut pop-ups
图53：不同的CapCut弹窗


trying to decompose actions to perform. E.g., "Add an effect" requires very different UI-interaction depending on details. Users can add effects in three different ways: i) dragging an effect to the timeline; ii) click the plus sign in a given effect in the effects panel, which adds the effect to the current place on the timeline; and iii) drag an effect directly onto a video and apply the effect to the entire video.
尝试分解要执行的操作。例如，“添加效果”根据具体情况需要非常不同的界面交互。用户可以通过三种方式添加效果：i）将效果拖到时间线；ii）点击效果面板中某个效果的加号，将效果添加到时间线当前位置；iii）将效果直接拖到视频上，应用于整个视频。


## Visual Context Detail.
## 视觉上下文细节。


GPT-40 still struggles with detailed visual understanding and over-relies on textual information or hallucinations, which results in insufficient attention to visual context and leads to understanding and reasoning mistakes.
GPT-4o在细节视觉理解方面仍存在困难，过度依赖文本信息或产生幻觉，导致对视觉上下文关注不足，从而引发理解和推理错误。


One such common example is GPT-4o declaring a dialog state to be ready to press a button like "Save", while ignoring no file name was provided, even if GPT-4o has been prompted to check for such situations. The same applies to it suggesting keyboard shortcuts to open menus that do not exist in the image being interpreted, e.g., trying to press 'Alt + F' to open the "File" menu on a screenshot that has no "File" menu.
一个常见例子是GPT-4o宣称对话框状态已准备好按下“保存”按钮，却忽略了未提供文件名，即使已提示其检查此类情况。同样，它会建议使用键盘快捷键打开图像中不存在的菜单，例如尝试按“Alt + F”打开截图中没有的“文件”菜单。


Lastly, this lack of attention to context details can also affect understanding the outcome of operations over visual content, leading to incorrect estimation of operation success, e.g., when retouching an image or deciding between a circle and a heart for a shape form.
最后，这种对上下文细节的忽视也会影响对视觉内容操作结果的理解，导致对操作成功与否的错误判断，例如修饰图像时或在圆形与心形之间选择形状时。


## G OSWorld
## G OSWorld


### G.1 Introduction to OSWorld
### G.1 OSWorld简介


OSWorld is a scalable, computer environment designed for multimodal agents. This platform provides a unified environment for assessing open-ended computer tasks involving various applications.
OSWorld是一个可扩展的计算机环境，专为多模态代理设计。该平台为评估涉及多种应用的开放式计算机任务提供了统一环境。


### G.2 OSWorld Tasks
### G.2 OSWorld任务


OSWorld is a benchmark suite of 369 real-world computer tasks (mostly on an Ubuntu Linux environment, but including a smaller set on Microsoft Windows) collected from authors and diverse sources such as forums, tutorials, guidelines. Each task is annotated with a natural language instruction and a manually crafted evaluation script for scoring.
OSWorld是一个包含369个真实计算机任务的基准套件（主要基于Ubuntu Linux环境，也包括少量Microsoft Windows任务），任务来源包括作者及论坛、教程、指南等多样渠道。每个任务均附有自然语言指令和手工编写的评分脚本。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_63.jpg?x=556&y=211&w=687&h=691&r=0"/>



Figure 54: Task instructions distribution in OSWorld [66]
图54：OSWorld[66]中的任务指令分布


### G.3 Implementation Details
### G.3 实现细节


The OSWorld environment uses a virtual machine that takes in Python scripts based on PyAutoGUI for actions and provides screenshots and an accessibility tree for observations. We strictly follow the GCC settings. Our agent only uses the screenshot as input and outputs Python scripts using PyAutoGUI methods to control the keyboard and mouse (these operations are analogous to the regular action space for CRADLE). All 369 tasks use a same set of prompt templates.
OSWorld环境使用一个虚拟机，接收基于PyAutoGUI的Python脚本作为操作指令，并提供截图和无障碍树作为观察信息。我们严格遵循GCC设置。我们的代理仅使用截图作为输入，输出使用PyAutoGUI方法控制键盘和鼠标的Python脚本（这些操作类似于CRADLE的常规动作空间）。所有369个任务使用同一套提示模板。


We employ GPT-40 as the framework's backbone model. We use the default experimental settings, as in OSWorld's baseline agent. The executable action space is the same as the OSWorld setting, the atomic skills are as follows:
我们采用GPT-40作为框架的主模型。使用与OSWorld基线代理相同的默认实验设置。可执行动作空间与OSWorld设置相同，原子技能如下：


- Mouse Actions
- 鼠标操作


- move_mouse_to_position $\left( {x,y}\right)$ : Moves the mouse to a specified position on the screen.
- move_mouse_to_position $\left( {x,y}\right)$ ：将鼠标移动到屏幕上的指定位置。


- click_at_position $\left( {x,y}\right)$ : Performs a click at a specified position.
- click_at_position $\left( {x,y}\right)$ ：在指定位置执行点击操作。


- mouse_down(button): Presses the specified mouse button.
- mouse_down(button)：按下指定的鼠标按钮。


- mouse_up(button): Releases the specified mouse button.
- mouse_up(button)：释放指定的鼠标按钮。


- right_click $\left( {x,y}\right)$ : Right-clicks at the specified position.
- right_click $\left( {x,y}\right)$ ：在指定位置执行右键点击。


- double_click_at_position $\left( {x,y}\right)$ : Double-clicks at the specified position.
- double_click_at_position $\left( {x,y}\right)$ ：在指定位置执行双击。


- mouse_drag(x, y): Drags the cursor to the position.
- mouse_drag(x, y)：将光标拖动到指定位置。


- scroll(direction, amount): Scrolls the mouse wheel up or down by a specified amount.
- scroll(direction, amount)：按指定数量向上或向下滚动鼠标滚轮。


- Keyboard Actions
- 键盘操作


- type_text(text): Types the specified text.
- type_text(text)：输入指定文本。


- press_key(key): Presses and releases the specified key.
- press_key(key)：按下并释放指定按键。


- key_down(key): Holds a specified key.
- key_down(key)：按住指定的键。


- key_up(key): Releases a specified key.
- key_up(key)：释放指定的键。


- press_hotkey(keys): Presses a combination of keys and releases them in the opposite order (e.g., Ctrl+C), useful for shortcuts.
- press_hotkey(keys)：按下组合键并按相反顺序释放（例如，Ctrl+C），适用于快捷键操作。


## Task Status
## 任务状态


- task_is_not_feasible(): Indicates that the task cannot be completed, providing feedback for scenarios where the agent encounters infeasible tasks.
- task_is_not_feasible()：表示任务无法完成，针对代理遇到不可行任务的场景提供反馈。


Many of these basic skills require GPT-4o to directly output an (x,y) position based on a screenshot. Given that the current GPT-4o is not able to achieve such precise control, we use a grounding tool to augment the screenshot. This way, GPT-4o only needs to choose an object ID. With the object ID and the bounding box of the object, we automatically convert it to the (x,y) position needed for skill execution. Instead of having GPT-4o directly choose the executable skills that require (x,y) position input, we provide several skills that only require a label ID as input for GPT-4o.
许多基础技能需要GPT-4o根据截图直接输出一个(x,y)位置。鉴于当前GPT-4o尚无法实现如此精确的控制，我们使用定位工具对截图进行增强。这样，GPT-4o只需选择一个对象ID。通过对象ID及其边界框，我们自动转换为技能执行所需的(x,y)位置。我们不让GPT-4o直接选择需要(x,y)位置输入的可执行技能，而是提供若干仅需标签ID作为输入的技能供GPT-4o使用。


- Actions with Grounding Tools
- 使用定位工具的操作


- click_on_label(label_id): Clicks on a specified label in the grounding result.
- click_on_label(label_id)：点击定位结果中的指定标签。


- double_click_on_label(label_id): Double-clicks on a specified label in the grounding result.
- double_click_on_label(label_id)：双击定位结果中的指定标签。


- hover_over_label(label_id): Moves the mouse to hover over a specified label in the grounding result.
- hover_over_label(label_id)：将鼠标移动至定位结果中的指定标签悬停。


- mouse_drag_to_label(label_id): Drags the mouse to a specified label in the grounding result.
- mouse_drag_to_label(label_id)：将鼠标拖动至定位结果中的指定标签。


Information Gathering. Tasks in OSWorld require pixel-level mouse control. While GPT-4 exhibits grounding ability, using tools like SAM can further augment the screenshot with the grounding of icons in complex computer control tasks. The bounding box is helpful for GPT-4 to understand the occurrence of objects on the screen and can also be used to calculate the precise position for mouse control.
信息收集。OSWorld中的任务需要像素级的鼠标控制。虽然GPT-4具备定位能力，但使用如SAM（Segment Anything Model）等工具可以进一步增强截图中图标的定位，适用于复杂的计算机控制任务。边界框有助于GPT-4理解屏幕上对象的出现位置，也可用于计算鼠标控制的精确位置。


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_64.jpg?x=312&y=944&w=1174&h=741&r=0"/>



Figure 55: Augmented screenshot using CRADLE's SAM2SOM
图55：使用CRADLE的SAM2SOM增强的截图


Self-Reflection. The reflection module evaluates whether previous actions have been successfully executed and determines if the entire task was successful. The self-reflection module is important for tasks in OSWorld, which are sequential decision-making problems that require re-planning based on the current state and previous actions. The self-reflection module also helps to identify infeasible tasks.
自我反思。反思模块评估先前操作是否成功执行，并判断整个任务是否成功。反思模块对于OSWorld中的任务尤为重要，这些任务是基于当前状态和先前操作需要重新规划的序列决策问题。反思模块还帮助识别不可行的任务。


### G.4 Application Target and Setting Challenges
### G.4 应用目标与设置挑战


Evaluations within OSWorld reveal notable challenges in agents' abilities, particularly in GUI understanding and operational knowledge [66]. To further complete tasks in OSWorld, the agent needs advanced visual capabilities and robust GUI interaction abilities. Furthermore, the agents
OSWorld中的评估揭示了代理能力的显著挑战，尤其是在图形用户界面（GUI）理解和操作知识方面[66]。为了进一步完成OSWorld中的任务，代理需要具备高级视觉能力和强健的GUI交互能力。此外，代理


face challenges in leveraging lengthy raw observation and action records. The next-level approach encompasses designing more effective agent architectures that augment the agents' abilities to explore autonomously and synthesize their findings.
在利用冗长的原始观察和动作记录时面临挑战。下一阶段的方法包括设计更有效的智能体架构，以增强智能体自主探索和综合其发现的能力。


### G.5 Case Studies
### G.5 案例研究


#### G.5.1 Information Gathering
#### G.5.1 信息收集


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_65.jpg?x=309&y=479&w=1182&h=675&r=0"/>



Figure 56: Case Study of robust and precise GUI interaction via information gathering
图56：通过信息收集实现稳健且精确的图形用户界面（GUI）交互的案例研究


With SAM as the grounding tool, we prompt the agent to identify the objects in each bounding box to determine the exact position of each object. As shown in Figure 56, the agent recognized the GUI element in box 32 as the Save button. In the planner, the agent chose to click on box 32 to save the PDF, resulting in success.
以SAM作为定位工具，我们提示代理识别每个边界框中的对象，以确定每个对象的准确位置。如图56所示，代理将32号框中的GUI元素识别为保存按钮。在规划器中，代理选择点击32号框以保存PDF，操作成功。


#### G.5.2 Planning with Self-reflection
#### G.5.2 结合自我反思的规划


We showcase how self-reflection combined with planning helps the agent complete a task by coming up with an alternative plan and validating its success.
我们展示了自我反思与规划相结合如何帮助代理通过提出替代方案并验证其成功来完成任务。


The current task instruction is "Copy the file 'file1' to each of the directories 'dir1', 'dir2', 'dir3'." As shown in Figure 57, the agent made two attempts at implementing the command but encountered errors and warnings.
当前任务指令是“将文件‘file1’复制到目录‘dir1’、‘dir2’、‘dir3’中。”如图57所示，代理尝试执行该命令两次，但遇到了错误和警告。


As shown in Figure 58, after observing the errors and warnings in the previous steps, the agent checked the files in the directory to debug. After confirming the file structure, the agent tried different commands.
如图58所示，在观察到前述步骤中的错误和警告后，代理检查了目录中的文件以进行调试。确认文件结构后，代理尝试了不同的命令。


As shown in Figure 59, after executing the new command without receiving an error message, the agent checks whether the files have been copied to the folders. After observing the result, it marks this task as a success.
如图59所示，在执行新命令且未收到错误信息后，代理检查文件是否已复制到各文件夹。观察结果后，代理将该任务标记为成功。


### G.6 Quantitative Evaluation
### G.6 定量评估


The detailed success rates for each application are listed in Table 16. We followed the same experimental settings as the OSWorld paper, running the experiment only once. Our results show that our agent performs better in the Chrome and GIMP domains. However, the difference in performance in the OS, Writer, and VSC domains is less statistically significant due to the smaller number of tasks. While improved information gathering and self-reflection empowered the agent in these domains,
各应用的详细成功率列于表16。我们遵循与OSWorld论文相同的实验设置，实验仅运行一次。结果显示，我们的代理在Chrome和GIMP领域表现更佳。然而，由于任务数量较少，代理在操作系统（OS）、Writer和VS Code领域的性能差异统计学意义较小。尽管改进的信息收集和自我反思增强了代理在这些领域的能力，


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_66.jpg?x=311&y=231&w=1180&h=672&r=0"/>



Figure 57: The agent fails to copy the files due to using incorrect commands
图57：代理因使用错误命令而未能复制文件


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_66.jpg?x=309&y=1025&w=1183&h=670&r=0"/>



Figure 58: The agent reflects on the errors, checks the file structure and tries to debug
图58：代理反思错误，检查文件结构并尝试调试


Table 16: Detailed success rates divided by domains: OS, LibreOffice Calc, LibreOffice Impress, LibreOffice Writer, Chrome, VLC Player, Thunderbird, VS Code, GIMP, and Workflow (i.e., involves multiple applications).
表16：按领域划分的详细成功率：操作系统（OS）、LibreOffice Calc、LibreOffice Impress、LibreOffice Writer、Chrome、VLC播放器、Thunderbird、VS Code、GIMP及工作流（即涉及多个应用）。


<table><tr><td>Method</td><td>OS (24)</td><td>Calc (47)</td><td>Impress (47)</td><td>Writer (23)</td><td>VLC (17)</td><td>TB (15)</td><td>Chrome (46)</td><td>VSC (23)</td><td>GIMP (26)</td><td>Workflow (101)</td></tr><tr><td>GPT-40</td><td>8.33</td><td>0.00</td><td>6.77</td><td>4.35</td><td>16.10</td><td>0.00</td><td>4.35</td><td>4.35</td><td>3.85</td><td>5.58</td></tr><tr><td>GPT-40+SoM</td><td>20.83</td><td>0.00</td><td>6.77</td><td>4.35</td><td>6.53</td><td>0.00</td><td>4.35</td><td>4.35</td><td>0.00</td><td>3.60</td></tr><tr><td>Cradle</td><td>16.67</td><td>0.00</td><td>4.65</td><td>8.70</td><td>6.53</td><td>0.00</td><td>8.70</td><td>0.00</td><td>38.46</td><td>5.48</td></tr></table>
<table><tbody><tr><td>方法</td><td>操作系统 (OS) (24)</td><td>电子表格 (Calc) (47)</td><td>演示文稿 (Impress) (47)</td><td>文字处理 (Writer) (23)</td><td>VLC 播放器 (17)</td><td>TB (15)</td><td>Chrome 浏览器 (46)</td><td>Visual Studio Code (VSC) (23)</td><td>GIMP 图像编辑器 (26)</td><td>工作流程 (Workflow) (101)</td></tr><tr><td>GPT-40</td><td>8.33</td><td>0.00</td><td>6.77</td><td>4.35</td><td>16.10</td><td>0.00</td><td>4.35</td><td>4.35</td><td>3.85</td><td>5.58</td></tr><tr><td>GPT-40+SoM</td><td>20.83</td><td>0.00</td><td>6.77</td><td>4.35</td><td>6.53</td><td>0.00</td><td>4.35</td><td>4.35</td><td>0.00</td><td>3.60</td></tr><tr><td>Cradle</td><td>16.67</td><td>0.00</td><td>4.65</td><td>8.70</td><td>6.53</td><td>0.00</td><td>8.70</td><td>0.00</td><td>38.46</td><td>5.48</td></tr></tbody></table>


<img src="https://cdn.noedgeai.com/bo_d44nads601uc738n6mf0_67.jpg?x=309&y=201&w=1180&h=672&r=0"/>



Figure 59: The agent checks if the files have already been copied
图59：代理检查文件是否已被复制


the complex pipeline and limitations of current grounding tools and GPT-4 hindered performance in domains like VLC and VSC. We identify these limitations as future directions for implementing the agent in real-world scenarios.
复杂的流程和当前定位工具及GPT-4的局限性阻碍了在VLC和VSC等领域的性能表现。我们将这些局限性确定为未来在实际场景中实现该代理的方向。


## H Cradle Prompts
## H Cradle 提示


Here we exemplify the utilized prompts, for each module in the framework. All prompts and customizations are included in the relevant branch in CRADLE's open-source repository in GitHub ${}^{12}$ .
这里展示了框架中各模块所用的示例提示。所有提示和自定义内容均包含在CRADLE开源仓库的相关分支中，GitHub ${}^{12}$ 。


### H.1 Prompts for RDR2
### H.1 RDR2提示


Prompt 1: RDR2: Information Gathering prompt.
提示1：RDR2：信息收集提示。


---



Assume you are a helpful AI assistant integrated with 'Red Dead
假设你是一名集成于PC版《荒野大镖客救赎2》（Red Dead Redemption 2）中的智能助手，


	Redemption 2' on the PC, equipped to handle a wide range of tasks
	能够处理游戏中的各种任务。


	in the game. Your advanced capabilities enable you to process and
	你具备先进的能力，能够处理和


	interpret gameplay screenshots and other relevant information.
	解析游戏截图及其他相关信息。


<\$few_shots\$>



<\$image_introduction\$>



Current task:
当前任务：


<\$task_description\$>



Target_object_name: Assume you can use an object detection model to
目标对象名称：假设你可以使用目标检测模型


	detect the most relevant object for completing the current task if
	检测完成当前任务所需的最相关对象。


	needed. What object should be detected to complete the task based
	基于当前截图和任务，应检测哪个对象以完成任务？


	on the current screenshot and the current task? You should obey
	你应遵守以下规则：


	the following rules:
	


1. The object should be relevant to the current target or the
1. 该对象应与当前目标或当前任务的中间目标相关。


	intermediate target of the current task. Just give one name
	只需给出一个名称，不带任何修饰词。


	without any modifiers.
	


2. If no explicit weapon is specified on the weapon radial menu,
2. 如果武器轮盘菜单中未明确指定武器，


	prioritize choosing 'gun' as the weapon.
	优先选择“枪”作为武器。


---



---



${}^{12}$ https://github.com/BAAI-Agents/Cradle
${}^{12}$ https://github.com/BAAI-Agents/Cradle


---



---



3. If no explicit shoot target is specified, prioritize choosing '
3. 如果未明确指定射击目标，优先选择“人”作为目标。


		person' as the target.
			


4. If no explicit item is specified, only output 'null'.
4. 如果未明确指定物品，仅输出“null”。


5. If the object name belongs to the person type, replace it with '
5. 如果对象名称属于人物类型，替换为“人”。


		person'.
			


6. If there is no need to detect an object, only output "null".
6. 如果不需要检测对象，仅输出“null”。


7. If you are on the trade, map, inventory, or satchel interfaces,
7. 如果处于交易、地图、物品栏或背包界面，


		only output 'null',
			仅输出“null”。


Reasoning_of_object: Why was this object chosen, or why is there no
对象推理：为何选择该对象，或为何无需检测对象？


		need to detect an object?
			


Description: Please describe the screenshot image in detail. Pay
描述：请详细描述截图中的图像。注意


		attention to any maps in the image, if any, especially critical
		图像中的任何地图，尤其是关键


		icons, red paths to follow, or created waypoints. If there are
		图标、红色路径或已创建的路径点。如果有


		multiple images, please focus on the last one.
		多张图片，请重点关注最后一张。


Screen_classification: Please select the class that best describes the
屏幕分类：请选择最能描述该截图的类别，选项包括“物品栏”、“环形菜单”、“背包”、“地图”、


			screenshot among "Inventory", "Radial menu", "Satchel", "Map", "
					“交易”、“暂停”和“无菜单的通用游戏界面”。


		Trade", "Pause", and "General game interface without any menu".
		请在Screen_classification输出中给出截图的类别。


		Output the class of the screenshot in the output of
		


		Screen_classification.
		


Reasoning_of_screen: Why was this class chosen for the current
屏幕分类理由：为什么为当前截图选择了该类别？


		screenshot?
		


Movement: Does the current task require the character to go somewhere?
移动：当前任务是否需要角色前往某处？


Noun_and_Verb: The number of nouns and verbs in the current task.
名词和动词：当前任务中的名词和动词数量。


Task_horizon: Please judge the horizon of the current task, i.e.,
任务时长：请判断当前任务的时长，即


		whether this task needs multiple or only one interaction.
		该任务是否需要多次交互或仅一次交互。


There are two horizon types: long-horizon and short-horizon. For long-
任务时长分为两种类型：长时长和短时长。对于长时长


		horizon tasks, the output should be 1. For short-horizon tasks,
		对于长远任务，输出应为1。对于短期任务，


		the output should be 0 . You should obey the following rules:
		输出应为0。您应遵守以下规则：


1. If the task contains only nouns without verbs, it is short-hori:
1. 如果任务仅包含名词而无动词，则为短期任务：


2. If the task contains more than one verb, it is long-horizon.
2. 如果任务包含多个动词，则属于长远任务。


3. If the task requires the character to go somewhere, it is long-
3. 如果任务要求角色前往某地，则时间较长-


		horizon.
		地平线。


Short-horizon tasks are sub-goals during a long-horizon task, which
短期任务是在长期任务中的子目标，


		only need one interaction. There are some examples of short-
		只需一次交互。有一些简短的示例-


		horizon tasks:
		地平线任务：


1. Pick up something: To complete this task, the character needs to
1. 拾取物品：要完成此任务，角色需要


		execute the action "pick up" only once, so it is short-horizon.
		只执行一次“拾取”动作，因此是短期的。


2. Use or press [B] key: The character needs to press the key [B] only
2. 使用或按下[B]键：角色只需按下[B]键


			once to talk, so it is short-horizon.
			只谈一次，所以视野较短。


3. Talk to somebody: The character needs to press a certain button
3. 与某人交谈：角色需要按下特定按钮


		once to complete this task, so it is short-horizon.
		只需一次即可完成此任务，因此是短期的。


Long-horizon tasks are long-term goals, which usually need many
长期任务是需要较长时间完成的目标，通常需要许多


	interactions. There are some examples of long-horizon tasks.
	交互。有一些长远任务的例子。


1. Go outside: The character should go outside step by step, so it is
1. 走到外面：角色应一步步走到外面，因此这是


		long-horizon.
		长远的。


2. Approach something: The character should move closer to the target
2. 接近某物：角色应一步步靠近目标，


		step by step, so it is long-horizon.
		因此这是长远的。


3. Keep away from something, shoot, take down, or battle with
3. 远离某物、射击、击倒或与某物战斗：


		something: The character must engage in a series of interactions,
		角色必须进行一系列交互，


		so it is long-horizon.
		因此这是长远的。


Reasoning_of_task: Why do you make such a judgment of task_horizon?
任务推理：你为何做出这样的任务远景判断？


You should only respond in the format described below and not output
你应仅以以下描述的格式回复，不要输出


		comments or other information.
		评论或其他信息。


Target_object_name :
目标对象名称：


Name
名称


Reasoning_of_object:
对象推理：


---



---



1. ...



2. ...



	...



Description:
描述：


The image shows...
图像显示...


Screen_classification:
屏幕分类：


	Class of the screenshot
	截图类别


Reasoning_of_screen:
屏幕推理：


	1. ...



2. ...



		...



Movement:
移动：


		Yes or No
		是或否


	Noun_and_Verb:
	名词和动词：


	1 noun 1 verb
	1个名词 1个动词


	Task_horizon:
	任务范围：


	1



	Reasoning_of_task:
	任务推理：


	1. ...



2. ...



		...



---



Prompt 2: RDR2: Gather Text Information prompt.
提示2：RDR2：收集文本信息提示。


---



Assume you are a helpful AI assistant integrated with 'Red Dead
假设你是一个集成在PC版《荒野大镖客救赎2》（Red Dead Redemption 2）中的智能助手，


	Redemption 2' on the PC, equipped to handle a wide range of tasks
	能够处理游戏中的各种任务。


	in the game. Your advanced capabilities enable you to process and
	你具备先进的能力，可以处理和


	interpret gameplay screenshots and other relevant information.
	解析游戏截图及其他相关信息。


<\$image_introduction\$>



Information: List all text prompts on the screenshot from the top to
信息：从上到下列出截图中的所有文本提示，即使文本提示只有一个词。


	the bottom, even the text prompt is one word.
	


All information should be categorized into one or more kinds of $<$
所有信息应被分类为一种或多种$<$


	\$information_type\$>. If you think a piece of information is both "
	\$information_type\$>。如果你认为一条信息同时属于“


	A" and "B" categories, you should write information in both "A"
	“A”和“B”类别，则应将信息写入“A”


	and "B" categories. For example, "use E to drink water" could both
	和“B”类别。例如，“用E喝水”既可以是


	be "Action Guidance" and "Task Guidance" categories.
	“行动指导”也可以是“任务指导”类别。


Item_status: The helpful information to the current context in the
物品状态：对当前游戏环境有用的信息，如现金、弹药数量、当前使用的物品、玩家是否通缉等。


	game, such as the cash, amount of ammo, current using item, if the
	这些内容应为状态名称及其对应数值的配对。例如，“现金：100\$”。如果屏幕上没有文本且无物品状态，仅输出“null”。


	player is wanted, etc. This content should be pairs of status
	


	names and their values. For example, "cash: 100\$". If there is no
	


	on-screen text and no item status, only output "null".
	


Environment_information: The information about the location, time,
环境信息：关于位置、时间、天气等的信息。这些内容应为状态名称及其对应数值的配对。例如，“位置：VALENTINE”。如果屏幕上没有文本且无环境信息，仅输出“null”。


	weather, etc. This content should be pairs of status names and
	


	their values. For example, "location: VALENTINE". If there is no
	


	on-screen text and environment information, only output "null".
	


Notification: The game will give notifications showing the events in
通知：游戏会发出通知，显示世界中的事件，如获得物品或奖励、完成


	the world, such as obtaining items or rewards, completing
	


	objectives, and becoming wanted. Besides, it also contains
	<objectives, and becoming wanted. Besides, it also contains>目标，并变得受欢迎。此外，它还包含</objectives, and becoming wanted. Besides, it also contains>


	valuable notifications of the game's mechanisms, such as "Health
	游戏机制的重要提示，例如“生命值


	is displayed in the lower left corner". The content must be the on
	显示在左下角”。内容必须是开


	-screen text. If there is no on-screen text or notification, only
	-屏幕文字。如果没有屏幕文字或通知，则仅


	output "null".
	输出“null”。


Task_guidance: The content should obey the following rules:
任务指导：内容应遵守以下规则：


1. The content of task guidance must be an on-screen text prompt,
1. 任务指导内容必须为屏幕上的文本提示，


	including the menu and the general game interface.
	包括菜单和整体游戏界面。


2. The game will give guidance on what should be done to proceed with
2. 游戏将指导应采取的步骤以继续进行


	the game, for example, "follow Tom". This is task guidance.
	例如，游戏中的“跟随汤姆”。这就是任务指导。


---



---



3. The game will give guidance on how to perform a task using keyboard
3. 游戏将指导如何使用键盘执行任务


	keys or mouse buttons, for example, "use E to drink water". This
	按键或鼠标按钮，例如，“按E键喝水”。这


	is task guidance.
	是任务指导。


4. If no on-screen text prompt or task guidance exists, only output "
4. 如果没有屏幕上的文本提示或任务指导，则仅输出


	null". Never derive the task guidance from the dialogue or
	“null”。切勿从对话中推导任务指导或


	notifications.
	通知。


Action_guidance: The game will give guidance on how to perform a task
操作指导：游戏将提供如何执行任务的指导


	using keyboard keys or mouse buttons; you must generate the code
	使用键盘按键或鼠标按钮；您必须生成代码


	based on the on-screen text. The content of the code should obey
	基于屏幕上的文本。代码内容应遵守


	the following code rules:
	以下代码规则：


1. You should first identify the exact keyboard or mouse key
1. 您应首先确定具体的键盘或鼠标按键


	represented by the icon on the screenshot. 'Ent' refers to 'enter
	由截图中的图标表示。“Ent”指的是“enter”（回车键）


	'. 'RM' refers to 'right mouse button'. 'LM' refers to 'left mouse
	“RM”指“右键鼠标”，“LM”指“左键鼠标


	button'. You should output the full name of the key in the code.
	按钮。你应该在代码中输出该键的完整名称。


2. You should refer to different examples strictly based on the word
2. 你应严格根据单词参考不同的例子


	used to control the key, such as 'use', 'hold', 'release', 'press
	用于控制按键，例如“使用”、“按住”、“释放”、“按下”


	', and 'click'.
	', 和 '点击'.


3. If 'use' or 'press' is in the prompt to control the keyboard key or
3. 如果提示中包含“use”或“press”来控制键盘按键或


	mouse button, io_env.key_press ('key', 2) or io_env.mouse_click ('
	鼠标按钮，io_env.key_press ('key', 2) 或 io_env.mouse_click ('


	button', 2) must be used to act on it. Refer to Examples 1, 2, and
	必须使用<button', 2)>来操作它。请参阅示例1、2和


	3.



4. If there are multiple keys, io_env.key_press ('key1,key2', 2) must
4. 如果有多个按键，io_env.key_press ('key1,key2', 2) 必须


	be used to act on it. Refer to Example 4.
	用于对此采取行动。参见示例4。


5. If 'hold' is in the prompt to control the keyboard key or mouse
5. 如果提示中包含“hold”以控制键盘按键或鼠标


	button, it means keeping the key held with io_env.key_hold or the
	按钮，这意味着使用 io_env.key_hold 保持按键按下状态，或者


	button held with io_env.mouse_hold (usually indefinitely, with no
	按钮由 io_env.mouse_hold 按住（通常是无限期按住，无


	duration). If you need to hold it briefly, specify a duration
	持续时间）。如果需要短暂按住，请指定持续时间


	argument. Refer to Examples 5 and 6.
	论证。参见示例5和6。


6. All durations are set to a minimum of 2 seconds by default. You can
6. 所有持续时间默认设置为最少2秒。您可以


	choose a longer or shorter duration. If it should be indefinite,
	选择较长或较短的持续时间。如果应为无限期，


	do not specify a duration argument.
	不要指定持续时间参数。


7. The name of the created function should only use phrasal verbs,
7. 创建的函数名称应仅使用短语动词，


	verbs, nouns, or adverbs shown in the prompt and should be in the
	提示中显示的动词、名词或副词应当出现在


	verb+noun or verb+adverb format, such as drink_water,
	动词+名词或动词+副词格式，例如 drink_water（喝水），


	slow_down_car, and ride_faster. Note that words that do not show
	减慢车速，加快骑行速度。注意那些未显示的词


	in the prompt are prohibited.
	<prompt>中禁止使用。</prompt>


This is Example 1. If "press" is in the prompt and the text prompt on
这是示例1。如果提示中包含“press”，且文本提示为


	the screenshot is "press $X$ to play the card",your output should
	截图显示“按$X$出牌”，你的输出应为


	be :



Coopython
Coopython


def play_card():
def play_card():


	"""



	press "x" to play the card
	按“x”出牌


	"""



	io_env.key_press(’x’, 2)
	io_env.key_press(’x’, 2)


ccc
ccc


This is Example 2. If the instructions involve the mouse and the text
这是示例2。如果说明涉及鼠标且截图中的文本提示是


	prompt on the screenshot is "use the left mouse button to confirm
	“使用左键确认”，你的输出应为：


	", your output should be:
	


<<opython
<<opython


def confirm():
def confirm():


	III II



	use "left mouse button" to confirm
	使用“左键”确认


	III II



	io_env.mouse_click("left mouse button")
	io_env.mouse_click("left mouse button")


ccc
ccc


This is Example 3. If "use" is in the prompt and the text prompt on
这是示例3。如果提示中包含“use”，且截图中的文本提示是


	the screenshot is "use ENTER to drink water", your output should
	“使用回车键喝水”，你的输出应为


	be :



cccpython
cccpython


def drink_water():
def drink_water():


	"""



	use "enter" to drink water
	按“回车”喝水


	"""



	io_env.key_press('enter', 2)
	io_env.key_press('enter', 2)


ccc
ccc


This is Example 4. If "use" is in the prompt and the text prompt on
这是示例4。如果提示中包含“use”，且截图中的文本提示是“use W and J to jump the barrier”，则你的输出应为：


	the screenshot is "use W and J to jump the barrier", your output
	截图中的文本提示是“使用W和J跳过障碍”，你的输出应为：


	should be:
	应为：


44 python
44 python


def jump_barrier():
def jump_barrier():


	III II



	use "w" and "j" to jump the barrier
	使用“w”和“j”跳过障碍


	"""



	io_env.key_press('w, j', 3)
	io_env.key_press('w, j', 3)


ccc
ccc


This is Example 5. If "hold" is in the prompt and the text prompt on
这是示例5。如果提示中包含“hold”，且截图中的文本提示是“hold H to run”，则你的输出应为：


	the screenshot is "hold H to run", your output should be:
	截图中的文本提示是“按住H键跑”，你的输出应为：


<<opython
<<opython


def run():
def run():


	III II



	hold "h" to run
	按住“h”键跑


	III II



	io_env.key_hold('h')
	io_env.key_hold('h')


ccc
ccc


This is Example 6. If the instructions involve the mouse and the text
这是示例6。如果指令涉及鼠标且截图中的文本提示是“按住右键以聚焦目标”，你的输出应为：


	prompt on the screenshot is "hold the right mouse button to focus
	


	on the target", your output should be:
	


<<opython
<<opython


def focus_on_target():
def focus_on_target():


	"""



	hold "right mouse button" to focus
	按住“右键”以聚焦


	"""



	io_env.mouse_hold("right mouse button")
	io_env.mouse_hold("right mouse button")


ccc
ccc


This is Example 7. If "release" is in the prompt and the text prompt
这是示例7。如果提示中包含“release”，且截图中的文本提示是“释放Q键以丢弃物品”，你的输出应为：


	on the screenshot is "release Q to drop the items", your output
	


	should be:
	


cccpython
cccpython


def drop_items():
def drop_items():


	"""



	release "q" to drop the items
	释放“q”键以丢弃物品


	"""



	io_env.key_release(’q’)
	io_env.key_release(’q’)


ccc
ccc


Dialogue: Conversations between characters in the game. This content
对话：游戏中角色之间的对话内容。


	should be in the format of "character name: dialogue". For example
	格式应为“角色名：对话”。例如


	, "Arthur: I'm fine". If there is no on-screen text or dialogue,
	，“Arthur: 我很好”。如果没有屏幕文本或对话，


	only output "null".
	则只输出“null”。


Other: Other information that does not belong to the above categories.
其他：不属于上述类别的其他信息。


	If there is no on-screen text, only output "null".
	如果没有屏幕文本，则只输出“null”。


Reasoning: The reasons for classification for each piece of
推理：对每条信息分类的理由。


	information.
	


If the on-screen text prompt is an instruction on how to perform a
如果屏幕文本提示是关于如何使用键盘按键或鼠标按钮执行任务的指令，


	task using keyboard keys or mouse buttons, it should also
	也应归类为动作指导和任务指导。


	classified as action guidance and task guidance.
	


For action guidance, which code rules should you follow based on the
对于动作指导，应根据用于控制按键或按钮的词汇，如按下、按住、


	word used to control the key or button, such as press, hold,
	释放和点击，遵循哪些代码规则？


	release, and click?
	


The information should be in the following categories, and you should
信息应包含以下类别，且您应


	output the following content without adding any other explanation:
	输出以下内容，不添加任何其他说明：


Information:
信息：


1. ...



2. ...



---



...



Reasoning :
推理：


---



1. ...



2. ...



	...



	Item_status:
	项目状态：


Item_status is ...
项目状态是……


Environment_information:
环境信息：


Environment information is ...
环境信息是……


Notification:
通知：


Notification is ...
通知是……


Task_guidance:
任务指导：


	Task is ...
	任务是……


Action_guidance:
行动指导：


		cccpython
		cccpython


	Python code to execute
	执行的Python代码


		ccc
		ccc


			44 CPython
			44 CPython


	Python code to execute
	要执行的Python代码


		ccc
		ccc


		...



Dialogue:
对话：


Dialogue is ...
对话是……


	Other:
	其他：


Other information is ...
其他信息是……


---



Prompt 3: RDR2: Self-Reflection prompt.
提示3：RDR2：自我反思提示。


---



Assume you are a helpful AI assistant integrated with 'Red Dead
假设你是集成在PC版《荒野大镖客救赎2》（Red Dead Redemption 2）中的智能助手，


	Redemption 2' on the PC, equipped to handle a wide range of tasks
	能够处理游戏中的各种任务。


	in the game. Your advanced capabilities enable you to process and
	你具备先进的能力，可以处理和


	interpret gameplay screenshots and other relevant information.
	解析游戏截图及其他相关信息。


	Your task is to examine these inputs, interpret the in-game
	你的任务是审查这些输入，解读游戏内


	context, and determine whether the executed action takes effect.
	情境，并判断所执行的动作是否生效。


Current task:
当前任务：


<\$task_description\$>



Last executed action:
上次执行的动作：


<\$previous_action\$>



Implementation of the last executed action:
上一次执行动作的实现：


<\$action_code\$>



Error report for the last executed action:
上一次执行动作的错误报告：


<\$executing_action_error\$>



Reasoning for the last action:
上一次动作的推理：


<\$previous_reasoning\$>



Valid action set in Python format to select the next action:
用于选择下一动作的Python格式有效动作集：


<\$skill_library\$>



<\$image_introduction\$>



Reasoning: You need to answer the following questions step by step to
推理：你需要逐步回答以下问题以


	get some reasoning based on the last action and sequential frames
	基于上一次动作和连续帧获取一些推理


	of the character during the execution of the last action.
	关于角色在执行上一次动作期间的表现。


1. What is the last executed action not based on the sequential frames
1. 根据连续帧，上一执行动作是什么？


	?



2. Was the last executed action successful? Give reasons. You should
2. 上一次执行动作是否成功？请给出理由。你应当


	refer to the following rules:
	参考以下规则：


- If the action involves moving forward, it is considered unsuccessful
- 如果动作涉及向前移动，只有当角色位置在连续帧中保持不变时，


	only when the character's position remains unchanged across
	该动作才被视为不成功，无论背景元素和其他


---



---



	sequential frames, regardless of background elements and other
	人物如何。


	people.
	


3. If the last action is not executed successfully, what is the most
3. 如果上一次动作未成功执行，最可能的原因是什么？你应只给出一个原因并参考


	probable cause? You should give only one cause and refer to the
	


	following rules:
	以下规则：


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- Not holding enough time should not be considered in this part.
- 在此部分不应考虑持有时间不足的问题。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是


	action was unavailable or not activated at the current place.
	当前地点无法使用该操作或未激活。


- If it is a movement action, the most probable cause was that you
- 如果是移动动作，最可能的原因是你


	were blocked by seen or unseen obstacles.
	被可见或不可见的障碍物阻挡。


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


You should only respond in the format as described below:
您应仅按照以下描述的格式回复：


Reasoning :
推理：


1. ...



2. ...



3. ...



...



---



Prompt 4: RDR2: Task Inference prompt.
提示4：RDR2：任务推断提示。


---



Assume you are a helpful AI assistant integrated with 'Red Dead
假设你是一个集成在《荒野大镖客》（Red Dead）中的智能助手


	Redemption 2' on the PC, equipped to handle a wide range of tasks
	《荒野大镖客救赎2》在PC上，能够应对各种任务


	in the game. You will be sequentially given <\\\$event_count\$>
	在游戏中。你将依次获得<\\\$event_count\$>


	screenshots and corresponding descriptions of recent events. You
	最近事件的截图及相应描述。您


	will also be given a summary of the history that happened before
	还将提供之前发生的历史概要


	the last screenshot. You should assist in summarizing the events
	最后一张截图。你应该协助总结事件


	for future decision-making.
	用于未来的决策制定。


The following are <sevent_count\$> successive screenshots and
以下是连续的<sevent_count\$>张截图及


	corresponding descriptions:
	对应描述：


<\$image_introduction\$>



The following is the summary of history that happened before the last
以下是上一次之前发生的历史概要


	screenshot:
	截图：


<\$previous_summarization\$>



Current task:
当前任务：


<\$task_description\$>



Info_summary: Based on the above input, please make a summary from the
信息摘要：基于以上输入，请做一个总结


	screenshots with descriptions and the history in no less than 10
	带有描述的截图及不少于10条的历史记录


	sentences, following the rules below.
	句子，遵循以下规则。


1. Summarize the tasks from the history and the current task, with a
1. 总结历史任务和当前任务，包含一个


	special note on the method of crucial press operations.
	关于关键压制操作方法的特别说明。


2. Summarize the entities and behaviors mentioned in the successive
2. 总结连续提及的实体和行为


	descriptions.
	描述。


3. If entities and behaviors in the history and screenshots are missed
3. 如果历史记录和截图中的实体及行为被遗漏


	in the descriptions, please add them to the summarization.
	在描述中，请将它们添加到总结中。


4. Organize the summarization as a story in order of time, including
4. 按时间顺序将总结组织成一个故事，包括


	the past entities and behaviors.
	过去的实体和行为。


5. Only give descriptions; do not provide suggestions.
5. 仅给出描述；不提供建议。


Entities_and_behaviors: Entities and behaviors which are summarized, e
Entities_and_behaviors：被总结的实体和行为，例如


	.g., The entities include the player's character, the target
	实体包括玩家角色、目标角色，以及玩家和目标的马匹。


	character, and horses for both the player and the target. The
	行为包括玩家角色骑马、骑马跟随目标，


	behaviors consist of the player character riding horseback,
	并向前移动以保持在目标身后的距离。


	following the target on horseback, and moving forward to maintain
	


	a distance behind the target.
	


The output should be in the following format:
输出格式应如下：


Info_summary :
信息总结 :


The summary is...
总结是...


---



Prompt 5: RDR2: Action Planning prompt.
提示5：RDR2：行动规划提示。


---



You are a helpful AI assistant integrated with 'Red Dead Redemption 2'
你是集成于PC版《荒野大镖客2》（Red Dead Redemption 2）中的智能助手，


	on the PC, equipped to handle various tasks in the game. Your
	具备处理游戏中各种任务的能力。


	advanced capabilities enable you to process and interpret gameplay
	你的高级功能使你能够处理和解读游戏玩法信息。


	screenshots and other relevant information. By analyzing these
	截图及其他相关信息。通过分析这些


	inputs, you gain a comprehensive understanding of the current
	输入，您可以全面了解游戏中的当前


	context and situation within the game. Utilizing this insight, you
	背景和情境。利用这些洞察，您


	are tasked with identifying the most suitable in-game action to
	的任务是确定在当前任务下最合适的游戏内行动，


	take next, given the current task. You control the game character
	您控制游戏角色，


	and can execute actions from the available action set. Upon
	并可以从可用的动作集中执行操作。评估所提供的信息后，


	evaluating the provided information, your role is to articulate
	您的角色是明确表达


	the precise action you would deploy, considering the game's
	在游戏当前情况下您将采取的具体行动，


	present circumstances, and specify any necessary parameters for
	并指定执行该行动所需的任何参数。


	implementing that action.
	


Here is some helpful information to help you make the decision.
以下是帮助您做出决策的一些有用信息。


Current task:
当前任务：


<\$task_description\$>



Memory examples:
记忆示例：


<\$memory_introduction\$>



<\$few_shots\$>



<\$image_introduction\$>



Last executed action:
上一次执行的动作：


<\$previous_action\$>



Reasoning for the last action:
上一次动作的推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对上一次执行动作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$info_summary\$>



Valid action set in Python format to select the next action:
用于选择下一步动作的Python格式有效动作集：


<\$skill_library\$>



Minimap information:
小地图信息：


<\$minimap_information\$>



Based on the above information, you should first analyze the current
基于以上信息，你应首先分析当前


	situation and provide the reasoning for what you should do for the
	状况，并说明你为完成任务下一步应采取的理由。


	next step to complete the task. Then, you should output the exact
	然后，你应输出你想在游戏中执行的具体


	action you want to execute in the game. You should respond to me
	动作。你应回复我


	with:
	内容为：


Reasoning: You should think step by step and provide detailed
推理：你应逐步思考并提供详细的


	reasoning to determine the next action executed on the current
	推理，以确定在当前任务状态下执行的下一步动作。


	state of the task. You need to answer the following questions step
	你需要逐步回答以下问题。


	by step. You cannot miss the question number 13:
	你不能遗漏第13号问题：


	1. Only answer this question when the radial menu, trade, map,
	1. 仅当径向菜单、交易、地图、


	satchel or inventory interfaces are open. You should first
	背包或库存界面打开时回答此问题。你应先


	describe each item in the screen line by line, from the top left
	逐行描述屏幕上的每个物品，从左上角开始，向右移动。


	and moving right. Is the target item in the current screen?
	当前屏幕中是否有目标物品？


---



---



	2. Only answer this question when the radial menu, trade, map,
	2. 仅当径向菜单、交易、地图、


	satchel or inventory interfaces are open. Which item is selected
	背包或物品栏界面打开时回答此问题。当前选中了哪个物品？


	currently?
	当前选中了哪个物品？


	3. Only answer this question when the character is visible in the
	3. 仅当角色在当前步骤的截图中可见时回答此问题。角色在


	screenshot of the current step. Where is the character in the
	当前步骤的截图中处于何处？


	screenshot of the current step?
	当前步骤的截图中角色处于何处？


	4. Where is the target in the screenshot of the current step based
	4. 根据任务描述，目标在当前步骤的截图中是在左侧还是右侧？


	on the task description, on the left side or on the right side?
	目标在当前步骤的截图中是在左侧还是右侧？


	Does it appear in the previous screenshots?
	它是否出现在之前的截图中？


	5. Are there any bounding boxes with coordinates values and object
	5. 截图中是否有带坐标值和物体标签的边界框，


	labels,such as "door $x = {0.5},y = {0.5}$ ",shown in the screenshot?
	例如“door $x = {0.5},y = {0.5}$”？


	The answer must be based only on the screenshot of the current
	答案必须仅基于当前步骤的截图，而非任何之前的步骤。如果答案是否定的，忽略


	step, not on any previous steps. If the answer is no, ignore the
	第6至8题。


	questions 6 to 8 .
	第6至8题。


	6. You should first describe each bounding box, from left to right
	6. 你应先从左到右描述每个边界框。哪个边界框与目标更相关？


	. Which bounding box is more relevant to the target?
	哪个边界框与目标更相关？


	7. What is the value $x$ of the most relevant bounding box only in
	7. 当前截图中最相关的边界框的值$x$是什么？


	the current screenshot? The value is the central coordination (x,y
	该值是该框中心点的坐标（x,y


	) of the central point of the box.
	）。


	8. Based on the few shots and the value $x$ ,where is the relevant
	8. 基于少量样本和该值$x$，当前截图中相关的边界框位于哪里？


	bounding box in the current screenshot? Clearly on the left side,
	明显在左侧，略偏左，中间，略偏右，还是明显在右侧？


	slightly on the left side, in the center, slightly on the right
	


	side, or clearly on the right side?
	


	9. Only answer this question when the radial menu, trade, map,
	9. 仅当径向菜单、交易、地图、背包或物品栏界面未打开时回答此问题。总结近期历史内容，主要关注历史任务和行为。


	satchel or inventory interfaces are not open. Summarize the
	


	contents of recent history, mainly focusing on the historical
	


	tasks and behaviors.
	


	10. Only answer this question when the radial menu, trade, map,
	10. 仅当径向菜单、交易、地图、背包或物品栏界面未打开时回答此问题。总结最近执行动作的自我反思内容，不要被其他信息分散注意力。


	satchel or inventory interfaces are not open. Summarize the
	


	content of self-reflection for the last executed action, and do
	


	not be distracted by other information.
	


	11. What was the previous action? If the previous action was a
	11. 上一个动作是什么？如果上一个动作是


	turn, was it a left or a right turn? If the previous action was a
	转弯，是左转还是右转？如果前一个动作是


	movement, were you blocked?
	移动，你被阻挡了吗？


	12. List conditions in action rule 12 and which condition is
	12. 列出动作规则12中的条件以及满足了哪个条件。


	satisfied. Only when you do not satisfy any conditions, summarize
	只有当你不满足任何条件时，才总结


	the content of the minimap information.
	小地图信息的内容。


	13. This is the most critical question. Based on the action rules
	13. 这是最关键的问题。基于动作规则


	and self-reflection, what should be the most suitable action in
	和自我反思，下一步在有效动作集合中最合适的动作是什么？


	the valid action set for the next step? You should analyze the
	你应逐步分析该动作的效果。


	effects of the action step by step.
	


Actions: The best action, or short sequence of actions without gaps,
动作：最佳动作，或无间断的短动作序列，


	to execute next to progress in achieving the goal. Pay attention
	用于下一步执行以推进目标的实现。注意


	to the names of the available skills and to the previous skills
	可用技能的名称以及之前已执行的技能（如有）。你还应更多关注


	already executed, if any. You should also pay more attention to
	以下动作规则：


	the following action rules:
	


	1. You should output actions in Python code format and specify any
	1. 你应以Python代码格式输出动作，并指定执行该动作所需的任何参数。如果函数有


	necessary parameters to execute that action. If the function has
	


	parameters, you should also include their names and decide their
	参数时，你还应包括它们的名称并确定它们的


	values, like "move(duration=1)". If it does not have a parameter,
	值，例如“move(duration=1)”。如果没有参数，


	just output the action, like "mount_horse()".
	只需输出动作，如“mount_horse()”。


	2. Given the current situation and task, you should only choose
	2. 根据当前情况和任务，你应仅从有效动作集中选择


	the most suitable action from the valid action set. You cannot use
	最合适的动作。不能使用不在有效动作集中的


	actions that are not in the valid action set to control the
	动作来控制角色。


	character.
	角色。


	3. If the target is not on the radial menu, trade, satchel or
	3. 如果目标不在径向菜单、交易、背包或


	inventory interfaces, you MUST choose the skill 'view_next_page'.
	物品栏界面，必须选择技能“view_next_page”。


	For the map, ignore the skill 'view_next_page'.
	对于地图，忽略技能“view_next_page”。


	4. If the minimap information exists, it may include angle
	4. 如果存在小地图信息，可能包含红点、黄点或黄色区域的角度


	information for red points, yellow points, or yellow regions.
	信息。


	Angle information specifies the direction of the corresponding
	角度信息指定对应点或区域的方向。负角度表示左侧，


	point or area. A negative angle indicates the left side, while a
	正值表示右侧。如果角度为30，


	positive value signifies the right side. If the angle is 30, the
	对应点或区域位于角色右侧30度处。


	corresponding point or area is 30 degrees to the character's right
	


	. If the angle is -50, the corresponding point or area is 50
	如果角度为-50，则对应的点或区域为50


	degrees to the character's left. Do not doubt the correctness of
	向角色的左侧旋转度数。请相信其正确性


	these angles; you can refer to them when you approach these points
	这些角度；当你接近这些点时可以参考它们


	or regions.
	或地区。


	5. When you decide to control the character to move, if the
	5. 当你决定控制角色移动时，如果


	relevant bounding box is clearly on the left side in the current
	相关的边界框明显位于当前的左侧


	screenshot, you MUST turn left with a big degree. If the relevant
	截图时，您必须大幅度向左转。如果相关


	bounding box is slightly on the left side in the current
	当前边界框略偏左侧


	screenshot, you MUST turn left with a small degree. If the
	截图时，您必须稍微向左转。


	relevant bounding box is clearly on the right side in the current
	相关的边界框明显位于当前的右侧


	screenshot, you MUST turn right with a big degree. If the relevant
	截图时，您必须大幅度向右转。如果相关


	bounding box is slightly on the right side in the current
	当前边界框略偏右侧


	screenshot, you MUST turn right with a small degree. If the
	截图时，您必须稍微向右转。


	relevant bounding box is on the central side of the current
	相关的边界框位于当前的中心侧


	screenshot, you can choose to move forward.
	截图后，您可以选择继续前进。


	6. When you decide to control the character to move, if yellow
	6. 当你决定控制角色移动时，如果是黄色


	regions or yellow points exist in minimap information, they are
	小地图信息中存在区域或黄色点，它们是


	related to the current task or instruction. This implies that you
	与当前任务或指令相关。这意味着你


	should approach within the yellow region or approach the yellow
	应接近黄色区域内或接近黄色


	points. You can refer to the corresponding angle information when
	点。您可以参考相应的角度信息，当


	deciding to approach these regions or points. If red points exist
	决定接近这些区域或点。如果存在红点


	in the minimap information, they are also related to the current
	在小地图信息中，它们也与当前相关


	task or instruction. This implies that you should turn towards
	任务或指令。这意味着你应该转向


	them, and you can also refer to the corresponding angle
	他们，你也可以参考相应的角度


	information.
	信息。


	7. When you decide to control the character to move, if minimap
	7. 当你决定控制角色移动时，如果小地图


	information does not exist, the 'theta' you use to turn MUST be
	信息不存在，你用来转动的“theta”必须是


	more than 10 degrees and less than 60 degrees.
	大于10度且小于60度。


	8. When you decide to control the character to move, if you are in
	8. 当你决定控制角色移动时，如果你处于


	a normal road condition, the 'duration' you use to move forward
	在正常路况下，你用来前进的“持续时间”


	should be 1 second. If you have bad road conditions, such as snow,
	应为1秒。如果路况不好，比如有积雪，


	and grass, that can slow you down, the 'duration' you use to move
	和草地，会减慢你的速度，你用来移动的“持续时间”


	forward should be 2 seconds.
	前进时间应为2秒。


	9. When you are exploring or searching a place, if you are leaving
	9. 当你在探索或搜索一个地方时，如果你要离开


	the place, you MUST make a sharp turn to face the inside of the
	到达该处时，您必须急转弯面向内部


	place. Any values for degrees are allowed.
	地点。角度的任何数值均可。


	10. If upon self-reflection you think the last action was
	10. 如果经过自我反思你认为上一个动作是


	unavailable at the current place, you MUST move to another place.
	当前位置不可用，您必须移动到其他地方。


	11. If upon self-reflection you think you were blocked, you MUST
	11. 如果经过自我反思你认为自己被阻止了，你必须


	make a moderate turn in the same direction as the previous turn
	在与上一次转弯相同的方向上适度转弯


	action and move forward, so that you can pass obstacles.
	采取行动并向前推进，这样你才能克服障碍。


	12. The conditions to ignore the minimap information for decision-
	12. 忽略小地图信息以进行决策的条件


	making are: 1. When self-reflection implies you were blocked. 2.
	决策时机有：1. 当自我反思表明你遇到了阻碍。2.


	When you were inside the highlighted area in the minimap. If any
	当你处于小地图中高亮区域内时。如果有的话


	of the conditions satisfied, you must ignore the minimap
	满足条件时，您必须忽略小地图


	information for decision-making even if it is relevant to the
	决策所需的信息，即使它与…相关


	current task.
	当前任务。


	13. When you are indoors, or the current task does not imply
	13. 当你在室内，或当前任务不涉及


	following, you MUST not use the follow action.
	跟随时，您不得使用跟随动作。


	14. When you are outdoors, and the current task implies following,
	14. 当您在户外，且当前任务涉及跟随时，


	you MUST use the follow action.
	您必须使用跟随动作。


	15. If you were dead or the game failed, you MUST retry from the
	15. 如果您死亡或游戏失败，您必须从检查点重试，


	checkpoint, and MUST NOT restart the mission.
	且不得重新开始任务。


You should only respond in the format described below, and you should
您应仅以以下描述的格式回应，且不应输出评论或其他信息：


	not output comments or other information:
	


Reasoning:
推理：


1. ...



2. ...



3. ...



Actions:
动作：


cccpython
cccpython


	action(args1=x,args2=y)
	action(args1=x,args2=y)


ccc
ccc


---



### H.2 Prompts for Cities: Skylines
### H.2 《城市：天际线》（Cities: Skylines）提示


Prompt 6: Skylines: Information Gathering prompt.
提示6：《城市：天际线》信息收集提示。


---



Assume you are a helpful AI assistant integrated with 'Cities:
假设您是一名集成于PC版《城市：天际线》（Cities: Skylines）中的智能助手，


	Skylines on the PC, equipped to handle a wide range of tasks in
	能够处理各种任务，


	the game. Your advanced capabilities enable you to process and
	游戏。您先进的能力使您能够处理和


	interpret gameplay screenshots and other relevant information.
	解读游戏截图及其他相关信息。


<\$image_introduction\$>



Current task:
当前任务：


<\$task_description\$>



Description: Please analyze and describe the screenshot image in
描述：请详细分析并描述截图图像，


	detail and then provide an overall image description. Pay
	然后提供整体图像描述。请


	attention to anything related to the task. If there are specific
	关注与任务相关的任何内容。如果有特定


	features such as characters or text, mention these as well.
	特征，如角色或文本，也请提及。


Budget: Bank Balance is shown at the bottom of the screenshot.
预算：截图底部显示银行余额。


Population: The population of the city is shown at the bottom of the
人口：城市人口显示在截图底部，


	screenshot, next to the budget.
	位于预算旁边。


Error_message: If there are some in-game error messages, which are
错误信息：如果有游戏内错误信息，通常为红色，


	usually in red color, such as "Space already occupied!", extract
	如“空间已被占用！”，请提取文本，


	the text, otherwise, only output "null".
	否则仅输出“null”。


Construction_information: If there is some in-game construction
建筑信息：如果有游戏内建筑信息，通常为蓝色，


	information, which is usually in blue colors, such as "
	如“


	Construction cost: 2500 Estimated production: 0 m^3/week" and "
	建筑成本：2500 预计产量：0 立方米/周”及“


	Construction cost: 2500 Shoreline recommended", extract the text,
	建设成本：2500 Shoreline 推荐


	otherwise, only output "null".
	否则，仅输出“null”。


Other: Other information that does not belong to the above categories.
其他：不属于上述类别的其他信息。


	If none of them applies, only output "null".
	如果都不适用，仅输出“null”。


You should only respond in the format described below and not output
您应仅以以下描述的格式回复，不要输出


	comments or other information.
	评论或其他信息。


Description:
描述：


The image shows...
图像显示...


Budget:
预算：


The amount of budget
预算金额


Population:
人口：


The amount of population
人口数量


Error_message:
错误信息：


The text of the error message
错误信息文本


Construction_information:
建设信息：


The text of the construction information
建设信息文本


Other:
其他：


Other information is
其他信息是


---



Prompt 7: Skylines: Self-Reflection prompt.
提示7：天际线（Skylines）：自我反思提示。


---



Assume you are a helpful AI assistant integrated with 'Cities:
假设你是集成在PC版《城市：天际线》（Cities: Skylines）中的一个有用的AI助手，


	Skylines' on the PC, equipped to handle a wide range of tasks in
	能够处理游戏中的各种任务。


	the game. Your advanced capabilities enable you to process and
	你具备先进的能力，可以处理和


	interpret gameplay screenshots and other relevant information.
	解读游戏截图及其他相关信息。


	Your task is to examine these inputs, interpret the in-game
	你的任务是检查这些输入，解读游戏内


	context, and determine whether the executed action takes effect.
	的上下文，并判断所执行的操作是否生效。


Target task:
目标任务：


<\$task_description\$>



Current subtask for completing the target task:
完成目标任务的当前子任务：


<\$subtask_description\$>



Current coordinates:
当前坐标：


<\$coordinates\$>



Last executed action for completing the subtask:
完成子任务的最后执行操作：


<\$actions\$>



Error message for the last executed action:
最后执行操作的错误信息：


<\$error_message\$>



Construction information:
建设信息：


<\$construction_information\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



<\$image_introduction\$>



Reasoning: You MUST answer the following questions step by step to get
推理：您必须逐步回答以下问题以获得


	some reasoning based on the last action and sequential frames
	基于上一次动作和连续帧的一些推理


	during the execution of the last action.
	在执行最后一个操作期间。


1. What is the executed action? Please answer this question not based
1. 执行的操作是什么？请不要基于此问题作答


	on the sequential frames.
	在连续帧上。


2. Is the construction information provided in the information shown
2. 提供的信息中是否包含施工信息


	above? If yes, what is it?
	上面？如果是，是什么？


3. Was the last executed action successful? Give reasons. You should
3. 上一次执行的操作成功了吗？请说明理由。你应该


	refer to the following rules:
	请参照以下规则：


- Buildings and roads cannot be built on the river.
- 河流上不能建造建筑物和道路。


- Water pumping station and water drain pipe need to be built as close
- 水泵站和排水管需要尽可能靠近建造


	as possible to the river.
	尽可能靠近河边。


- If you are try_place a water pumping station and the construction
- 如果您正在尝试建设一个水泵站及其施工


	information provided above shows that the estimated production is
	上述信息显示估计产量为


	0 m^3/week, then it means that it is not close enough to the river
	0 立方米/周，那么这意味着它离河流不够近


	. So you need to try_place to place the building to another place.
	所以你需要尝试使用try_place将建筑放置到另一个位置。


	If the estimated production is not $0{\mathrm{\;m}}^{ - }3/$ week,or the
	如果估计的产量不是$0{\mathrm{\;m}}^{ - }3/$周，或者


	construction information is not provided, regard this action as a
	未提供施工信息，则视此操作为成功。


	success. You should only refer to the textual construction
	您应仅参考文本施工信息，而非从连续帧中提取。


	information instead of extracting it from the sequential frames.
	 


- If you are try_place a water drain pipe and the construction
- 如果您尝试放置排水管且施工信息显示推荐沿岸线，则


	information shows that shoreline is recommended. Then it means
	表示距离河流不够近。因此，您需要尝试将建筑放置在其他位置。


	that it is not close enough to the river. So you need to try_place
	 


	to place the building in another place.
	 


- Roads are prohibited from crossing together and do not build roads
- 禁止道路交叉重叠，且不得在水面上建造道路。


	on water.
	 


4. If the last action is not executed successfully, what is the most
4. 如果最后一次操作未成功执行，最可能的原因是什么？如何改进此操作？您应仅给出一个原因，并参照以下规则：


	probable cause? How to improve this action? You should give only
	 


	one cause and refer to the following rules:
	- 最后一次操作的推理可能有误。


- The reasoning for the last action could be wrong.
 


- If there is an error message for the last executed action provided
- 如果上述信息中提供了最后执行操作的错误信息，请根据报告分析原因，


	in the above information, analyze the cause based on the report,
	 


	otherwise, you should regard that there are no error messages. You
	否则，你应当认为没有错误信息。


	are not allowed to guess the error message by yourself.
	你不允许自行猜测错误信息。


5. Is the subtask completed? Give your reasons. You MUST remember that
5. 子任务完成了吗？请说明理由。你必须记住


	action starts with "try_place" can NEVER complete the subtask.
	以"try_place"开头的操作永远无法完成子任务。


	Only "confirm_placement()" can make the building happen and
	只有"confirm_placement()"才能使建筑完成并


	complete the task. If you want to make any confirmation, regard it
	完成任务。如果你想进行任何确认，都应视为成功。


	as a success.
	视为成功。


6. Do you think the subtask is reasonable? Give your reasons.
6. 你认为子任务合理吗？请说明理由。


Success: You need to output whether the last action was executed
成功：你需要输出最后一个操作是否执行成功。


	successfully or not.
	成功与否。


- If the last action is successful, you should only output 'True'.
- 如果最后一个操作成功，你只应输出'True'。


	Otherwise, you should only output 'False'.
	否则，你只应输出'False'。


You should only respond in the format described below.
你应仅以以下描述的格式回应。


Reasoning:
推理：


1. ...



2. ...



3. ....



4. ...



5. ...



6. ...



	...



	Success:
	成功：


		True
		True


			...



---



Prompt 8: Skylines: Task Inference prompt.
提示8：天际线：任务推断提示。


---



Assume you are a helpful AI assistant integrated with 'Cities:
假设你是一个集成在“Cities”的有用AI助手：


	Skylines' on the PC, equipped to handle a wide range of tasks in
	PC上的《天际线》，能够处理各种任务


	the game. You will also be given a summary of the history that
	游戏。您还将获得一份历史概要，内容包括


	happened before the last screenshot. You should assist in
	发生在最后一个截图之前。你应该协助


	summarizing the events for future decision-making and also propose
	总结事件以供未来决策，并提出


	a new subtask, which is the most suitable subtask for the current
	一个新的子任务，这是当前最合适的子任务


	situation, given the target task.
	情况，鉴于目标任务。


Here is some helpful information to help you do the summarization and
这里有一些有助于你进行总结的有用信息


	propose the subtask.
	提出子任务。


Current task:
当前任务：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出子任务的先前推理：


<\$subtask_reasoning\$>



<\$image_introduction\$>



Current budget:
当前预算：


<\$budget\$>



Current population:
当前人口：


<\$population\$>



Last executed action:
上次执行的操作：


<\$actions\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$self_reflection_reasoning\$>



Error message for the last action:
上一次操作的错误信息：


<\$error_message\$>



The following is the summary of history that happened before the last
以下是上一次之前发生的历史摘要


	screenshot:
	截图：


<\$previous_summarization\$>



The task can be decomposed into the following subtasks:
该任务可以分解为以下子任务：


1. Start from the Highway entry: Build a road from the highway entry
1. 从高速公路入口开始：从高速公路入口处建造一条道路


	in grid (4, 2) vertically northwards towards grid (3,1).
	在网格(4, 2)垂直向北通向网格(3,1)。


2. Extend Horizontally to the Left $\left( {1,1}\right)$ : From the endpoint in grid
2. 向左水平延伸$\left( {1,1}\right)$：从网格


	$\left( {1,1}\right)$ , construct a road horizontally to the left,spanning across
	$\left( {1,1}\right)$的终点，水平向左建造一条道路，跨越


	grids $\left( {3,1}\right)$ and $\left( {2,1}\right)$ ,and ending at the center of grid $\left( {1,1}\right)$ .
	网格$\left( {3,1}\right)$和$\left( {2,1}\right)$，并在网格$\left( {1,1}\right)$中心结束。


3. Build a Road Down to the bottom of Grid $\left( {2,2}\right)$ : Start from grid
3. 向下建造道路至网格$\left( {2,2}\right)$底部：从网格


	$\left( {1,1}\right)$ and construct the road to the top of grid $\left( {2,3}\right)$ .
	$\left( {1,1}\right)$开始，建造道路至网格$\left( {2,3}\right)$顶部。


---



---



4. Extend Eastward to Grid (3,3): From the bottom of grid (2,2), build
4. 向东延伸至网格(3,3)：从网格(2,2)底部，向东建造


	a road eastward to reach the center of grid $\left( {3,3}\right)$ .
	一条道路，达到网格$\left( {3,3}\right)$中心。


5. Connect the road to the Highway Exit: Extend the end of the road
5. 将道路连接至高速公路出口：将道路末端


	from grid $\left( {3,3}\right)$ to the exit of the highway,completing the road
	从网格$\left( {3,3}\right)$延伸至高速公路出口，完成道路建设


	loop.
	循环。


6. Install a Water Pumping Station near the River at the top-left
6. 在左上角河流附近安装水泵站


	corner of grid $\left( {2,3}\right)$ : Place the water pumping station near the
	网格$\left( {2,3}\right)$左上角：将水泵站设置在网格$\left( {2,3}\right)$的河流附近，确保充足的水源供应。


	river in grid $\left( {2,3}\right)$ to ensure an adequate water supply.
	网格$\left( {2,3}\right)$的河流旁，以保证水源充足。


7. Position a Water Drain Pipe near the River at the top-left corner
7. 在网格(2,3)左上角河流附近布置排水管


	of grid (2,3): Install a water drain pipe slightly downstream from
	在水泵站下游稍远但同一网格内安装排水管，以防止水源污染。


	the pumping station but within the same grid to prevent water
	水泵站下游但同一网格内安装排水管，防止水污染。


	contamination.
	防止水污染。


8. Lay Water Pipes: Connect the water pumping station to the water
8. 铺设水管：用水管连接水泵站和排水管。同时，确保所有道路均铺设水管，


	drain pipe using water pipes. Additionally, ensure all roads built
	以便整个区域都能获得供水。


	are covered with water pipes to provide water access across the
	确保所有道路均铺设水管，提供全区域供水。


	entire area.
	整个区域的供水。


9. Erect Wind Turbines for Power: Construct several wind turbines near
9. 建造风力发电机：在水泵站附近及道路沿线建造多台风力发电机，


	the water pumping station and along the roads to provide
	为该区域提供可持续电力。


	sustainable electricity to the area.
	为该区域提供可持续电力。


10. Designate Residential Zones: Allocate spaces adjacent to the roads
10. 规划住宅区：在道路旁划定住宅用地。


	for residential zones to foster community living.
	为住宅区营造社区生活环境。


11. Establish Industrial Zones: Set aside areas near the roads for
11. 设立工业区：在靠近道路的区域划出工业用地，


	industrial purposes, ideally in parts of the grid further from
	最好位于远离住宅区的网格部分，


	residential zones to manage noise and pollution.
	以控制噪音和污染。


12. Create Commercial Zones: Develop commercial zones near the roads
12. 创建商业区：在道路附近发展商业区，


	to provide services and retail options for the residents and
	为居民和区域内的工作人员提供服务和零售选择。


	workers in the area.
	


13. Make sure all the zones near roads are built with Residential
13. 确保所有靠近道路的区域均建设为住宅区、工业区或工业区。


	Zones, Industrial Zones or Industrial Zones.
	


14. Build more roads and zones and ensure water and electricity supply
14. 建设更多道路和区域，并确保供水和供电。


History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经验，


	especially the last step according to the decision-making
	特别是根据决策推理和自我反思推理对最后执行步骤的总结。


	reasoning and self-reflection reasoning for the last executed
	总结需精准、具体，且高度关联任务，遵循以下规则。


	action. The summarization needs to be precise, concrete and highly
	


	related to the task and follow the rules below.
	1. 总结历史任务和当前任务。内容包括


1. Summarize the tasks from the history and the current task. What is
	


	the current progress of the task?
	任务的当前进展如何？


2. Which subtask has been completed? Which subtasks are not?
2. 哪些子任务已完成？哪些子任务尚未完成？


Subtask_reasoning: According to the task decomposition, analyze the
子任务推理：根据任务分解，逐步分析


	current progress step by step and then decide whether the previous
	当前进展，然后判断前一个


	subtask is finished and whether it is necessary to propose a new
	子任务是否完成，以及是否有必要提出新的


	subtask. The subtask should be straightforward, contribute to the
	子任务。子任务应当简明，能促进


	target task and be most suitable for the current situation, which
	目标任务的完成，并且最适合当前情况，


	should be completed within a few actions. You should respond to me
	应在几步操作内完成。你应当回复我


	with:
	内容包括：


1. What is the previous subtask? Which step it is for in the task
1. 前一个子任务是什么？它对应任务分解中的哪一步？


	decomposition?
	2. 根据自我反思的推理，前一个


2. According to the reasoning of self-reflection, is the previous
子任务是否完成？注意，动作的成功并不


	subtask completed? Note that the success of the action does not
	等同于子任务的成功。你应严格遵循


	mean the success of the subtask. You should strictly follow the
	自我反思中对子任务是否完成的推理。如果完成，


	reasoning of whether the subtask is completed in the self-
	你应进入下一步并提出


	reflection. If yes, you should move to the next step and propose
	新的子任务。


	it as the new subtask. If not, you should continue the previous
	将其视为新的子任务。如果不是，您应继续之前的


	subtask without changing anything. Please do not make any
	子任务，且不做任何更改。请勿做出任何


	assumptions if they are not mentioned in the above information.
	未在上述信息中提及的假设。


	You should assume that you are doing the task from scratch. Please
	您应假设自己是从零开始执行该任务。请


	strictly follow the description and requirements in the current
	严格遵循当前任务中的描述和要求。


	task.
	任务。


3. The proposed subtask needs to be precise and concrete within one
3. 所提出的子任务需在一句话内准确具体。


	sentence. It should not be related to any skills.
	不应涉及任何技能。


4. To enable water supply, you should first build a water pumping
4. 为实现供水，您应先建造一个水泵站，


	station and then build a water drain pipe near the river, and
	然后在河边建造排水管，


---



---



	finally use water pipes to connect them with the roads. And ensure
	最后用水管将它们与道路连接，并确保


	the water pipes cover all the roads.
	水管覆盖所有道路。


5. The water pumping station and water drain pipe also need
5. 水泵站和排水管也需要电力才能运行，


	electricity to work. So you also need to provide electricity for
	因此您还需为它们提供电力。


	them.
	


6. If you want to build roads for the village at the beginning, make
6. 如果您想一开始为村庄修建道路，


	sure to mention that the road needs to be as long as possible and
	务必提到道路需要尽可能长，且


	use several roads to form a large square for the village.
	使用多条道路形成村庄的大广场。


Subtask: According to the subtask reasoning, determine and output the
子任务：根据子任务推理，确定并输出


	most suitable subtask for the current situation. You MUST output
	当前情况最合适的子任务。你必须输出


	the subtask in the output.
	子任务内容。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且


	not output comments or other information.
	不得输出评论或其他信息。


History_summary:
历史摘要：


The summary is ...
摘要是……


Subtask_reasoning :
子任务推理：


1. ...



2. ...



3. ...



Subtask:
子任务：


The current subtask is ...
当前子任务是……


---



Prompt 9: Skylines: Action Planning prompt.
提示9：天际线（Skylines）：行动规划提示。


---



You are a helpful AI assistant integrated with 'Cities: Skylines' on
你是集成于PC版《城市：天际线》（Cities: Skylines）中的智能助手，


	the PC, equipped to handle various tasks in the game. Your
	具备处理游戏中各种任务的能力。你的


	advanced capabilities enable you to process and interpret gameplay
	高级功能使你能够处理和解读游戏玩法


	screenshots and other relevant information. By analyzing these
	截图及其他相关信息。通过分析这些


	inputs, you gain a comprehensive understanding of the current
	输入，您可以全面了解游戏中的当前


	context and situation within the game. Utilizing this insight, you
	背景和情境。利用这些洞察，您


	are tasked with identifying the most suitable in-game action to
	的任务是根据当前任务，确定最合适的下一步游戏操作。


	take next, given the current task. You control the game character
	您控制游戏角色，能够执行可用动作集中的动作。


	and can execute actions from the available action set. Upon
	在评估所提供的信息后，您的角色是明确


	evaluating the provided information, your role is to articulate
	您将采取的具体行动，考虑游戏的


	the precise action you would deploy, considering the game's
	当前状况，并指定执行该动作所需的任何参数。


	present circumstances, and specify any necessary parameters for
	


	implementing that action.
	


Here is some helpful information to help you make the decision.
以下是帮助您做出决策的一些有用信息。


Current task:
当前任务：


<\$subtask_description\$>



Coordinates of constructed buildings:
已建建筑的坐标：


<\$coordinates\$>



The latest successful action that builds the building. If you want to
最新成功的建造建筑动作。如果您想


	try_place a road, and the endpoint (x2, y2), of the latest
	尝试放置道路，且最新成功动作的终点 (x2, y2)


	successful action is also try_place a road. Then you MUST use the
	也是尝试放置道路，那么您必须使用


	end point of the constructed road as the start point of your new
	将已建道路的终点作为新道路的起点。


	road.
	道路。


<\$last_success_try_place_action\$>



Current budget:
当前预算：


<\$budget\$>



Current population:
当前人口：


<\$population\$>



Last executed action:
上一次执行的操作：


<\$actions\$>



Self-reflection reasoning for the last executed action:
对上一次执行操作的自我反思推理：


---



---



<\$self_reflection_reasoning\$>



Error message for the last action:
上一次操作的错误信息：


<\$error_message\$>



Construction information for the last action:
上一次操作的建设信息：


<\$consruction_information\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



<\$image_introduction\$>



Based on the above information, analyze the current situation and
基于以上信息，分析当前情况并


	provide the reasoning for what you should do for the next step to
	提供完成任务下一步应采取行动的推理。


	complete the task. Then, you should output the exact action you
	然后，你应输出你想在游戏中执行的具体操作。


	want to execute in the game. You should respond to me with:
	你应回复我：


Reasoning: You should think step by step and provide detailed
推理：你应逐步思考并提供详细的


	reasoning to determine the next action executed on the current
	推理，以确定当前应执行的下一步操作。


	state of the task. You need to answer the following questions step
	任务的状态。您需要逐步回答以下问题


	by step. You cannot miss the last question:
	逐步进行。你绝不能错过最后一个问题：


	1. What is the current task? What are the requirements to achieve
	1. 当前任务是什么？实现该任务的要求有哪些？


	the goal?
	目标？


	2. According to the self-reflection reasoning, is the last action
	2. 根据自我反思推理，最后的动作是


	executed successfully?
	执行成功了吗？


	3. If you want to place anything, do you already open the
	3. 如果你想放置任何东西，你已经打开了


	corresponding menu? Otherwise, you need to open the right menu
	对应的菜单？否则，您需要打开正确的菜单


	first in this step rather than doing anything else. If you have
	首先在这一步，而不是做其他任何事情。如果你有


	not already opened the corresponding menu, skip answering
	如果尚未打开相应菜单，则跳过回答


	questions 4, 5, 6, 7, 8 and 9.
	问题4、5、6、7、8和9。


	4. Does the previous action "try_place" something? If there is an
	4. 上一个动作“try_place”放置了什么东西吗？如果有


	error message showing that the space is already occupied or the
	错误信息显示该空间已被占用或


	last action failed according to the self-reflection reasoning, you
	根据自我反思推理，最后的操作失败了，你


	should use the same action with different parameters as the
	应使用相同的操作但参数不同，如同


	position of it to try again. The difference needs to be
	重新尝试它的位置。差异需要是


	significant enough with at least 100 pixels of change for the
	至少有100像素的变化，足够显著


	position of the input points. If there is no error message, you
	输入点的位置。如果没有错误信息，您


	should only output confirm_placement() or cancel_placement() to
	应仅输出 confirm_placement() 或 cancel_placement() 到


	approve or cancel the placement. You should not call anything else
	批准或取消该职位。你不应调用其他任何操作


	5. Does the previous action open any menu? Then you should "
	5. 上一个操作是否打开了任何菜单？那么你应该“


	try_place" something according to the task description instead of
	根据任务描述“尝试放置”某物，而不是


	using "confirm_placement".
	使用“confirm_placement”。


	6. If you want to place a building, which grid do you plan to
	6. 如果你想建造一座建筑，你打算放在哪个格子上


	place the building in? What is the exact pixel position of it?
	将建筑物放置在哪里？它的确切像素位置是多少？


	7. If you want to place a road, which grids do you plan to make it
	7. 如果你想修建一条道路，你打算在哪些格子上建造？


	cross? Which grids are the start point and end point in,
	交叉？起点和终点分别在哪些网格中，


	respectively? What are the exact pixel positions of them? You MUST
	分别是？它们的确切像素位置是多少？你必须


	use one of the endpoints of the constructed road shown in the
	使用所示构建道路的一个端点


	coordinates information as the start point of the new road. If you
	坐标信息作为新道路的起点。如果您


	want to try_place a road, and the endpoint (x2, y2), of the
	想要尝试铺设一条道路，终点为 (x2, y2)，


	latest successful action is also try_place a road. Then you MUST
	最新成功的操作也是尝试放置一条道路。然后你必须


	use the end point of the constructed road as the start point of
	使用已建道路的终点作为


	your new road.
	新道路的起点。


	8. If you want to place a zone, which grids do you plan to make it
	8. 如果你想设置一个区域，计划覆盖哪些网格？


	cover? You should only use the vertices coordinates of the
	你应仅使用对应网格的顶点坐标作为操作参数。


	corresponding grids as the parameter for the action. Zones cannot
	区域之间不能相互覆盖。


	cover each other.
	9. 如果你想铺设水管，起点应为


	9. If you want to place a Water Pipe, the start point should be
	水泵站（Water Pumping Station）、排水管（Water Drain Pipe）、已建水管的起点或终点位置。


	the position of Water Pumping Station, Water Drain Pipe, the start
	


				point of a built Water Pipe or the end point of a built Water
					


			Pipe.
				


			10. This is the most critical question. Based on the action rules
				10. 这是最关键的问题。基于操作规则和自我反思，下一步在有效操作集合中最合适的操作应是什么？


			and self-reflection, what should be the most suitable action in
				你应逐步分析该操作的效果。


			the valid action set for the next step? You should analyze the
				不应重复之前的操作，也不要尝试验证之前的操作是否成功。


			effects of the action step by step. You should not repeat the
				


			previous action again. Do not try to verify whether the previous
				


			action succeeded.
				


			11. Do all the selected actions exist in the valid action set? If
			11. 所有选定的动作都存在于有效动作集合中吗？如果


			no, regenerate the action and give the reasons.
			不，重新生成动作并给出理由。


			12. If you are placing a road, is the road more than 300 pixels
			12. 如果您正在铺设道路，道路是否超过300像素


			long? Otherwise, regenerate the action and give reasons.
			<long?>否则，请重新生成该操作并说明理由。


Actions: The requirements that the generated action needs to follow.
操作：生成的操作需要遵循的要求。


			The best action, or short sequence of actions without gaps, to
			最佳动作，或无间断的短动作序列，来


			execute next to progress in achieving the goal. Pay attention to
			执行下一步以推进目标的实现。注意


			the names of the available skills and to the previous skills
			可用技能的名称及之前的技能


			already executed, if any. You should also pay more attention to
			已执行的（如有）。你还应更加注意


			the following action rules:
			以下操作规则：


			1. You should output actions in Python code format and specify any
			1. 你应以Python代码格式输出操作，并说明任何


			necessary parameters to execute that action. If the function has
			执行该操作所需的必要参数。如果该函数具有


			parameters, you should also include their names and decide their
			参数时，您还应包括它们的名称并确定它们的


			values, like "move_right(duration=1)". If it does not have a
			值，例如 "move_right(duration=1)"。如果没有


			parameter, just output the action, like "open_map()".
			参数，只需输出动作，如“open_map()”。


			2. Given the current situation and task, you should only choose
			鉴于当前情况和任务，您应仅选择


			the most suitable action from the valid action set. You cannot use
			从有效动作集合中选择最合适的动作。你不能使用


			actions that are not in the valid action set to control the
			不在有效动作集合中的动作来控制


			character.
			角色。


			3. You MUST NOT output more than one skill in the actions.
			3. 你不得在动作中输出超过一个技能。


			4. If you want to build a village, you should follow these rules:
			4. 如果你想建造村庄，应遵循以下规则：


				4.1 Build roads correctly.
				4.1 正确建造道路。


					- If you have not opened the road tool, you should open the menu
					- - 如果你尚未打开道路工具，应打开菜单


			. If you have already opened the menu, you should not open it
			。如果菜单已打开，则不应再次打开


			again.
			。


					- Newly built roads must be connected to the existing roads.
					- - 新建道路必须与现有道路相连。


					- Determine in which grid the starting point of the newly built
					- - 确定新建道路起点所在的网格，并识别起点的像素位置。


			road is located, and identify the pixel position of the starting
			


			point.
			


					- Build the road in the correct direction.
					- - 按正确方向建造道路。


			5. You MUST NOT repeat the previous action with the same
			5. 如果你认为前一个动作失败，不能重复使用相同参数执行该动作。


			parameters again if you think the previous action fails.
			


			6. Your action should strictly follow the analysis in the
			6. 你的操作应严格遵循推理中的分析。


			reasoning. Do not output any additional action not mentioned in
			不要输出推理中未提及的任何额外操作。


			the reasoning.
			


			7. Please do not directly connect the entrance of the highway with
			7. 请不要一开始就直接将高速公路入口与出口相连。


			the exit of the highway at the beginning. To make the village as
			为了使村庄尽可能大，你应当在野外修建道路并将它们相互连接。


			large as possible. You should build roads in the wild and connect
			


			them with each other.
			


			8. If you are placing a road, the road needs to be at least 300
			8. 如果你正在铺设道路，道路长度需至少为300像素。


			pixels long.
			


You should only respond in the format described below, and you should
你应仅以以下描述的格式回应，且不得输出评论或其他信息。


			not output comments or other information.
			


Reasoning:
推理：


1. ...



2. ...



3. ...



...



Actions:
操作：


cccpython
cccpython


			action (args1=x,args2=y)
			action (args1=x,args2=y)


ccc
ccc


---



Prompt 10: Stardew: Information Gathering Cultivation prompt.
提示10：星露谷物语（Stardew）：信息收集培养提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是一个集成在《星露谷物语》(Stardew Valley)中的智能助手


	on the PC, equipped to handle a wide range of tasks in the game.
	在电脑上，配备了处理游戏中各种任务的能力。


	Your advanced capabilities enable you to process and interpret
	您的高级能力使您能够处理和解读


	gameplay screenshots and other relevant information.
	游戏截图及其他相关信息。


<\$image_introduction\$>



Current task:
当前任务：


<\$task_description\$>



Description: Please analyze and describe the screenshot image in a
描述：请分析并描述截图图像中的内容


	grid-by-grid format and then provide an overall image description.
	按网格格式逐格描述，然后提供整体图像描述。


	Pay attention to anything related to the task. The image is
	注意与任务相关的任何内容。图像是


	divided into a 3x5 grid, each cell having its own coordinates. For
	<divided into a 3x5 grid, each cell having its own coordinates. For</text> 分成3x5的网格，每个单元格都有自己的坐标。对于


	each grid cell, describe the contents in detail, focusing on any
	每个网格单元，详细描述内容，重点关注任何


	critical icons, or objects present in that particular segment. If
	关键图标，或该特定片段中出现的对象。如果


	there are specific features such as characters or text, mention
	有特定的特征，如字符或文本，提及


	these as well. After completing the description for one cell,
	这些也是。在完成对一个单元格的描述后，


	proceed to the next, for example, 'In grid (1,1), [description].
	继续到下一个，例如，“在网格（1,1）中，[描述]。”


	In grid $\left( {1,2}\right)$ ,[description]. ${}^{\prime }$ and so on until the entire image is
	在网格$\left( {1,2}\right)$中，[描述]。${}^{\prime }$，如此类推，直到整个图像完成


	covered.
	已覆盖。


Date_time: The date and time information in the game are shown on the
日期时间：游戏中的日期和时间信息显示在


	upper-right of the screenshot, in grid (1, 5). An example of the
	截图的右上角，位于网格(1, 5)处。日期和时间信息的示例是


	date and time information is "Wed 10, 5:10 pm".
	“周三 10号，下午5:10”。


Energy: The current energy remains for the character doing actions.
能量：角色执行动作时当前剩余的能量。


	The energy bar is shown on the bottom-right of the screenshot, in
	能量条显示在截图的右下角，位于


	grid (3, 5). The full energy is 270. An example of the energy
	网格(3, 5)处。满能量为270。能量信息的示例是“150/270”。


	information is " 150/270".
	 


Weather: The current weather information in the game, the weather is
天气：游戏中的当前天气信息，天气类型包括“晴天”、“雨天”、“有风”、“下雪”、“暴风雨”、“节日”、“婚礼”和“无”。


	one from "Sunny", "Rainy", "Windy", "Snowy", "Stormy", "Festival",
	如果都不符合，则只输出“无”。


	"Wedding", and "null". If none of them applies, only output "null
	对话：如果截图中显示有对话，提取对话文本，如“店主：你想买什么？”，否则只输出“无”。


	".



Dialog: If there are some dialogs shown in the screenshot, extract the
 


	text of the conversation, like "Shopkeeper: What do you want to
	 


	buy?", otherwise, only output "null".
	 


Other: Other information that does not belong to the above categories.
其他：不属于上述类别的其他信息。


	If none of them applies, only output "null".
	如果都不符合，则只输出“无”。


You should only respond in the format described below and not output
您应仅按照以下描述的格式回复，不要输出


	comments or other information.
	评论或其他信息。


Description:
描述：


In grid $\left( {1,1}\right)$ , ...
在网格$\left( {1,1}\right)$中，...


In grid $\left( {1,2}\right)$ , ...
在网格$\left( {1,2}\right)$中，...


...



In grid $\left( {3,5}\right)$ , ...
在网格$\left( {3,5}\right)$中，...


Overall, the image shows...
整体来看，图像显示了...


Date_time:
日期时间：


Date and time information
日期和时间信息


Energy :
能量：


The number of energy remains showing in the energy bar
能量条中显示的能量数值


Weather :
天气：


Weather information
天气信息


Dialog :
对话：


Dialog text
对话文本


Other:
其他：


Other information is ...
其他信息是...


---



---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是一个集成在《星露谷物语》(Stardew Valley)中的智能助手


	on the PC, equipped to handle a wide range of tasks in the game.
	运行于PC平台，能够处理游戏中的各种任务。


	Your advanced capabilities enable you to process and interpret
	你具备先进的能力，可以处理和解析


	gameplay screenshots and other relevant information. Your task is
	游戏截图及其他相关信息。你的任务是


	to examine these inputs, interpret the in-game context, and
	审查这些输入，解读游戏内的情境，


	determine whether the executed action takes effect.
	并判断所执行的操作是否生效。


Target task:
目标任务：


<\$task_description\$>



Current subtask for completing the target task:
完成目标任务的当前子任务：


<\$subtask_description\$>



The reasoning for proposing the current subtask:
提出当前子任务的理由：


<\$subtask_reasoning\$>



Last executed action for completing the subtask:
完成子任务的最后执行操作：


<\$previous_action\$>



Reasoning for the last action:
最后操作的理由：


<\$previous_reasoning\$>



Current date and time:
当前日期和时间：


<\$date_time\$>



Previous toolbar information:
之前的工具栏信息：


<\$previous_toolbar_information\$>



Current toolbar information:
当前的工具栏信息：


<\$toolbar_information\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



<\$image_introduction\$>



Reasoning: You need to answer the following questions step by step to
推理：你需要逐步回答以下问题以


	get some reasoning based on the last action and sequential frames
	基于上一次动作和连续帧进行推理


	of the character during the execution of the last action.
	在执行最后一个动作时角色的状态。


1. What is the executed action? Please answer this question not based
1. 执行的操作是什么？请不要基于此问题作答


	on the sequential frames.
	在连续帧上。


2. Was the executed action successful? Give reasons. You should refer
2. 执行的操作成功了吗？请说明理由。你应当参考


	to the following rules:
	遵循以下规则：


- If the action involves moving forward, it is considered unsuccessful
- 如果动作涉及向前移动，则视为不成功


	only when the character's position remains unchanged across
	只有当角色的位置保持不变时


	sequential frames, regardless of background elements and other
	连续帧，无论背景元素及其他


	people.
	人们。


- If you are not 100% sure that the action fails, regard it as success
- 如果你不能百分之百确定该操作失败，就视其为成功


3. If the last action is not executed successfully, what is the most
3. 如果最后一个操作未成功执行，最重要的是


	probable cause? You should give only one cause and refer to the
	合理的理由？你只需给出一个原因并参考


	following rules:
	以下规则：


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是


	action was unavailable at the current place, then you should move
	当前地点无法执行该操作，您应当移动位置


	to a new place.
	到一个新地方。


- If it is a movement action, the most probable cause was that you
- 如果是移动动作，最可能的原因是你


	were blocked by seen or unseen obstacles.
	被可见或不可见的障碍物阻挡。


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


4. Is the subtask completed? Give your reasons. If you want to make
4. 子任务完成了吗？请说明理由。如果你想要


	any confirmation, regard it as a success.
	任何确认，都视为成功。


5. Is the target task completed? Give your reasons.
5. 目标任务完成了吗？请说明理由。


6. Do you think the subtask is reasonable? Give your reasons.
6. 你认为这个子任务合理吗？请说明理由。


---



---



You should only respond in the format described below.
您应仅以以下描述的格式回复。


Reasoning:
推理：


	1. ...



2. ...



	3. ...



			...



---



Prompt 12: Stardew: Task Inference Cultivation prompt.
提示12：星露谷物语（Stardew）：任务推断培养提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley
假设你是一个集成在《星露谷物语》(Stardew Valley)中的智能助手


	on the PC, equipped to handle a wide range of tasks in the game.
	在电脑上，配备了能够处理游戏中各种任务的功能。


	You will also be given a summary of the history that happened
	你还将获得一份发生过的历史摘要


	before the last screenshot. You should assist in summarizing the
	在最后一个截图之前。你应协助总结


	events for future decision-making and also propose a new subtask,
	事件以便未来决策，并提出一个新的子任务，


	which is the most suitable subtask for the current situation,
	即在当前情境下最合适的子任务，


	given the target task.
	基于目标任务。


Here is some helpful information to help you do the summarization and
以下是一些有助于你进行总结和


	propose the subtask.
	提出子任务的有用信息。


Current task:
当前任务：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出该子任务的先前推理：


<\$subtask_reasoning\$>



<\$image_introduction\$>



Current toolbar information:
当前工具栏信息：


<\$toolbar_information\$>



Last executed action:
最后执行的操作：


<\$previous_action\$>



Decision-making reasoning for the last executed action:
对最后执行操作的决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对最后执行操作的自我反思：


<\$self_reflection_reasoning\$>



The following is the summary of history that happened before the last
以下是发生在最后一个


	screenshot:
	截图之前的历史总结：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去经历中发生的事情，


	especially the last step according to the decision-making
	尤其是根据决策的最后一步


	reasoning and self-reflection reasoning for the last executed
	对最后执行的推理和自我反思推理


	action. The summarization needs to be precise, concrete and highly
	行动。总结需要精准、具体且高度


	related to the task and follow the rules below.
	与任务相关并遵守以下规则。


1. Summarize the tasks from the history and the current task. What is
1. 总结历史任务和当前任务。内容是什么


	the current progress of the task? For example, to harvest a seed,
	任务的当前进展如何？例如，收获种子时，


	you need to water the seed for 4 days. And you have already
	你需要给种子浇水4天。你已经浇了


	planted the seed and watered it for two days.
	种下种子并浇水两天。


2. Record the successful actions and organize them into events day by
2. 记录成功的操作并将其按天整理成事件


	day.
	天。


3. Do not forget the information and key events in the previous days.
3. 不要忘记前几天的信息和关键事件。


4. If you are watering a seed. Record how many times you have watered
4. 如果你正在给种子浇水，记录浇水的次数


	and calculate how many days you have to water before you can
	并计算你需要浇水多少天才能


	harvest according to the toolbar information provided above.
	根据上述工具栏信息进行收割。


Here is an example to follow:
以下是一个示例：


---



---



On Thu.4, I dig the dirt with the toe and then plant the parsnip seed
在星期四，我用脚趾挖土，然后种下欧防风种子


	and water the seed. The seed has been watered once. It still needs
	并浇水。种子已经浇过一次水了，仍然需要


	to be watered another three times to harvest. On Fri.5, I watered
	还需浇水三次才能收获。5号星期五，我浇了水


	the seed again. The seed has been watered twice. It still needs
	再次播种。种子已经浇了两次水，仍然需要


	to be watered twice to harvest. Today, Sat.6, I just need to get
	浇水两次才能收获。今天，星期六6号，我只需要去拿


	out of home and watered the seed again.
	走出家门，又给种子浇了水。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task and be
	应该是直接明了的，有助于目标任务，并且


	most suitable for the current situation, which should be completed
	最适合当前情况，应当完成


	within a few actions. You should respond to me with:
	在几步操作内。你应该回复我：


1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应该逐步分析。


2. What is the current progress of the target task according to the
2. 根据当前情况，目标任务的进展如何


	analysis in step 1? Please do not make any assumptions if they are
	步骤1中的分析？如果有，请不要做任何假设


	not mentioned in the above information. You should assume that
	上述信息中未提及。您应当假设


	you are doing the task from scratch.
	你正在从头开始完成任务。


3. What is the previous subtask? Does the previous subtask finish? Or
3. 上一个子任务是什么？上一个子任务完成了吗？还是


	is it improper for the current situation? Then select a new one,
	当前情况不合适吗？那就选择一个新的，


	otherwise you should reuse the last subtask.
	否则你应该重复使用上一个子任务。


4. If you want to propose a new subtask, give reasons why it is more
4. 如果你想提出一个新的子任务，请说明为什么它更


	feasible for the current situation.
	适合当前情况。


5. The proposed subtask needs to be precise and concrete within one
5. 所提议的子任务需要在一句话内准确具体。


	sentence. It should not be related to any skills.
	它不应涉及任何技能。


6. The seed only needs to be watered once.
6. 种子只需浇水一次。


7. Do not mention any grid information in the subtask description.
7. 子任务描述中不要提及任何网格信息。


8. Do not check the growth status of the crop.
8. 不要检查作物的生长状态。


9. The seeds only need to be watered ONCE every day. If you have
9. 种子每天只需浇水一次。如果你今天已经浇过水，


	already watered the seed today, you should return home and go to
	你应该回家休息，等待第二天。


	sleep, waiting for the next day.
	睡觉，等待下一天。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且不应输出评论或其他信息。


	not output comments or other information.
	不应输出评论或其他信息。


History_summary :
历史摘要 :


The summary is...
摘要是...


Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask:
子任务：


The current subtask is
当前子任务是


---



Prompt 13: Stardew: Action Planning Cultivation prompt.
提示13：星露谷物语：行动规划培养提示。


---



You are a helpful AI assistant integrated with 'Stardew Valley' on the
你是一个集成在《星露谷物语》(Stardew Valley)中的智能助手


	PC, equipped to handle various tasks in the game. Your advanced
	配备多功能处理能力的电脑，能够应对游戏中的各种任务。您的先进


	capabilities enable you to process and interpret gameplay
	功能使您能够处理和解读游戏玩法


	screenshots and other relevant information. By analyzing these
	截图及其他相关信息。通过分析这些


	inputs, you gain a comprehensive understanding of the current
	<inputs, you gain a comprehensive understanding of the current>  
输入，您可以全面了解当前情况


	context and situation within the game. Utilizing this insight, you
	游戏中的背景和情境。利用这一洞察，您


	are tasked with identifying the most suitable in-game action to
	负责识别最合适的游戏内动作以


	take next, given the current task. You control the game character
	根据当前任务采取下一步行动。你控制游戏角色


	and can execute actions from the available action set. Upon
	并且可以从可用的动作集合中执行动作。


	evaluating the provided information, your role is to articulate
	评估所提供的信息，您的职责是阐述


	the precise action you would deploy, considering the game's
	考虑到游戏的情况，你将采取的具体行动


	present circumstances, and specify any necessary parameters for
	当前情况，并指定任何必要的参数以便


	implementing that action.
	执行该操作。


Here is some helpful information to help you make the decision.
这里有一些有助于你做出决定的信息。


Current subtask:
当前子任务：


<\$subtask_description\$>



Current date and time:
当前日期和时间：


<\$date_time\$>



---



---



Toolbar information:
工具栏信息：


<\$toolbar_information\$>



Last executed action:
上次执行的操作：


<\$previous_action\$>



Reasoning for the last action:
上次操作的推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对上次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



<\$image_introduction\$>



Based on the above information, analyze the current situation and
基于以上信息，分析当前情况并


	provide the reasoning for what you should do for the next step to
	提供你下一步应采取行动的推理，以


	complete the task. Then, you should output the exact action you
	完成任务。然后，你应输出你


	want to execute in the game. You should respond to me with:
	想在游戏中执行的具体操作。你应回复我：


Reasoning: You should think step by step and provide detailed
推理：你应逐步思考并提供详细的


	reasoning to determine the next action executed on the current
	推理，以确定当前应执行的下一步操作。


	state of the task. You need to answer the following questions step
	任务状态。您需要逐步回答以下问题


	by step. You cannot miss the last question:
	逐步进行。你绝不能错过最后一个问题：


	1. Analyze the information in the toolbar. Does it contain all the
	1. 分析工具栏中的信息。它是否包含所有


	necessary items for completing the task?
	完成任务所需的物品？


	2. What is the current selected tool? Do you want to use a tool,
	2. 当前选中的工具是什么？您想使用某个工具吗，


	such as axe, hoe, watering can, pickaxe and scythe? And is the
	例如斧头、锄头、洒水壶、镐和镰刀？还有


	character's current position a suitable place to use such a tool?
	角色当前的位置适合使用这种工具吗？


	Then you should use use_tool() instead of do_action().
	那么你应该使用 use_tool() 而不是 do_action()。


	3. Does the character already reach the target place?
	3. 角色已经到达目标地点了吗？


	4. What was the previous action? If the previous action was a
	4. 上一个动作是什么？如果上一个动作是


	movement, were you blocked?
	移动时，你被阻挡了吗？


	5. If your task is to harvest the plant, did you water the seed?
	5. 如果你的任务是收获植物，你给种子浇水了吗？


	The seeds only need to be watered ONCE every day. If you have
	种子每天只需浇水一次。如果你有


	already watered the seed today, you should return home and go to
	今天已经给种子浇过水了，你应该回家去


	sleep, waiting for the next day.
	睡觉，等待新的一天。


	6. This is the most critical question. Based on the action rules
	6. 这是最关键的问题。基于行动规则


	and self-reflection, what should be the most suitable action in
	经过自我反思，下一步在有效动作集合中最合适的动作应该是什么？


	the valid action set for the next step? You should analyze the
	你应当逐步分析该动作的效果。


	effects of the action step by step. You should not repeat the
	除非是移动动作，否则不应重复之前的动作。


	previous action again except for the movement action. Do not try
	不要尝试验证之前的动作是否成功。


	to verify whether the previous action succeeded.
	


	7. Is the selected action the same as the last executed action? If
	7. 选定的动作是否与上一次执行的动作相同？如果是，重新生成动作并说明理由。


	yes, regenerate the action and give the reasons.
	


	8. Do all the selected actions exist in the valid action set? If
	8. 所有选定的动作是否都存在于有效动作集合中？如果否，重新生成动作并说明理由。


	no, regenerate the action and give the reasons.
	


	9. Analyze whether the selected action meets the requirements of
	9. 逐一分析选定的动作是否满足以下动作（Actions）的要求。生成的动作是否满足所有要求？如果不满足，重新生成动作并说明理由。


	the Actions below one by one. Does the generated action meet all
	


	the requirements? If not, regenerate the action and give the
	


	reasons.
	


Actions: The requirements that the generated action needs to follow.
动作（Actions）：生成动作需要遵循的要求。


	The best action, or short sequence of actions without gaps, to
	接下来执行的最佳动作，或无间断的短动作序列，以推动目标的实现。


	execute next to progress in achieving the goal. Pay attention to
	注意


	the names of the available skills and to the previous skills
	可用技能的名称以及之前的技能


	already executed, if any. You should also pay more attention to
	已执行的（如有）。您还应更加注意


	the following action rules:
	以下操作规则：


---



---



	1. You should output actions in Python code format and specify any
	1. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. If the function has
	执行该操作所需的参数。如果函数具有


	parameters, you should also include their names and decide their
	参数时，您还应包括它们的名称并确定它们的


	values, like "move_right(duration=1)". If it does not have a
	值，比如 "move_right(duration=1)"。如果它没有


	parameter, just output the action, like "open_map()".
	参数，只需输出动作，如“open_map()”。


	2. You can only output at most two actions in the output.
	2. 你最多只能输出两个操作。


	3. In the screenshots, the blue band represents the left side and
	3. 在截图中，蓝色带表示左侧，且


	the yellow band represents the right side. Please ignore character
	黄色带表示右侧。请忽略字符


	's facing direction and output the action in an absolute direction
	面向方向并以绝对方向输出动作


	like right and left.
	像左右一样。


	4. If you want to interact with the objects in the toolbar, you
	4. 如果你想与工具栏中的对象进行交互，


	need to make sure that the target object is already selected. You
	需要确保目标对象已被选中。你


	need to use select_tool() to select them before executing use_tool
	需要先使用select_tool()选择它们，然后才能执行use_tool


	() or do_action().
	() 或 do_action()。


	5. If you want to plant a seed or harvest a mature crop, please
	5. 如果你想种下种子或收获成熟的作物，请


	use do_action() instead of use_tool(). If you want to use tools,
	使用 do_action() 而不是 use_tool()。如果你想使用工具，


	like axe, hoe, watering can, pickaxe and scythe, please use
	比如斧头、锄头、水壶、镐和镰刀，请使用


	use_tool().
	use_tool()。


	6. If upon self-reflection you think the last action was
	6. 如果经过自我反思你认为上一个动作在当前位置不可用，


	unavailable at the current place, you MUST move to another place.
	你必须移动到另一个地方。


	Please do not try to execute the same action again.
	请不要尝试再次执行相同的动作。


	7. If you want to get out of the house, just use the skill
	7. 如果你想离开房子，只需使用技能


	get_out_of_house(). You MUST NOT output any movement action behind
	get_out_of_house()。你绝对不能在此技能后输出任何移动动作。


	this skill. And if the last executed action already contains this
	如果上一个执行的动作已经包含此技能，当前步骤不要再次执行该技能。


	skill, do not execute this skill for the current step again.
	


	8. If upon self-reflection you think you were blocked, you MUST
	8. 如果经过自我反思你认为被阻挡了，必须


	change the direction of moving, so that you can pass obstacles.
	改变移动方向，以便绕过障碍物。


	9. You MUST NOT repeat the previous action again if you think the
	9. 如果你认为上一个动作失败，绝对不能重复执行该动作。


	previous action fails.
	


	10. Your action should strictly follow the analysis in the
	10. 你的行动应严格遵循推理中的分析


	reasoning. Do not output any additional action not mentioned in
	。不要执行推理中未提及的任何额外操作


	the reasoning.
	。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且不应输出评论或其他信息


	not output comments or other information.
	。


Reasoning :
推理：


1. ...



2. ...



3. ...



Actions:
操作：


44 CPython
44 CPython


	action ( ${args1} = x,{args2} = y$ )
	操作 ( ${args1} = x,{args2} = y$ )


ccc
ccc


---



Prompt 14: Stardew: Information Gathering Farm Clearup prompt.
提示14：Stardew（星露谷物语）：信息收集农场清理提示


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是集成在PC版《星露谷物语》中的一个有用的AI助手


	on the PC, equipped to handle a wide range of tasks in the game.
	，能够处理游戏中的各种任务


	Your advanced capabilities enable you to process and interpret
	。你具备先进的能力，能够处理和解读


	gameplay screenshots and other relevant information.
	游戏截图及其他相关信息


<\$image_introduction\$>



Current task:
当前任务：


<\$task_description\$>



Description: Please analyze and describe the screenshot image in a
描述：请分析并描述截图图像中的内容


	grid-by-grid format and then provide an overall image description.
	按网格格式逐格描述，然后提供整体图像描述。


	Pay attention to anything related to the task. The image is
	注意与任务相关的任何内容。图像是


	divided into a 3x5 grid, each cell having its own coordinates. For
	<divided into a 3x5 grid, each cell having its own coordinates. For</text>被翻译为：划分为3x5的网格，每个单元格都有自己的坐标。对于


	each grid cell, describe the contents in detail, focusing on any
	每个网格单元，详细描述内容，重点关注任何


	critical icons, or objects present in that particular segment. If
	关键图标，或该特定片段中出现的对象。如果


	there are specific features such as characters or text, mention
	有特定的特征，如字符或文本，提及


	these as well. After completing the description for one cell,
	这些也是。在完成对一个单元格的描述后，


	proceed to the next, for example, 'In grid (1,1), [description].
	继续到下一个，例如，“在网格（1,1）中，[描述]。”


---



---



	In grid $\left( {1,2}\right)$ ,[description]. ${}^{\prime }$ and so on until the entire image is
	在网格$\left( {1,2}\right)$，[描述]。${}^{\prime }$，依此类推，直到整个图像完成


	covered.
	覆盖。


Date_time: The date and time information in the game are shown on the
日期时间：游戏中的日期和时间信息显示在


	upper-right of the screenshot, in grid (1, 5). An example of the
	截图的右上角，位于网格(1, 5)中。一个示例


	date and time information is "Wed 10, 5:10 pm".
	日期和时间信息是“周三10号，下午5:10”。


Energy: The current energy remains for the character doing actions.
能量：当前能量保持不变，适用于执行动作的角色。


	The energy bar is shown on the bottom-right of the screenshot, in
	能量条显示在截图的右下角，位于


	grid (3, 5). The full energy is 270. An example of the energy
	网格 (3, 5)。总能量为270。能量的一个示例


	information is " 150/270".
	信息为“150/270”。


Weather: The current weather information in the game, the weather is
天气：游戏中的当前天气信息，天气为


	one from "Sunny", "Rainy", "Windy", "Snowy", "Stormy", "Festival",
	“晴朗”、“雨天”、“有风”、“下雪”、“暴风雨”、“节日”、


	"Wedding", and "null". If none of them applies, only output "null
	“婚礼”，或“无”。如果都不符合，则仅输出“无”。


	".



Dialog: If there are some dialogs shown in the screenshot, extract the
对话：如果截图中显示有对话，提取


	text of the conversation, like "Shopkeeper: What do you want to
	对话文本，如“店主：你想买什么？”，否则仅输出“无”。


	buy?", otherwise, only output "null".
	


Other: Other information that does not belong to the above categories.
其他：不属于上述类别的其他信息。


	If none of them applies, only output "null".
	如果都不符合，则仅输出“无”。


You should only respond in the format described below and not output
你应仅以以下描述的格式回复，不要输出


	comments or other information.
	评论或其他信息。


Description:
描述：


In grid $\left( {1,1}\right)$ , ...
在网格 $\left( {1,1}\right)$ ，...


In grid $\left( {1,2}\right)$ , ...
在网格 $\left( {1,2}\right)$ ，...


...



In grid $\left( {3,5}\right)$ , ...
在网格 $\left( {3,5}\right)$ ，...


Overall, the image shows...
总体来看，图像显示了...


Date_time:
日期时间：


Date and time information
日期和时间信息


Energy:
能量：


The number of energy remains showing in the energy bar
能量条中显示的能量数值


Weather :
天气：


Weather information
天气信息


Dialog :
对话：


Dialog text
对话文本


Other:
其他：


Other information is ...
其他信息是...


---



Prompt 15: Stardew: Self-Reflection Farm Clearup prompt.
提示15：星露谷物语（Stardew）：自我反思农场清理提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是集成在“星露谷物语”（Stardew Valley）中的一个有用的AI助手


	on the PC, equipped to handle a wide range of tasks in the game.
	运行于PC平台，能够处理游戏中的各种任务。


	Your advanced capabilities enable you to process and interpret
	你具备先进的能力，能够处理和解读


	gameplay screenshots and other relevant information. Your task is
	游戏截图及其他相关信息。你的任务是


	to examine these inputs, interpret the in-game context, and
	检查这些输入，解读游戏内的上下文，


	determine whether the executed action takes effect.
	并确定所执行的动作是否生效。


Target task:
目标任务：


<\$task_description\$>



Current subtask for completing the target task:
完成目标任务的当前子任务：


<\$subtask_description\$>



The reasoning for proposing the current subtask:
提出当前子任务的推理依据：


<\$subtask_reasoning\$>



Last executed action for completing the subtask:
完成子任务的上一次执行动作：


<\$previous_action\$>



Reasoning for the last action:
上一次动作的推理依据：


---



---



<\$previous_reasoning\$>



Current date and time:
当前日期和时间：


<\$date_time\$>



Previous toolbar information:
之前的工具栏信息：


<\$previous_toolbar_information\$>



Current toolbar information:
当前的工具栏信息：


<\$toolbar_information\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



<\$image_introduction\$>



Reasoning: You need to answer the following questions step by step to
推理：你需要逐步回答以下问题，


	get some reasoning based on the last action and sequential frames
	基于上一次动作和角色执行该动作时的连续帧，


	of the character during the execution of the last action.
	进行一些推理。


1. What is the executed action? Please answer this question not based
1. 执行的动作是什么？请不要基于连续帧回答此问题。


	on the sequential frames.
	


2. Was the executed action successful? Give reasons. You should refer
2. 执行的动作成功了吗？请给出理由。你应参考


	to the following rules:
	以下规则：


- If the action involves moving forward, it is considered unsuccessful
- 如果动作涉及向前移动，只有当角色的位置在连续帧中保持不变时，才视为失败，


	only when the character's position remains unchanged across
	无论背景元素和其他人物如何。


	sequential frames, regardless of background elements and other
	


	people.
	


- If you are not ${100}\%$ sure that the action fails,regard it as success
- 如果你不${100}\%$确定动作失败，则视为成功。


3. If the last action is not executed successfully, what is the most
3. 如果最后一个动作未成功执行，最可能的原因是什么？你应只给出一个原因，并参考


	probable cause? You should give only one cause and refer to the
	以下规则：


	following rules:
	


- The reasoning for the last action could be wrong.
- 最后一个动作的推理可能是错误的。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是该动作在当前位置不可用，那么你应移动


		action was unavailable at the current place, then you should move
			到新的位置。


		to a new place.
		


- If it is a movement action, the most probable cause was that you
- 如果是移动动作，最可能的原因是你被可见或不可见的障碍物阻挡。


	were blocked by seen or unseen obstacles.
	


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


4. Is the subtask completed? Give your reasons. If you want to make
4. 子任务完成了吗？请说明理由。如果需要确认，视为成功。


	any confirmation, regard it as a success.
	任何确认，都视为成功。


5. Is the target task completed? Give your reasons.
5. 目标任务完成了吗？请说明理由。


6. Do you think the subtask is reasonable? Give your reasons.
6. 你认为子任务合理吗？请说明理由。


You should only respond in the format as described below.
你应仅以以下描述的格式回复。


Reasoning:
推理：


1. ...



2. ...



3. ...



...



---



Prompt 16: Stardew: Task Inference Farm Clearup prompt.
提示16：星露谷物语（Stardew Valley）：任务推断农场清理提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是集成于PC版《星露谷物语》中的有用AI助手，


	on the PC, equipped to handle a wide range of tasks in the game.
	能够处理游戏中的各种任务。


	You will also be given a summary of the history that happened
	你还将获得最后一张截图之前发生的历史摘要。


	before the last screenshot. You should assist in summarizing the
	你应协助总结事件以便未来决策，


	events for future decision-making and also propose a new subtask,
	并提出一个新的子任务，


	which is the most suitable subtask for the current situation,
	这是当前情况下最合适的子任务，


	given the target task.
	基于目标任务。


Here is some helpful information to help you do the summarization and
这里有一些有助于你进行总结和


	propose the subtask.
	提出子任务。


Current task:
当前任务：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出子任务的先前推理：


<\$subtask_reasoning\$>



<\$image_introduction\$>



Current toolbar information:
当前工具栏信息：


<\$toolbar_information\$>



Last executed action:
上一次执行的操作：


<\$previous_action\$>



Decision-making reasoning for the last executed action:
上一次执行操作的决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
上一次执行操作的自我反思：


<\$self_reflection_reasoning\$>



The following is the summary of history that happened before the last
以下是上一次之前发生的历史总结


	screenshot :
	截图：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历，


	especially the last step according to the decision-making
	特别是根据决策推理的最后一步


	reasoning and self-reflection reasoning for the last executed
	和上一次执行操作的自我反思推理。


	action. The summarization needs to be precise, concrete and highly
	总结需要准确、具体，且与任务高度相关，


	related to the task and follow the rules below.
	并遵循以下规则。


1. Summarize the tasks from the history and the current task. What is
1. 总结历史中的任务和当前任务。内容应为


	the current progress of the task? For example, to harvest a seed,
	当前任务的进展如何？例如，收获种子时，


	you need to water the seed for 4 days. And you have already
	你需要给种子浇水4天。你已经浇了


	planted the seed and watered it for two days.
	种下种子并浇水两天。


2. Record the successful actions and organize them into events day by
2. 记录成功的操作并按天将其组织成事件


	day.
	天。


3. Do not forget the information and key events in the previous days.
3. 不要忘记前几天的信息和关键事件。


4. If you are watering a seed. Record how many times you have watered
4. 如果你正在给种子浇水，记录浇水的次数


	and calculate how many days you have to water before you can
	并计算在你可以之前需要浇水多少天


	harvest according to the toolbar information provided above.
	根据上述工具栏信息进行收割。


Here is an example to follow:
以下是一个示例：


On Thu.4, I dig the dirt with the toe and then plant the parsnip seed
在星期四，我用脚尖挖土，然后种下欧防风种子


	and water the seed. The seed has been watered once. It still needs
	并浇水。种子已经浇过一次水了，仍然需要


	to be watered another three times to harvest. On Fri.5, I watered
	还需浇水三次才能收获。5号星期五，我浇了水


	the seed again. The seed has been watered twice. It still needs
	再次播种。种子已经浇了两次水，仍然需要


	to be watered twice to harvest. Today, Sat.6, I just need to get
	需浇水两次才能收获。今天，星期六6号，我只需去取


	out of home and watered the seed again.
	走出家门，又给种子浇了水。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task and be
	应该直截了当，有助于目标任务，并且是


	most suitable for the current situation, which should be completed
	最适合当前情况，应当完成


	within a few actions. You should respond to me with:
	在几步操作内。你应该回复我：


1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应该逐步分析。


2. What is the current progress of the target task according to the
2. 根据当前情况，目标任务的进展如何


	analysis in step 1? Please do not make any assumptions if they are
	步骤1中的分析？如果有，请不要做任何假设


	not mentioned in the above information. You should assume that
	上述信息中未提及。您应当假设


	you are doing the task from scratch.
	你正在从头开始完成这项任务。


3. What is the previous subtask? Does the previous subtask finish? Or
3. 上一个子任务是什么？上一个子任务完成了吗？还是


	is it improper for the current situation? Then select a new one,
	当前情况不合适吗？那就选择一个新的吧，


	otherwise you should reuse the last subtask.
	否则你应该重用最后一个子任务。


4. If you want to propose a new subtask, give reasons why it is more
4. 如果您想提出一个新的子任务，请说明其更优的理由


	feasible for the current situation.
	适合当前情况。


---



---



5. The proposed subtask needs to be precise and concrete within one
5. 所提出的子任务需要在一个范围内明确且具体


	sentence. It should not be related to any skills.
	句子。它不应与任何技能相关。


6. The seed only needs to be watered once.
6. 种子只需浇水一次。


7. Do not mention any grid information in the subtask description.
7. 子任务描述中不要提及任何格子信息。


8. Do not check the growth status of the crop.
8. 不要检查作物的生长状态。


9. The seeds only need to be watered ONCE every day. If you have
9. 种子每天只需浇水一次。如果你已经


	already watered the seed today, you should return home and go to
	今天浇过水了，你应该回家休息，


	sleep, waiting for the next day.
	等待第二天。


You should only respond in the format described below, and you should
你应仅以下面描述的格式回复，且


	not output comments or other information.
	不要输出评论或其他信息。


History_summary:
历史摘要：


The summary is...
摘要是……


Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask:
子任务：


The current subtask is
当前子任务是


---



Prompt 17: Stardew: Action Planning Farm Clearup prompt.
提示17：星露谷物语（Stardew）：行动规划农场清理提示。


---



You are a helpful AI assistant integrated with 'Stardew Valley' on the
你是一个集成在“星露谷物语”（Stardew Valley）中的有用AI助手，


	PC, equipped to handle various tasks in the game. Your advanced
	配备了处理游戏中各种任务的个人电脑。您的先进


	capabilities enable you to process and interpret gameplay
	功能使您能够处理和解读游戏玩法


	screenshots and other relevant information. By analyzing these
	截图及其他相关信息。通过分析这些


	inputs, you gain a comprehensive understanding of the current
	<inputs, you gain a comprehensive understanding of the current> 输入，您可以全面了解当前情况


	context and situation within the game. Utilizing this insight, you
	<context>游戏中的背景和情境。利用这一洞察，您</context>


	are tasked with identifying the most suitable in-game action to
	负责识别最合适的游戏内动作以


	take next, given the current task. You control the game character
	根据当前任务，采取下一步行动。你控制游戏角色


	and can execute actions from the available action set. Upon
	并且可以从可用的动作集中执行动作。接着


	evaluating the provided information, your role is to articulate
	评估所提供的信息，您的职责是阐述


	the precise action you would deploy, considering the game's
	考虑到游戏的具体情况，你将采取的精确行动


	present circumstances, and specify any necessary parameters for
	当前情况，并指定任何必要的参数以便


	implementing that action.
	执行该操作。


Here is some helpful information to help you make the decision.
这里有一些有助于您做出决定的有用信息。


Current subtask:
当前子任务：


<\$subtask_description\$>



Current date and time:
当前日期和时间：


<\$date_time\$>



Toolbar information:
工具栏信息：


<\$toolbar_information\$>



Last executed action:
上次执行的操作：


<\$previous_action\$>



Reasoning for the last action:
上一次操作的推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



Valid action set in Python format to select the next action:
以Python格式表示的有效动作集，用于选择下一步动作：


<\$skill_library\$>



<\$image_introduction\$>



---



---



Based on the above information, analyze the current situation and
基于以上信息，分析当前状况并


	provide the reasoning for what you should do for the next step to
	提供你下一步应该做什么的理由


	complete the task. Then, you should output the exact action you
	完成任务。然后，你应输出确切的操作


	want to execute in the game. You should respond to me with:
	想在游戏中执行。你应该回复我：


Reasoning: You should think step by step and provide detailed
推理：你应该逐步思考并提供详细的


	reasoning to determine the next action executed on the current
	推理以确定当前执行的下一步操作


		state of the task. You need to answer the following questions step
		任务的状态。您需要逐步回答以下问题


		by step. You MUST NOT miss question 3 and question 11:
		一步步来。你绝对不能漏掉第3题和第11题：


		1. Analyze the information in the tool bar. Does it contain all
		1. 分析工具栏中的信息。它是否包含所有内容


		the necessary items for completing the task?
		完成任务所需的物品？


	2. Where is the character in the screenshot of the current step?
	2. 当前步骤截图中的角色在哪里？


		Where is the house in the screenshot of the current step? The blue
		当前步骤截图中的房子在哪里？蓝色的


		band represents the left side and the yellow band represents the
		红色带表示左侧，黄色带表示


		right side. Where is the character compared with the house? (Is he
		右侧。这个角色相对于房子在哪里？（他是否


		at the left edge or right edge of the house?)
		在房子的左边缘还是右边缘？)


		3. If your task is to clear obstacles, you MUST NOT miss any
		3. 如果你的任务是清除障碍，绝对不能遗漏任何一个


		question in this step:
		此步骤中的问题：


		- The blue band represents the left side and the yellow band
		- 蓝色带表示左侧，黄色带


	represents the right side. Where is the character according to the
	表示右侧。根据


		house? (Is he at the left edge or right edge of the house?)
		房子？（他是在房子的左边缘还是右边缘？）


			- Which grids do the house span in the screenshot? (You MUST
			- 截图中房屋跨越了哪些网格？（您必须


	answer one or two grid position. The house does not span over two
	回答一个或两个格子位置。房屋不会跨越两个格子


	grids.) Then, what are the two grids below and near the house? (e.
	网格。）那么，下面靠近房子的两个网格是什么？（例如。


	g. If the house spans from grid (1,3) to (1,4), the CLEARING AREA
	g. 如果房屋跨越网格(1,3)到(1,4)，则清理区域


	of character should be grid $\left( {2,3}\right)$ and $\left( {2,4}\right)$ . If the house spans
	字符的网格应为$\left( {2,3}\right)$和$\left( {2,4}\right)$。如果房屋跨越


	grid $\left( {1,3}\right)$ ,the CLEARING AREA of character should be grid $\left( {2,2}\right)$
	网格$\left( {1,3}\right)$，角色的清理区域应为网格$\left( {2,2}\right)$


	and $\left( {2,3}\right)$ . You MUST remember this CLEARING AREA precisely IN THIS
	并且 $\left( {2,3}\right)$ 。你必须准确记住此清理区域


	ROUND.) You should focus on obstacles in them. You MUST NOT move
	回合。）你应该关注其中的障碍。你绝对不能移动


	the character out of these two obstacle grids.
	从这两个障碍网格中移除该角色。


			- In order to clear all obstacles below the house and make the
			- - 为了清除房屋下方的所有障碍物并使


	place suitable for cultivating, you should not target for a
	适合耕作的地方，不应以此为目标


	specific obstacle. Instead, you should try your best to move the
	具体障碍。相反，你应该尽力移动


	character to pass every patch in the CLEARING AREA. You should
	角色需通过清理区域的每个补丁。你应该


	clear every obstacle that blocks the character in this process.
	清除阻碍角色前进的所有障碍。


			- Every time after you move the character down (or up when being
			- 每次你将角色向下移动后（或在被


		too far from the house), you should move the character right or
		距离房子太远时，你应该将角色向右移动或


	left (based on the character's position in the CLEARING AREA
	左侧（基于角色在清理区域的位置）


		compared with the house) to fully explore the CLEARING AREA of the
		相比房屋）充分开发该清理区域（CLEARING AREA）


		two grids determined above. You should clear all obstacles the
		上述确定的两个网格。你应该清除所有障碍物


		character meets in this process.
		角色在此过程中相遇。


			- Is the current row fully explored by the character? If so,
			- 当前行是否已被角色完全探索？如果是，


	your movement should be moving down. If there is an obstacle
	你的动作应该向下移动。如果有障碍物


	beneath the character, you should clear it first before moving the
	在字符下方，移动之前应先清除它


		character down.
		角色倒下。


			- You should not move too far from the house. You should not
			- 你不应该离房子太远。你不应该


	move the character down but should move him up instead if the
	向下移动角色，但如果是则应向上移动他


	house is not in the current screenshot.
	房子不在当前截图中。


			- What was the previous action? If the previous action contained
			- 之前的操作是什么？如果之前的操作包含


		use_tool(), you MUST NOT start with the same use_tool() action in
		use_tool()，你绝对不能以相同的 use_tool() 操作开始


		this round. (You can still use use_tool() by following a movement
		这一轮。（你仍然可以通过跟随一个动作来使用use_tool()）


		or select_tool()).)
		或 select_tool()).).


			- If the previous action was a movement, is the position of
			- - 如果前一个动作是移动，当前位置是否为


	character changed? If not, it is the most trustworthy evidence
	字符改变了吗？如果没有，那就是最可靠的证据


		that there is an obstacle in front of the character that can
		角色面前有一个障碍物，可能会


	interact with.
	互动。


			- If the character is blocked by an obstacle in front of him or
			- 如果角色前方被障碍物阻挡，或者


	if you think there is an obstacle in front of the character, what
	如果你认为角色面前有障碍物，怎么办


	type of obstacle is it? (Usually, weed and grass are green, stone
	这是什么类型的障碍？（通常，杂草和草是绿色的，石头


	is grey and branch is brown) What is the suitable tool for
	是灰色的，树枝是棕色的）适合的工具是什么


	clearing it and is the tool correctly selected?
	清除它，并且工具是否正确选择？


		4. What is the current selected tool? Do you want to use a tool,
		4. 当前选中的工具是什么？您想使用某个工具吗，


	such as axe, hoe, watering can, pickaxe and scythe? And is the
	比如斧头、锄头、洒水壶、镐和镰刀？还有


	character's current position a suitable place to use such a tool?
	角色当前的位置适合使用这种工具吗？


		Then you should use use_tool() instead of do_action().
		那么你应该使用 use_tool() 而不是 do_action()。


	5. Does the character already reach the target place?
	5. 角色已经到达目标地点了吗？


	6. What was the previous action? If the previous action was a
	6. 上一个动作是什么？如果上一个动作是


	movement, were you blocked?
	移动时，你被阻挡了吗？


	7. If your task is to harvest the plant, did you water the seed?
	7. 如果你的任务是收获植物，你给种子浇水了吗？


	The seeds only need to be watered ONCE every day. If you have
	种子每天只需浇水一次。如果你有


	already watered the seed today, you should return home and go to
	今天已经给种子浇过水了，你应该回家去休息


	sleep, waiting for the next day.
	睡觉，等待新的一天。


	8. This is the most critical question. Based on the action rules
	8. 这是最关键的问题。基于行动规则


	and self-reflection, what should be the most suitable action in
	以及自我反思，什么才是最合适的行动


	the valid action set for the next step? You should analyze the
	下一步的有效操作集是什么？你应该分析一下


	effects of the action step by step. You should not repeat the
	逐步观察行动的效果。你不应重复


	previous action again except for the movement action. Do not try
	除了移动动作外，之前的动作再次执行。不要尝试


	to verify whether the previous action succeeded.
	验证先前操作是否成功。


	9. Is the selected action the same as the last executed action? If
	9. 选定的动作是否与上次执行的动作相同？如果


	yes, regenerate the action and give the reasons.
	是的，重新生成动作并给出理由。


	10. Do all the selected actions exist in the valid action set? If
	10. 所有选定的动作都存在于有效动作集合中吗？如果


	no, regenerate the action and give the reasons.
	不，重新生成动作并给出理由。


	11. Analyze whether the selected action meets the requirements of
	11. 分析所选行动是否符合要求


	the Actions below one by one. Does the generated action meet all
	下面逐一执行这些操作。生成的操作是否满足所有


	the requirements? If not, regenerate the action and give the
	要求吗？如果没有，请重新生成操作并提供


	reasons.
	原因。


Actions: The requirements that the generated action needs to follow.
操作：生成的操作需要遵循的要求。


	The best action, or short sequence of actions without gaps, to
	最佳的动作，或连续无间断的短动作序列，以


	execute next to progress in achieving the goal. Pay attention to
	执行下一步以推进目标的实现。注意


	the names of the available skills and to the previous skills
	可用技能的名称及之前的技能


	already executed, if any. You should also pay more attention to
	已执行的（如有）。您还应更加注意


	the following action rules:
	以下操作规则：


	1. You should output actions in Python code format and specify any
	1. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. If the function has
	执行该操作所需的参数。如果函数具有


	parameters, you should also include their names and decide their
	参数时，您还应包括它们的名称并确定它们的


	values, like "move_right (duration=1)". If it does not have a
	值，例如 "move_right (duration=1)"。如果没有


	parameter, just output the action, like "open_map()".
	参数，只需输出动作，如“open_map()”。


	2. You can only output at most two actions in the output.
	2. 你最多只能输出两个操作。


	3. In the screenshots, the blue band represents the left side and
	3. 在截图中，蓝色带表示左侧，且


	the yellow band represents the right side. Please ignore character
	黄色带表示右侧。请忽略字符


	's facing direction and output the action in an absolute direction
	面向方向并以绝对方向输出动作


	like right and left.
	像左右一样。


	4. If you want to interact with the objects in the toolbar, you
	4. 如果您想与工具栏中的对象进行交互，您


	need to make sure that the target object is already selected. You
	需要确保目标对象已被选中。你


	need to use select_tool() to select them before executing use_tool
	需要先使用select_tool()选择它们，然后才能执行use_tool


	() or do_action().
	() 或 do_action()。


	5. If you want to plant a seed or harvest a mature crop, please
	5. 如果您想种下种子或收获成熟的作物，请


	use do_action() instead of use_tool(). If you want to use tool,
	使用 do_action() 替代 use_tool()。如果你想使用工具，


	like axe, hoe, watering can, pickaxe and scythe, please use
	像斧头、锄头、水壶、镐和镰刀，请使用


	use_tool().
	use_tool()。


	6. If upon self-reflection you think the last action was
	6. 如果经过自我反思你认为上一个动作是


	unavailable at the current place, you MUST move to another place.
	当前位置不可用，您必须移动到其他地方。


	Please do not try to execute the same action again.
	请不要重复执行相同的操作。


	7. If you want to get out of the house, just use the skill
	7. 如果你想出门，就用这个技能


	get_out_of_house(). You MUST NOT output any movement action behind
	离开房子(). 你绝对不能在后面输出任何移动动作


	this skill. And if the last executed action already contains this
	这项技能。如果最后执行的动作已经包含了这个


	skill, do not execute this skill for the current step again.
	技能，不要在当前步骤再次执行此技能。


	8. If upon self-reflection you think you were blocked, you MUST
	8. 如果经过自我反思你认为自己被阻止了，你必须


	change the direction of moving, so that you can pass obstacles.
	改变移动方向，以便你能通过障碍物。


	9. You MUST NOT repeat the previous action again if you think the
	9. 如果你认为


	previous action fails.
	先前的操作失败。


	10. Your action should strictly follow the analysis in the
	10. 你的操作应严格遵循分析结果


	reasoning. Do not output any additional action not mentioned in
	推理。不要输出未提及的任何额外操作


	the reasoning.
	推理过程。


	11. If you want to clear obstacles, you should follow the order of
	11. 如果你想清除障碍，应按照以下顺序进行


	thinking as follows:
	思考如下：


		- You MUST NOT move the character to the house.
		- 你绝对不能把角色移动到房子里。


		- In order to clear all obstacles below the house and make the
		- - 为了清除房屋下方的所有障碍物并使


	place suitable for cultivating, you should not target for a
	适合耕作的地方，不应盲目追求


---



---



	specific obstacle. Instead, you should try your best to move the
	具体障碍。相反，你应该尽力移动


	character to pass every patch in the CLEARING AREA. You should
	角色需通过清理区域内的每个补丁。你应该


	clear every obstacle that blocks the character in this process.
	清除阻碍角色前进的所有障碍。


		- Every time after you move the character down (or up when
		- 每次你将角色向下移动后（或向上移动时


	being too far from the house), you should move the character right
	（离房子太远时），你应该向右移动角色


	or left (based on the character's position compared with the
	或向左（基于角色与


	house) to fully explore the CLEARING AREA. You should clear all
	房屋）以充分探索清理区域。你应该清理所有


	obstacles the character meets in this process.
	角色在此过程中遇到的障碍。


		- If you think the character has fully explored the current
		- - 如果你认为角色已经完全探索了当前


	row of the CLEARING AREA, you should move the character down. If
	在清理区域（CLEARING AREA）的一行时，你应该将角色向下移动。如果


	there is an obstacle beneath the character, you should clear it
	角色下面有一个障碍物，你应该清除它


	first before moving the character down.
	先向前移动角色，然后再向下移动。


		- You should not move too far from the house. You should not
		- 你不应该离房子太远。你不应该


	move the character down but should move hime up instead if the
	向下移动角色，但如果是，则应向上移动他


	house is not in the current screenshot.
	房屋不在当前截图中。


		- You can take larger steps of moving left or right by
		- 你可以通过


	adjusting the action's parameter. You MUST use a small parameter
	调整动作的参数。您必须使用一个较小的参数


	when doing move_down() to make sure the character only moves one
	在执行move_down()时，确保角色只移动一步


	patch down.
	修补完成。


		- If you think there is an obstacle in front of the character,
		- 如果你认为角色前方有障碍，


	you should determine its type. You should then select the
	你应该确定它的类型。然后你应该选择


	suitable tool by select_tool() and clear the obstacle by use_tool
	通过select_tool()选择合适的工具并使用use_tool清除障碍物


	().



		- You should always use_tool() after select_tool(). Do not
		- 你应始终在 select_tool() 之后使用 use_tool()。不要


	switch to another tool without using it.
	切换到另一个工具但不使用它。


		- If the previous action contained use_tool(), you MUST NOT
		- 如果前一个操作包含 use_tool()，则绝对不能


	start with the same use_tool() action in this round. (You can
	本轮继续使用相同的use_tool()操作。（你可以


	still use use_tool() by following a movement or select_tool().)
	仍然通过跟随移动或选择工具(select_tool())来使用use_tool()。


		- If the previous action contained use_tool(), you should
		- - 如果上一个动作包含 use_tool()，你应当


	determine whether the obstacle is cleared. If you are not sure
	判断障碍物是否已清除。如果不确定


	that the obstacle is cleared, you are encouraged to try different
	障碍物是否清除，建议你尝试通过 select_tool() 和 use_tool()


	tools by select_tool() and use_tool() before moving the character
	使用不同的工具，然后再移动角色


	to other positions.
	到其他位置。


		- If the previous action was a movement, you should determine
		- - 如果上一个动作是移动，你应当判断


	whether there is an obstacle IN FRONT OF the character. If so, you
	角色前方是否有障碍物。如果有，


	should select the suitable tool by select_tool() and clear it by
	你应当通过 select_tool() 选择合适的工具，并用


	use_tool().
	use_tool() 清除它。


		- If previous action contained use_tool(), you should move the
		- - 如果上一个动作包含 use_tool()，你应当将


	character to the same direction as before to test if the blocking
	角色向之前相同的方向移动，以测试阻挡的


	obstacle is cleared.
	障碍物是否已被清除。


		- If the blocking obstacle is not cleared, you should select a
		- - 如果阻挡障碍物未被清除，你应当选择


	different tool to clear it.
	不同的工具来清除它。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且


	not output comments or other information.
	不得输出评论或其他信息。


Reasoning :
推理：


1. ...



2. ...



3. ...



Actions:
操作：


```python
```python


	action (args1=x,args2=y)
	操作 (参数1=x, 参数2=y)


ccc
ccc


---



Prompt 18: Stardew: Information Gathering Shopping prompt.
提示18：星露谷物语（Stardew）：信息收集购物提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是一个集成在《星露谷物语》(Stardew Valley)中的智能助手


	on the PC, equipped to handle a wide range of tasks in the game.
	在电脑上，配备了处理游戏中各种任务的能力。


	Your advanced capabilities enable you to process and interpret
	您的高级能力使您能够处理和解读


	gameplay screenshots and other relevant information.
	游戏截图及其他相关信息。


<\$image_introduction\$>



Task overview:
任务概述：


---



---



<\$task_description\$>



Current subtask:
当前子任务：


<\$subtask_description\$>



Description: Please analyze and describe the screenshot image in a
描述：请分析并描述截图图像中的内容


	grid-by-grid format from left to right and top to bottom and then
	从左到右、从上到下逐格排列，然后


	provide an overall image description. Pay attention to anything
	提供整体图像描述。注意任何细节


	related to the current subtask. The image is divided into a $5 \times  3$
	与当前子任务相关。图像被划分为一个$5 \times  3$


	grid, each cell having its own coordinates. For each grid cell,
	网格，每个单元格都有自己的坐标。对于每个网格单元，


	describe the contents in detail, focusing on any critical icons,
	详细描述内容，重点关注任何关键图标，


	or objects present in that particular segment. If there are
	或该特定区域内存在的物体。


	specific features such as characters or text, mention these as
	如果有特定特征如角色或文字，也请一并提及。


	well. After completing the description for one cell, proceed to
	完成一个单元格的描述后，继续下一个，例如，“在网格(1,1)中，[描述]。在网格


	the next, for example, 'In grid (1,1), [description]. In grid
	(2,1)中，[描述]。”如此类推，直到覆盖整个图像。


	(2,1), [description].' and so on until the entire image is covered
	


Date_time: The date and time information in the game are shown on the
日期时间：游戏中的日期和时间信息显示在截图的右上角，位于网格(5,1)中。


	upper-right of the screenshot, in grid (5, 1). An example of the
	日期和时间信息的示例是“周三 10日，下午5:10”。


	date and time information is "Wed 10, 5:10 pm".
	


Energy: The current energy remains for the character doing actions.
能量：角色执行动作时的当前能量值。


	The energy bar is shown on the bottom-right of the screenshot, in
	能量条显示在截图的右下角，位于网格<b0></b0>中。


	grid $\left( {5,3}\right)$ . The full energy is 270 . An example of the energy
	满能量为270。能量信息的示例是“150/270”。


	information is "150/270".
	


Weather: The current weather information in the game, the weather is
天气：游戏中的当前天气信息，天气类型包括“晴天”、“雨天”、“有风”、“下雪”、“暴风雨”、“节日”，


	one from "Sunny", "Rainy", "Windy", "Snowy", "Stormy", "Festival",
	


	"Wedding", and "null". If none of them applies, only output "null
	“婚礼”，和“无”。如果都不适用，只输出“无”


	".



Dialog: If there are some dialogs shown in the screenshot, extract the
对话：如果截图中显示有对话，提取


	text of the conversation, like "Shopkeeper: What do you want to
	对话内容，如“店主：你想买什么？”


	buy?", otherwise, only output "null".
	，否则只输出“无”。


Other: Other information that does not belong to the above categories.
其他：不属于上述类别的其他信息。


	If none of them applies, only output "null".
	如果都不适用，只输出“无”。


You should only respond in the format described below and not output
你应仅以以下描述的格式回复，不要输出


	comments or other information.
	评论或其他信息。


Description:
描述：


In grid $\left( {1,1}\right)$ , ...In grid $\left( {2,1}\right)$ , ...In grid $\left( {3,1}\right)$ , ...In grid $\left( {5,3}\right)$ ,
在网格$\left( {1,1}\right)$中，...在网格$\left( {2,1}\right)$中，...在网格$\left( {3,1}\right)$中，...在网格$\left( {5,3}\right)$中，


	... Overall, the image shows...
	...整体来看，图像显示了...


Date_time:
日期时间：


Date and time information
日期和时间信息


Energy:
能量：


The number of energy remains showing in the energy bar
能量条中显示的剩余能量数值


Weather:
天气：


Weather information
天气信息


Dialog :
对话：


Dialog text
对话文本


Other:
其他：


Other information is ...
其他信息是……


---



Prompt 19: Stardew: Self-Reflection Shopping prompt.
提示19：星露谷物语（Stardew）：自我反思购物提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是集成在“星露谷物语”（Stardew Valley）中的一个有用的AI助手


	on the PC, equipped to handle a wide range of tasks in the game.
	运行于PC平台，能够处理游戏中的各种任务。


	Your advanced capabilities enable you to process and interpret
	你具备先进的能力，可以处理和解读


	gameplay screenshots and other relevant information. Your task is
	游戏截图及其他相关信息。你的任务是


	to examine these inputs, interpret the in-game context, and
	审查这些输入，解读游戏内的上下文，


	determine whether the executed action takes effect.
	并判断所执行的动作是否生效。


Target task:
目标任务：


<\$task_description\$>



Current subtask for completing the target task:
完成目标任务的当前子任务：


<\$subtask_description\$>



The reasoning for proposing the current subtask:
提出当前子任务的理由：


<\$subtask_reasoning\$>



Last executed action for completing the subtask:
完成子任务的最后执行动作：


<\$previous_action\$>



Reasoning for the last action:
上一个动作的推理：


<\$previous_reasoning\$>



Current Image description:
当前图像描述：


<\$image_description\$>



Toolbar information
工具栏信息


<\$toolbar_information\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



<\$image_introduction\$>



Reasoning: You need to answer the following questions step by step to
推理：你需要逐步回答以下问题以


	get some reasoning based on the last action and sequential frames
	基于上一个动作和连续帧对角色进行推理


	of the character during the execution of the last action.
	在执行上一个动作期间的表现。


1. Are the characters' positions in these frames identical?
1. 这些帧中角色的位置是否相同？


2. What is the executed action? Please answer this question not based
2. 执行的动作是什么？请不要基于


	on the sequential frames.
	连续帧来回答此问题。


3. Was the executed action successful? Give reasons. You should refer
3. 执行的动作是否成功？请给出理由。你应参考


	to the following rules:
	以下规则：


- Analyze by observing given sequential frames for detailed
- 通过观察给定的连续帧进行详细分析。


	information.
	信息。


- If the action involves moving forward, it is considered unsuccessful
- 如果动作涉及向前移动，只有当角色位置在


	only when the character's position remains unchanged across
	连续帧中保持不变时，才视为不成功。


	sequential frames, regardless of background elements and other
	连续帧，无论背景元素和其他


	people.
	人物。


- If you are not ${100}\%$ sure that the action fails,regard it as success
- 如果你不${100}\%$确定动作失败，则视为成功


4. If the last action is not executed successfully, what is the most
4. 如果最后一个动作未成功执行，最可能的原因是什么？


	probable cause? You should give only one cause and refer to the
	你应只给出一个原因，并遵循以下规则：


	following rules:
	


- The reasoning for the last action could be wrong.
- 最后一个动作的推理可能是错误的。


- If it is an interaction action such as buy_item or do_action, the
- 如果是交互动作，如buy_item（购买物品）或do_action（执行动作），


	most probable cause was that the action was unavailable at the
	最可能的原因是该动作在当前位置不可用，


	current place, then you should move to a new place.
	那么你应移动到新地点。


- If it is a movement action, the most probable cause was that you
- 如果是移动动作，最可能的原因是你被可见或不可见的障碍物阻挡。


	were blocked by seen or unseen obstacles.
	


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，应根据报告分析原因。


5. If the current subtask involves determining whether to enter the
5. 如果当前子任务涉及判断是否进入商店，


	store, you need to compare the scene in the current screenshot
	你需要将当前截图中的场景与记忆中的截图场景进行比较，


	with the scene in the screenshot from Memory to determine whether
	以确定是否


	the character has entered the store, if not, then the task of
	角色已进入商店，如果没有，则任务为


	entering the store is not complete.
	进入商店尚未完成。


6. Is the subtask completed? Give your reasons. If you want to make
6. 子任务完成了吗？请说明理由。如果你想要继续


	any confirmation, regard it as a success. You should observe given
	任何确认都视为成功。你应当遵守所给的


	sequential frames, do not rely on the text information.
	连续帧，不依赖文本信息。


7. Is the target task completed? Give your reasons.
7. 目标任务完成了吗？请说明理由。


8. If the current subtask involves purchase something, you should
8. 如果当前子任务涉及购买某物，你应当


	check the toolbar or purchase menu to see if the purchase was
	检查工具栏或购买菜单以确认购买是否成功


	successful. Do not overbuy or miss the purchase.
	成功。不要过度购买或错过购买时机。


9. Do you think the subtask is reasonable? Give your reasons.
9. 你认为这个子任务合理吗？请说明理由。


You should only respond in the format as described below.
您应仅按照以下描述的格式回复。


Reasoning:
推理：


	1. ...



2. ...



	3. ...



				...



---



Prompt 20: Stardew: Task Inference Shopping prompt.
提示20：星露谷物语（Stardew）：任务推断购物提示。


---



Assume you are a helpful AI assistant integrated with 'Stardew Valley'
假设你是一个集成在《星露谷物语》(Stardew Valley)中的智能助手


	on the PC, equipped to handle a wide range of tasks in the game.
	在电脑上，配备了能够处理游戏中各种任务的功能。


	You will also be given a summary of the history that happened
	你还将获得一份发生过的历史摘要


	before the last screenshot. You should assist in summarizing the
	在最后一个截图之前。你应协助总结


	events for future decision-making and also propose a new subtask,
	事件以便未来决策，并提出一个新的子任务，


	which is the most suitable subtask for the current situation,
	即针对当前情况最合适的子任务，


	given the target task.
	基于目标任务。


Here is some helpful information to help you do the summarization and
以下是一些有助于你进行总结和


	propose the subtask.
	提出子任务的有用信息。


Current task:
当前任务：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出该子任务的先前推理：


<\$subtask_reasoning\$>



<\$image_introduction\$>



Current Image description:
当前图像描述：


<\$image_description\$>



Last executed action:
最后执行的动作：


<\$previous_action\$>



Decision-making reasoning for the last executed action:
对最后执行动作的决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对最后执行动作的自我反思：


<\$self_reflection_reasoning\$>



The following is the summary of history that happened before the last
以下是发生在最后一个


	screenshot:
	截图之前的历史总结：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去经历中发生的事情，


	especially the last step according to the decision-making
	尤其是根据决策的最后一步


	reasoning and self-reflection reasoning for the last executed
	对最后执行的推理和自我反思推理


	action. The summarization needs to be precise, concrete and highly
	行动。总结需要精准、具体且高度


	related to the task and follow the rules below.
	与任务相关并遵守以下规则。


1. Summarize the tasks from the history and the current task. What is
1. 总结历史任务和当前任务。内容是什么


	the current progress of the task? For example, to harvest a seed,
	任务的当前进展？例如，收获种子时，


	you need to water the seed for 4 days. And you have already
	你需要给种子浇水4天。你已经浇了


	planted the seed and watered it for two days.
	种下种子并浇水两天。


2. Record the successful actions and organize them into events day by
2. 记录成功的操作并将其按天整理成事件


	day.
	天。


3. Do not forget the information and key events in the previous days.
3. 不要忘记前几天的信息和关键事件。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task and be
	应该是直接明了的，有助于目标任务，并且


	most suitable for the current situation, which should be completed
	最适合当前情况，应当完成


	within a few actions. You should respond to me with:
	在几步操作内。你应该回复我：


---



---



1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应该逐步分析。


2. What is the current progress of the target task according to the
2. 根据当前情况，目标任务的进展如何


	analysis in step 1? Please do not make any assumptions if they are
	步骤1中的分析？如果有，请不要做任何假设


	not mentioned in the above information. You should assume that
	未在上述信息中提及。您应假设


	you are doing the task from scratch.
	你正在从头开始完成这项任务。


3. What is the previous subtask? Does the previous subtask finish? If
3. 上一个子任务是什么？上一个子任务完成了吗？如果


	so, give evidence that the task was completed. Or is it improper
	那么，提供任务已完成的证据。还是说这样做不合适？


	for the current situation? Then select a new one, otherwise you
	当前情况？那么请选择一个新的，否则你


	should reuse the last subtask.
	应重用最后一个子任务。


4. If you want to propose a new subtask, give reasons why it is more
4. 如果您想提出一个新的子任务，请说明其更为合理的原因


	feasible for the current situation.
	适合当前情况。


5. The proposed subtask needs to be precise and concrete within one
5. 所提出的子任务需要在一个范围内明确且具体


	sentence. It should not be related to any skills.
	句子。它不应与任何技能相关。


6. Do not mention any grid information in the subtask description.
6. 不要在子任务描述中提及任何网格信息。


7. If the character does not reach the target place, you should
7. 如果角色未能到达目标地点，您应当


	propose a movement task to make him closer to the target.
	提出一个移动任务，使他更接近目标。


8. If you want to purchase items, then you should move up to stand in
8. 如果你想购买物品，应该走到


	front of the shopkeeper's counter, move sligntly to align with the
	店主柜台前，稍微移动以对齐


	green counter and buy items. After purchasing, you can move down
	绿色柜台，然后购买物品。购买后，你可以向下


	to the exit and leave store.
	走到出口离开商店。


9. If you want to leave town, you should move along gray cobblestone
9. 如果你想离开小镇，应沿着商店和诊所左侧的灰色鹅卵石


	road to the left of the store and the clinic.
	路前进。


You should only respond in the format described below, and you should
你只应按照下面描述的格式回复，且


	not output comments or other information.
	不要输出评论或其他信息。


History_summary:
历史摘要：


The summary is...
摘要是……


Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask:
子任务：


The current subtask is
当前子任务是


---



Prompt 21: Stardew: Action Planning Shopping prompt.
提示21：星露谷(Stardew)：行动规划购物提示。


---



You are a helpful AI assistant integrated with 'Stardew Valley' on the
你是集成在PC版《星露谷物语》(Stardew Valley)中的一个有用的AI助手，


	PC, equipped to handle various tasks in the game. Your advanced
	能够处理游戏中的各种任务。你的高级


	capabilities enable you to process and interpret gameplay
	功能使您能够处理和解读游戏截图


	screenshots and other relevant information. By analyzing these
	及其他相关信息。通过分析这些


	inputs, you gain a comprehensive understanding of the current
	输入，您可以全面了解游戏中的当前


	context and situation within the game. Utilizing this insight, you
	背景和情境。利用这些洞察，您


	are tasked with identifying the most suitable in-game action to
	的任务是根据当前任务确定最合适的游戏内操作


	take next, given the current task. You control the game character
	。您控制游戏角色


	and can execute actions from the available action set. Upon
	，并可以从可用动作集中执行操作。评估


	evaluating the provided information, your role is to articulate
	所提供的信息后，您的角色是明确


	the precise action you would deploy, considering the game's
	您将采取的具体行动，考虑游戏的


	present circumstances, and specify any necessary parameters for
	当前状况，并指定执行该行动所需的任何参数


	implementing that action.
	。


Here is some helpful information to help you make the decision.
以下是一些有助于您做出决策的有用信息。


Current subtask:
当前子任务：


<\$subtask_description\$>



Image description:
图像描述：


<\$image_description\$>



Last executed action:
上一次执行的动作：


<\$previous_action\$>



Reasoning for the last action:
上一次动作的理由：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


---



---



<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



Valid action set in Python format to select the next action:
以Python格式表示的有效动作集，用于选择下一步动作：


<\$skill_library\$>



Grid System Information:
网格系统信息：


1. Each grid has a coordinate $\left( {x,y}\right)$ . A larger $x$ means that the grid is
1. 每个网格都有一个坐标$\left( {x,y}\right)$。较大的$x$意味着该网格是


	on the more eastern (right) side, and a larger y means that the
	在更东侧（右侧），较大的y值意味着


	grid is on the more southern (down) side. For example, moving from
	网格位于较南侧（下方）。例如，从


	grid (1,3) to grid (1,1) requires move_up(duration=2) and moving
	从网格(1,3)移动到网格(1,1)需要执行向上移动（duration=2）并保持移动状态


	from grid (1,1) to grid (2,1) requires move_right(duration=1)
	从网格(1,1)移动到网格(2,1)需要向右移动（持续时间=1）


2. The larger the difference between the coordinates of the two grids,
2. 两个网格坐标之间的差异越大，


	the longer it takes to move. Moving from grid (2,5) to grid (2,3)
	移动所需时间越长。从网格(2,5)移动到网格(2,3)


	takes longer than moving from grid $\left( {2,3}\right)$ to grid $\left( {1,3}\right)$ .
	比从网格$\left( {2,3}\right)$移动到网格$\left( {1,3}\right)$花费更长时间。


<\$image_introduction\$>



Based on the above information, analyze the current situation and
基于以上信息，分析当前状况并


	provide the reasoning for what you should do for the next step to
	说明你下一步应该做什么的理由


	complete the task. Then, you should output the exact action you
	完成任务。然后，你应输出确切的操作


	want to execute in the game. You should respond to me with:
	想在游戏中执行。你应该回复我：


Reasoning: You should think step by step and provide detailed
推理：你应该逐步思考并提供详细的


	reasoning to determine the next action executed on the current
	推理以确定当前执行的下一步操作


	state of the task. You need to answer the following questions step
	任务状态。您需要逐步回答以下问题


	by step. You cannot miss the last question:
	逐步进行。你绝不能错过最后一个问题：


	1. Does the character already reach the target place? You must
	1. 角色已经到达目标地点了吗？你必须


	move close enough to the object to be in contact with it in order
	靠近物体直到接触为止


	to interact with it. Just in the same grid with the target is not
	与其互动。仅仅与目标处于同一网格并不足够


	enough.
	足够。


	2. Make use of the above image description, grid system
	2. 利用上述图像描述和网格系统


	information and current screenshot. Analyze whether the character
	信息和当前截图。分析该角色是否


	has reached the target place. You must move close enough to the
	已到达目标地点。你必须靠近该地点。


	object to be in contact with it in order to interact with it. Just
	必须与其接触才能与之互动。仅仅


	in the same grid with the target is not enough.
	仅与目标处于同一网格是不够的。


	3. What was the previous action? If the previous action was a
	3. 上一个动作是什么？如果上一个动作是


	movement, were you blocked?
	移动时，你被阻挡了吗？


	4. This is the most critical question. Based on the action rules
	4. 这是最关键的问题。基于行动规则


	and self-reflection, what should be the most suitable action in
	以及自我反思，什么才是最合适的行动


	the valid action set for the next step? You should analyze the
	下一步的有效操作集？你应该分析


	effects of the action step by step. You should not repeat the
	逐步观察该行动的效果。你不应重复


	previous action again except for the movement action. Do not try
	除了移动动作外，重复之前的动作。不要尝试


	to verify whether the previous action succeeded.
	验证先前操作是否成功。


	5. Is the selected action the same as the last executed action? If
	5. 所选动作是否与上次执行的动作相同？如果


	yes, regenerate the action and give the reasons.
	是的，重新生成动作并给出理由。


	6. Do all the selected actions exist in the valid action set? If
	6. 所有选定的动作是否都存在于有效动作集合中？如果


	no, regenerate the action and give the reasons.
	不，重新生成动作并给出理由。


	7. Where is the player's character? Notice that the player's
	7. 玩家角色在哪里？注意玩家的


	character is a brown-haired man wearing a blue jacket.
	该角色是一个棕发男子，穿着蓝色夹克。


	8. Does the selected action contribute to the current subtask?
	8. 所选操作是否有助于当前子任务？


	9. Analyze whether the selected action meets the requirements of
	9. 分析所选动作是否符合要求


	the Actions below one by one. Does the generated action meet all
	下面逐一执行这些操作。生成的操作是否满足所有


	the requirements? If not, regenerate the action and give the
	要求吗？如果没有，请重新生成操作并提供


	reasons.
	原因。


Actions: The requirements that the generated action needs to follow.
操作：生成的操作需要遵循的要求。


	The best action, or short sequence of actions without gaps, to
	最佳的动作，或连续无间断的短动作序列，以


	execute next to progress in achieving the goal. Pay attention to
	执行下一步以推进目标的实现。注意


	the names of the available skills and to the previous skills
	可用技能的名称及之前的技能


	already executed, if any. You should also pay more attention to
	已执行的（如有）。您还应更加注意


	the following action rules:
	以下操作规则：


	1. You should output actions in Python code format and specify any
	1. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. If the function has
	执行该操作所需的参数。如果函数具有


	parameters, you should also include their names and decide their
	参数时，您还应包括它们的名称并确定它们的


	values, like "move_right(duration=1)". If it does not have a
	值，比如 "move_right(duration=1)"。如果它没有


	parameter, just output the action, like "open_map()".
	参数，只需输出动作，如“open_map()”。


	2. You can only output at most two actions in the output.
	2. 你最多只能输出两个操作。


	3. In the screenshots, the blue band represents the left side and
	3. 在截图中，蓝色带表示左侧，且


	the yellow band represents the right side. Please ignore character
	黄色带表示右侧。请忽略字符


	's facing direction and output the action in an absolute direction
	面向方向并以绝对方向输出动作


	like right and left.
	像左右一样。


	4. If upon self-reflection you think the last action was
	4. 如果经过自我反思你认为上一个动作是


	unavailable at the current place, you MUST move to another place.
	当前位置不可用，您必须移动到其他地方。


	Please do not try to execute the same action again.
	请不要重复执行相同的操作。


	5. If you want to get out of the house, just use the skill
	5. 如果你想出门，只需使用该技能


	go_through_door. You MUST NOT output any movement action behind
	通过门。你绝对不能输出任何移动动作


	this skill. And if the last executed action already contains this
	这项技能。如果最后执行的动作已经包含了这个


	skill, do not execute this skill for the current step again.
	技能，不要在当前步骤再次执行此技能。


	6. If upon self-reflection you think you were blocked, you MUST
	6. 如果经过自我反思你认为自己被阻止了，你必须


	change the direction of moving, so that you can pass obstacles.
	改变移动方向，以便你能通过障碍物。


	7. You MUST NOT repeat the previous action again if you think the
	7. 如果你认为


	previous action fails.
	先前的操作失败。


	8. Your action should be strictly follow the analyze in the
	8. 你的行动应严格遵循分析中的内容


	reasoning. Do not output any additional action not mentioned in
	推理。不要输出未提及的任何额外操作


	the reasoning.
	推理过程。


	9. If the current subtask includes purchasing items, here are some
	9. 如果当前子任务包括购买物品，以下是一些


	useful tips for you:
	对你有用的提示：


	- Pierre's store is east of the character's house.
	- - 皮埃尔的商店在角色房子东边。


	- if you do not see the store, you can move for a longer time
	- - 如果你没有看到商店，可以多走一会儿


	each time, such move_right (duration=5). You can also move more
	每次，执行此向右移动（持续时间=5）。你也可以移动更多


	distance to the left each time to get home faster.
	每次向左移动距离，以更快回家。


	- To successfully enable the purchase transaction, you should
	- 要成功完成购买交易，您应当


	stand directly in front of the green counter, which left to the
	直接站在绿色柜台前，柜台左侧是


	white counter with word 'for sale'.
	带有“出售”字样的白色柜台。


	- After aligning with green counter, you should purchase items.
	- - 与绿色计数器对齐后，您应购买物品。


	- It is not necessary to positioned very precisely. If you stand
	- - 不必非常精确地定位。如果你站着


	near the green counter, you can try to purchase items.
	在绿色柜台附近，你可以尝试购买物品。


	10. If the current subtask includes exiting town and returning
	10. 如果当前子任务包括离开城镇并返回


	home, here are some useful tips for you:
	家，这里有一些实用的建议给你：


	- Character house is west of Pierre's store.
	- 角色之家在皮埃尔商店的西边。


	- There is a long distance from home to the store, so each
	- 从家到商店的距离很远，所以每次


	movement should take a long duration, such as move_left(duration
	移动应持续较长时间，例如 move_left(duration


	$= 5)$ .



	- Don't stand in the grass, move up and away from the lawn.
	- - 不要站在草地上，往上方远离草坪移动。


	- The exit to the town is on the west(left) of Pierre's store and
	- - 通往镇子的出口在皮埃尔商店和诊所的西侧（左边）


	clinic. You should move left along the stone road, which has a
	。你应该沿着石头路向左走，路下有一排木栅栏。


	wooden fence below it. If you gets stuck, move up slightly to get
	如果卡住了，稍微向上移动以越过障碍物。


	over the obstacle.
	


	11. If you want to enter a building, you should use
	11. 如果你想进入建筑物，应使用


	go_through_door(door="xxx_entrance"); If you want to leave a
	go_through_door(door="xxx_entrance"); 如果你想离开建筑物，应使用 go_through_door(door="xxx_exit")。


	building, you should use go_through_door(door="xxx_exit").
	


	- You can use go_through_door(door="store_entrance") to enter the
	- - 你可以使用 go_through_door(door="store_entrance") 进入商店。


	store.
	


	- You can use go_through_door(door="store_exit") to leave the
	- - 你可以使用 go_through_door(door="store_exit") 离开商店。


	store.
	


	- You can use go_through_door(door="home_entrance") to enter your
	- - 你可以使用 go_through_door(door="home_entrance") 进入你的房子。


	house.
	


	- You can use go_through_door(door="home_exit") to leave your
	- - 你可以使用 go_through_door(door="home_exit") 离开你的房子。


	house.
	


	12. If you want aligh with the target, you MUST move slightly.
	12. 如果你想与目标对齐，必须稍微移动。


	Each movement take only 0.1 seconds, such as move_xxx (duration
	每个动作仅需0.1秒，例如move_xxx（持续时间


	$= {0.1})$ .



You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且应


	not output comments or other information.
	不输出评论或其他信息。


Reasoning :
推理：


1. ...



2. ...



3. ...



Actions:
操作：


cccpython
cccpython


	action(args1=x,args2=y)
	action(args1=x,args2=y)


ccc
ccc


---



### H.4 Prompts for Dealer's Life 2
### H.4 《Dealer's Life 2》提示语


Prompt 22: Dealer's Life 2: Information Gathering prompt.
提示22：《Dealer's Life 2》信息收集提示。


---



Assume you are a helpful AI assistant integrated with "Dealer's Life
假设你是集成于PC版《Dealer's Life 2》中的智能助手，


	2" on the PC, equipped to handle a wide range of tasks in the game
	能够处理游戏中的各种任务，


	. Your advanced capabilities enable you to process and interpret
	你的高级功能使你能够处理和解读


	gameplay screenshots and other relevant information.
	游戏截图及其他相关信息。


<\$image_introduction\$>



Current task:
当前任务：


<\$task_description\$>



Description: Please analyze and describe the screenshot image in
描述：请分析并描述截图图像中的内容


	detail and then provide an overall image description. Most
	详细描述，然后提供整体图像描述。最


	importantly, identify the current page type and any relevant
	重要的是，识别当前页面类型及与任务相关的


	information related to the task. If there are specific features
	信息。如果有特定特征


	such as characters or text, mention these as well.
	如人物或文本，也请提及。


Budget: Bank Balance is shown at the top right of the screenshot.
预算：银行余额显示在截图右上角。


Other: Other information that does not belong to the above categories.
其他：不属于上述类别的其他信息。


	If none of them applies, only output "null".
	如果都不适用，仅输出“null”。


You should only respond in the format described below and not output
你应仅以以下描述的格式回复，不要输出


	comments or other information.
	评论或其他信息。


Description:
描述：


The image shows...
图像显示...


Budget:
预算：


The amount of budget
预算金额


Other:
其他：


Other information is ...
其他信息是...


---



Prompt 23: Dealer's Life 2: Self Reflection prompt.
提示23：Dealer's Life 2：自我反思提示。


---



Assume you are a helpful AI assistant integrated with "Dealer's Life
假设你是一款集成在PC游戏“Dealer's Life 2”中的智能助手，


	2" on the PC, equipped to handle a wide range of tasks in the game
	能够处理游戏中的各种任务，


	. Your advanced capabilities enable you to process and interpret
	你具备先进的能力，可以处理和解析


	gameplay screenshots and other relevant information. Your task is
	游戏截图及其他相关信息。你的任务是


	to examine these inputs, interpret the in-game context, and
	审查这些输入，解读游戏内的情境，


	determine whether the executed action takes effect.
	并判断所执行的动作是否生效。


Target task:
目标任务：


<\$task_description\$>



Current subtask for completing the target task:
完成目标任务的当前子任务：


<\$subtask_description\$>



The reasoning for proposing the current subtask:
提出当前子任务的理由：


<\$subtask_reasoning\$>



Last executed action for completing the subtask:
完成子任务的上一次执行动作：


<\$actions\$>



Reasoning for the last action:
上一次动作的理由：


---



---



<\$decision_making_reasoning\$>



Current budget:
当前预算：


<\$budget\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



<\$image_introduction\$>



Reasoning: You need to answer the following questions step by step to
推理：你需要逐步回答以下问题，


	get some reasoning based on the last action and sequential frames
	基于上一次动作及角色执行该动作时的连续帧，


	of the character during the execution of the last action.
	进行推理。


1. What is the executed action? Please answer this question not based
1. 执行的动作是什么？请不要基于连续帧来回答此问题


	on the sequential frames.
	。


2. Was the executed action successful? Give reasons. You should refer
2. 执行的动作是否成功？请给出理由。你应参考以下规则：


	to the following rules:
	。


- If you are not ${100}\%$ sure that the action fails,regard it as success
- 如果你不${100}\%$确定动作失败，则视为成功


3. If the last action is not executed successfully, what is the most
3. 如果最后一个动作未成功执行，最可能的原因是什么？你应只给出一个原因并参考


	probable cause? You should give only one cause and refer to the
	以下规则：


	following rules:
	。


- The reasoning for the last action could be wrong.
- 最后一个动作的推理可能是错误的。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是该动作在当前位置不可用，那么你应移动


	action was unavailable at the current place, then you should move
	到新的位置。


	to a new place.
	。


- If it is a movement action, the most probable cause was that you
- 如果是移动动作，最可能的原因是你被可见或不可见的障碍物阻挡。


	were blocked by seen or unseen obstacles.
	。


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


4. Is the subtask completed? Give your reasons. If you want to make
4. 子任务完成了吗？请给出理由。如果你想


	any confirmation, regard it as a success.
	任何确认，都视为成功。


5. Is the target task completed? Give your reasons.
5. 目标任务完成了吗？请说明理由。


6. Do you think the subtask is reasonable? Give your reasons.
6. 你认为子任务合理吗？请说明理由。


Success: You need to output whether the last action was executed
成功：你需要输出最后一个动作是否执行


	successfully or not.
	成功。


- If the last action is successful, you should only output 'True'.
- 如果最后一个动作成功，你只需输出“True”。


	Otherwise, you should only output 'False'.
	否则，你只需输出“False”。


You should only respond in the format described below.
你应仅以以下描述的格式回复。


Reasoning:
推理：


1. ...



2. ...



3. ...



Success:
成功：


True
True


...



---



Prompt 24: Dealer's Life 2: Task Inference prompt.
提示24：Dealer's Life 2：任务推断提示。


---



Assume you are a helpful AI assistant integrated with 'DealersLife2'
假设你是集成在PC端“DealersLife2”中的智能助手，


	on the PC, equipped to handle a wide range of tasks in the game.
	能够处理游戏中的各种任务。


	You will also be given a summary of the history that happened
	你还将获得最后一张截图之前发生的历史摘要，


	before the last screenshot. You should assist in summarizing the
	你应协助总结这些内容。


	events for future decision-making and also propose a new subtask,
	为未来决策提供事件支持，并提出一个新的子任务，


	which is the most suitable subtask for the current situation,
	哪一个是当前情况最合适的子任务，


	given the target task.
	鉴于目标任务。


Here is some helpful information to help you do the summarization and
这里有一些有助于你进行总结的有用信息


	propose the subtask.
	提出子任务。


Current task:
当前任务：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


---



---



<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出子任务的先前推理：


<\$subtask_reasoning\$>



<\$image_introduction\$>



Current budget:
当前预算：


<\$budget\$>



Current population:
当前人口：


<\$population\$>



Last executed action:
上次执行的操作：


<\$actions\$>



Decision-making reasoning for the last executed action:
最后执行动作的决策推理：


<\$decision_making_reasoning\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$self_reflection_reasoning\$>



The following is the summary of history that happened before the last
以下是发生在上一次之前的历史总结


	screenshot :
	截图：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历发生了什么，


	especially the last step according to the decision-making
	特别是根据决策的最后一步


	reasoning and self-reflection reasoning for the last executed
	对最后执行的推理和自我反思推理


	action. The summarization needs to be precise, concrete and highly
	行动。总结需要精准、具体且高度


	related to the task and follow the rules below.
	与任务相关并遵守以下规则。


1. Summarize the tasks from the history and the current task. What is
1. 总结历史任务和当前任务。内容是什么


	the current progress of the task?
	任务的当前进展如何？


2. Record the successful actions and organize them into events day by
2. 记录成功的操作并将其按天整理成事件


	day.
	天。


3. Do not forget the information and key events in the previous days.
3. 不要忘记前几天的信息和关键事件。


4. If you are watering a seed. Record how many times you have watered
4. 如果你正在给种子浇水，记录浇水的次数


	and calculate how many days you have to water before you can
	并计算在你可以之前需要浇水多少天


	harvest according to the toolbar information provided above.
	根据上述工具栏信息进行收割。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task and be
	应该直截了当，有助于目标任务，并且是


	most suitable for the current situation, which should be completed
	最适合当前情况，应当完成


	within a few actions. You should respond to me with:
	在几步操作内。你应该回复我：


1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应该逐步分析。


2. What is the current progress of the target task according to the
2. 根据当前情况，目标任务的进展如何


	analysis in step 1? Please do not make any assumptions if they are
	步骤1中的分析？如果有，请不要做任何假设


	not mentioned in the above information. You should assume that
	上述信息中未提及。您应当假设


	you are doing the task from scratch.
	你正在从头开始完成这项任务。


3. What is the previous subtask? Does the previous subtask finish? Or
3. 上一个子任务是什么？上一个子任务完成了吗？还是


	is it improper for the current situation? Then select a new one,
	当前情况不合适吗？那就选择一个新的吧，


	otherwise you should reuse the last subtask.
	否则你应该重用最后一个子任务。


4. If you want to propose a new subtask, give reasons why it is more
4. 如果您想提出一个新的子任务，请说明其更为合理的原因


	feasible for the current situation.
	适合当前情况。


5. The proposed subtask needs to be precise and concrete within one
5. 所提出的子任务需要在一个范围内明确且具体


	sentence. It should not be related to any skills.
	句子。它不应与任何技能相关。


6. Do not mention any grid information in the subtask description.
6. 不要在子任务描述中提及任何网格信息。


You should only respond in the format described below, and you should
您应仅以以下描述的格式回复，并且您应


	not output comments or other information.
	不输出评论或其他信息。


History_summary :
历史概述：


The summary is ...
总结是……


Subtask_reasoning:
子任务推理：


1. ...



2. ...



3. ...



	Subtask:
	子任务：


	The current subtask is ...
	当前子任务是...


---



Prompt 25: Dealer's Life 2: Action Planning prompt.
提示25：发牌员生活2：行动计划提示。


---



You are a helpful AI assistant integrated with "Dealer's Life 2" on
您是集成在“Dealer's Life 2”中的智能助理


	the PC, equipped to handle various tasks in the game. Your
	这台电脑配备了处理游戏中各种任务的能力。你的


	advanced capabilities enable you to process and interpret gameplay
	先进的功能使您能够处理和解析游戏玩法


	screenshots and other relevant information. By analyzing these
	截图及其他相关信息。通过分析这些


	inputs, you gain a comprehensive understanding of the current
	<inputs, you gain a comprehensive understanding of the current> 输入，您可以全面了解当前情况


	context and situation within the game. Utilizing this insight, you
	<context>游戏中的背景和情境。利用这一洞察，您</context>


	are tasked with identifying the most suitable in-game action to
	负责识别最合适的游戏内动作以


	take next, given the current task. You control the game character
	根据当前任务，采取下一步行动。你控制游戏角色


	and can execute actions from the available action set. Upon
	并且可以从可用的动作集合中执行动作。接着


	evaluating the provided information, your role is to articulate
	评估所提供的信息，您的职责是阐述


	the precise action you would deploy, considering the game's
	考虑到游戏的当前情况，你将采取的具体行动


	present circumstances, and specify any necessary parameters for
	并指定执行该行动所需的任何参数。


	implementing that action.
	实施该行动。


Here is some helpful information to help you make the decision.
以下是一些有助于你做出决策的信息。


Current subtask:
当前子任务：


<\$subtask_description\$>



Current page type:
当前页面类型：


<\$coordinates\$>



Current budget:
当前预算：


<\$budget\$>



Last executed action:
上一次执行的动作：


<\$actions\$>



Reasoning for the last action:
上一次动作的推理：


<\$decision_making_reasoning\$>



Self-reflection for the last executed action:
对上一次执行动作的自我反思：


<\$self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$history_summary\$>



Valid action set in Python format to select the next action:
用于选择下一步动作的Python格式有效动作集：


<\$skill_library\$>



<\$image_introduction\$>



Based on the above information, analyze the current situation and
基于以上信息，分析当前情况并


	provide the reasoning for what you should do for the next step to
	提供你下一步应采取行动的理由，以完成任务。


	complete the task. Then, you should output the exact action you
	然后，你应输出你想在游戏中执行的具体动作。


	want to execute in the game. You should respond to me with:
	你应回复我：


Reasoning: You should think step by step and provide detailed
推理：你应该逐步思考并提供详细的


	reasoning to determine the next action executed on the current
	推理以确定当前执行的下一步操作


	state of the task. You need to answer the following questions step
	任务的状态。您需要逐步回答以下问题


	by step. You cannot miss the last question:
	逐步进行。你绝不能错过最后一个问题：


	1. Analyze the information in the screenshot. What can you observe
	1. 分析截图中的信息。你能观察到什么？


	in the screenshot? Please list some key elements.
	截图中有哪些关键元素？请列举一些。


	2. What is the current task? What are the requirements to achieve
	2. 当前任务是什么？实现该任务的要求有哪些？


	the goal?
	目标？


	3. What have you done so far in the game? What are the results of
	3. 你在游戏中到目前为止做了什么？结果如何


	the previous actions?
	之前的操作？


---



---



			4. What is your next step to achieve the goal? What is your plan?
			4. 你接下来的步骤是什么？你的计划是什么？


			Why do you choose this action? Please explain the reasoning behind
			你为什么选择这个动作？请说明背后的理由


				your decision.
				你的决定。


			5. If you were to respond to the customer's dialogue on the
			5. 如果你要回应客户的对话内容


			dialogue page, which of the listed responses in the screenshot
			对话页面，截图中列出的哪个回复


			would you choose? Why?
			你会选择什么？为什么？


			6. If you are to make an offer to a customer, how would you
			6. 如果你要向客户提出报价，你会如何做


			determine the price? You should determine the customer's role here
			确定价格？你应该确定客户在这里的角色


			. If the customer is a "seller", you should offer a price lower
			如果客户是“卖家”，你应该提供一个更低的价格


			than the item's value. If the customer is a "buyer", you should
			比该商品的价值更高。如果客户是“买家”，你应该


			offer a price higher than the item's value. Please explain your
			出价高于物品价值。请说明您的理由


			reasoning.
			推理。


			7. If the customer rejects your offer and makes a counteroffer,
			7. 如果客户拒绝您的报价并提出还价，


			what would you do? Would you accept the counteroffer or refuse the
			你会怎么做？你会接受还价还是拒绝


				deal? Why?
				交易？为什么？


			8. What does the current screen image show? is it a giving price
			8. 当前屏幕显示的是什么？是报价吗


			page (it at least should show price \$ in the right bottom of the
			页面（至少应在右下角显示价格\$）


			screen image) or a non-giving price page and why?
			屏幕图像）还是一个不显示价格的页面，为什么？


Actions: The requirements that the generated action needs to follow.
操作：生成的操作需要遵循的要求。


			The best action, or short sequence of actions without gaps, to
			最佳动作，或无间断的短动作序列，来


			execute next to progress in achieving the goal. Pay attention to
			执行下一步以推进目标的实现。注意


			the names of the available skills and the previous skills already
			可用技能的名称以及之前已有的技能


			executed, if any. You should also pay more attention to the
			已执行的（如有）。你还应更加关注


			following action rules:
			以下操作规则：


				1. You should output actions in Python code format and specify any
				1. 你应以Python代码格式输出操作，并说明任何


				necessary parameters to execute that action. If the function has
				执行该操作所需的参数。如果函数具有


			parameters, you should also include their names and decide their
			参数时，您还应包括它们的名称并确定它们的


			values, like "move_right(duration=1)". If it does not have a
			值，例如 "move_right(duration=1)"。如果没有


			parameter, just output the action, like "open_map()".
			参数，只需输出动作，如“open_map()”。


			2. Given the current situation and task, you should only choose
			鉴于当前情况和任务，你应仅选择


			the most suitable action from the valid action set. You cannot use
			从有效动作集中选择最合适的动作。你不能使用


				actions that are not in the valid action set to control the
				不在有效动作集合中的动作用于控制


			character.
			字符。


			3. In the screenshots, the blue band represents the left side and
			3. 在截图中，蓝色带表示左侧，且


			the yellow band represents the right side. Please ignore the
			黄色带表示右侧。请忽略


			character's facing direction and output the action in an absolute
			角色的朝向方向并以绝对方式输出动作


			direction like right and left.
			方向如右和左。


			4. If you want to run as a successful dealer in conversation with
			4. 如果你想在对话中成为一名成功的交易员


			the customer, you should follow these rules:
			对于客户，您应遵循以下规则：


				4.1 Check the customer's dialogue.
				4.1 检查客户的对话内容。


						- If the customer is introducing himself and his purpose of
						- 如果客户正在介绍自己及其来访您店铺的目的，


			visiting your shop, you should always respond with "Let's see" to
			您应始终以“我们看看”为回应，


			make them potential buyers. This will be the first option in the
			以将其转化为潜在买家。这将是对话中的第一个选项，您应选择它。


			dialogue and you should select it.
			


					4.2 Check the customer's response.
					4.2 检查客户的回应。


						- If the customer has shown you the details of the items and you
						- 如果客户已向您展示了商品详情，且您已通过关闭商品详情页完成操作，


				have completed by closing the item detail page, you should
							您应以“我们成交”为回应以提出报价。


			respond with "Let's deal" to make an offer. This will be the first
			这将是对话中的第一个选项，您应选择它。


				option in the dialogue and you should select it.
				


			5. If you want to run as a successful dealer in making an offer
			5. 如果您想作为成功的交易商进行报价并决定是否接受报价或还价，


			and deciding whether to take the offer or counteroffer, you should
			您应遵循以下规则：


				follow these rules:
				


				5.1 Check the customer's role.
				5.1 检查客户的角色。


						- If the customer is a "seller", you should offer a price lower
						- 如果客户是“卖家”，您应提出较低的价格


				than the item's value. You should also consider your budget.
				比物品的价值更高。你还应考虑你的预算。


					- If the customer is a "buyer", you should offer a price higher
					- 如果客户是“买家”，你应出价高于


			than the item's value.
			物品的价值。


					5.2 Check the item's details.
					5.2 检查物品的详细信息。


						- You should check the item's "rarity", "condition", and "
						- 你应检查物品的“稀有度”、“状况”和“


			estimate" to determine the price you offer.
			估价”以确定你出价的价格。


			6. If you have opened up the buyer's or seller's character trait
			6. 如果你已打开买家或卖家的性格特征


			page, you should call the function to close the description page
			页面，应调用函数关闭描述页面


			to proceed with the next action. You should NOT call any other
			以继续下一步操作。你不应调用任何其他


			skill like dialogue ().
			技能，如对话（）。


	7. Your action should strictly follow the analysis in the
	7. 你的操作应严格遵循推理中的分析。


	reasoning. Do not output any additional action not mentioned in
	不要输出推理中未提及的任何额外操作。


	the reasoning.
	


You should only respond in the format described below, and you should
你应仅以以下描述的格式回应，且不应


	not output comments or other information.
	输出评论或其他信息。


Reasoning:
推理：


1. ...



2. ...



3. ...



Actions:
操作：


cccpython
cccpython


	action(args1=x,args2=y)
	action(args1=x,args2=y)


ccc
ccc


---



### H.5 Prompts for Software Applications
### H.5 软件应用提示


Prompt 26: Chrome: Information Gathering prompt.
提示26：Chrome：信息收集提示。


---



Assume you are a helpful AI assistant integrated with 'Google Chrome'
假设你是集成在“Google Chrome”（谷歌浏览器）中的智能助手


	on the PC, equipped to handle a wide range of tasks in the
	在PC上，能够处理应用中的各种任务。


	application. Your advanced capabilities enable you to process and
	你具备先进的能力，能够处理和


	interpret application screenshots and other relevant information.
	解读应用截图及其他相关信息。


Image introduction:
图片介绍：


<\$image_introduction\$>



Overall task:
整体任务：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Image_Description:
图片描述：


1. Please describe the screenshot image in detail. Pay attention to
1. 请详细描述截图图像。注意


	any details in the image, if any, especially critical icons, or
	图像中的任何细节，尤其是关键图标，或


	created items.
	已创建的项目。


2. If the image includes a mouse cursor, please describe what UI
2. 如果图像中包含鼠标光标，请描述鼠标当前位于哪个用户界面


	element the mouse is currently located near. Pay attention to the
	元素附近。注意指针尖端的坐标，而非鼠标光标的中心。


	coordinates of the pointer tip, not the center of the mouse cursor
	3. 注意图像中的所有用户界面项目和内容。不要对布局做出假设。


3. Pay attention to all UI items and contents in the image. Do not
3. 注意图像中的所有用户界面项目和内容。不要对布局做出假设。


	make assumptions about the layout.
	不要对布局做出假设。


Description_of_bounding_boxes:
边界框描述：


Please provide a list of EVERY bounding box from label ID of 1 to <
请逐一提供从标签ID 1到&lt;\$length_of_som_map\$&gt;的每个边界框列表。标签ID标记在边界框的左上角。


	\$length_of_som_map\$> ONE BY ONE. The label IDs are marked in the
	请逐一提供从标签ID 1到&lt;\$length_of_som_map\$&gt;的每个边界框列表。标签ID标记在边界框的左上角。


	upper left corner of the bounding boxes.
	标签ID标记在边界框的左上角。


For bounding boxes containing text, provide ONLY the text.
对于包含文本的边界框，仅提供文本内容。


For bounding boxes without text, brief description of the function.
对于不包含文本的边界框，简要描述其功能。


Format your response as follows: '1: function_a', '2: text_b', ...,
请按以下格式回复：'1: function_a', '2: text_b', ..., '\$length_of_som_map\$>: function_b'。不要写你不确定的内容。


	\$length_of_som_map\$>: function_b'. Don't write anything you are
	请按以下格式回复：'1: function_a', '2: text_b', ..., '\$length_of_som_map\$>: function_b'。不要写你不确定的内容。


	not sure about.
	不要写你不确定的内容。


Target_object_name: Assume you can use an object detection model to
目标对象名称：假设你可以使用目标检测模型来


	detect the most relevant object or UI item for completing the
	检测完成当前任务所需的最相关对象或界面元素


	current task if needed. What item should be detected to complete
	如果需要。基于当前截图和当前任务，应检测哪个元素以完成


	the task based on the current screenshot and the current task? You
	该任务？你应遵守以下规则：


	should obey the following rules:
	你应遵守以下规则：


1. Identify an item that is relevant to the current or intermediate
1. 确定与当前或中间任务目标相关的元素。如果该元素位于截图中的边界框内，请包含对应的标签ID。


	target of the task. If the item is within a bounding box in the
	1. 确定与当前或中间任务目标相关的元素。如果该元素位于截图中的边界框内，请包含对应的标签ID。


	screenshot, please include the corresponding label ID.
	截图中，请包含对应的标签ID。


2. If no explicit item is specified, only output "null".
2. 如果没有明确指定元素，仅输出“null”。


3. If there is no need to detect an object, only output "null".
3. 如果不需要检测对象，仅输出“null”。


Reasoning_of_object: Why was this object chosen, or why is there no
对象推理：为什么选择该对象，或者为什么不需要检测对象？


	need to detect an object?
	需要检测对象？


You should only respond in the format described below and not output
你应仅以以下描述的格式回复，不得输出评论或其他信息。不要更改每个


	comments or other information. DO NOT change the title of each
	项目的标题。


	item.
	项目的标题。


Image_Description:
图像描述：


1. ...



2. ...



3. ...



Description_of_bounding_boxes:
边界框描述：


Format like: 1: function_a', '2: text_b', ..., '<\$len_of_bound_boxes\$
格式如：1: function_a', '2: text_b', ..., '<\$len_of_bound_boxes\$


	>: function_b
	>: function_b


Target_object_name :
目标对象名称 :


label ID, Name
标签 ID，名称


Reasoning_of_object:
对象推理：


...



---



Prompt 27: Chrome: Self-Reflection prompt.
提示 27：Chrome：自我反思提示。


---



Assume you are a helpful AI assistant integrated with 'Google Chrome,
假设你是集成在“Google Chrome”中的智能助手，


	on the PC, equipped to handle a wide range of tasks in the
	运行于PC端，具备处理应用程序中各种任务的能力。


	application. Your advanced capabilities enable you to process and
	你拥有先进的功能，能够处理和


	interpret application screenshots and other relevant information.
	解析应用程序截图及其他相关信息。


	Your task is to examine these inputs, interpret the in-application
	你的任务是审查这些输入，解读应用内


	and OS context, and determine whether the executed action has
	及操作系统上下文，并判断所执行的操作是否


	taken the correct effect.
	达到了预期效果。


Overall task description:
整体任务描述：


<\$task_description\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Last executed action with parameters used:
最后执行的操作及所用参数：


<\$previous_action_call\$>



Implementation of the last executed action:
最后执行操作的实现：


<\$action_code\$>



Error report for the last executed action:
最后执行操作的错误报告：


<\$executing_action_error\$>



Key reason for the last action:
最后操作的关键原因：


<\$key_reason_of_last_action\$>



History Summarization
历史总结


<\$history_summary\$>



Success_Detection flag for the overall task:
整体任务的成功检测（Success_Detection）标志：


<\$success_detection\$>



Valid action set in Python format to select the next action:
用于选择下一操作的Python格式有效操作集：


<\$skill_library\$>



Current and previous screenshot are the same:
当前截图与前一截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	前一截图中的相同：


<\$mouse_position_same_flag\$>



---



---



Self_Reflection_Reasoning:
自我反思推理：


You need to answer the following questions, step by step, to describe
你需要逐步回答以下问题，基于历史总结、最后操作及


	your reasoning based on the history summarization, last action and
	执行最后操作期间应用程序的连续截图，描述你的推理过程。


	sequential screenshots of the application during the execution of
	


	the last action.
	


1. Please describe what the page is in the current screenshot. Respond
1. 请用一句话描述当前截图中的页面内容。


	in one sentence.
	


2. What is the last executed action based on the text information
2. 根据文本信息，最后执行的操作是什么


	above?
	上方？


3. Was the last executed action successful? Give reasons. You should
3. 上一次执行的操作成功了吗？请说明理由。你应该


	refer to the following rules:
	请参照以下规则：


- If the last action executed was empty, then the previous action is
- 如果上一个执行的操作为空，则前一个操作是


	deemed successful.
	被视为成功。


- If the action involves moving the mouse, it is considered
- 如果操作涉及移动鼠标，则视为


	unsuccessful when the mouse position remains unchanged or moves in
	当鼠标位置保持不变或移动时，操作失败


	an incorrect way across sequential screenshots, regardless of
	在连续截图中错误的方式，无论如何


	background elements and other items.
	背景元素和其他项目。


- If the position to move the mouse to was incorrect and the mouse
- 如果鼠标要移动到的位置不正确，且鼠标


	didn't reach the target UI element, pay more attention to the
	未达到目标用户界面元素，请更多关注


	accurate coordinates to move to.
	准确的移动坐标。


- If the operation involves type text, it will be considered
- 如果操作涉及文本类型，则将被考虑


	unsuccessful when the corresponding text does not appear in the
	当对应文本未出现时，操作失败


	diagram, regardless of background elements and other items.
	图表，无论背景元素和其他项目如何。


- If the action seemed to have no effect, pay attention to the latest
- 如果该操作似乎没有效果，请关注最新的


	mouse position. Did it move? Did it get closer to the target UI
	鼠标位置。它移动了吗？它是否更接近目标界面元素？


	element? Where are the target coordinates in the action wrong? The
	元素？动作中的目标坐标哪里出错了？


	position of the mouse cursor on the screenshot shows their
	截图上鼠标光标的位置显示了它们的


	location.
	位置。


- Was some unrelated UI item triggered by the last action?
- 上一个操作是否触发了某个无关的界面元素？


4. If the last action is not executed successfully, what is the most
4. 如果最后一个操作未成功执行，最重要的是


	probable cause? You should give only one cause and refer to the
	合理的理由？你只需给出一个原因并提及


	following rules:
	以下规则：


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- If it was an action involving moving the mouse or the text cursor,
- 如果是涉及移动鼠标或文本光标的操作，


	the most probable cause was that the coordinates used were
	最可能的原因是所使用的坐标是


	incorrect.
	错误。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是


	action was unavailable or not activated in the current state.
	当前状态下操作不可用或未激活。


- If an unrelated change happened in the UI, the most probable cause
- 如果用户界面发生了无关的变化，最可能的原因是


	was that the action triggered an incorrect UI element.
	导致操作触发了错误的界面元素。


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


Success_Detection:
成功检测：


Based on the history summarization, the last action, the current
基于历史总结，最后的操作，当前的


	screenshots and the Success_Detection flag, determine whether the
	截图和Success_Detection标志，确定是否


	overall task "<\$task_description\$>" was successful. This
	整体任务"<\$task_description\$>"已成功完成。这


	assessment should consider the overall task's success, not just
	评估应考虑整体任务的成功，而不仅仅是


	individual actions.
	个人行为。


- If the last action executed was an empty list and "<
- 如果最后执行的操作是一个空列表且“<


	\$success_detection\$>" indicates the task is successful, then the
	\$success_detection\$>" 表示任务成功，然后


	overall task has a high chance of being considered a success.
	整体任务很可能被视为成功。


- If the overall task was unsuccessful, specify the reason of failure
- 如果整体任务未成功，请说明失败原因


	and which steps are missing.
	以及缺少了哪些步骤。


- If the overall task was successful, ONLY output "SUCCESSFUL".
- 如果整体任务成功，仅输出“SUCCESSFUL”。


You should only respond in the format as described below.
您应仅按照以下描述的格式回复。


Self_Reflection_Reasoning:
自我反思推理：


1. ...



2. ...



3. ...



Success_Detection:
成功检测：


...



---



---



Assume you are a helpful AI assistant integrated with 'Google Chrome,
假设你是集成在“谷歌浏览器(Google Chrome)”中的一个有用的人工智能助手，


	on the the PC, equipped to handle a wide range of tasks in the
	在配备齐全的个人电脑(PC)上，能够处理各种任务


	game. You will be sequentially given <\$event_count\$> screenshots
	游戏。您将依次获得<\$event_count\$>张截图


	and corresponding descriptions of recent events. You will also be
	以及近期事件的相应描述。您还将被


	given a summary of the history that happened before the last
	给出之前发生的历史摘要


	screenshot. You should assist in summarizing the events for future
	截图。您应协助总结事件以备将来参考


	decision-making and also in proposing the most suitable subtask
	决策制定以及提出最合适的子任务


	to execute next, given the target task.
	执行下一个，针对目标任务。


Here is some helpful information to help you do the summarization and
这里有一些有助于你进行总结的有用信息


	propose the subtask.
	提出子任务。


Overall task description:
整体任务描述：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出该子任务的先前推理：


<\$subtask_reasoning\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Last executed action:
上次执行的操作：


<\$previous_action\$>



Error report for the last executed action:
上次执行操作的错误报告：


<\$executing_action_error\$>



Key decision-making reasoning for the last executed action:
最后执行操作的关键决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$self_reflection_reasoning\$>



Success_Detection for the overall task:
整体任务的成功检测：


<\$success_detection\$>



The following is the summary of history that happened before the last
以下是发生在上一次之前的历史概要


	screenshot:
	截图：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历发生了什么，


	especially the last step according to the decision-making
	尤其是根据决策的最后一步


	reasoning and self-reflection reasoning for the last executed
	对最后执行的推理和自我反思推理


	action. The summarization needs to be precise, concrete, highly
	行动。总结需要精准、具体且高度


	related to the task, and follow the rules below.
	与任务相关，并遵守以下规则。


	1. Determine if the task has been completed successfully. If it is
	1. 确定任务是否已成功完成。如果是


	successful, ignore question 2 to 5 .
	成功，忽略问题2到5。


	2. Summarize the tasks from the history and the current task. What
	2. 总结历史任务和当前任务。什么


	is the current progress of the task? For example, to open a file,
	任务的当前进展如何？例如，打开一个文件时，


	you first need to select the file, then open it by clicking
	你需要先选择文件，然后点击打开


	somewhere or using the keyboard. Subtasks may have other pre-
	在某处或使用键盘。子任务可能还有其他先决条件。


	requisites.
	先决条件。


	3. Record the successful actions and organize them into events,
	3. 记录成功的操作并将其组织成事件，


	step by step.
	逐步进行。


	4. Which subtask has been completed? Which subtasks have not? Do
	4. 哪个子任务已完成？哪些子任务尚未完成？不要忘记整体任务前面步骤中的信息和关键事件。


	not forget the information and key events in the previous steps of
	不要忘记整体任务前面步骤中的信息和关键事件。


	the overall task.
	整体任务。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否完成，是否有必要提出新的子任务。子任务应简明，能促进目标任务，并且最适合当前情况；应在几步操作内完成。你应回复以下内容。


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出新的子任务。子任务


---



---



	should be straightforward, contribute to the target task, and be
	应简明，能促进目标任务，并且


	most suitable for the current situation; which should be completed
	最适合当前情况；应在几步操作内完成。你应回复以下内容。


	within a few actions. You should respond with the following item.
	你应回复以下内容。


	1. Think about a hotkey related to the overall task and next
	1. 思考一个与整体任务和下一个子任务相关的快捷键，请说明是什么。


	subtask, please specify what it is.
	2. 根据当前截图，找出完成任务的最直接且最简单的方法。


	2. Based on the current screenshot, identify the most direct and
	2. 根据当前截图，找出完成任务的最直接且最简单的方法。


	easiest way to complete the task.
	完成任务的最直接且最简单的方法。


	3. Analyze the target task step by step to determine how to
	3. 逐步分析目标任务以确定如何


	complete it.
	完成它。


	4. What is the previous subtask? Has the previous subtask finished
	4. 上一个子任务是什么？上一个子任务是否因自我反思而完成？


	due to self-reflection? Or is it improper for the current
	或者它是否不适合当前情况？


	situation? If finished or improper, please select a new one,
	如果已完成或不适合，请选择一个新的，


	otherwise you should reuse the last subtask.
	否则应重复使用上一个子任务。


	5. If you want to propose a new subtask, give reasons why it is
	5. 如果你想提出一个新的子任务，请说明为什么它


	more feasible for the current situation. Please strictly follow
	对当前情况更可行。请严格遵循


	the description and requirements in the current task.
	当前任务中的描述和要求。


	6. The proposed subtask needs to be precise and concrete within
	6. 所提出的子任务需在一句话内准确具体，


	one sentence. It should not be directly related to any skills.
	且不应直接涉及任何技能。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且不应


	not output comments or other information.
	输出评论或其他信息。


History_summary:
历史摘要：


1. ...



2. ...



...



Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask_description:
子任务描述：


The current subtask is ...
当前子任务是...


---



Prompt 29: Chrome: Action Planning prompt.
提示29：Chrome：操作规划提示。


---



You are a helpful AI assistant integrated with 'Google Chrome' on the
您是一款集成在“Google Chrome”（谷歌浏览器）上的智能助手，


	PC, equipped to handle a wide range of tasks in the application.
	运行于PC端，能够处理应用中的多种任务。


	Your advanced capabilities enable you to process and interpret
	您具备先进的能力，能够处理和解析


	application screenshots and other relevant information. By
	应用截图及其他相关信息。


	analyzing these inputs, you gain a comprehensive understanding of
	通过分析这些输入，您能够全面理解


	the current context and situation within the application.
	应用内当前的上下文和情境。


	Utilizing these insights, you are tasked with identifying the most
	利用这些洞察，您的任务是识别在当前


	suitable in-application action to take next, given the current
	任务下最合适的应用内下一步操作。


	task. You control the application and can execute actions from the
	您可以控制应用，并从可用操作集中执行操作以操控其界面。


	available action set to manipulate its UI. Upon evaluating the
	在评估所提供的信息后，您的职责是准确表达


	provided information, your role is to articulate the precise
	应执行的具体操作，考虑应用当前的


	actions you should perform, considering the application's present
	状况，并指定实施该操作所需的任何参数。


	circumstances, and specify any necessary parameters for
	


	implementing that action.
	


Here is some helpful information to help you make the decision.
这里有一些有助于您做出决定的有用信息。


Overall task description:
整体任务描述：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Few shots:
少量示例：


<\$few_shots\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



---



---



Current and previous screenshot are the same:
当前截图与之前截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	之前截图中的相同：


<\$mouse_position_same_flag\$>



Description of current screenshot:
当前截图描述：


<\$image_description\$>



Description of label IDs:
标签ID描述：


<\$description_of_bounding_boxes\$>



Last executed action:
上一次执行的操作：


<\$previous_action\$>



Key reason for the last action:
上一次操作的关键原因：


<\$key_reason_of_last_action\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$previous_summarization\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Success detection for overall task:
整体任务的成功检测：


<\$success_detection\$>



Based on the above information, you should first analyze the current
基于以上信息，您应首先分析当前


	situation and provide the reasoning for what you should do for the
	情况，并说明您应采取何种理由来完成


	next step to complete the task. Then, you should output the exact
	下一步任务。然后，您应输出在应用程序中


	action you want to execute in the application.
	想要执行的具体操作。


Pay attention to all UI items and contents in the image. DO NOT make
请注意图像中的所有界面元素和内容。不要对布局做出


	assumptions about the layout! If the image includes a mouse cursor
	假设！如果图像中包含鼠标光标，


	, pay close attention to the coordinates of the pointer tip, not
	请特别关注指针尖端的坐标，而非


	the centre of the mouse cursor.
	鼠标光标的中心位置。


You should respond to me with the following information, and you MUST
您应按顺序向我反馈以下信息，且必须


	respond one by one.
	逐条回应。


Decision_Making_Reasoning: You should think step by step and provide
决策推理：您应逐步思考并提供


	detailed reasoning to determine the next action executed on the
	详细推理，以确定在当前任务状态下


	current state of the task.
	应执行的下一步操作。


	1. Does "<\$success_detection\$>" mean the overall task was
	1.“&lt;$success_detection$&gt;”是否表示整体任务


	successful? If successful, ignore questions 2 to 12.
	成功？若成功，则忽略第2至12条问题。


	2. Which skill in the Skill Library "<\$skill_library\$>" has the
	2.“&lt;$skill_library$&gt;”技能库中哪项技能具备


	closest semantics to the current subtask "<\$subtask_description\$
	与当前子任务“<\$subtask_description\$”最接近的语义


	>"? If there is an answer, select it as the output action.
	>"? 如果有答案，请选择它作为输出操作。


	3. Prefer keyboard operation instead of mouse operation. Are there
	3. 优先使用键盘操作而非鼠标操作。是否有


	any keyboard actions, such as using shortcut keys or pressing "
	任何键盘操作，例如使用快捷键或按下“


	enter", to finish the current step or overall task? If there is,
	按“回车”键，完成当前步骤或整个任务？如果有，


	please specify which it is.
	请具体说明是哪一种。


	4. Based on the action rules, self-reflection and previous
	4. 基于行动规则、自我反思和先前的


	summarization, what should be the most suitable action in the
	摘要，最合适的操作应该是什么


	valid action set for the next step? You should analyze the effects
	下一步的有效操作集？你应该分析其影响


	of the action step by step.
	逐步执行该操作。


	5. If the previous action is unsuccessful, DO NOT repeat the
	5. 如果前一步操作失败，请勿重复执行


	previous action, consider an alternative action if possible. If
	先前的操作，如有可能，考虑替代操作。如果


	there is an alternative action, please specify what it is, such as
	如果有备选操作，请具体说明，例如


	clicking different label IDs or using different shortcut keys.
	点击不同的标签ID或使用不同的快捷键。


	6. Always try pressing "enter" first instead of clicking it with
	6. 总是先尝试按“回车”键，而不是用鼠标点击它


	the mouse, if the button you want to click is active.
	鼠标，如果你想点击的按钮是激活状态。


---



---



	7. Check whether the UI element you want to operate exists in the
	7. 检查您要操作的界面元素是否存在于


	current screenshot. If not, you can choose to return to the
	当前截图。如果不是，您可以选择返回


	previous page or reopen a tab.
	上一页或重新打开一个标签页。


	8. In the current screenshot, identify the label ID of the
	8. 在当前截图中，识别标签ID


	bounding box most relevant to the current step. If there is text
	与当前步骤最相关的边界框。如果有文本


	within this bounding box, please provide the text.
	请在此边界框内提供文本。


	9. If mouse actions are necessary, use that specific bounding box
	9. 如果需要鼠标操作，请使用该特定的边界框


	label ID (if shown in the current screenshot) as a parameter,
	将标签ID（如果在当前截图中显示）作为参数，


	rather than directly generating normalized $x$ and $y$ coordinates. If
	而不是直接生成归一化的$x$和$y$坐标。如果


	there is any relevant label ID, please specify which it is.
	如果有相关的标签ID，请指明是哪一个。


	10. If a dialog box appears, make sure to check the content of the
	10. 如果出现对话框，请务必检查内容


	dialog box to determine if the task is complete. For instance,
	用于确定任务是否完成的对话框。例如，


	when a download dialog box appears, the task is only completed
	当出现下载对话框时，任务才算完成


	after pressing the Enter key or clicking "Save".
	按下回车键或点击“保存”后。


	11. If you need to use an action outside an open menu or dialog
	11. 如果需要在打开的菜单或对话框之外使用某个操作


	box, please close the current menu or dialog box before trying the
	对话框，请先关闭当前菜单或对话框后再尝试


	next action.
	下一步操作。


	12. If you anticipate that the next step involves typing text,
	12. 如果你预期下一步需要输入文本，


	confirm that the last executed action was a click at the
	确认最后执行的操作是在


	appropriate input box. If not, it is mandatory to click on the
	适当的输入框。如果没有，必须点击


	corresponding input box before proceeding with typing.
	在继续输入之前，请先点击相应的输入框。


Actions: The best action, or short sequence of actions without gaps,
操作：最佳操作，或无间断的短操作序列，


	to execute next to progress in achieving the goal. Pay attention
	执行下一步以推进目标的实现。请注意


	to the names of the available skills and the previous skills
	到可用技能的名称和之前的技能


	already executed, if any. Pay special attention to the coordinates
	已执行（如有）。特别注意坐标


	of any action that needs them. Do not make assumptions about the
	任何需要它们的行动。不要对其做出假设


	location of UI elements or their coordinates, analyse in detail
	用户界面元素的位置或其坐标，进行详细分析


	any provided images. You should also pay more attention to the
	任何提供的图像。你还应更加关注


	following action rules:
	以下操作规则：


	1. If "<\$success_detection\$>" means the overall task was
	1. 如果“<\$success_detection\$>”表示整体任务已完成


	successful or equal to "True", then the output action MUST be
	成功或等于“True”，则输出操作必须是


	empty like ". Be careful to check the task was really successful.
	像“”一样空。请务必确认任务确实成功完成。


	2. You should output actions in Python code format and specify any
	2. 你应以Python代码格式输出操作，并指定执行该操作所需的参数。


	necessary parameters to execute that action. Only use function
	只使用有效操作集中的函数名和参数名。


	names and argument names exactly as shown in the valid action set.
	函数名和参数名必须与有效操作集中的完全一致。


	If a function has parameters, you should also include their names
	如果函数有参数，也应包括参数名并决定其值，如 "press_shift(duration=1)"。


	and decide their values, like "press_shift (duration=1)". If it
	如果没有参数，则只需输出操作，如 "release_mouse_buttons() "。


	does not have a parameter, just output the action, like "
	


	release_mouse_buttons ()".
	


	3. Before typing text, ensure that the last executed action
	3. 在输入文本前，确保上一个执行的操作是点击了相关输入框。


	involved clicking on the relevant input box. If the last action
	如果上一个操作不是点击该输入框，则必须先点击对应输入框再继续。


	was not a click on this input box, the required action MUST be to
	


	click on the corresponding input box before proceeding.
	


	4. Given the current situation and task, you should only choose
	4. 根据当前情况和任务，只能从有效操作集中选择最合适的操作。


	the most suitable action from the valid action set. You cannot use
	不能使用不在有效操作集中的操作来控制应用程序。


	actions that are not in the valid action set to control the
	


	application.
	


	5. When you perform a mouse action, always select the target UI
	5. 执行鼠标操作时，始终选择目标UI元素。


	element closest to the UI element of the previous action for
	最接近上一个操作的UI元素的元素


	operation.
	操作。


	6. When you decide to operate on a file, such as downloading it,
	6. 当您决定对文件进行操作时，例如下载，


	please pay attention to the path and name of the current file.
	请注意当前文件的路径和名称。


Key_reason_of_last_action: Summarize the key reasons why you output
上一次操作的关键原因：总结您执行此操作的主要原因。


	this action.
	此操作。


You should only respond in the format described below. In your
您应仅以以下描述的格式进行回复。在您选择操作的


	reasoning for the chosen actions, also describe which item you
	推理中，还应描述您决定交互的项目及原因。不要更改每个


	decided to interact with and why. DO NOT change the title of each
	项目的标题。除以下格式外，不应输出其他评论或信息。


	item. You should not output other comments or information besides
	


	the format below.
	


Decision_Making_Reasoning:
决策推理：


1. ...



2. ...



---



3. ...



---



...



Actions:
操作：


44 python
44 python


	action(args1=x,args2=y)
	action(args1=x,args2=y)


ccc
ccc


Key_reason_of_last_action:
上次操作的主要原因：


...



---



Prompt 30: Outlook: Information Gathering prompt.
提示30：展望：信息收集提示。


---



You an expert helpful AI assistant which follows instructions and
你是一位遵循指令的专业且乐于助人的人工智能助手


	performs desktop computer tasks as instructed. You have expert
	按照指示执行桌面计算机任务。您具备专家级


	knowledge of 'Microsoft Outlook' on the PC and can handle a wide
	具备PC端“Microsoft Outlook”（微软Outlook）的知识，能够熟练操作多种功能


	range of tasks in the application using the keyboard, shortcut
	使用键盘快捷键完成应用中的一系列任务


	keys, and mouse operations. For each step, you will get one or
	键盘和鼠标操作。每一步，您将获得一个或


	more observation images, which are screenshots of the computer
	更多观测图像，即计算机屏幕截图


	screen. Your advanced capabilities enable you to process and
	屏幕。您先进的能力使您能够处理和


	interpret these application screenshots and other relevant
	解释这些应用程序截图及其他相关内容


	information in detail. The screenshots include numerical tags (   )
	详细的信息。截图中包含数字标签（   ）


	label IDs) and bounding boxes marking some UI items.
	<label IDs>和标记某些用户界面(UI)项目的边界框。


Image introduction:
图像介绍：


<\$image_introduction\$>



Overall task:
整体任务：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Image_Description:
图像描述：


1. Please describe the screenshot image in detail. Pay attention to
1. 请详细描述截图图像。请注意


	any details in the image, if any, especially critical icons, open
	图像中的任何细节，尤其是关键图标，均已打开


	menus or dialogs, and any instructions for the application user.
	菜单或对话框，以及应用程序用户的任何指示。


	Focus on the image contents and the situation in the application.
	关注图像内容和应用中的情境。


2. If the image includes a mouse cursor, please describe what UI
2. 如果图像中包含鼠标光标，请描述所指的用户界面


	element the mouse is currently located near. Pay attention to the
	鼠标当前所在的元素附近。注意


	coordinates of the pointer tip, not the center of the mouse cursor
	指针尖端的坐标，而非鼠标光标的中心


3. Pay attention to all UI items and contents in the image. Do not
3. 注意图像中的所有界面元素和内容。不要


	make assumptions about the layout.
	对布局做出假设。


4. DO NOT describe overlayed bounding boxes in this description, only
4. 不要在此描述中描述叠加的边界框，仅


	the relevant UI items themselves. Focus on the state of the
	相关的UI项目本身。关注其状态


	application UI and what the key UI items of interest for the task
	应用程序界面及任务中关键的界面元素


	would be. Describe any relevant open panels, dialogs, menus, etc.
	将会是怎样的。描述任何相关的打开面板、对话框、菜单等。


Target_object_name:
目标对象名称：


As an application expert and a helpful assistant, you can determine
作为应用专家和有用的助手，您可以确定


	the most relevant UI items for completing the current subtask, if
	完成当前子任务最相关的用户界面项，如果


	needed. What item should be detected to complete the task based on
	根据当前截图和当前子任务，完成任务需要检测哪个项目？


	the current screenshot and the current subtask? You should obey
	你应遵守


	the following rules:
	以下规则：


1. The item should be present in the screen and relevant to the
1. 该项目应出现在屏幕上且与当前子任务或整体任务相关。只需命名该项目，不要添加任何修饰词或额外信息。


	current subtask or overall task. Just name the item, without any
	当前子任务或整体任务相关。只需命名该项目，不要添加任何修饰词或额外信息。


	modifiers or extra information.
	修饰词或额外信息。


2. If the item of itnerest of not on the current screen, only output '
2. 如果感兴趣的项目不在当前屏幕上，只输出“


	Target items not in current screen".
	当前屏幕中无目标项目”。


2. If no explicit item is specified, only output "null".
2. 如果未明确指定项目，只输出“null”。


3. If there is no need to detect a target item in this state, only
3. 如果此状态下无需检测目标项目，只输出“null”。你必须在回复中输出此字段。


	output "null". You must output this field in the response.
	输出“null”。你必须在回复中输出此字段。


Reasoning_of_object: Why was this item chosen, or why is there no need
对象推理：为何选择该项目，或为何此阶段无需检测UI项目？


	to detect an UI item at this stage?
	为何此阶段无需检测UI项目？


You should only respond in the format described below and not output
你应仅以以下描述的格式回复，不得输出评论或其他信息。切勿更改任何回复项的标题。


	comments or other information. DO NOT change the titles of any
	评论或其他信息。切勿更改任何回复项的标题。


	response items.
	回复项的标题。


Image_Description:
图像描述：


1. ...



2. ...



3. ...



Target_object_name:
目标对象名称：


name
名称


Reasoning_of_object:
对象推理：


...



---



Prompt 31: Outlook: Self-Reflection prompt.
提示31：展望：自我反思提示。


---



You an expert helpful AI assistant which follows instructions and
你是一位遵循指令的专业且乐于助人的人工智能助手


	performs desktop computer tasks as instructed. You have expert
	按照指示执行桌面计算机任务。您具备专家级


	knowledge of 'Microsoft Outlook' on the PC and can handle a wide
	具备PC端“Microsoft Outlook”（微软Outlook）的知识，能够熟练操作多种功能


	range of tasks in the application using the keyboard, shortcut
	使用键盘快捷键执行应用中的一系列任务


	keys, and mouse operations. For each step, you will get one or
	键盘和鼠标操作。每一步，您将获得一个或


	more observation images, which are screenshots of the computer
	更多观测图像，即计算机屏幕截图


	screen. Your advanced capabilities enable you to process and
	屏幕。您先进的能力使您能够处理和


	interpret these application screenshots and other relevant
	解释这些应用程序截图及其他相关内容


	information in detail.
	详细信息。


You MUST examine all inputs, interpret the in-application and OS
您必须检查所有输入，解释应用程序内和操作系统中的内容


	contexts, and determine whether the executed action has taken the
	上下文，并确定所执行的操作是否已产生


	correct effect.
	正确的效果。


Overall task description:
整体任务描述：


<\$task_description\$>



Execution step images:
执行步骤图像：


<\$image_introduction\$>



Current image description:
当前图像描述：


<\$current_image_description\$>



Last executed action with parameters used:
上一次执行的操作及使用的参数：


<\$previous_action_call\$>



Implementation of the last executed action:
上一次执行操作的实现：


<\$action_code\$>



Error report for the last executed action:
上一次执行操作的错误报告：


<\$executing_action_error\$>



Key reason for the last action:
上一次操作的关键原因：


<\$key_reason_of_last_action\$>



Success_Detection flag for the overall task:
整体任务的成功检测标志：


<\$success_detection\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Current and previous screenshot are the same:
当前截图与之前截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	之前截图中的相同：


---



---



<\$mouse_position_same_flag\$>



As the textual history may not completely record some effects of
由于文本历史可能无法完全记录


	previous actions, you should closely evaluate every part of the
	之前操作的一些效果，您应仔细评估


	screenshots to understand what was supposed to happen and what has
	截图的每个部分，以理解预期发生的情况及实际情况。


	actually happened.
	实际上发生了。


Self_Reflection_Reasoning: You need to answer the following questions,
自我反思推理：你需要回答以下问题，


	step by step, to describe your reasoning based on the last action
	一步步地，根据上一步操作描述你的推理过程


	and sequential screenshots of the application during the
	以及应用程序在此期间的连续截图


	execution of the last action. Any action involving $x$ and $y$
	最后一个动作的执行。任何涉及$x$和$y$的动作


	coordinates is an action involving movement.
	坐标是一种涉及移动的动作。


1. What is the last executed action not based on the sequential
1. 最后执行的非顺序操作是什么


	screenshots?
	截图？


2. Was the last executed action successful? Give reasons. You should
2. 上一次执行的操作成功了吗？请说明理由。你应该


	refer to the following rules:
	请参照以下规则：


- If the action involved typing text, was it typed correctly at the
- 如果操作涉及输入文本，文本是否在


	right location? Do not trust only the textual information as it
	正确的位置？不要仅仅相信文本信息，因为它


	may not provide enough detail. Perform a thorough and detailed
	可能无法提供足够的细节。请进行彻底且详细的


	inspection of the provided creenshots! This is a critical check at
	对所提供截图的检查！这是一个关键的检查点


	every step!
	每一步！


- If the action involved moving the mouse, it is considered
- 如果操作涉及移动鼠标，则视为


	unsuccessful when the mouse position remains unchanged or moved in
	当鼠标位置保持不变或在连续截图中以错误方式移动时，操作会失败


	an incorrect way across sequential screenshots, regardless of
	无论背景元素和其他项目如何


	background elements and other items.
	。


- If the position to move the mouse to was incorrect and the mouse
- 如果鼠标移动的位置不正确且未到达目标UI元素，请更加注意


	didn't reach the target UI element, pay more attention to the
	准确的位置或要移动到的UI项目


	accurate location or UI item to move to.
	。


- Are you sure the latest screenshot shows UI items that correspond to
- 你确定最新的截图显示的UI项目与上一步操作的成功相对应吗？例如，如果你尝试


	the success of the previous action? For example, if you tried to
	点击“垃圾箱”文件夹，最新的截图应显示该文件夹，而不是“收件箱”或其他


	click on the "Junk" folder, the latest screenshot should show that
	。


	folder, not "Inbox" or others.
	文件夹


- Triggering an action in the last step is not enough to say it was
- 仅仅触发上一步的操作不足以说明操作完全成功。至少相关的UI必须发生变化


	completely successfully. At least some relevant UI must change.
	。


	Pay attention to the application states in the screenshots and any
	请关注截图中的应用状态及任何差异


	differences.
	。


- If the action seemed to have no effect, pay attention to the latest
- 如果操作似乎没有效果，请注意最新的鼠标位置。它移动了吗？它是否更接近目标UI


	mouse position. Did it move? Did it get closer to the target UI
	？


	element? Was the target in the action wrong? The position of the
	元素？动作中的目标错了吗？位置


	mouse cursor on the screenshot shows their location.
	截图上的鼠标光标显示了它们的位置。


- Was some unrelated UI item triggered by the last action?
- 上一个操作是否触发了某个无关的界面元素？


3. If the last action is not executed successfully, what is the most
3. 如果最后一个操作未成功执行，最


	probable cause? You should give only one cause and refer to the
	合理理由？你只需给出一个原因并参考


	following rules:
	以下规则：


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- If it was an action involving moving the mouse or the text cursor,
- 如果是涉及移动鼠标或文本光标的操作，


	the most probable cause was that the coordinates or destination
	最可能的原因是坐标或目的地


	location used were incorrect.
	使用的位置不正确。


- If you already tried the same action more than one time and there
- 如果你已经多次尝试了同样的操作，并且那里


	was no effect. DO NOT REPEAT the same action again until you have
	没有效果。在你完成之前，不要重复相同的操作


	tried something else.
	尝试了其他方法。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是


	action was unavailable or not activated at the current state.
	操作在当前状态下不可用或未激活。


- If an unrelated change happened in the UI, the most probable cause
- 如果用户界面发生了无关的变化，最可能的原因是


	was that the action triggered an incorrect UI element.
	触发了错误的用户界面元素。


- If there is any error report, analyze the cause based on the report.
- 如果有任何错误报告，请根据报告分析原因。


Success_Detection:
成功检测：


Based on the last action, the current screenshots and the
基于上一次操作、当前截图和


	Success_Detection flag, determine whether the overall task was
	成功检测标志，判断整体任务是否


	successful. This assessment should consider the overall task's
	成功。此评估应考虑整体任务的


	success, not just individual actions.
	成功，而非单个操作。


- If the task was unsuccessful, specify the reason of failure and
- 如果任务未成功，说明失败原因及


	which steps are missing.
	缺失的步骤。


- Pay extra attention to the application state in the latest
- 特别关注最新截图中的应用状态。


	screenshot. Is it consistent with the task being completed
	是否与任务成功完成一致？


	successfully? Or is there evidence that the task is still ongoing?
	或者是否有任务仍在进行的证据？


- If the task was successful, ONLY output "SUCCESSFUL".
- 如果任务成功，仅输出“SUCCESSFUL”。


You should only respond in the format as described below.
你应仅以以下描述的格式回复。


Self_Reflection_Reasoning :
自我反思推理：


1. ...



2. ...



3. ...



Success_Detection:
成功检测：


...



---



Prompt 32: Outlook: Task Inference prompt.
提示32：展望：任务推断提示。


---



You an expert helpful AI assistant which follows instructions and
你是一位遵循指令的专业且乐于助人的人工智能助手


	performs desktop computer tasks as instructed. You have expert
	按照指示执行台式电脑任务。您具备专家级


	knowledge of 'Microsoft Outlook' on the PC and can handle a wide
	具备PC端“Microsoft Outlook”（微软Outlook）的知识，能够熟练操作多种功能


	range of tasks in the application using the keyboard, shortcut
	使用键盘快捷键执行应用中的一系列任务


	keys, and mouse operations. For each step, you will get one or
	键盘和鼠标操作。每一步，您将获得一个或


	more observation images, which are screenshots of the computer
	更多观测图像，即计算机屏幕截图


	screen. Your advanced capabilities enable you to process and
	屏幕。您先进的能力使您能够处理和


	interpret these application screenshots and other relevant
	解释这些应用程序截图及其他相关内容


	information in detail.
	详细信息。


You will receive a sequence of <\$event_count\$> screenshots,
您将收到一系列共<\$event_count\$>张截图，


	corresponding descriptions of recent events, and a summary of the
	最近事件的相应描述及其摘要


	history of events before the last screenshot. Please summarize the
	最后截图之前的事件历史。请总结


	events for future decision-making and also propose the most
	为未来决策提供事件信息，并提出最合适的方案


	suitable subtasks to execute next, given the overall target task.
	根据整体目标任务，选择适合接下来执行的子任务。


Here is some helpful information to help you do the summarization and
这里有一些有助于你进行总结的有用信息


	propose the subtask.
	提出子任务。


Overall task description:
整体任务描述：


<\$task_description\$>



Previous proposed subtask for the task:
之前提出的任务子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出子任务的先前推理：


<\$subtask_reasoning\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Last executed action:
上一次执行的操作：


<\$previous_action\$>



Error report for the last executed action:
上一次执行操作的错误报告：


<\$executing_action_error\$>



Key decision-making reasoning for the last executed action:
上一次执行操作的关键决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
上一次执行操作的自我反思：


<\$self_reflection_reasoning\$>



Success_Detection for the overall task:
整体任务的成功检测：


<\$success_detection\$>



The following is the summary of history that happened before the last
以下是上一次之前发生的历史总结


	screenshot :
	截图：


<\$previous_summarization\$>



---



---



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历，


	especially the last step according to the decision-making
	特别是根据决策推理的最后一步


	reasoning and self-reflection reasoning for the last executed
	和上一次执行操作的自我反思推理。


	action. The summarization needs to be precise, concrete, highly
	总结需要精准、具体、高度


	related to the task, and follow the rules below.
	与任务相关，并遵守以下规则。


1. Summarize the tasks from the history and the current task. What is
1. 总结历史任务和当前任务。内容是什么


	the current progress of the task? For example, to open a file, you
	任务的当前进展？例如，要打开一个文件，你


	first need to select the file, then open it by clicking somewhere
	首先需要选择文件，然后点击某处打开它


	or using the keyboard. Subtasks may have other pre-requisites.
	或使用键盘。子任务可能有其他先决条件。


2. Record the successful actions and organize them into events, step
2. 记录成功的操作并将其组织成事件，步骤


	by step.
	逐步进行。


3. Which subtask has been completed? Which subtasks have not?
3. 哪个子任务已经完成？哪些子任务尚未完成？


4. Do not forget the information and key events in the previous steps
4. 不要忘记前面步骤中的信息和关键事件


	of the overall task.
	整个任务的。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task, and be
	应该直截了当，有助于目标任务，并且是


	most suitable for the current situation; which should be completed
	最适合当前情况；应当完成


	within a few actions. Use your knowledge of keyboard shortcuts to
	在几步操作内。利用你对键盘快捷键的了解来


	accomplish subtasks. You should respond with:
	完成子任务。你应当回复：


1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应当逐步分析。


	Subtasks can involve keyboard shortcuts, using the mouse, or
	子任务可能涉及键盘快捷键、使用鼠标，或


	executing other skills.
	执行其他技能。


2. What is the current progress of the target task according to the
2. 根据问题1中的分析，目标任务当前进展如何？如果之前未提及所需信息，请勿做任何假设。你应假设从零开始执行任务。请严格遵循当前整体任务的描述和要求。


	analysis in question 1? Please do not make any assumptions if
	


	needed information is not mentioned previously. You should assume
	


	that you are doing the task from scratch. Please strictly follow
	


	the description and requirements in the current overall task.
	


3. What is the previous subtask? Has the previous subtask finished
3. 上一个子任务是什么？根据自我反思，上一个子任务是否已完成？或者是否不适合当前情况？如果上一个子任务已完成或当前不适合，请选择一个新的子任务。否则应重复使用上一个子任务。


	according to self-reflection? Or is it improper for the current
	


	situation? If the last subtask already finished or now is improper
	


	, please select a new one. Otherwise you should reuse the last
	


	subtask.
	


4. If you propose a new subtask, give the reasons why it is more
4. 如果你提出了一个新的子任务，请说明其在当前应用情境中更可行的原因。请严格遵循当前


	feasible in the current situation in the application. Please
	


	strictly follow the description and requirements in the current
	整体任务的描述和要求。


	overall task.
	整体任务。


5. The proposed subtask needs to be precise and concrete within one
5. 所提出的子任务需要在一句话内准确具体。


	sentence. It should not be directly related to any skills.
	它不应直接涉及任何技能。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且不输出评论或其他信息。


	not output comments or other information.
	不要输出评论或其他信息。


History_summary:
历史摘要：


The summary of past events is...
过去事件的总结是……


Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask_description:
子任务描述：


The current subtask is ...
当前子任务是……


---



Prompt 33: Outlook: Action Planning prompt.
提示33：Outlook（微软邮箱）：行动计划提示。


---



You an expert helpful AI assistant which follows instructions and
你是一名遵循指令并执行桌面电脑任务的专家级智能助手。


	performs desktop computer tasks as instructed. You have expert
	你具备丰富的“Microsoft Outlook”（微软邮箱）PC端知识，能通过键盘、快捷键和鼠标操作处理应用中的多种任务。


	knowledge of 'Microsoft Outlook' on the PC and can handle a wide
	你对“Microsoft Outlook”（微软邮箱）有专业知识，能使用键盘、快捷键和鼠标操作处理应用中的广泛任务。


	range of tasks in the application using the keyboard, shortcut
	你能使用键盘、快捷键和鼠标操作完成应用中的各种任务。


	keys, and mouse operations. For each step, you will get one or
	每一步，你将获得一条或多条指令。


	more observation images, which are screenshots of the computer
	更多观测图像，即计算机屏幕截图


	screen. Your advanced capabilities enable you to process and
	屏幕。您先进的能力使您能够处理和


	interpret these application screenshots and other relevant
	解释这些应用程序截图及其他相关内容


---



---



	information in detail. The screenshot includes numerical tags (   )
	详细的信息。截图中包含数字标签（   ）


	label IDs) and bounding boxes marking some UI items.
	<label IDs>标签和标记某些用户界面项目的边界框。


Based on your analysis of screenshots and knowledge of the application
基于您对截图的分析和对该应用程序的了解


	, keyboard shortcuts, and general GUI design, you will identify
	, 键盘快捷键和通用图形用户界面设计，你将识别


	the most suitable in-application action to take next, given the
	鉴于当前情况，下一步最合适的应用内操作是


	current task. Upon evaluating the provided information, you MUST
	当前任务。评估所提供的信息后，您必须


	choose the precise actions to perform, considering the
	选择要执行的具体操作，考虑到


	applications's present circumstances, and specify any necessary
	应用程序的现状，并说明任何必要的


	parameters to execute the desired action.
	执行所需操作的参数。


Here is some helpful information to help you make the correct decision
这里有一些有用的信息，帮助你做出正确的决定


Overall task description:
整体任务描述：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Few shots:
少数镜头：


<\$few_shots\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Current and previous screenshot are the same: <\$image_same_flag\$>.
当前截图与之前截图相同：<\$image_same_flag\$>。


	Mouse position in the current screenshot is the same as in the
	当前截图中的鼠标位置与


	previous screenshot: <\$mouse_position_same_flag\$>.
	之前截图相同：<\$mouse_position_same_flag\$>。


Description of the current screenshot:
当前截图描述：


<\$image_description\$>



Potential target UI item and label ID:
潜在目标界面元素及标签ID：


<\$target_object_name\$>



Last executed action:
上一次执行的操作：


<\$previous_action\$>



Key reason for the last action:
上一次操作的关键原因：


<\$key_reason_of_last_action\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$previous_summarization\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Success detection for overall task:
整体任务的成功检测：


<\$success_detection\$>



Based on the above information, you should first analyze the current
基于以上信息，您应首先分析应用程序的当前


	situation of the application and provide the reasoning behind what
	情况，并提供完成任务下一步应采取措施的理由。


	should be the next step to complete the task. Then, you should
	然后，您应


	output the exact action to be executed in the application. As the
	输出将在应用程序中执行的具体操作。由于


	textual history may not completely record some effects of previous
	文本历史可能无法完全记录某些先前的影响


	actions, you should closely evaluate every part of the
	操作时，您应仔细评估每个部分


	screenshots to understand what you have done and what you should
	截图以了解您已经做了什么以及您应该做什么


	do next. Pay attention to your application knowlege and all
	接下来做。注意你的应用知识和所有内容


	contents in the image. You also have great OCR capabilities. DO
	图像中的内容。您还具备出色的光学字符识别（OCR）能力。DO


	NOT make assumptions about the layout! If the image includes a
	不要对布局做出假设！如果图像包含


	mouse cursor, pay close attention to the coordinates of the
	鼠标光标，请密切关注坐标


	pointer tip, not the center of the mouse cursor. Remember you know
	指针尖端，而不是鼠标光标的中心。记住你知道


---



---



	the common keyboard shortcuts for Microsoft Outlook on Windows
	Windows系统中Microsoft Outlook的常用键盘快捷键


	and can use them instead of the mouse. You should respond with the
	并且可以用它们代替鼠标。你应该回复


	following information, and you MUST answer them one by one.
	以下信息，您必须逐一回答。


Does "<\$success_detection\$>" mean the overall task was successful? If
“<\$success_detection\$>”是否意味着整个任务成功完成？如果


	successful, ignore decision making and action questions. No new
	成功，忽略决策和行动相关的问题。无新的


	action needs to be taken and output action MUST be empty, like '..
	需要采取行动且输出动作必须为空，例如'..


	Be careful to check the task was really successful though!
	不过，务必仔细确认任务确实成功完成！


Decision_Making_Reasoning: You should think step by step and provide
决策推理：你应当逐步思考并提供


	detailed reasoning to determine the next action executed on the
	详细推理以确定接下来执行的操作


	current state of the task.
	任务的当前状态。


	1. Do you know any keyboard shortcuts for Microsoft Outlook on
	1. 你知道微软Outlook的任何键盘快捷键吗


	Windows that can be used to accomplish this subtask? Which one?
	可以用来完成这个子任务的窗口有哪些？哪一个？


	2. If the current screenshot is the same as the previous
	2. 如果当前截图与之前相同


	screenshot, DO NOT output the same action as the last executed
	截图，切勿重复执行上一次的操作


	action with the same parameters as in the previous step, as it was
	与上一步相同参数的操作，保持不变


	not useful!!!
	没用！！！


	3. Prefer keyboard operations and skills, instead of mouse
	3. 优先使用键盘操作和技巧，而非鼠标


	operations. Are there any keyboard actions, such as shortcut keys
	操作。是否有任何键盘操作，例如快捷键


	like press_keys_combined(["ctrl", "s"]) to save, or press_key("
	比如按下组合键["ctrl", "s"]来保存，或者按下键("


	enter") to confirm, that can complete the current step or the
	按“Enter”键确认，可以完成当前步骤或


	overall task? If yes, please specify what the action is and ignore
	整体任务？如果是，请具体说明该操作是什么，并忽略


	questions 5 to 8 .
	第5至8题。


	4. Which skill in the available Python action set has the closest
	4. 在可用的Python动作集中，哪项技能最接近


	semantics to the current subtask? If there is any, select it as
	与当前子任务的语义相关吗？如果有，请选择它作为


	the output action and ignore questions 5 to 8 .
	输出动作，忽略第5至第8题。


	5. Carefully identify if there is a bounding box label ID for the
	5. 仔细确认是否存在边界框标签ID


	UI item relevant for the current step. Be extra careful to use the
	当前步骤相关的界面元素。务必特别注意使用


	correct label ID and describe why you selected the given ID, if
	正确的标签ID并说明你选择该ID的原因，如果


	any! If there is text within this bounding box area, please
	任何内容！如果此边界框区域内有文本，请


	provide that text in your reasoning. If there is no text, provide
	在你的推理中提供该文本。如果没有文本，请提供


	a visual description of the UI item inside the bounding box. Only
	边界框内UI元素的视觉描述。仅限


	directly generate normalized $x,y$ coordinates if no suitable label
	如果没有合适的标签，直接生成归一化的$x,y$坐标


	ID is present.
	ID已存在。


	6. If a mouse cursor is present in the image, pay attetion to
	6. 如果图像中出现鼠标光标，请注意


	which ID-labeled bounding box or unlabelled UI item the cursor's
	光标所在的带ID标签的边界框或未标记的界面元素


	tip is located, not the center of the cursor.
	提示位于光标的尖端，而非中心。


	7. If not absolutely sure if a UI item or location is correct to
	7. 如果不完全确定某个界面元素或位置是否正确，


	click, you can first just hover the mouse over it and check for
	点击前，你可以先将鼠标悬停在其上查看


	more information. If it is the right item, you can choose to click
	更多信息。如果是正确的项目，您可以选择点击


	on it in the next reasoning step.
	在下一步推理中进行处理。


	8. If there is a dialog or menu opened after the previous action,
	8. 如果在上一步操作后弹出了对话框或菜单，


	pay attention to any missing step before clicking on its buttons.
	请注意是否有遗漏的步骤，然后再点击其按钮。


	For example, before clicking "Save", make sure a correct file name
	例如，在点击“保存”之前，确保正确的文件名


	is typed in the correct text field.
	已输入到正确的文本框中。


	9. If the previous action is unsuccessful, consider an alternative
	9. 如果上一步操作未成功，尽可能考虑替代操作。


	action if possible. If there is an alternative action, please
	如果存在替代操作，请说明具体内容。


	specify what it is. Such as click a different label ID or use a
	例如点击不同的标签ID或使用


	different keyboard shortcut.
	不同的键盘快捷键。


	10. If you think the next step will be to type text, confirm the
	10. 如果你认为下一步是输入文本，确认


	text cursor is in the correct location or that the last executed
	文本光标位于正确位置，或上一步操作是在合适的输入区域点击。


	action was a click at the appropriate input area. If neither is
	如果两者都不满足，需先点击相应的输入框，


	true, you have to click the corresponding input box before
	然后再进行输入。


	proceeding with typing.
	


Actions: The best action, or short sequence of actions without gaps,
操作：接下来执行的最佳操作，或无间断的简短操作序列，


	to execute next to progress towards the task goal. Pay attention
	以推动任务目标的完成。注意


	to the names of the available skills, keyboard shortcuts, and the
	可用技能名称、键盘快捷键以及


	previous skills already executed. Pay special attention to the
	之前已执行的技能。特别注意


	coordinates or bounding box label ID of any action that needs them
	需要它们的任何动作的坐标或边界框标签ID


	. Do not make assumptions about the location of UI elements or
	不要对界面元素的位置做出假设或


	their coordinates, analyse in detail any provided images! You
	他们的坐标，详细分析任何提供的图像！你


	should also pay more attention to the following action rules:
	还应更加注意以下操作规则：


---



---



	1. Which keyboard shortcuts do you know for this application that
	1. 你知道这个应用程序有哪些键盘快捷键吗


	can be used to accomplish exactly this specific subtask? Be
	可以用来完成正是这个具体子任务吗？


	precise to the current subtask step. Keyboard shortcuts are more
	精确到当前子任务步骤。键盘快捷键更


	reliable than using the mouse as you tend to choose the correct UI
	比使用鼠标更可靠，因为你倾向于选择正确的用户界面


	item, but act on the wrong label ID or position. If there is no
	项目，但作用于错误的标签ID或位置。如果没有


	applicable shortcut, you can choose typing text or other forms of
	适用的快捷方式，您可以选择输入文本或其他形式


	UI interaction. Don't recomment a single key press that may not
	用户界面交互。不要推荐可能无效的单键操作


	apply in this exact situation.
	适用于这种特定情况。


	2. You should output actions in Python code format and specify any
	2. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. Only use function
	执行该操作所需的参数。仅使用函数


	names and argument names exactly as shown in the valid action set.
	名称和参数名称须与有效操作集中的完全一致。


	If a function has parameters, you should also include their names
	如果函数有参数，你也应该包括它们的名称


	and decide their values, like "press_shift (duration=1)". If it
	并决定它们的值，比如 "press_shift (duration=1)"。如果


	does not have a parameter, just output the action, like "
	没有参数，就直接输出动作，比如 "


	release_mouse_buttons()".
	release_mouse_buttons()"。


	3. Given the current situation and task, you should only choose
	3. 根据当前情况和任务，你应只从有效动作集中选择


	the most suitable action from the valid action set. You cannot use
	最合适的动作。不能使用不在有效动作集中的


	actions that are not in the valid action set to control the
	动作来控制


	application.
	应用程序。


	4. When you decide to perform a mouse action, if there is bounding
	4. 当你决定执行鼠标操作时，如果当前截图中有边界框，


	box in the current screenshot, you MUST choose the skill
	你必须选择技能


	click_on_label(label_id, mouse_button). Be careful to use the
	click_on_label(label_id, mouse_button)。注意使用


	correct label ID number.
	正确的标签ID编号。


	5. When you perform a mouse action, always select the target UI
	5. 执行鼠标操作时，总是选择距离上一个操作的UI元素


	element closest to the UI element of the previous action for
	最近的目标UI元素进行


	operation.
	操作。


	6. When you decide to operate on a file, such as downloading it,
	6. 当你决定操作文件时，比如下载它，


	please pay attention to the file path and to the name of the
	请注意文件路径和当前文件的名称。


	current file.
	当前文件。


	7. If upon self-reflection you think the target coordinates or
	7. 如果经过自我反思你认为目标坐标或标签ID存在问题，


	label ID were an issue, you MUST pay close attention to choosing
	你必须仔细选择新的坐标或新的标签ID，确保它们与之前的不同或不太相似。


	new coordinates or a new label ID that are not the same or too
	新的坐标或新的标签ID，确保它们与之前的不同或不太相似。


	similar to the previous ones.
	与之前的不同或不太相似。


	8. If upon self-reflection you think the last action was
	8. 如果经过自我反思你认为上一个操作在当前状态下不可用，


	unavailable at the current state, you SHOULD try to take another
	你应尝试执行其他操作以启用所需的操作。


	action to try to enable the desired action.
	尝试执行其他操作以启用所需的操作。


	9. If you leave the application incorrectly, you can go back to it
	9. 如果你错误地离开了应用程序，可以直接使用技能 go_back_to_target_application() 返回，


	directly using the skill go_back_to_target_application(). No need
	无需使用鼠标。


	to use the mouse.
	无需使用鼠标。


You should only respond in the format described below. In your
你应仅按照下面描述的格式进行回复。在选择操作的理由中，


	reasoning for the chosen actions, also describe which item you
	还需描述你决定交互的项目及原因。不要更改每个项目的标题。


	decided to interact with and why. DO NOT change the title of each
	不要更改每个项目的标题。


	item. You should not output other comments or information besides
	除非输出其他评论或信息。


	the format below:
	以下格式：


Decision_Making_Reasoning:
决策推理：


1. ...



2. ...



3. ...



...



Actions:
操作：


<<opython
<<opython


	action (   )
	操作 (   )


ccc
ccc


Key_reason_of_last_action:
上次操作的关键原因：


...



---



Prompt 34: Capcut: Information Gathering prompt.
提示34：Capcut：信息收集提示。


---



Assume you are a helpful AI assistant integrated with 'CapCut' on the
假设你是集成在PC端“CapCut”中的智能助手，


	PC, equipped to handle a wide range of tasks in the application.
	能够处理应用中的各种任务。


	Capcut is a video editing software. Your advanced capabilities
	Capcut是一款视频编辑软件。你具备高级能力，


---



---



	enable you to process and interpret application screenshots and
	能够处理和解读应用截图及


	other relevant information.
	其他相关信息。


Image introduction:
图片介绍：


<\$image_introduction\$>



Overall task description:
整体任务描述：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Image_Description:
图像描述：


1. Please describe the screenshot image in detail. Pay attention to
1. 请详细描述截图图像。请注意


	any details in the image, if any, especially critical icons, or
	图像中的任何细节（如果有），尤其是关键图标，或


	created items.
	已创建的项目。


2. If the image includes a mouse cursor, please describe what UI
2. 如果图像中包含鼠标光标，请描述所指的用户界面


	element the mouse is currently located near. Pay attention to the
	鼠标当前所在的元素附近。注意


	coordinates of the pointer tip, not the center of the mouse cursor
	指针尖端的坐标，而非鼠标光标的中心


3. Pay attention to all UI items and contents in the image. Do not
3. 注意图像中的所有界面元素和内容。不要


	make assumptions about the layout.
	对布局做出假设。


Description_of_bounding_boxes:
边界框描述：


Please provide a list of EVERY bounding box from label ID of 1 to <
请提供标签ID从1到<的所有边界框列表


	\$length_of_som_map\$> ONE BY ONE. The label IDs are marked in the
	\$length_of_som_map\$> 一一对应。标签ID标记在


	upper left corner of the bounding boxes.
	边界框的左上角。


For bounding boxes containing text, provide ONLY the text.
对于包含文本的边界框，仅提供文本内容。


For bounding boxes without text, brief description of the function.
对于无文本的边界框，简要描述其功能。


Format your response as follows: '1: function_a', '2: text_b', ..., '<
请按以下格式回复：'1: function_a', '2: text_b', ..., '


	\$length_of_som_map\$>: function_b'. Don't write anything you are
	\$length_of_som_map\$>: function_b'。不要写任何你是


	not sure about.
	不确定。


Target_object_name: Assume you can use an object detection model to
目标对象名称：假设您可以使用一个目标检测模型来


	detect the most relevant object or UI item for completing the
	检测完成任务所需的最相关对象或界面元素


	current task if needed. What item should be detected to complete
	如有需要，完成当前任务应检测什么项目


	the task based on the current screenshot and the current task? You
	基于当前截图和当前任务的任务？你


	should obey the following rules:
	应遵守以下规则：


1. Identify an item that is relevant to the current or intermediate
1. 确定与当前或中间阶段相关的项目


	target of the task. If the item is within a bounding box in the
	任务的目标。如果该项目位于边界框内


	screenshot, please include the corresponding label ID.
	截图时，请包含相应的标签ID。


2. If no explicit item is specified, only output "null".
2. 如果未指定明确的项目，则仅输出“null”。


3. If there is no need to detect an object, only output "null".
3. 如果不需要检测对象，则仅输出“null”。


Reasoning_of_object: Why was this object chosen, or why is there no
对象的推理：为什么选择了这个对象，或者为什么没有选择


	need to detect an object?
	需要检测一个物体吗？


You should only respond in the format described below and not output
您应仅以以下描述的格式回复，不要输出其他内容


	comments or other information. DO NOT change the title of each
	评论或其他信息。请勿更改每个标题


	item.
	项目。


Image_Description:
图像描述：


1. ...



2. ...



3. ...



Description_of_bounding_boxes:
边界框描述：


Format like: 1: function_a', '2: text_b', ..., '<\$len_of_bound_boxes\$
格式如：1: function_a', '2: text_b', ..., '<\$len_of_bound_boxes\$


	>: function_b
	>: function_b


Target_object_name:
目标对象名称：


label ID, Name
标签ID，名称


Reasoning_of_object:
对象推理：


...



---



---



Assume you are a helpful AI assistant integrated with 'CapCut' on the
假设你是集成在PC端“CapCut”中的智能助手，


	PC, equipped to handle a wide range of tasks in the application.
	能够处理应用中的各种任务。


	Capcut is a video editing software. Your advanced capabilities
	CapCut是一款视频编辑软件。你具备高级能力，


	enable you to process and interpret application screenshots and
	能够处理和解析应用截图及


	other relevant information. Your task is to examine these inputs,
	其他相关信息。你的任务是审查这些输入，


	interpret the in-application and OS context, and determine whether
	解读应用内及操作系统上下文，并判断


	the executed action has taken the correct effect.
	所执行的操作是否产生了正确的效果。


Overall task description:
整体任务描述：


<\$task_description\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Last executed action with parameters used:
上次执行操作及其使用的参数：


<\$previous_action_call\$>



Implementation of the last executed action:
上次执行操作的实现：


<\$action_code\$>



Error report for the last executed action:
上次执行操作的错误报告：


<\$executing_action_error\$>



Key reason for the last action:
上次操作的关键原因：


<\$key_reason_of_last_action\$>



History Summarization
历史总结


<\$history_summary\$>



Success_Detection flag for the overall task:
整体任务的成功检测标志：


<\$success_detection\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Current and previous screenshot are the same:
当前截图与前一截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	前一截图中的相同：


<\$mouse_position_same_flag\$>



Self_Reflection_Reasoning:
自我反思推理：


You need to answer the following questions, step by step, to describe
你需要逐步回答以下问题，描述


	your reasoning based on the history summarization, last action and
	基于历史总结、上次操作及


	sequential screenshots of the application during the execution of
	执行上次操作期间应用程序的连续截图，


	the last action.
	你的推理过程。


1. Please describe what the page is in the current screenshot. Respond
1. 请描述当前截图中的页面内容。请用一句话回答。


	in one sentence.
	


2. What is the last executed action based on the text information
2. 根据上述文本信息，最后执行的操作是什么？


	above?
	


3. Was the last executed action successful? Give reasons. You should
3. 最后执行的操作是否成功？请给出理由。你应当


	refer to the following rules:
	参考以下规则：


- If the action involves moving the mouse, it is considered
- 如果操作涉及移动鼠标，当鼠标位置在连续截图中保持不变或移动方向错误时，视为不成功，


	unsuccessful when the mouse position remains unchanged or moves in
	无论背景元素和其他项目如何。


	an incorrect way across sequential screenshots, regardless of
	


	background elements and other items.
	


- If the last action executed was empty, then the previous action is
- 如果最后执行的操作为空，则视前一个操作为成功。


	deemed successful.
	


- If the last action was related to choose panel, pay attention to the
- 如果最后的操作与选择面板有关，请注意你所在的面板。该面板是否为你的目标面板？


	panel you are in. Does the panel is your target panel?
	


- If the last action was to drag an element onto the timeline, pay
- 如果最后的操作是将元素拖动到时间轴上，请注意当前时间轴与


	attention to the difference between the current timeline and the
	之前时间轴的区别。


---



---



	previous timeline. Is there the target element you want on the
	前一个时间线。现在时间线上有你想要的目标元素吗？


	timeline now?
	时间线上有吗？


- If the last action was related to crop, pay attention to the video
- 如果上一个操作与裁剪相关，请注意视频长度。


	length. If the video length does not change, it is considered
	如果视频长度没有变化，则视为操作失败。


	unsuccessful.
	操作失败。


- If the last action executed was 'export_project()' and the current
- 如果上一个执行的操作是“export_project()”，且当前截图是Capcut首页，


	screenshot is the Capcut homepage, then the previous action is
	则认为上一个操作成功。


	deemed successful.
	则认为上一个操作成功。


- If the position to move the mouse to was incorrect and the mouse
- 如果鼠标移动的位置不正确，且鼠标未到达目标UI元素，


	didn't reach the target UI element, pay more attention to the
	请更加注意准确的移动坐标。


	accurate coordinates to move to.
	请更加注意准确的移动坐标。


- If the action seemed to have no effect, pay attention to the latest
- 如果操作似乎没有效果，请关注最新的鼠标位置。


	mouse position. Did it move? Did it get closer to the target UI
	鼠标移动了吗？是否更接近目标UI元素？


	element? Where are the target coordinates in the action wrong? The
	操作中的目标坐标哪里出错了？


	position of the mouse cursor on the screenshot shows their
	截图上的鼠标光标位置显示了它们的位置。


	location.
	截图上的鼠标光标位置显示了它们的位置。


- Was some unrelated UI item triggered by the last action?
- 上一次操作是否触发了某个无关的界面元素？


4. If the last action is not executed successfully, what is the most
4. 如果上一次操作未成功执行，最可能的原因是什么？


	probable cause? You should give only one cause and refer to the
	你应只给出一个原因，并参照以下规则：


	following rules:
	


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- If it was an action involving moving the mouse or the text cursor,
- 如果操作涉及移动鼠标或文本光标，


	the most probable cause was that the coordinates used were
	最可能的原因是所用坐标不正确。


	incorrect.
	


- If it is an interaction action, the most probable cause was that the
- 如果是交互操作，最可能的原因是该操作在当前状态下不可用或未激活。


	action was unavailable or not activated in the current state.
	


- If an unrelated change happened in the UI, the most probable cause
- 如果界面发生了无关的变化，最可能的原因是操作触发了错误的界面元素。


	was that the action triggered an incorrect UI element.
	


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


Success_Detection:
成功检测：


Based on the history summarization, the last action, the current
基于历史总结、上一次操作、当前截图和成功检测（Success_Detection）标志，判断是否


	screenshots and the Success_Detection flag, determine whether the
	


	overall task "<\$task_description\$>" was successful. This
	整体任务"<\$task_description\$>"已成功完成。这


	assessment should consider the overall task's success, not just
	评估应考虑整体任务的成功，而不仅仅是


	individual actions.
	单个操作。


- If the last action executed was an empty list and "<
- 如果最后执行的操作是空列表且"<


	\$success_detection\$>" indicates the task is successful, then the
	\$success_detection\$>"表明任务成功，则


	overall task has a high chance of being considered a success.
	整体任务很可能被视为成功。


- If the overall task was unsuccessful, specify the reason of failure
- 如果整体任务未成功，请说明失败原因


	and which steps are missing.
	及缺失的步骤。


- If the overall task was successful, ONLY output "SUCCESSFUL".
- 如果整体任务成功，仅输出"SUCCESSFUL"。


You should only respond in the format as described below.
你应仅以以下描述的格式回复。


Self_Reflection_Reasoning:
自我反思推理：


1. ...



2. ...



3. ...



Success_Detection:
成功检测：


...



---



Prompt 36: Capcut: Task Inference prompt.
提示36：Capcut：任务推断提示。


---



Assume you are a helpful AI assistant integrated with 'CapCut' on the
假设你是集成在PC端“CapCut”中的智能助手，


	the PC, equipped to handle a wide range of tasks in the game.
	能够处理游戏中的各种任务。


	Capcut is a video editing software. You will be sequentially given
	Capcut是一款视频编辑软件。你将依次接收


	<\$event_count\$> screenshots and corresponding descriptions of
	<$event_count$> 张截图及其对应的近期事件描述。


	recent events. You will also be given a summary of the history
	还将提供最后一张截图之前发生的历史摘要。


	that happened before the last screenshot. You should assist in
	您应协助总结事件以便未来决策，


	summarizing the events for future decision-making and also in
	并提出在目标任务下最合适执行的子任务。


	proposing the most suitable subtask to execute next, given the
	给定目标任务，建议最适合执行的子任务。


	target task.
	目标任务。


---



---



Here is some helpful information to help you do the summarization and
以下是帮助您进行总结和提出子任务的一些有用信息。


		propose the subtask.
		帮助您进行总结和提出子任务。


Overall task description:
整体任务描述：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出该子任务的前期推理：


<\$subtask_reasoning\$>



Image introduction:
图片介绍：


<\$image_introduction\$>



Last executed action:
最后执行的操作：


<\$previous_action\$>



Error report for the last executed action:
最后执行操作的错误报告：


<\$executing_action_error\$>



key decision-making reasoning for the last executed action:
最后执行操作的关键决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
最后执行操作的自我反思：


<\$self_reflection_reasoning\$>



Success_Detection for the overall task:
整体任务的成功检测：


<\$success_detection\$>



The following is the summary of history that happened before the last
以下是发生在上一次之前的历史总结


		screenshot:
		截图：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历发生了什么，


		especially the last step according to the decision-making
		尤其是根据决策的最后一步


		reasoning and self-reflection reasoning for the last executed
		最近执行的推理与自我反思推理


		action. The summarization needs to be precise, concrete, highly
		行动。总结需要精准、具体且高度


		related to the task, and follow the rules below.
		与任务相关，并遵守以下规则。


1. Determine if the task has been completed successfully. If it is
1. 确定任务是否已成功完成。如果是


		successful, ignore question 2 to 5 .
		成功，忽略问题2到5。


2. Summarize the tasks from the history and the current task. What is
2. 总结历史任务和当前任务。内容是什么


	the current progress of the task? For example, to open a file, you
	任务的当前进展？例如，要打开一个文件，你


			first need to select the file, then open it by clicking somewhere
			首先需要选择文件，然后点击某处打开它


			or using the keyboard. Subtasks may have other pre-requisites.
			或使用键盘。子任务可能有其他先决条件。


3. Record the successful actions and organize them into events, step
3. 记录成功的操作并将其组织成事件，步骤


		by step.
		逐步进行。


4. Which subtask has been completed? Which subtasks have not? Do not
4. 哪个子任务已完成？哪些子任务尚未完成？不要


		forget the information and key events in the previous steps of the
		忘记之前步骤中的信息和关键事件


			overall task.
			整体任务。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


			whether it is necessary to propose a new subtask. The subtask
			是否有必要提出一个新的子任务。该子任务


		should be straightforward, contribute to the target task, and be
		应该是直接明了的，有助于目标任务，并且


		most suitable for the current situation; which should be completed
		最适合当前情况；应当完成


			within a few actions. You should respond with:
			在几步操作内。你应该回复：


1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应该逐步分析。


- To add Media, Audio, Text, Stickers, Effects, Transitions, Filters,
- 添加媒体、音频、文本、贴纸、特效、转场、滤镜，


		Adjustments or Templates, you should first switch to that panel
		调整或模板，您应先切换到该面板


		and then drag the target object to the video in the timeline.
		然后将目标对象拖动到时间线中的视频上。


- To get content information of a video, you can use related skills.
- 要获取视频的内容信息，您可以使用相关技能。


		For example, you want to know which exactly second you want to
		例如，你想知道确切的哪一秒你想要


		operate.
		操作。


2. What is the current progress of the target task according to the
2. 根据当前情况，目标任务的进展如何


		analysis in question 1? Please do not make any assumptions if they
		问题1中的分析？如果没有明确说明，请不要做任何假设


---



---



	are not mentioned in the above information. You should assume
	未在上述信息中提及。您应当假设


	that you are doing the task from scratch. Please strictly follow
	你是从零开始执行该任务的。请严格遵守


	the description and requirements in the current task.
	当前任务中的描述和要求。


3. What is the previous subtask? Has the previous subtask finished due
3. 上一个子任务是什么？上一个子任务是否已完成


	to self-reflection? Or is it improper for the current situation?
	进行自我反思？还是说这对当前情况不合适？


	If finished or improper, please select a new one, otherwise you
	如果已完成或不合适，请选择一个新的，否则您


	should reuse the last subtask.
	应重复使用最后一个子任务。


4. If you want to propose a new subtask, give reasons why it is more
4. 如果您想提出一个新的子任务，请说明其更为合理的原因


	feasible for the current situation. Please strictly follow the
	适合当前情况。请严格遵守


	description and requirements in the current task.
	当前任务中的描述和要求。


5. The proposed subtask needs to be precise and concrete within one
5. 所提出的子任务需要在一个范围内明确且具体


	sentence. It should not be directly related to any skills.
	句子。它不应直接与任何技能相关。


You should only respond in the format described below, and you should
您应仅以以下描述的格式回复，并且您应


	not output comments or other information.
	不输出评论或其他信息。


History_summary:
历史概述：


1. ...



2. ...



...



Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask_description:
子任务描述：


The current subtask is ...
当前子任务是...


---



Prompt 37: Capcut: Screen Classification prompt.
提示37：Capcut：屏幕分类提示。


---



You are an assistant who assesses my progress in playing Red Dead
你是一个评估我玩《荒野大镖客》（Red Dead）进展的助手


	Redemption 2 on the PC and provides expert guidance. Imagine you
	《荒野大镖客救赎2》电脑版并提供专业指导。想象一下你


	are playing Red Dead Redemption 2 with the keyboard and mouse, the
	正在使用键盘和鼠标玩《荒野大镖客救赎2》


	image is the screenshot of your computer.
	图像是您电脑的截图。


Given the classes, please select the class that best describes the
鉴于这些类别，请选择最能描述的类别


	screenshot.
	截图。


<classes>



You must follow the following criteria:
您必须遵守以下标准：


(1) The output should only be a JSON file. You should not add any
(1) 输出应仅为JSON文件。您不应添加任何内容


	other explanation text along with the JSON.
	其他与JSON一起的说明文本。


(2) You should choose one class for the value of "class".
（2）你应为“class”的值选择一个类别。


(3) Do not change the "type": "screen_classification" in your output.
(3) 不要更改输出中的 "type": "screen_classification"。


The output format should be as follows:
输出格式应如下所示：


Classes:
类别：


map
地图


---



Prompt 38: Capcut: Action Planning prompt.
提示38：Capcut：操作规划提示。


---



You are a helpful AI assistant integrated with 'CapCut' on the PC,
你是集成在PC端“CapCut”中的智能助手，


	equipped to handle a wide range of tasks in the application.
	能够处理应用中的各种任务。


	Capcut is a video editing software. Your advanced capabilities
	Capcut是一款视频编辑软件。你的高级功能


	enable you to process and interpret application screenshots and
	使你能够处理和解读应用截图及


	other relevant information. By analyzing these inputs, you gain a
	其他相关信息。通过分析这些输入，你获得了


	comprehensive understanding of the current context and situation
	对应用当前上下文和情境的全面理解。


	within the application. Utilizing these insights, you are tasked
	利用这些洞察，你的任务是


	with identifying the most suitable in-application action to take
	在当前任务下，识别最合适的应用内操作步骤，


	next, given the current task. You control the application and can
	你可以控制应用并执行可用操作集中的动作，


	execute actions from the available action set to manipulate its UI
	以操控其用户界面。


	. Upon evaluating the provided information, your role is to
	在评估所提供信息后，你的职责是


	articulate the precise actions you should perform, considering the
	准确表达你应执行的具体操作，考虑


---



---



	application's present circumstances, and specify any necessary
	应用当前的状况，并说明任何必要的


	parameters for implementing that action.
	执行该操作的参数。


Here is some helpful information to help you make the decision.
这里有一些有助于您做出决定的信息。


Overall task description:
整体任务描述：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Few shots:
少量示例：


<\$few_shots\$>



Image introduction:
图片介绍：


<\$image_introduction\$>



Current and previous screenshot are the same:
当前截图与之前截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	之前截图中的相同：


<\$mouse_position_same_flag\$>



Description of current screenshot:
当前截图描述：


<\$image_description\$>



Description of label IDs:
标签ID描述：


<\$description_of_bounding_boxes\$>



Last executed action:
上次执行的操作：


<\$previous_action\$>



Key reason for the last action:
上次操作的关键原因：


<\$key_reason_of_last_action\$>



Self-reflection for the last executed action:
对上次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$previous_summarization\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Success_Detection for overall task:
整体任务的成功检测：


<\$success_detection\$>



Based on the above information, you should first analyze the current
基于以上信息，您应首先分析当前


	situation and provide the reasoning for what you should do for the
	情况，并说明完成任务下一步应采取的理由。


	next step to complete the task. Then, you should output the exact
	然后，您应输出在应用程序中要执行的具体


	action you want to execute in the application.
	操作。


Pay attention to all UI items and contents in the image. DO NOT make
注意图像中的所有界面元素和内容。不要对布局做出


	assumptions about the layout! If the image includes a mouse cursor
	假设！如果图像中包含鼠标光标，


	, pay close attention to the coordinates of the pointer tip, not
	请特别关注指针尖端的坐标，而非


	the centre of the mouse cursor.
	鼠标光标的中心。


You should respond to me with the following information, and you MUST
您应按顺序向我反馈以下信息，且必须


	respond one by one.
	逐条回应。


Decision_Making_Reasoning: You should think step by step and provide
决策推理：您应逐步思考并提供


	detailed reasoning to determine the next action executed on the
	详细推理，以确定在当前任务状态下执行的下一步操作。


	current state of the task.
	


	1. Does "<\$success_detection\$>" means the overall task was
	1.“<\$success_detection\$>”是否表示整体任务


	successful? If successful, ignore questions 2-11.
	成功？如果成功，则忽略第2至11题。


---



---



	2. Which skill in the Skill Library "<\$skill_library\$>" has the
	2. 在技能库"<\$skill_library\$>"中，哪个技能具有


	closest semantics to the current subtask "<\$subtask_description\$
	与当前子任务“<\$subtask_description\$”最接近的语义


	>"? If there is an answer, select it as the output action.
	>"? 如果有答案，请选择它作为输出操作。


	3. Prefer keyboard operation over mouse operation. Is there a
	3. 优先使用键盘操作而非鼠标操作。是否存在


	direct skill in the skill library to complete the current action?
	直接使用技能库中的技能来完成当前动作吗？


	If there is, please specify which it is. Or are there any keyboard
	如果有，请具体说明是哪一个。或者是否有任何键盘


	actions, such as using shortcut keys or pressing "enter", to
	操作，例如使用快捷键或按“回车”，以


	finish current step or overall task? Please specify which it is.
	完成当前步骤还是整个任务？请具体说明。


	4. Always try pressing "enter" first instead of clicking it with
	4. 总是先尝试按“回车”键，而不是用鼠标点击它


	the mouse, if the button you want to click is active.
	鼠标，如果你想点击的按钮是激活状态。


	5. If you need to get information from video content, select the
	5. 如果您需要从视频内容中获取信息，请选择


	skill get_information_from_video(). For example, you want to know
	技能 get_information_from_video()。例如，你想知道


	which exactly second you want to operate.
	你想操作的确切秒数。


	6. Based on the current screenshot and the description of label
	6. 基于当前截图和标签描述


	IDs in text, which label ID is most relevant to the current task?
	文本中的ID，哪个标签ID与当前任务最相关？


	You should never answer this question based on the screenshot.
	你绝不应该仅凭截图来回答这个问题。


	7. If the previous action is unsuccessful, DO NOT repeat the
	7. 如果前一个操作失败，请勿重复执行


	previous action, consider an alternative action if possible. Such
	先前的操作，如可能，考虑替代操作。此类


	as click different label ID or use different shortcut keys. If
	通过点击不同的标签ID或使用不同的快捷键。如果


	there is an alternative action, please specify what it is.
	如果有其他可选操作，请说明具体内容。


	8. In the current screenshot, identify the label ID of the
	8. 在当前截图中，识别该标签的ID


	bounding box most relevant to the current step. If there is text
	与当前步骤最相关的边界框。如果有文本


	within this bounding box, please provide the text.
	请在此边界框内输入文本。


	9. If mouse actions are necessary, use that specify bounding box
	9. 如果需要鼠标操作，请使用指定的边界框


	label ID (if shown in the current screenshot) as parameter, rather
	将标签ID（如果在当前截图中显示）作为参数，而不是


	than directly generating normalized $x$ and $y$ coordinates. If there
	比直接生成归一化的$x$和$y$坐标更好。如果有


	is any relevant label ID, please specify which it is.
	如果是任何相关的标签ID，请具体说明是哪一个。


	10. If there is a dialog open after the previous action, pay
	10. 如果前一个操作后有对话框打开，请注意


	attention to any missing step before clicking on it's buttons. For
	点击其按钮前请注意是否有遗漏的步骤。


	example, before clicking "Save", make sure the file name is typed
	例如，点击“保存”之前，请确保已输入文件名


	in the correct text field.
	在正确的文本字段中。


	11. If you need to use an action outside an open menu or dialog,
	11. 如果需要在打开的菜单或对话框之外使用某个操作，


	please close the current menu or dialog before trying the next
	请先关闭当前菜单或对话框，然后再尝试下一步


	action.
	行动。


Actions: The best action, or short sequence of actions without gaps,
操作：最佳操作，或无间断的短操作序列，


	to execute next to progress in achieving the goal. Pay attention
	执行下一步以推进目标的实现。请注意


	to the names of the available skills and the previous skills
	到可用技能的名称和之前的技能


	already executed, if any. Pay special attention to the coordinates
	已执行（如有）。特别注意坐标


	of any action that needs them. Do not make assumptions about the
	任何需要它们的操作。不要对其做出假设


	location of UI elements or their coordinates, analyse in detail
	界面元素的位置或其坐标，进行详细分析


	any provided images. You should also pay more attention to the
	任何提供的图像。你还应更加注意


	following action rules:
	以下操作规则：


	1. If "<\$success_detection\$>" means the overall task was
	1. 如果“<\$success_detection\$>”表示整体任务已


	successful or equal to "True", then output action MUST be empty
	成功或等于“True”，则输出操作必须为空


	like ". Be careful to check the task was really successful.
	像“.”。请务必确认任务确实成功完成。


	2. You should output actions in Python code format and specify any
	2. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. Only use function
	执行该操作所需的参数。仅使用函数


	names and argument names exactly as shown in the valid actions et.
	名称和参数名称与有效操作集中的完全一致。


	If a function has parameters, you should also include their names
	如果函数有参数，也应包含它们的名称


	and decide their values, like "press_shift (duration=1)". If it
	并决定它们的值，例如“press_shift（持续时间=1）”。如果它


	does not have a parameter, just output the action, like "
	没有参数，只需输出动作，如“


	release_mouse_buttons()".
	释放鼠标按钮()


	4. Given the current situation and task, you should only choose
	鉴于当前情况和任务，你只应选择


	the most suitable action from the valid action set. You cannot use
	从有效动作集中选择最合适的动作。你不能使用


	actions that are not in the valid action set to control the
	不在有效动作集合中的动作用于控制


	application.
	应用程序。


	5. When you decide to perform a mouse action, if there is bounding
	5. 当您决定执行鼠标操作时，如果存在边界


	box in the current screenshot, you MUST choose skill
	在当前截图中的框内，您必须选择技能


	click_on_label(label_id, mouse_button).
	点击标签(label_id, 鼠标按钮)。


	6. When you perform a mouse action, always select the target UI
	6. 当你执行鼠标操作时，总是选择目标用户界面


	element closest to the UI element of the previous action for
	最接近前一个操作的UI元素的元素，用于


	operation.
	操作。


	7. When you decide to perform a mouse click, prioritize clicking
	7. 当你决定执行鼠标点击时，优先点击


	icons, instead of text.
	图标，而非文字。


---



---



	8. When there is new dialog box that affects the next step, you
	8. 当出现影响下一步的新对话框时，您


	should close it.
	应该关闭它。


	9. The material panel includes the Media, Audio, Text, Stickers,
	9. 材料面板包括媒体、音频、文本、贴纸、


	Effects, Transitions, Filters, Adjustments, and Templates tabs.
	效果、转场、滤镜、调整和模板标签。


	Choose this skill "switch_material_panel()" to switch between
	选择此技能 "switch_material_panel()" 以切换


	these tabs one by one.
	逐个浏览这些标签。


	10. To add media, drag that media to the video in the timeline.
	10. 要添加媒体，请将该媒体拖动到时间线中的视频上。


Key_reason_of_last_action: Summarize the key reasons why you output
上一次操作的主要原因：总结你输出的关键原因


	this action.
	此操作。


You should only respond in the format described below. In your
您应仅以以下描述的格式进行回复。在您的


	reasoning for the chosen actions, also describe which item you
	所选行动的推理，同时描述你选择了哪个项目


	decided to interact with and why. DO NOT change the title of each
	决定与谁互动以及原因。不要更改每个标题


	item. You should not output other comments or information besides
	项目。您不应输出除外的其他评论或信息


	the format below.
	以下格式。


Decision_Making_Reasoning:
决策推理：


1. ...



2. ...



3. ...



...



Actions:
操作：


44 CPUTH ON
44 CPUTH 开启


	action(args1=x,args2=y)
	action(args1=x,args2=y)


ccc
ccc


Key_reason_of_last_action:
上次操作的关键原因：


...



---



Prompt 39: Meitu: Information Gathering prompt.
提示39：美图：信息收集提示。


---



Assume you are a helpful AI assistant integrated with 'Meitu Xiuxiu'
假设你是集成在“美图秀秀”(Meitu Xiuxiu)中的智能助手


	on the PC, equipped to handle a wide range of tasks in the
	在PC端，能够处理应用中的各种任务。


	application. Meitu Xiuxiu is a user-friendly and powerful image
	美图秀秀是一款用户友好且功能强大的图像


	editing and beautification software. Your advanced capabilities
	编辑与美化软件。你具备先进的能力，


	enable you to process and interpret application screenshots and
	能够处理和解析应用截图及


	other relevant information.
	其他相关信息。


Image introduction:
图片介绍：


<\$image_introduction\$>



Overall task:
整体任务：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Image_Description:
图片描述：


1. Please describe the screenshot image in detail. Pay attention to
1. 请详细描述截图图片。注意


	any details in the image, if any, especially critical icons, or
	图像中的任何细节（如果有），尤其是关键图标，或


	created items.
	已创建的项目。


2. If the image includes a mouse cursor, please describe what UI
2. 如果图像中包含鼠标光标，请描述界面(UI)的内容


	element the mouse is currently located near. Pay attention to the
	鼠标当前所在的元素附近。注意


	coordinates of the pointer tip, not the center of the mouse cursor
	指针尖端的坐标，而非鼠标光标的中心


3. Pay attention to all UI items and contents in the image. Do not
3. 注意图像中的所有用户界面项目和内容。不要


	make assumptions about the layout.
	对布局做出假设。


Description_of_bounding_boxes:
边界框描述：


Please provide a list of EVERY bounding box from label ID of 1 to <
请提供标签ID从1到<的所有边界框列表


	\$length_of_som_map\$> ONE BY ONE. The label IDs are marked in the
	\$length_of_som_map\$> 一一对应。标签ID标记在


	upper left corner of the bounding boxes.
	边界框的左上角。


For bounding boxes containing text, provide ONLY the text.
对于包含文本的边界框，仅提供文本内容。


For bounding boxes without text, brief description of the function.
对于无文本的边界框，简要描述其功能。


---



---



Format your response as follows: ' 1: function_a', '2: text_b', ...,
请按以下格式回复：' 1: function_a', '2: text_b', ...,


	\$length_of_som_map\$>: function_b'. Don't write anything you are
	\$length_of_som_map\$>: function_b'。不要写任何你是


	not sure about.
	不确定。


Target_object_name: Assume you can use an object detection model to
目标对象名称：假设您可以使用一个目标检测模型来


	detect the most relevant object or UI item for completing the
	检测完成任务最相关的对象或界面元素


	current task if needed. What item should be detected to complete
	如有需要，完成当前任务应检测哪个项目


	the task based on the current screenshot and the current task? You
	基于当前截图和当前任务的任务？你


	should obey the following rules:
	应遵守以下规则：


1. Identify an item that is relevant to the current or intermediate
1. 确定一个与当前或中间阶段相关的项目


	target of the task. If the item is within a bounding box in the
	任务的目标。如果该项目位于边界框内


	screenshot, please include the corresponding label ID.
	截图时，请包含相应的标签ID。


2. If no explicit item is specified, only output "null".
2. 如果未指定明确的项目，则仅输出“null”。


3. If there is no need to detect an object, only output "null".
3. 如果不需要检测对象，则仅输出“null”。


Reasoning_of_object: Why was this object chosen, or why is there no
对象的推理：为什么选择了这个对象，或者为什么没有选择


	need to detect an object?
	需要检测一个物体吗？


You should only respond in the format described below and not output
您应仅以以下描述的格式回复，不要输出其他内容


	comments or other information. DO NOT change the title of each
	评论或其他信息。请勿更改每个标题


	item.
	项目。


Image_Description:
图像描述：


1. ...



2. ...



3. ...



Description_of_bounding_boxes:
边界框描述：


Format like: 1: function_a', '2: text_b', ..., '<\$len_of_bound_boxes\$
格式如：1: function_a', '2: text_b', ..., '<\$len_of_bound_boxes\$


	>: function_b
	>: function_b


Target_object_name:
目标对象名称：


label ID, Name
标签ID，名称


Reasoning_of_object:
对象推理：


...



---



Prompt 40: Meitu: Self Reflection prompt.
提示40：美图秀秀：自我反思提示。


---



Assume you are a helpful AI assistant integrated with 'Meitu Xiuxiu'
假设你是集成在“美图秀秀”中的智能助手


	on the PC, equipped to handle a wide range of tasks in the
	在PC端，能够处理应用中的各种任务。


	application. Meitu Xiuxiu is a user-friendly and powerful image
	美图秀秀是一款用户友好且功能强大的图像


	editing and beautification software. Your advanced capabilities
	编辑与美化软件。你的高级能力


	enable you to process and interpret application screenshots and
	使你能够处理和解读应用截图及


	other relevant information. Your task is to examine these inputs,
	其他相关信息。你的任务是审查这些输入，


	interpret the in-application and OS context, and determine whether
	解读应用内及操作系统上下文，并判断


	the executed action has taken the correct effect.
	所执行的操作是否达到了预期效果。


Overall task description:
整体任务描述：


<\$task_description\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Last executed action with parameters used:
上次执行操作及其使用的参数：


<\$previous_action_call\$>



Implementation of the last executed action:
上次执行操作的实现：


<\$action_code\$>



Error report for the last executed action:
上次执行操作的错误报告：


<\$executing_action_error\$>



Key reason for the last action:
上次操作的关键原因：


<\$key_reason_of_last_action\$>



---



---



History Summarization
历史总结


<\$history_summary\$>



Success_Detection flag for the overall task:
整体任务的成功检测标志：


<\$success_detection\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Current and previous screenshot are the same:
当前截图与前一截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


			previous screenshot:
			前一截图中的相同：


<\$mouse_position_same_flag\$>



Self_Reflection_Reasoning:
自我反思推理：


You need to answer the following questions, step by step, to describe
你需要逐步回答以下问题，描述


			your reasoning based on the history summarization, last action and
			基于历史总结、上次操作及


				sequential screenshots of the application during the execution of
				执行上次操作期间应用程序的连续截图，


				the last action.
				你的推理过程。


1. Please describe what the page is in the current screenshot. Respond
1. 请描述当前截图中的页面内容。请用一句话回答


				in one sentence.
				。


2. What is the last executed action based on the text information
2. 根据上述文本信息，最后执行的操作是什么？


			above?
			？


3. Was the last executed action successful? Give reasons. You should
3. 最后执行的操作是否成功？请给出理由。你应当


			refer to the following rules:
			参考以下规则：


- If the last action executed was empty, then the previous action is
- 如果最后执行的操作为空，则视前一个操作为成功。


			deemed successful.
			


- If the action involves moving the mouse, it is considered
- 如果操作涉及移动鼠标，当鼠标位置保持不变或在连续截图中


		unsuccessful when the mouse position remains unchanged or moves in
		以错误的方式移动时，视为操作失败，


				an incorrect way across sequential screenshots, regardless of
				无论背景元素和其他项目如何。


			background elements and other items.
			


- If the position to move the mouse to was incorrect and the mouse
- 如果鼠标移动的位置不正确且未到达目标UI元素，应更关注


			didn't reach the target UI element, pay more attention to the
			准确的移动坐标。


			accurate coordinates to move to.
			


- If the operation involves type text, it will be considered
- 如果操作涉及输入文本，则视为


			unsuccessful when the corresponding text does not appear in the
			当对应文本未出现时，操作失败


			diagram, regardless of background elements and other items.
			图表，无论背景元素和其他项目如何。


- If the action seemed to have no effect, pay attention to the latest
- 如果该操作似乎没有效果，请关注最新的


			mouse position. Did it move? Did it get closer to the target UI
			鼠标位置。它移动了吗？它是否更接近目标界面元素？


			element? Where are the target coordinates in the action wrong? The
			元素？动作中的目标坐标哪里出错了？


				position of the mouse cursor on the screenshot shows their
				鼠标光标在截图上的位置显示了它们的


			location.
			位置。


- Was some unrelated UI item triggered by the last action?
- 上一个操作是否触发了某个无关的界面元素？


4. If the last action is not executed successfully, what is the most
4. 如果最后一个操作未成功执行，最重要的是


			probable cause? You should give only one cause and refer to the
			可能的原因？你只需给出一个原因并参考


			following rules:
			以下规则：


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- If it was an action involving moving the mouse or the text cursor,
- 如果是涉及移动鼠标或文本光标的操作，


			the most probable cause was that the coordinates used were
			最可能的原因是所使用的坐标是


			incorrect.
			错误。


- If it is an interaction action, the most probable cause was that the
- 如果是交互动作，最可能的原因是


				action was unavailable or not activated in the current state.
				该操作在当前状态下不可用或未激活。


- If an unrelated change happened in the UI, the most probable cause
- 如果用户界面发生了无关的变化，最可能的原因是


			was that the action triggered an incorrect UI element.
			导致的结果是触发了错误的用户界面元素。


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


Success_Detection:
成功检测：


Based on the history summarization, the last action, the current
基于历史总结，最后的操作，当前的


			screenshots and the Success_Detection flag, determine whether the
			截图和Success_Detection标志，确定是否


			overall task "<\$task_description\$>" was successful. This
			整体任务"<\$task_description\$>"已成功完成。此


			assessment should consider the overall task's success, not just
			评估应考虑整体任务的成功，而不仅仅是


			individual actions.
			个人行为。


- If the last action executed was an empty list and "<
- 如果最后执行的操作是一个空列表且“<


	\$success_detection\$>" indicates the task is successful, then the
	\$success_detection\$>" 表示任务成功，然后


	overall task has a high chance of being considered a success.
	整体任务很可能被视为成功。


- If the overall task was unsuccessful, specify the reason of failure
- 如果整体任务未成功，请说明失败原因


	and which steps are missing.
	以及缺少了哪些步骤。


- If the overall task was successful, ONLY output "SUCCESSFUL".
- 如果整体任务成功，仅输出“SUCCESSFUL”。


You should only respond in the format as described below.
你应仅以以下描述的格式进行回复。


Self_Reflection_Reasoning :
自我反思推理：


1. ...



2. ...



3. ...



Success_Detection:
成功检测：


...



---



Prompt 41: Meitu: Task Inference prompt.
提示41：美图：任务推断提示。


---



Assume you are a helpful AI assistant integrated with 'Meitu Xiuxiu'
假设你是集成在“美图秀秀”中的智能助手


	on the the PC, equipped to handle a wide range of tasks in the
	运行于PC端，能够处理游戏中的各种任务。


	game. Meitu Xiuxiu is a user-friendly and powerful image editing
	美图秀秀是一款用户友好且功能强大的图像编辑


	and beautification software. You will be sequentially given <
	与美化软件。你将依次收到&lt;


	\$event_count\$> screenshots and corresponding descriptions of
	\$event_count\$&gt;张截图及对应的近期事件描述。


	recent events. You will also be given a summary of the history
	你还将获得最后一张截图之前发生的历史事件摘要。


	that happened before the last screenshot. You should assist in
	你应协助总结事件以便未来决策，并且


	summarizing the events for future decision-making and also in
	在给定目标任务的前提下，提出最合适的下一步子任务。


	proposing the most suitable subtask to execute next, given the
	


	target task.
	目标任务。


Here is some helpful information to help you do the summarization and
以下是帮助你进行总结和


	propose the subtask.
	提出子任务的一些有用信息。


Overall task description:
整体任务描述：


<\$task_description\$>



Previous proposed subtask for the task:
之前提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出该子任务的先前推理：


<\$subtask_reasoning\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Last executed action:
上一次执行的操作：


<\$previous_action\$>



Error report for the last executed action:
上一次执行操作的错误报告：


<\$executing_action_error\$>



Key decision-making reasoning for the last executed action:
上一次执行操作的关键决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
上一次执行操作的自我反思：


<\$self_reflection_reasoning\$>



Success_Detection for the overall task:
整体任务的成功检测：


<\$success_detection\$>



The following is the summary of history that happened before the last
以下是上一次之前发生的历史总结


	screenshot :
	截图：


<\$previous_summarization\$>



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历，


	especially the last step according to the decision-making
	特别是根据决策推理的最后一步


---



---



	reasoning and self-reflection reasoning for the last executed
	和上一次执行操作的自我反思推理。


	action. The summarization needs to be precise, concrete, highly
	总结需要精准、具体，且与任务高度相关，


	related to the task, and follow the rules below.
	并遵循以下规则。


	1. Determine if the task has been completed successfully. If it is
	1. 确定任务是否已成功完成。如果是


	successful, ignore question 2 to 5 .
	成功，忽略问题2到5。


	2. Summarize the tasks from the history and the current task. What
	2. 总结历史任务和当前任务。什么


	is the current progress of the task? For example, to open a file,
	任务的当前进展如何？例如，打开一个文件时，


	you first need to select the file, then open it by clicking
	你需要先选择文件，然后点击打开


	somewhere or using the keyboard. Subtasks may have other pre-
	在某处或使用键盘。子任务可能有其他预先-


	requisites.
	必需品。


	3. Record the successful actions and organize them into events,
	记录成功的操作并将其组织成事件，


	step by step.
	一步一步地。


	4. Which subtask has been completed? Which subtasks have not? Do
	4. 哪个子任务已经完成？哪些子任务尚未完成？


	not forget the information and key events in the previous steps of
	不忘记前面步骤中的信息和关键事件


	the overall task.
	整体任务。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否已完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task, and be
	应该直截了当，有助于目标任务，并且是


	most suitable for the current situation; which should be completed
	最适合当前情况；应当完成


	within a few actions. You should respond with the following item.
	在几步操作内。你应该回复以下项目。


	1. Based on the unfinished part of overall task and the current
	1. 基于整体任务未完成的部分和当前


	screenshot, identify the most direct and easiest way to complete
	截图，确定完成任务的最直接且最简单的方法


	the task, considering possible shortcut keys and without making
	任务，考虑可能的快捷键且不进行


	any assumptions beyond the provided information.
	除所提供信息外不作任何假设。


	2. Analyze the target task step by step to determine how to
	2. 逐步分析目标任务以确定如何


	complete it.
	完成它。


	3. What is the previous subtask? Has the previous subtask finished
	3. 上一个子任务是什么？上一个子任务完成了吗？


	due to self-reflection? Or is it improper for the current
	是因为自我反思吗？还是对当前来说不合适


	situation? If finished or improper, please select a new one,
	情况？如果已完成或不合适，请选择一个新的，


	otherwise you should reuse the last subtask.
	否则你应该重用最后一个子任务。


	4. If you want to propose a new subtask, give reasons why it is
	4. 如果您想提出一个新的子任务，请说明其原因


	more feasible for the current situation. Please strictly follow
	更适合当前情况。请严格遵守


	the description and requirements in the current task.
	当前任务中的描述和要求。


	5. The proposed subtask needs to be precise and concrete within
	5. 所提出的子任务需要具体且明确


	one sentence. It should not be directly related to any skills.
	一句话。它不应直接涉及任何技能。


You should only respond in the format described below, and you should
你应仅以以下描述的格式回复，且应


	not output comments or other information.
	不输出评论或其他信息。


History_summary:
历史摘要：


1. ...



2. ...



...



Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask_description:
子任务描述：


The current subtask is ...
当前子任务是……


---



Prompt 42: Meitu: Action Planning prompt.
提示42：美图：行动规划提示。


---



You are a helpful AI assistant integrated with 'Meitu Xiuxiu' on the
你是集成于PC端“美图秀秀”的智能助手，


	PC, equipped to handle a wide range of tasks in the application.
	能够处理应用中的各种任务。


	Meitu Xiuxiu is a user-friendly and powerful image editing and
	美图秀秀是一款用户友好且功能强大的图像编辑与


	beautification software. Your advanced capabilities enable you to
	美化软件。你具备先进能力，能够


	process and interpret application screenshots and other relevant
	处理和解读应用截图及其他相关


	information. By analyzing these inputs, you gain a comprehensive
	信息。通过分析这些输入，你能全面


	understanding of the current context and situation within the
	理解应用中的当前上下文和情境。


	application. Utilizing these insights, you are tasked with
	利用这些洞察，你的任务是


	identifying the most suitable in-application action to take next,
	识别接下来最合适的应用内操作，


	given the current task. You control the application and can
	鉴于当前任务。您控制该应用程序并可以


---



---



	execute actions from the available action set to manipulate its UI
	从可用的动作集中执行操作以操控其用户界面


	. Upon evaluating the provided information, your role is to
	。在评估所提供的信息后，您的角色是


	articulate the precise actions you should perform, considering the
	明确您应执行的具体操作，考虑到


	application's present circumstances, and specify any necessary
	应用程序的当前状况，并指定实施该操作所需的


	parameters for implementing that action.
	参数。


Here is some helpful information to help you make the decision.
以下是一些有助于您做出决策的信息。


Overall task description:
整体任务描述：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Few shots:
示例：


<\$few_shots\$>



Image introduction:
图片介绍：


<\$image_introduction\$>



Current and previous screenshot are the same:
当前截图与之前截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	之前截图中的相同：


<\$mouse_position_same_flag\$>



Description of current screenshot:
当前截图描述：


<\$image_description\$>



Description of label IDs:
标签ID描述：


<\$description_of_bounding_boxes\$>



Last executed action:
上次执行的操作：


<\$previous_action\$>



Key reason for the last action:
上次操作的关键原因：


<\$key_reason_of_last_action\$>



Self-reflection for the last executed action:
对上次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$previous_summarization\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Success detection for overall task:
整体任务的成功检测：


<\$success_detection\$>



Based on the above information, you should first analyze the current
基于以上信息，你应首先分析当前


	situation and provide the reasoning for what you should do for the
	情况，并说明你应采取何种理由进行


	next step to complete the task. Then, you should output the exact
	下一步以完成任务。然后，你应输出你想在应用中执行的


	action you want to execute in the application.
	具体操作。


Pay attention to all UI items and contents in the image. DO NOT make
注意图像中的所有UI元素和内容。不要对布局做出


	assumptions about the layout! If the image includes a mouse cursor
	假设！如果图像中包含鼠标光标，


	, pay close attention to the coordinates of the pointer tip, not
	请特别关注指针尖端的坐标，而非


	the centre of the mouse cursor.
	鼠标光标的中心。


You should respond to me with the following information, and you MUST
你应按以下信息回复我，且必须


	respond one by one.
	逐条回应。


Decision_Making_Reasoning: You should think step by step and provide
决策推理：你应当逐步思考并提供


	detailed reasoning to determine the next action executed on the
	详细推理以确定接下来执行的操作


	current state of the task.
	任务的当前状态。


---



---



	1. Does "<\$success_detection\$>" means the overall task was
	1. “<\$success_detection\$>”是否意味着整个任务已完成


	successful? If successful, ignore questions 2 to 9.
	成功了吗？如果成功，请忽略第2到第9题。


	2. Which skill in the Skill Library "<\$skill_library\$>" has the
	2. 在技能库"<\$skill_library\$>"中，哪个技能具有


	closest semantics to the current subtask "<\$subtask_description\$
	与当前子任务“<\$subtask_description\$”最接近的语义


	>"? If there is an answer, select it as the output action, ignore
	>"? 如果有答案，选择它作为输出动作，忽略


	questions 3 to 9 .
	第3至第9题。


	3. Prefer keyboard operation instead of mouse operation. Are there
	3. 优先使用键盘操作而非鼠标操作。是否存在


	any keyboard actions, such as using shortcut keys or pressing "
	任何键盘操作，例如使用快捷键或按下“


	enter", to finish current step or overall task? If there is,
	按“回车”键，完成当前步骤或整个任务？如果有，


	please specify which it is, ignore questions 4 to 9 .
	请指明是哪一种，忽略第4至第9题。


	4. If the UI element you want to operate doesn't exist in the
	4. 如果您想操作的界面元素不存在于


	current screenshot. you can choose to scroll mouse to find target
	当前截图。您可以选择滚动鼠标以查找目标


	UI element.
	用户界面元素。


	5. Always try pressing "enter" first instead of clicking it with
	5. 如果你想点击的按钮处于激活状态，始终先尝试按“回车”键，而不是用鼠标点击。


	the mouse, if the button you want to click is active.
	鼠标。


	6. If mouse actions are necessary, use that specify bounding box
	6. 如果必须使用鼠标操作，请使用指定的边界框标签ID（如果当前截图中显示）作为参数，


	label ID (if shown in the current screenshot) as parameter, rather
	而不是直接生成归一化的<b0></b0>和<b1></b1>坐标。如果有相关的标签ID，请注明是哪一个。


	than directly generating normalized $x$ and $y$ coordinates. If there
	


	is any relevant label ID, please specify which it is.
	


	7. If the previous action is unsuccessful, don't reapeat previous
	7. 如果前一个操作未成功，不要重复执行相同操作。如果有替代操作，请说明是什么，


	action. If there is an alternative action, please specify what it
	例如点击不同的标签ID或使用不同的快捷键。


	is. Such as click different label ID or use different shortcut
	


	keys.
	


	8. If you anticipate that the next step involves scrolling mouse,
	8. 如果预期下一步涉及鼠标滚动，确认上一次执行的操作是在相应的UI元素上点击。


	confirm that the last executed action was a click at the
	如果不是，必须先点击对应的UI元素，然后再进行滚动操作。


	appropriate ui element. If not, it is mandatory to click on the
	


	corresponding ui element before proceeding with scrolling.
	


	9. If you anticipate that the next step involves typing text,
	9. 如果预期下一步涉及输入文本，确认上一次执行的操作是在


	confirm that the last executed action was a click at the
	相应的UI元素上点击。


	appropriate input box. If not, it is mandatory to click on the
	适当的输入框。如果没有，必须点击


	corresponding input box before proceeding with typing.
	在继续输入之前，请先点击相应的输入框。


Actions: The best action, or short sequence of actions without gaps,
动作：最佳动作，或无间断的短动作序列，


	to execute next to progress in achieving the goal. Pay attention
	执行下一步以推进目标的实现。请注意


	to the names of the available skills and the previous skills
	到可用技能的名称和之前的技能


	already executed, if any. Pay special attention to the coordinates
	已执行（如有）。特别注意坐标


	of any action that needs them. Do not make assumptions about the
	任何需要它们的行动。不要对其做出假设


	location of UI elements or their coordinates, analyse in detail
	界面元素的位置或其坐标，进行详细分析


	any provided images. You should also pay more attention to the
	任何提供的图像。你还应更加关注


	following action rules:
	以下操作规则：


	1. If "<\$success_detection\$>" means the overall task was
	1. 如果“<\$success_detection\$>”表示整体任务已


	successful or equal to "True", then output action MUST be empty
	如果成功或等于“True”，则输出操作必须为空


	like ". Be careful to check the task was really successful.
	像“.”。请务必确认任务确实成功完成。


	2. You should output actions in Python code format and specify any
	2. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. Only use function
	执行该操作所需的参数。仅使用函数


	names and argument names exactly as shown in the valid actions et.
	名称和参数名称与有效操作等中显示的完全一致。


	If a function has parameters, you should also include their names
	如果函数有参数，也应包含它们的名称


	and decide their values, like "press_shift (duration=1)". If it
	并确定它们的值，比如 "press_shift (duration=1)"。如果


	does not have a parameter, just output the action, like "
	没有参数，只需输出动作，如 "


	release_mouse_buttons()".
	release_mouse_buttons()"。


	3. Before scrolling mouse, ensure that the last executed action
	3. 在滚动鼠标之前，确保上一个执行的动作


	involved clicking on the relevant input box. If the last action
	涉及点击了相关的输入框。如果上一个动作


	was not a click on this input box, the required action MUST be to
	不是点击该输入框，则必须先点击对应的输入框


	click on the corresponding input box before proceeding.
	然后再继续。


	4. Before typing text, ensure that the last executed action
	4. 在输入文本之前，确保上一个执行的动作


	involved clicking on the relevant ui element. If the last action
	涉及点击了相关的UI元素。如果上一个动作


	was not a click on this ui element, the required action MUST be to
	不是点击该UI元素，则必须先点击对应的UI元素


	click on the corresponding ui element before proceeding.
	然后再继续。


	5. Given the current situation and task, you should only choose
	5. 根据当前情况和任务，应仅从有效动作集中


	the most suitable action from the valid action set. You cannot use
	选择最合适的动作。不能使用不在有效动作集中的


	actions that are not in the valid action set to control the
	动作来控制应用程序。


	application.
	


	6. When you decide to perform a mouse action, if there is bounding
	6. 当您决定执行鼠标操作时，如果存在边界


	box in the current screenshot, you MUST choose skill
	在当前截图中的框内，您必须选择技能


	click_on_label(label_id, mouse_button).
	点击标签(label_id, 鼠标按钮)。


	7. When you want to add a image or effect, use the skill
	7. 当你想添加图片或效果时，使用该技能


	double_click_on_label(x, y, mouse_button).
	<double_click_on_label(x, y, mouse_button)。>


	8. When you save a project, use the skill save_project().
	8. 当你保存项目时，使用技能 save_project()。


Key_reason_of_last_action: Summarize the key reasons why you output
上次操作的主要原因：总结你输出的关键原因


	this action.
	此操作。


You should only respond in the format described below. In your
您应仅以以下描述的格式进行回复。在您的


	reasoning for the chosen actions, also describe which item you
	所选动作的推理，同时描述你选择了哪个项目


	decided to interact with and why. DO NOT change the title of each
	决定与谁互动以及原因。不要更改每个标题


	item. You should not output other comments or information besides
	项目。你不应输出除外的其他评论或信息


	the format below.
	以下格式。


Decision_Making_Reasoning:
决策推理：


1. ...



2. ...



3. ...



...



Actions:
操作：


cccpython
cccpython


	action(args1=x,args2=y)
	action(args1=x,args2=y)


ccc
ccc


Key_reason_of_last_action:
上次操作的主要原因：


...



---



Prompt 43: Feishu: Information Gathering prompt.
提示43：飞书（Feishu）：信息收集提示。


---



You an expert helpful AI assistant which follows instructions and
你是一位遵循指令的专业且乐于助人的人工智能助手


	performs desktop computer tasks as instructed. You have expert
	按照指示执行桌面计算机任务。您具备专家级


	knowledge of 'Feishu' an office communication application on the
	对办公通讯应用“飞书”(Feishu)的了解


	PC including chat, calendar, and other workplace features. You can
	包括聊天、日历及其他工作场所功能的个人电脑。您可以


	handle a wide range of tasks in the application using the
	使用该应用程序处理各种任务


	keyboard, shortcut keys, and mouse operations. For each step, you
	键盘、快捷键和鼠标操作。对于每一步，您


	will get one or more observation images, which are screenshots of
	将获得一张或多张观测图像，即屏幕截图


	the computer screen. Your advanced capabilities enable you to
	电脑屏幕。您先进的能力使您能够


	process and interpret these application screenshots and other
	处理并解释这些应用程序截图及其他内容


	relevant information in detail. The screenshots include numerical
	详细的相关信息。截图包括数值


	tags (label IDs) and bounding boxes marking some UI items.
	标签（标签ID）和标记某些用户界面项目的边界框。


Image introduction:
图像介绍：


<\$image_introduction\$>



Overall task:
整体任务：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Image_Description:
图像描述：


1. Please describe the screenshot image in detail. Pay attention to
1. 请详细描述截图图像。请注意


	any details in the image, if any, especially critical icons, open
	图像中的任何细节（如果有），尤其是关键图标，打开


	menus, dialogs, and open panels or sections. Focus on the image
	菜单、对话框以及打开的面板或部分。聚焦于图像


	contents and the situation in the application.
	内容和应用中的情况。


2. If the image includes a mouse cursor, please describe what UI
2. 如果图像中包含鼠标光标，请描述界面（UI）


	element the mouse is currently located near. Pay attention to the
	鼠标当前所在的元素附近。注意


	coordinates of the pointer tip, not the center of the mouse cursor
	指针尖端的坐标，而非鼠标光标的中心


3. Pay attention to all UI items and contents in the image. Do not
3. 注意图像中的所有界面元素和内容。不要


	make assumptions about the layout.
	对布局做出假设。


4. Make sure to describe the active area of the screen too. The area
4. 确保也描述屏幕的有效区域。该区域


	where user interaction is probably happening, not only the general
	用户交互可能发生的地方，而不仅仅是一般的


	menus or layout of the screenshot.
	截图的菜单或布局。


5. DO NOT describe overlayed bounding boxes in this description, only
5. 不要在此描述中描述叠加的边界框，仅限于


	the relevant UI items themselves. Focus on the state of the
	相关的UI项目本身。关注其状态


---



---



	application UI and what the key UI items of interest for the task
	应用程序界面及任务中关键的界面元素


	would be. Describe any relevant open panels, dialogs, menus, etc.
	将会是怎样的。描述任何相关的打开面板、对话框、菜单等。


Target_object_name:
目标对象名称：


As an application expert and a helpful assistant, you can determine
作为应用专家和有用的助手，您可以确定


	the most relevant UI items for completing the current subtask, if
	完成当前子任务最相关的用户界面项，如果


	needed. What item should be detected to complete the task based on
	需要。应检测哪个项目以完成基于


	the current screenshot and the current subtask? You should obey
	当前截图和当前子任务？你应该遵守


	the following rules:
	以下规则：


1. The item should be present in the screen and relevant to the
1. 该项目应出现在屏幕上并与之相关


	current subtask or overall task. Just name the item, without any
	当前子任务或整体任务。只需命名项目，无需任何


	modifiers or extra information.
	修饰符或额外信息。


2. If the item of itnerest of not on the current screen, only output "
2. 如果感兴趣的项目不在当前屏幕上，只输出"


	Target items not in current screen".
	目标项目不在当前屏幕中。


2. If no explicit item is specified, only output "null".
2. 如果未指定具体项目，则仅输出“null”。


3. If there is no need to detect a target item in this state, only
3. 如果在此状态下无需检测目标项，则仅


	output "null". You must output this field in the response.
	输出“null”。您必须在响应中输出此字段。


Reasoning_of_object: Why was this item chosen, or why is there no need
对象推理：为何选择此项，或为何无需选择


	to detect an UI item at this stage?
	在此阶段检测UI元素？


You should only respond in the format described below and not output
您应仅以以下描述的格式回复，不要输出其他内容


	comments or other information. DO NOT change the titles of any
	评论或其他信息。请勿更改任何标题


	response items.
	响应项。


Image_Description:
图像描述：


1. ...



2. ...



3. ...



Target_object_name:
目标对象名称：


name
名称


Reasoning_of_object:
对象推理：


...



---



Prompt 44: Feishu: Self Reflection prompt.
提示44：飞书：自我反思提示。


---



You an expert helpful AI assistant which follows instructions and
你是一位遵循指令的专业且乐于助人的人工智能助手


	performs desktop computer tasks as instructed. You have expert
	按照指示执行桌面计算机任务。您具备专家级


	knowledge of 'Feishu' on the PC and can handle a wide range of
	在电脑上对“飞书”(Feishu)的了解，并能处理各种


	tasks in the application using the keyboard, shortcut keys, and
	使用键盘、快捷键以及


	mouse operations. For each step, you will get one or more
	鼠标操作。每一步，您将获得一个或多个


	observation images, which are screenshots of the computer screen.
	观察图像，即计算机屏幕的截图。


	Your advanced capabilities enable you to process and interpret
	您的高级能力使您能够处理和解释


	these application screenshots and other relevant information in
	这些应用程序截图及其他相关信息，


	detail.
	并进行详细分析。


You MUST examine all inputs, interpret the in-application and OS
您必须检查所有输入，解释应用内和操作系统


	contexts, and determine whether the executed action has taken the
	的上下文，并判断执行的操作是否产生了


	correct effect.
	正确的效果。


Overall task description:
整体任务描述：


<\$task_description\$>



Execution step images:
执行步骤图像：


<\$image_introduction\$>



Current image description:
当前图像描述：


<\$current_image_description\$>



Last executed action with parameters used:
上一次执行的操作及所用参数：


<\$previous_action_call\$>



Implementation of the last executed action:
上一次执行操作的实现情况：


<\$action_code\$>



---



---



Error report for the last executed action:
上一次执行操作的错误报告：


<\$executing_action_error\$>



Key reason for the last action:
上一次操作的关键原因：


<\$key_reason_of_last_action\$>



Success_Detection flag for the overall task:
整体任务的成功检测标志：


<\$success_detection\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效动作集：


<\$skill_library\$>



Current and previous screenshot are the same:
当前截图与之前的截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


		previous screenshot:
		之前的截图相同：


<\$mouse_position_same_flag\$>



Self_Reflection_Reasoning: You need to answer the following questions,
自我反思推理：你需要逐步回答以下问题，


		step by step, to describe your reasoning based on the last action
		基于上一个操作及其执行过程中的


		and sequential screenshots of the application during the
		应用程序连续截图描述你的推理。


		execution of the last action. Any action involving $x$ and $y$
		任何涉及$x$和$y$坐标的操作都属于移动操作。


		coordinates is an action involving movement.
		坐标的操作都属于移动操作。


1. What is the last executed action not based on the sequential
1. 上一个执行的操作是什么，且不基于连续截图？


		screenshots?
		


2. Was the last executed action successful? Give reasons. You should
2. 上一个执行的操作是否成功？请给出理由。你应


		refer to the following rules:
		参考以下规则：


- If the action involves moving the mouse, it is considered
- 如果操作涉及移动鼠标，当鼠标位置在连续截图中保持不变或


	unsuccessful when the mouse position remains unchanged or moved in
		移动方式错误时，视为操作失败，无论


		an incorrect way across sequential screenshots, regardless of
		背景元素和其他项目如何。


		background elements and other items.
		


- If the position to move the mouse to was incorrect and the mouse
- 如果鼠标移动的位置不正确，导致鼠标未能到达目标UI元素，请更加注意准确的移动坐标。


		didn't reach the target UI element, pay more attention to the
		


		accurate coordinates to move to.
		


- Are you sure the latest screenshot shows UI items that correspond to
- 你确定最新的截图显示的UI项与之前操作的成功相对应吗？


		the success of the previous action?
		


- If the action seemed to have no effect, pay attention to the latest
- 如果操作似乎没有效果，请关注最新的鼠标位置。鼠标有移动吗？是否更接近目标UI元素？操作中的目标坐标是否错误？截图中鼠标光标的位置显示了它们的位置。


	mouse position. Did it move? Did it get closer to the target UI
		


		element? Where the target coordinates in the action wrong? The
		


		position of the mouse cursor on the screenshot shows their
		


		location.
		


- Was some unrelated UI item triggered by the last action?
- 上一次操作是否触发了某个无关的UI项？


3. If the last action is not executed successfully, what is the most
3. 如果上一次操作未成功执行，最可能的原因是什么？你应只给出一个原因，并遵循以下规则：


		probable cause? You should give only one cause and refer to the
		


		following rules:
		


- The reasoning for the last action could be wrong.
- 上一次操作的推理可能是错误的。


- If it was an action involving moving the mouse or the text cursor,
- 如果操作涉及移动鼠标或文本光标，


		the most probable cause was that the coordinates used were
		最可能的原因是所使用的坐标


		incorrect.
		不正确。


- If you already tried the same action more than one time and there
- 如果你已经多次尝试了相同的操作且没有效果，


	was no effect. DO NOT REPEAT the same action again until you have
	请不要重复相同的操作，直到你尝试了其他方法。


		tried something else.
		


- If it is an interaction action, the most probable cause was that the
- 如果是交互操作，最可能的原因是该操作在当前状态下不可用或未激活。


		action was unavailable or not activated at the current state.
		


- If an unrelated change happened in the UI, the most probable cause
- 如果界面发生了无关的变化，最可能的原因是该操作触发了错误的界面元素。


	was that the action triggered an incorrect UI element.
	


- If there is an error report, analyze the cause based on the report.
- 如果有错误报告，请根据报告分析原因。


Success_Detection :
成功检测 :


Based on the last action, the current screenshots and the
基于最后的操作、当前的截图和


		Success_Detection flag, determine whether the overall task was
		成功检测（Success_Detection）标志，判断整体任务是否


		successful. This assessment should consider the overall task's
		成功。此评估应考虑整体任务的


		success, not just individual actions.
		成功情况，而不仅仅是单个操作。


- If the task was unsuccessful, specify the reason of failure and
- 如果任务未成功，需说明失败原因并


	which steps are missing.
	缺少哪些步骤。


- If the task was successful, ONLY output "SUCCESSFUL".
- 如果任务成功，仅输出“SUCCESSFUL”。


You should only respond in the format as described below.
你应仅按以下描述的格式回复。


Self_Reflection_Reasoning :
自我反思推理：


1. ...



2. ...



3. ...



Success_Detection:
成功检测：


...



---



Prompt 45: Feishu: Task Inference prompt.
提示45：飞书（Feishu）：任务推断提示。


---



You an expert helpful AI assistant which follows instructions and
你是一名遵循指令的专业智能助手，


	performs desktop computer tasks as instructed. You have expert
	执行桌面电脑任务。


	knowledge of 'Feishu' on the PC and can handle a wide range of
	你精通PC端飞书（Feishu），能通过键盘、快捷键和


	tasks in the application using the keyboard, shortcut keys, and
	鼠标操作处理应用中的各种任务。


	mouse operations. For each step, you will get one or more
	每一步你将获得一张或多张观察图像，


	observation images, which are screenshots of the computer screen.
	即电脑屏幕截图。


	Your advanced capabilities enable you to process and interpret
	你具备高级能力，能够详细处理和解读


	these application screenshots and other relevant information in
	这些应用截图及其他相关信息。


	detail.
	详细信息。


You will receive a sequence of <\$event_count\$> screenshots,
你将收到一系列<\$event_count\$>张截图，


	corresponding descriptions of recent events, and a summary of the
	最近事件的相应描述，以及


	history of events before the last screenshot. Please summarize the
	最后一张截图之前事件的历史总结。请总结


	events for future decision-making and also propose the most
	这些事件以便未来决策，并提出最


	suitable subtasks to execute next, given the overall target task.
	适合执行的子任务，基于整体目标任务。


Here is some helpful information to help you do the summarization and
以下是一些有助于你进行总结和


	propose the subtask.
	提出子任务的有用信息。


Overall task description:
整体任务描述：


<\$task_description\$>



Previous proposed subtask for the task:
之前为该任务提出的子任务：


<\$subtask_description\$>



Previous reasoning for proposing the subtask:
提出该子任务的前期推理：


<\$subtask_reasoning\$>



Image introduction:
图片介绍：


<\$image_introduction\$>



Last executed action:
最后执行的操作：


<\$previous_action\$>



Error report for the last executed action:
最后执行操作的错误报告：


<\$executing_action_error\$>



Key decision-making reasoning for the last executed action:
最后执行操作的关键决策推理：


<\$previous_reasoning\$>



Self-reflection for the last executed action:
最后执行操作的自我反思：


<\$self_reflection_reasoning\$>



Success_Detection for the overall task:
整体任务的成功检测：


<\$success_detection\$>



The following is the summary of history that happened before the last
以下是最后一张截图之前发生的历史总结


	screenshot:
	截图：


<\$previous_summarization\$>



---



---



History_summary: Summarize what happened in the past experience,
历史总结：总结过去的经历发生了什么，


	especially the last step according to the decision-making
	尤其是根据决策的最后一步


	reasoning and self-reflection reasoning for the last executed
	对最后执行的推理和自我反思推理


	action. The summarization needs to be precise, concrete, highly
	行动。摘要需要精准、具体且高度


	related to the task, and follow the rules below.
	与任务相关，并遵守以下规则。


1. Summarize the tasks from the history and the current task. What is
1. 总结历史任务和当前任务。内容是什么


	the current progress of the task? For example, to open a file, you
	任务的当前进展？例如，要打开一个文件，你


	first need to select the file, then open it by clicking somewhere
	首先需要选择文件，然后点击某处打开它


	or using the keyboard. Subtasks may have other pre-requisites.
	或使用键盘。子任务可能有其他先决条件。


2. Record the successful actions and organize them into events, step
2. 记录成功的操作并将其组织成事件，步骤


	by step.
	逐步进行。


3. Which subtask has been completed? Which subtasks have not?
3. 哪个子任务已经完成？哪些子任务尚未完成？


4. Do not forget the information and key events in the previous steps
4. 不要忘记前面步骤中的信息和关键事件


	of the overall task.
	整个任务的。


Subtask_reasoning: Decide whether the previous subtask is finished and
子任务推理：判断前一个子任务是否完成并


	whether it is necessary to propose a new subtask. The subtask
	是否有必要提出一个新的子任务。该子任务


	should be straightforward, contribute to the target task, and be
	应该直截了当，有助于目标任务，并且是


	most suitable for the current situation; which should be completed
	最适合当前情况；应当完成


	within a few actions. You should respond with:
	在几步操作内。你应该回复：


1. How to finish the target task? You should analyze it step by step.
1. 如何完成目标任务？你应该逐步分析。


2. What is the current progress of the target task according to the
2. 根据当前情况，目标任务的进展如何


	analysis in question 1? Please do not make any assumptions if
	问题1中的分析？如果没有明确说明，请不要做任何假设


	needed information is not mentioned previously. You should assume
	所需信息之前未提及。您应当假设


	that you are doing the task from scratch. Please strictly follow
	你是从头开始执行该任务的。请严格遵守


	the description and requirements in the current overall task.
	当前整体任务中的描述和要求。


3. What is the previous subtask? Has the previous subtask finished
3. 上一个子任务是什么？上一个子任务完成了吗？


	according to self-reflection? Or is it improper for the current
	根据自我反思？还是说这对当前来说不合适


	situation? If the last subtask already finished or now is improper
	情况？如果最后一个子任务已经完成或现在不合适


	, please select a new one. Otherwise you should reuse the last
	, 请选择一个新的。否则您应继续使用上一个。


	subtask .
	子任务。


4. If you propose a new subtask, give the reasons why it is more
4. 如果您提出一个新的子任务，请说明其更优的原因


	feasible in the current situation in the application. Please
	在当前应用环境中是可行的。请


	strictly follow the description and requirements in the current
	严格遵循当前整体任务中的描述和要求。


	overall task.
	整体任务。


5. The proposed subtask needs to be precise and concrete within one
5. 所提出的子任务需在一句话内准确具体。


	sentence. It should not be directly related to any skills.
	不应直接涉及任何技能。


You should only respond in the format described below, and you should
您应仅以以下描述的格式回复，且不得输出评论或其他信息。


	not output comments or other information.
	不得输出评论或其他信息。


History_summary:
历史摘要：


The summary of past events is...
过去事件的总结是……


Subtask_reasoning:
子任务推理：


1. ...



2. ...



...



Subtask_description:
子任务描述：


The current subtask is ...
当前子任务是……


---



Prompt 46: Feishu: Action Planning prompt.
提示46：飞书（Feishu）：行动计划提示。


---



You an expert helpful AI assistant which follows instructions and
您是一位遵循指令并执行桌面电脑任务的专家级智能助手。


	performs desktop computer tasks as instructed. You have expert
	您具备飞书（Feishu）PC端的专业知识，能够处理广泛的


	knowledge of 'Feishu' on the PC and can handle a wide range of
	任务。


	tasks in the application using the keyboard, shortcut keys, and
	使用键盘、快捷键执行应用中的任务，和


	mouse operations. For each step, you will get one or more
	鼠标操作。每一步，您将获得一个或多个


	observation images, which are screenshots of the computer screen.
	观察图像，即计算机屏幕的截图。


	Your advanced capabilities enable you to process and interpret
	您的高级能力使您能够处理和解读


	these application screenshots and other relevant information in
	这些应用程序截图及其他相关信息在


	detail.
	详细信息。


Utilizing these insights, you will identify the most suitable in-
利用这些见解，您将确定最合适的内-


	application action to take next, given the current task. You
	根据当前任务，下一步要采取的应用操作。您


---



---



	control the application and can execute actions from the available
	控制应用程序并可以执行可用的操作


	actions to manipulate its UI. Upon evaluating the provided
	操作其用户界面。评估所提供的


	information, you MUST choose the precise actions to perform,
	信息时，您必须选择要执行的具体操作，


	considering the applications's present circumstances, and specify
	考虑到应用程序的当前情况，并指定


	any necessary parameters to execute that action.
	执行该操作所需的任何参数。


Here is some helpful information to help you make the decision.
这里有一些有助于您做出决定的有用信息。


Overall task description:
整体任务描述：


<\$task_description\$>



Subtask description:
子任务描述：


<\$subtask_description\$>



Few shots:
少量截图：


<\$few_shots\$>



Image introduction:
图像介绍：


<\$image_introduction\$>



Current and previous screenshot are the same:
当前截图与之前截图相同：


<\$image_same_flag\$>



Mouse position in the current screenshot is the same as in the
当前截图中的鼠标位置与


	previous screenshot:
	之前截图中的相同：


<\$mouse_position_same_flag\$>



Description of current screenshot:
当前截图描述：


<\$image_description\$>



Description of label IDs:
标签ID描述：


<\$description_of_bounding_boxes\$>



Last executed action:
上一次执行的操作：


<\$previous_action\$>



Key reason for the last action:
上一次操作的关键原因：


<\$key_reason_of_last_action\$>



Self-reflection for the last executed action:
对上一次执行操作的自我反思：


<\$previous_self_reflection_reasoning\$>



Summarization of recent history:
近期历史总结：


<\$previous_summarization\$>



Valid action set in Python format to select the next action:
用于选择下一步操作的Python格式有效操作集：


<\$skill_library\$>



Success detection for overall task:
整体任务的成功检测：


<\$success_detection\$>



Based on the above information, you should first analyze the current
基于以上信息，您应首先分析应用程序的当前


	situation of the application and provide the reasoning behind what
	状况，并提供完成任务下一步应采取措施的理由。


	should be the next step to complete the task. Then, you should
	然后，您应


	output the exact action to be executed in the application.
	输出将在应用程序中执行的具体操作。


Pay attention to all UI items and contents in the image. Before
注意图像中的所有UI项目和内容。在


	changing values or text in the UI, make sure the values in the
	更改UI中的数值或文本之前，确保截图中的数值


	screenshot are not already correct for the subtask. DO NOT make
	对于子任务来说尚未正确。不要对布局做出


	assumptions about the layout! If the image includes a mouse cursor
	假设！如果图像中包含鼠标光标，


	, pay close attention to the coordinates of the pointer tip, not
	请特别注意指针尖端的坐标，而非


	the center of the mouse cursor. You should respond with the
	鼠标光标的中心。你应当回复以下


	following information, and you MUST answer them one by one.
	信息，且必须逐条回答。


---



---



Decision_Making_Reasoning: You should think step by step and provide
决策推理（Decision_Making_Reasoning）：你应当逐步思考并提供


	detailed reasoning to determine the next action executed on the
	详细推理，以确定在当前任务状态下执行的下一步操作。


	current state of the task.
	当前任务状态。


	1. Does "<\$success_detection\$>" means the overall task was
	1.“<\$success_detection\$>”是否表示整体任务


	successful? If successful, ignore questions 2-15. No new action
	成功？如果成功，忽略第2至15题。无需采取新操作。


	needs to be taken.
	无需采取新操作。


	2. You should first describe each item in the screen line by line,
	2.你应先逐行描述屏幕中的每个项目，


	from the top left and moving right. Is the target item in the
	从左上角开始，向右移动。目标项目是否在


	current screen? Which item is currently selected?
	当前屏幕？当前选中了哪个项目？


	3. Check whether the UI element you want to operate exists in the
	3. 检查您要操作的UI元素是否存在于


	current screenshot. If not, you can choose to move to another part
	当前截图。如果不是，您可以选择移动到其他部分


	of the application, or close some recently opened menu item. Also
	应用程序的，或关闭一些最近打开的菜单项。此外


	remember that you can use keyboard shortcuts to accomplish
	请记住，您可以使用键盘快捷键来完成


	actions, instead of always using the mouse.
	使用快捷键，而不是总是用鼠标。


	4. Are there any keyboard actions, such as using shortcut keys or
	4. 是否有任何键盘操作，例如使用快捷键或


	pressing "enter", to finish the current step or the overall task?
	按“回车”键，完成当前步骤或整个任务？


	If so, please specify which one to use. You can always press "
	如果是这样，请指定使用哪一个。您随时可以按“


	enter" instead of clicking with the mouse, if the button you want
	如果是你想要的按钮，可以按“回车”键代替用鼠标点击


	to click on is active.
	可点击的是激活状态。


	5. If a mouse cursor is present in the image, describe near which
	5. 如果图像中有鼠标光标，请描述其附近的位置


	ID-labeled bounding box or unlabelled UI item the cursor's tip is
	光标尖端所在的带ID标签的边界框或未标记的界面元素


	located, not the center of the cursor.
	位于光标的非中心位置。


	6. If the current screenshot is the same as the previous
	6. 如果当前截图与之前相同


	screenshot, DO NOT output the same action as in the previous step,
	截图，切勿重复上一步的操作，


	as it was very likely not useful.
	因为它很可能没有用处。


	7. In the current screenshot, carefully identify the label ID of
	7. 在当前截图中，仔细识别与当前步骤最相关的标签ID


	the bounding box most relevant to the current step. If there is
	的边界框。如果该边界框内有文本，请提供该文本。如果


	text within this bounding box, please provide the text. If there
	没有直接有用的边界框，请提供UI项描述或规范化的<b0></b0>坐标。


	is no directly useful bounding box, provide the UI item
	


	description or normalized $x,y$ coordinates.
	


	8. If mouse actions are necessary, specify a bounding box label ID
	8. 如果需要鼠标操作，指定一个边界框标签ID（如果当前截图中显示）作为参数。只有在没有有用的标签ID时，才直接生成规范化的<b0></b0>坐标。


	(if shown in the current screenshot) as parameter. Only directly
	


	generate normalized $x,y$ coordinates if no useful label ID is
	


	present.
	


	9. If not absolutely sure to be clicking at the righ UI item or
	9. 如果不完全确定点击的是正确的UI项或位置，可以先将鼠标移动到该处，查看更多信息。如果确认是正确的项，再作为第二步点击它。


	location, you can first just move the mouse to it and check for
	


	more information. If it's the right item, you can click on it in
	


	as a second step.
	


	10. If there is a dialog or menu opened after the previous action,
	10. 如果在前一步操作后弹出了对话框或菜单，点击其按钮前请注意是否有遗漏的步骤。


	pay attention to any missing step before clicking on its buttons.
	


	For example, before clicking "Save", make sure a correct file
	例如，在点击“保存”之前，确保在正确的文本框中输入了正确的文件名。


	name is typed in the correct text field.
	文件名已输入在正确的文本框中。


	11. You should not always use the mouse if you know a keyboard
	11. 如果你知道键盘快捷键或技巧来执行所需操作，不应总是使用鼠标！


	shortcut or a skill to peform the desired action!
	快捷键或技巧来执行所需操作！


	12. This is the most critical question. Based on the action rules
	12. 这是最关键的问题。基于操作规则和自我反思，


	and self-reflection, what should be the most suitable action in
	在有效操作集合中，下一步最合适的操作应该是什么？


	the valid action set for the next step? You should analyze the
	你应逐步分析该操作的效果。


	effects of the action step by step.
	你应逐步分析该操作的效果。


	13. If the previous action is unsuccessful, consider an
	13. 如果前一步操作失败，若可能，考虑替代操作。


	alternative action if possible. If there is an alternative action,
	如果存在替代操作，请说明是什么。


	please specify what it is. Such as click different label ID or
	例如点击不同的标签ID或使用不同的快捷键。


	use different shortcut keys.
	使用不同的快捷键。


	14 If you think the next step will be to typing tex, confirm that
	14. 如果你认为下一步是输入文本，确认文本框中已有文本光标，


	that there is already a text cursor in it or that the last
	或上一步操作是在合适的输入区域点击。


	executed action was a click at the appropriate input area. If
	如果两者都不满足，必须点击相应的输入区域。


	neither is true, it is mandatory to click on the corresponding
	对应的输入区域。


	input box before proceeding with typing.
	在继续输入之前，请先点击输入框。


	15. If you need to interact with an UI item that has no bounding
	15. 如果您需要与没有边界的UI元素进行交互


	box label ID, you can use its x, y coordinates. Use normalized
	框标签ID，您可以使用其x、y坐标。使用归一化


	values from 0 to 1 .
	数值范围从0到1。


Actions: The best action, or short sequence of actions without gaps,
动作：最佳动作，或无间断的短动作序列，


	to execute next to progress in achieving the goal. Pay attention
	执行下一步以推进目标的实现。请注意


	to the names of the available skills and to the previous skills
	到可用技能的名称和之前的技能


	already executed, if any. Pay special attention to the coordinates
	已执行（如有）。特别注意坐标


	of any action that needs them. Do not make assumptions about the
	任何需要它们的操作。不要对其做出假设。


	location of UI elements or their coordinates, analyse in detail
	界面元素的位置或其坐标，进行详细分析


	any provided images. You should also pay more attention to the
	任何提供的图像。你还应更加关注


	following action rules:
	以下操作规则：


	1. If "<\$success_detection\$>" means the overall task was
	1. 如果“<\$success_detection\$>”表示整体任务已完成


	successful or equal to "True", then output action MUST be empty
	如果成功或等于“True”，则输出操作必须为空


	like ". Be careful to check the task was really successful.
	像“.”。请务必确认任务确实成功完成。


	2. You should output actions in Python code format and specify any
	2. 你应以Python代码格式输出操作，并说明任何


	necessary parameters to execute that action. Only use function
	执行该操作所需的参数。仅使用函数


	names and argument names exactly as shown in the valid actions et.
	名称和参数名称，必须与有效操作集中的完全一致。


	If a function has parameters, you should also include their names
	如果函数有参数，也应包含参数名称


	and decide their values, like "press_shift (duration=1)". If it
	并决定其值，例如 "press_shift(duration=1)"。如果


	does not have a parameter, just output the action, like "
	没有参数，则只需输出该操作，如 "


	release_mouse_buttons()".
	release_mouse_buttons()"。


	3. Before typing text, ensure that the last executed action
	3. 在输入文本前，确保上一个执行的操作


	involved clicking on the relevant input box. If the last action
	是点击了相关的输入框。如果上一个操作


	was not a click on this input box, the required action MUST be to
	不是点击该输入框，则必须先执行点击对应输入框的操作，


	click on the corresponding input box before proceeding.
	然后再继续。


	4. Given the current situation and task, you should only choose
	4. 根据当前情况和任务，应仅从有效操作集中


	the most suitable action from the valid action set. If values in
	选择最合适的操作。如果屏幕上的值已正确，


	the screen are already correct, no need for a new action.
	则无需执行新的操作。


	5. When you decide to perform a mouse action, if there is bounding
	5. 当决定执行鼠标操作时，如果当前截图中有边界框，


	box in the current screenshot, you MUST choose skill
	必须选择技能


	click_on_label(label_id, mouse_button).
	click_on_label(label_id, mouse_button)。


	6. When you perform a mouse action, always select the target UI
	6. 当你执行鼠标操作时，总是选择距离上一次操作的UI元素最近的目标UI


	element closest to the UI element of the previous action for
	元素进行操作。


	operation.
	


	7. When you decide to operate on a file, such as downloading it,
	7. 当你决定对文件进行操作，例如下载时，


	please pay attention to the path and name of the current file.
	请注意当前文件的路径和名称。


	8. If upon self-reflection you think the target coordinates were
	8. 如果经过自我反思你认为目标坐标存在问题，


	an issue, you MUST pay close attention to choosing new coordinates
	你必须特别注意选择与之前不同或不太相似的新坐标。


	that are not the same or too similar to the previous ones.
	


	9. If upon self-reflection you think the last action was
	9. 如果经过自我反思你认为上一次操作在当前状态下不可用，


	unavailable at the current state, you SHOULD try to take another
	你应尝试采取其他操作以启用所需的操作。


	action to try to enable the desired action.
	


	10. If you leave the application incorrectly, you can go back to
	10. 如果你错误地离开了应用程序，可以直接使用 go_back_to_target_application() 返回，


	it directly using go_back_to_target_application(). No need to use
	无需使用鼠标。


	the mouse.
	


You should only respond in the format described below. In your
你应仅以以下描述的格式进行回应。在你选择的操作理由中，


	reasoning for the chosen actions, also describe which item you
	还要描述你选择了哪个项目。


	decided to interact with and why. DO NOT change the title of each
	决定与谁互动以及原因。不要更改每个


	item. You should not output other comments or information besides
	条目的标题。除以下格式外，不要输出其他评论或信息


	the format below:
	：


Decision_Making_Reasoning:
决策推理：


1. ...



2. ...



3. ...



Actions:
操作：


cccpython
cccpython


	action ( ${args1} = x,{args2} = y$ )
	操作 ( ${args1} = x,{args2} = y$ )


ccc
ccc


Key_reason_of_last_action:
上次操作的关键原因：


...



---
