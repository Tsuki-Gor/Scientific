
    <!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>2024-A Pipeline of Neural-Symbolic Integration to Enhance Spatial Reasoning </title>
        <style>
            * {
              padding: 0;
              margin: 0;
              box-sizing: border-box;
            }
             html {
              line-height: 1.15; /* 1 */
              -webkit-text-size-adjust: 100%; /* 2 */
            }
            body {
              padding: 20px 350px;
              margin: 0;
            }
            main {
              display: block;
            }
            h1 {
              font-size: 2em;
              margin: 0.67em 0;
            }
            hr {
              box-sizing: content-box; /* 1 */
              height: 0; /* 1 */
              overflow: visible; /* 2 */
            }
            pre {
              font-family: monospace, monospace; /* 1 */
              font-size: 1em; /* 2 */
            }
            a {
              background-color: transparent;
            }
            abbr[title] {
              border-bottom: none; /* 1 */
              text-decoration: underline; /* 2 */
              text-decoration: underline dotted; /* 2 */
            }
            b,
            strong {
              font-weight: bolder;
            }
            code,
            kbd,
            samp {
              font-family: monospace, monospace; /* 1 */
              font-size: 1em; /* 2 */
            }
            small {
              font-size: 80%;
            }
            sub,
            sup {
              font-size: 75%;
              line-height: 0;
              position: relative;
              vertical-align: baseline;
            }
            sub {
              bottom: -0.25em;
            }
            sup {
              top: -0.5em;
            }
            img {
              border-style: none;
            }
            button,
            input,
            optgroup,
            select,
            textarea {
              font-family: inherit; /* 1 */
              font-size: 100%; /* 1 */
              line-height: 1.15; /* 1 */
              margin: 0; /* 2 */
            }
            button,
            input { /* 1 */
              overflow: visible;
            }
            button,
            select { /* 1 */
              text-transform: none;
            }
            button,
            [type="button"],
            [type="reset"],
            [type="submit"] {
              -webkit-appearance: button;
            }
            button::-moz-focus-inner,
            [type="button"]::-moz-focus-inner,
            [type="reset"]::-moz-focus-inner,
            [type="submit"]::-moz-focus-inner {
              border-style: none;
              padding: 0;
            }
            button:-moz-focusring,
            [type="button"]:-moz-focusring,
            [type="reset"]:-moz-focusring,
            [type="submit"]:-moz-focusring {
              outline: 1px dotted ButtonText;
            }
            fieldset {
              padding: 0.35em 0.75em 0.625em;
            }
            legend {
              box-sizing: border-box; /* 1 */
              color: inherit; /* 2 */
              display: table; /* 1 */
              max-width: 100%; /* 1 */
              padding: 0; /* 3 */
              white-space: normal; /* 1 */
            }
            progress {
              vertical-align: baseline;
            }
            textarea {
              overflow: auto;
            }
            [type="checkbox"],
            [type="radio"] {
              box-sizing: border-box; /* 1 */
              padding: 0; /* 2 */
            }
            [type="number"]::-webkit-inner-spin-button,
            [type="number"]::-webkit-outer-spin-button {
              height: auto;
            }
            [type="search"] {
              -webkit-appearance: textfield; /* 1 */
              outline-offset: -2px; /* 2 */
            }
            [type="search"]::-webkit-search-decoration {
              -webkit-appearance: none;
            }
            ::-webkit-file-upload-button {
              -webkit-appearance: button; /* 1 */
              font: inherit; /* 2 */
            }
            details {
              display: block;
            }
            summary {
              display: list-item;
            }
            [hidden] {
              display: none;
            }
             table {
                border-collapse: collapse;
                width: 100%;
                margin-top: 20px;
                margin-bottom: 20px;
              }
              table thead {
                background-color: #e5e5e5;
              }
              table td {
                padding: 8px;
                /*background-color: #e5e5e5;*/
                border: 1px solid #ccc; /* 可选，添加边框样式 */
              }
              table th {
                padding: 8px;
                /*background-color: #e5e5e5;*/
                border: 1px solid #ccc; /* 可选，添加边框样式 */
              }
              h1, h2, h3, h4, h5, h6 {
                margin-bottom: 20px;
              }
              p {
                margin-top: 20px;
                text-indent: 2em;
                margin-bottom: 20px;
              }
        </style>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      </head>
      <body>
        <div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="1" id="mark-7893a31c-9cfc-4e47-aa88-673aabcccded" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-0="0,0"><div style="height: auto;"><span style="display: inline;"><h1><div><div>A Pipeline of Neural-Symbolic Integration to Enhance Spatial Reasoning in Large Language Models<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">增强大语言模型空间推理能力的神经符号集成管道</div></div></div></h1><div><br></div><div><div><div>Rong Wang <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12023" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mo>∗</mo><mn>1</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> ,Kun Sun <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12024" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> ,and Jonas Kuhn <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12025" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>3</mn></mrow></msup></math></mjx-assistive-mml></mjx-container><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">王荣 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12026" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mo class="mjx-n"><mjx-c class="mjx-c2217"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mo>∗</mo><mn>1</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> ，孙坤 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12027" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> ，乔纳斯·库恩 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12028" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>3</mn></mrow></msup></math></mjx-assistive-mml></mjx-container></div></div></div></div><div><br></div><div><div><div><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12029" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> The Institute of Natural Language Processing,Stuttgart University,Stuttgart,<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12030" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mn class="mjx-n"><mjx-c class="mjx-c33"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>1</mn><mo>,</mo><mn>3</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> 斯图加特大学自然语言处理研究所，斯图加特，</div></div></div></div><div><br></div><div><div><div>Germany<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">德国</div></div></div></div><div><br></div><div><div><div><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12031" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> Tübingen, Germany<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12032" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msup><mjx-texatom texclass="ORD"></mjx-texatom><mjx-script style="vertical-align: 0.363em;"><mjx-texatom size="s" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-script></mjx-msup></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mrow data-mjx-texclass="ORD"></mrow><mrow data-mjx-texclass="ORD"><mn>2</mn></mrow></msup></math></mjx-assistive-mml></mjx-container> 德国图宾根</div></div></div></div><div><br></div><h2><div><div>Abstract<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">摘要</div></div></div></h2><div><br></div><div><div><div>Large Language Models (LLMs) have demonstrated impressive capabilities across various tasks. However, LLMs often struggle with spatial reasoning which is one essential part of reasoning and inference and requires understanding complex relationships between objects in space. This paper proposes a novel neural-symbolic framework that enhances LLMs' spatial reasoning abilities. We evaluate our approach on two benchmark datasets: StepGame and SparQA, implementing three distinct strategies: (1) ASP (Answer Set Programming)-based symbolic reasoning, (2) LLM + ASP pipeline using DSPy, and (3) Fact + Logical rules. Our experiments demonstrate significant improvements over the baseline prompting methods, with accuracy increases of 40-50% on StepGame dataset and 3-13% on the more complex SparQA dataset. The "LLM + ASP" pipeline achieves particularly strong results on the tasks of Finding Relations (FR) and Finding Block (FB) questions, though performance varies across different question types. Our impressive results suggest that while neural-symbolic approaches offer promising directions for enhancing spatial reasoning in LLMs, their effectiveness depends heavily on the specific task characteristics and implementation strategies. We propose an integrated, simple yet effective set of strategies using a neural-symbolic pipeline to boost spatial reasoning abilities in LLMs. This pipeline and its strategies demonstrate strong generalizability and broader applicability to other reasoning domains in LLMs, such as temporal reasoning, deductive inference etc.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">大语言模型（LLMs）在各种任务中展现出了令人印象深刻的能力。然而，大语言模型在空间推理方面往往表现不佳，而空间推理是推理和推断的重要组成部分，需要理解物体在空间中的复杂关系。本文提出了一种新颖的神经符号框架，以增强大语言模型的空间推理能力。我们在两个基准数据集（StepGame和SparQA）上评估了我们的方法，实施了三种不同的策略：（1）基于回答集编程（ASP）的符号推理；（2）使用DSPy的大语言模型 + 回答集编程管道；（3）事实 + 逻辑规则。我们的实验表明，与基线提示方法相比有显著改进，在StepGame数据集上准确率提高了40 - 50%，在更复杂的SparQA数据集上提高了3 - 13%。“大语言模型 + 回答集编程”管道在寻找关系（FR）和寻找块（FB）问题的任务中取得了特别好的结果，尽管在不同类型的问题上表现有所不同。我们令人印象深刻的结果表明，虽然神经符号方法为增强大语言模型的空间推理能力提供了有前景的方向，但其有效性在很大程度上取决于具体的任务特征和实施策略。我们提出了一套使用神经符号管道的集成、简单而有效的策略，以提高大语言模型的空间推理能力。该管道及其策略在大语言模型的其他推理领域（如时间推理、演绎推理等）表现出了很强的泛化性和更广泛的适用性。</div></div></div></div><div><br><hr></div><div><div><div>*Correspondence to R. W., Email:rongw. de@gmail.com<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">* 通信作者：王荣，邮箱：rongw.de@gmail.com</div></div></div></div><div><br><hr></div><div><div><div></div></div></div></span></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="2" id="mark-a11e792c-ca33-4738-99f1-eb3fa1651821" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-1="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-1="0,0">Keywords: reasoning abilities, ASP, neural-symbolic integration, two stages, generaliability, pipeline, multi-agent AI<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">关键词：推理能力；回答集编程；神经符号集成；两个阶段；泛化性；管道；多智能体人工智能</div></paragraphpositioning></div></div></div><div><div><div></div></div></div></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="3" id="mark-7888927f-4a10-4284-9092-ac0e09e222c4" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-2="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-2="0,0"></paragraphpositioning></div></div></div><h2><div><div>1 Introduction<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">1 引言</div></div></div></h2><div><br></div><div><div><div>Large Language Models (LLMs) are known for their impressive performance across a range of tasks, demonstrating certain commonsense reasoning abilities. However, since LLMs are trained to predict subsequent words in a sequence, they seem to lack sufficient grounding to excel at tasks requiring spatial, physical, and embodied reasoning. Recent studies (Bang et al., 2023; Cohn, 2023), highlighted the limitations of models like ChatGPT in deductive logical reasoning, spatial reasoning and non-textual semantic reasoning, underlining the need for further improvements in spatial reasoning.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">大语言模型（LLMs）以其在一系列任务中的出色表现而闻名，展现出了一定的常识推理能力。然而，由于大语言模型是为预测序列中的后续单词而训练的，它们似乎缺乏足够的基础来在需要空间、物理和具身推理的任务中表现出色。最近的研究（Bang等人，2023；科恩，2023）强调了像ChatGPT这样的模型在演绎逻辑推理、空间推理和非文本语义推理方面的局限性，凸显了在空间推理方面进一步改进的必要性。</div></div></div></div><div><br></div><div><div><div>Spatial reasoning is a crucial cognitive function that enables humans to conceptualize and predict the movement and interactions of objects in two or three-dimensional spaces (Byrne and Johnson-Laird, 1989). Spatial reasoning is one essential part of reasoning and inference. Reasoning and inference are essential building blocks in advancing Artificial General Intelligence (AGI), which aims to create AI systems that can perform at or beyond human levels across a wide range of cognitive tasks (Kumar et al., 2023). If LLMs are to approach AGI, they must be equipped with spatial reasoning abilities comparable to those of humans. These capabilities are not only valuable in themselves but also essential for LLM-based applications in robotics, task planning, path planning, and navigation (Sharma, 2023; Chen et al., 2024).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">空间推理是一项至关重要的认知功能，它使人类能够概念化和预测物体在二维或三维空间中的运动和相互作用（伯恩和约翰逊 - 莱尔德，1989）。空间推理是推理和推断的重要组成部分。推理和推断是推进通用人工智能（AGI）的基本要素，通用人工智能旨在创建能够在广泛的认知任务中达到或超越人类水平的人工智能系统（库马尔等人，2023）。如果大语言模型要接近通用人工智能，它们必须具备与人类相当的空间推理能力。这些能力不仅本身有价值，而且对于基于大语言模型的机器人、任务规划、路径规划和导航应用也至关重要（夏尔马，2023；陈等人，2024）。</div></div></div></div><div><br></div><div><div><div>Spatial reasoning includes two primary categories: quantitative and qualitative reasoning. Quantitative spatial reasoning involves precise mathematical computations of spatial properties such as distances, angles, coordinates, and dimensions. In contrast, qualitative spatial reasoning (QSR) deals with more abstract, symbolic relationships and relative positions between objects (Cohn and Renz, 2008). QSR comprises directional relations describing how objects are oriented relative to each other (e.g., "north", "left"), distance relations capturing relative proximity (e.g., "near", "far"), and topological relations characterizing how spatial regions connect and contain each other (e.g., "inside", "overlapping", "disconnected"). LLMs face significant challenges in processing these spatial relationships, as they must not only comprehend semantic descriptions of scenes but also perform complex multi-hop reasoning about how objects relate to one another in space (Li et al., 2024a; Yang et al., 2024).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">空间推理主要包括两类：定量推理和定性推理。定量空间推理涉及对空间属性（如距离、角度、坐标和尺寸）进行精确的数学计算。相比之下，定性空间推理（QSR）处理物体之间更抽象、符号化的关系和相对位置（科恩和伦茨，2008）。定性空间推理包括描述物体彼此相对方向的方向关系（如“北”“左”）、捕捉相对接近程度的距离关系（如“近”“远”）以及表征空间区域如何相互连接和包含的拓扑关系（如“内部”“重叠”“不相连”）。大语言模型在处理这些空间关系时面临重大挑战，因为它们不仅要理解场景的语义描述，还要对物体在空间中的相互关系进行复杂的多跳推理（李等人，2024a；杨等人，2024）。</div></div></div></div><div><br></div><div><div><div>Traditional approaches in LLMs mainly rely on free-form prompting in a single call to LLMs for facilitating spatial reasoning. However, these methods have demonstrated notable limitations, particularly on challenging datasets like StepGame (Shi et al., 2022) and SparQA (Mirzaee and Kordjamshidi, 2022), which require multi-step planning. In these scenarios, LLMs often struggle with maintaining coherence, frequently hallucinating or losing sight of the original objectives, resulting in inaccurate and unreliable outputs. Recent advancements have shown promise in augmenting LLMs with external tools for tasks requiring arithmetic, navigation, and knowledge base lookups (Fang et al., 2024). However, these efforts are insufficient for enhancing spatial reasoning in LLMs significantly. Recent studies have introduced neural-symbolic strategies, such as ASP (Answer Set Programming) (Yang et al., 2023), to address the limitations of prompting-based approaches. Neural-symbolic methods typically follow a two-step process: extracting facts using LLMs and then applying logical reasoning. As is known, LLMs excel at extracting facts but struggle with reasoning. However, integrating logical reasoning can effectively bridge this gap in their reasoning capabilities. This approach therefore mitigates the weaknesses of reasoning in LLMs and has been shown to significantly outperform prompting methods (Mirzaee and Kordjamshidi, 2023). However, despite their advantages, current research on employing neural-symbolic approaches to enhance LLMs' spatial reasoning capabilities still faces several challenges. For example, some research merely tested performance on specific datasets without comprehensive evaluation (Yang et al., 2023). Some researchers have not properly applied neural-symbolic methods (Li et al., 2024a). Furthermore, some studies fail to fully explore LLMs' spatial reasoning by implementing incomplete feedback loops via multiple LLMs (Mirzaee and Kordjamshidi, 2023). A detailed analysis is presented in the related work section. Such limitations require the need for more rigorous, integrated and effective approaches.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">大语言模型（LLMs）的传统方法主要依赖于单次调用大语言模型时的自由形式提示来促进空间推理。然而，这些方法已显示出显著的局限性，特别是在像StepGame（Shi等人，2022年）和SparQA（Mirzaee和Kordjamshidi，2022年）这样需要多步规划的具有挑战性的数据集上。在这些场景中，大语言模型往往难以保持连贯性，经常产生幻觉或忽视原始目标，导致输出不准确且不可靠。最近的进展表明，在需要算术、导航和知识库查询的任务中，为大语言模型配备外部工具是有前景的（Fang等人，2024年）。然而，这些努力不足以显著增强大语言模型的空间推理能力。最近的研究引入了神经符号策略，如回答集编程（ASP，Answer Set Programming）（Yang等人，2023年），以解决基于提示的方法的局限性。神经符号方法通常遵循两步过程：使用大语言模型提取事实，然后应用逻辑推理。众所周知，大语言模型擅长提取事实，但在推理方面存在困难。然而，集成逻辑推理可以有效弥补其推理能力的这一差距。因此，这种方法减轻了大语言模型在推理方面的弱点，并且已被证明明显优于提示方法（Mirzaee和Kordjamshidi，2023年）。然而，尽管有这些优点，目前关于采用神经符号方法增强大语言模型空间推理能力的研究仍然面临一些挑战。例如，一些研究仅在特定数据集上测试性能，而没有进行全面评估（Yang等人，2023年）。一些研究人员没有正确应用神经符号方法（Li等人，2024a）。此外，一些研究通过多个大语言模型实施不完整的反馈循环，未能充分探索大语言模型的空间推理能力（Mirzaee和Kordjamshidi，2023年）。相关工作部分将进行详细分析。这些局限性需要更严谨、集成和有效的方法。</div></div></div></div><div><div><div></div></div></div></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="4" id="mark-2488e6a1-303c-4aaa-b0bd-6b067e941848" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-3="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-3="0,0"></paragraphpositioning></div></div></div><div><div><div>To address these limitations, we propose a systematic pipeline that effectively enhances LLMs' spatial reasoning capabilities. Our approach combines strategic prompting with symbolic reasoning to create a robust framework that significantly improves performance of spatial reasoning across different LLM architectures. By integrating feedback loops and ASP-based verification, our methodology demonstrates strong generalizability when tackling complex spatial reasoning tasks. Specifically, building on these insights, we propose a novel neural-symbolic pipeline that integrates LLMs with ASP, aimed at enhancing the LLMs' capabilities of spatial reasoning in SparQA and StepGame datasets. We investigate the potential benefits of integrating symbolic reasoning components into LLMs to further boost their spatial reasoning capabilities. Within the broader field of neural-symbolic AI, the combination of LLMs as parsers with ASP solvers has emerged as a particularly effective approach for complex reasoning tasks. Additionally, the present study is one of the pioneering projects which uses DSPy (Khattab et al., 2023) to pipeline and program LLM.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">为了解决这些局限性，我们提出了一个系统的流程，该流程能有效增强大语言模型的空间推理能力。我们的方法将策略性提示与符号推理相结合，创建了一个强大的框架，显著提高了不同大语言模型架构下的空间推理性能。通过集成反馈循环和基于回答集编程（ASP）的验证，我们的方法在处理复杂的空间推理任务时表现出很强的泛化能力。具体而言，基于这些见解，我们提出了一种新颖的神经符号流程，将大语言模型与回答集编程（ASP）集成，旨在增强大语言模型在SparQA和StepGame数据集上的空间推理能力。我们研究了将符号推理组件集成到大语言模型中以进一步提升其空间推理能力的潜在益处。在更广泛的神经符号人工智能领域，将大语言模型作为解析器与回答集编程（ASP）求解器相结合已成为处理复杂推理任务的一种特别有效的方法。此外，本研究是最早使用DSPy（Khattab等人，2023年）对大语言模型进行流程化和编程的项目之一。</div></div></div></div><div><br></div><div><div><div>Our pipeline's effectiveness is evident across diverse datasets, ranging from simple directional relationships to intricate spatial configurations involving multiple objects and relationships. This systematic approach not only boosts performance but also provides a transparent and reproducible framework for spatial reasoning tasks. Unlike previous methods that work only with specific models or simple scenarios, our strategy can be adapted to various LLMs and maintains its effectiveness and generalizability across different levels of complexity in spatial reasoning challenges. The current study addresses the following research questions:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">我们的流程在各种数据集上的有效性显而易见，从简单的方向关系到涉及多个对象和关系的复杂空间配置。这种系统的方法不仅提高了性能，还为空间推理任务提供了一个透明且可重复的框架。与之前仅适用于特定模型或简单场景的方法不同，我们的策略可以适应各种大语言模型，并且在不同复杂程度的空间推理挑战中都能保持其有效性和泛化能力。本研究解决了以下研究问题：</div></div></div></div><div><div><div></div></div></div></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="5" id="mark-1f65225a-0078-4641-a1b1-cf978b686eba" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-4="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="6" id="mark-4fd72774-7fb0-4354-a2ae-b795162d0fc5" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-5="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="7" id="mark-4119458f-40b3-4f6c-99a9-f87d8134c442" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-6="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="8" id="mark-e8f24397-552d-46bd-a549-24f13c4fe533" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-7="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="9" id="mark-239730a2-868c-4f74-b339-322e12137ec4" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-8="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="10" id="mark-f2bc758c-06b0-499e-b7f6-456045740c8f" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-9="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="11" id="mark-e77a46f7-4c03-45bc-92f1-f5f0503de9b6" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-10="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="12" id="mark-12e8f55d-81b5-4db2-b951-38ec6614dd4e" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-11="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="13" id="mark-2f772cea-47b3-4290-ab17-e2919938b9c1" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-12="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="14" id="mark-b8e56384-82ce-4147-adec-79da4048b06d" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-13="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="15" id="mark-29d56e07-24e8-4a96-9da7-f7a77e519505" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-14="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="16" id="mark-97f589c9-face-4f01-a3f7-1910caca597a" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-15="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="17" id="mark-77af4b5d-5757-42fa-8856-0e7119e70ec5" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-16="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="18" id="mark-e1ea7ce5-6d13-4ef0-b68c-f588311fef81" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-17="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="19" id="mark-23d8bbf1-f841-4260-b8d7-bde368bc7aec" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-18="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="20" id="mark-69c3bfcd-77c7-4ebc-a8d7-737fc7a45457" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-19="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="21" id="mark-9cc54791-6394-40c4-a23f-d64b06b9bd05" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-20="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="22" id="mark-25d450cd-79f9-4ca6-9ecb-d1194ffeb809" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-21="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="23" id="mark-a2ab2bb6-5566-4ee0-9dd8-733e4077efc8" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-22="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="24" id="mark-86171d76-4a12-4538-9146-294781835d4e" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-23="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="25" id="mark-cf2aaeda-a296-4fd0-83e3-ed337652407b" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-24="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="26" id="mark-e0c18091-58bb-4c60-b2f4-93dbda31a8a3" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-25="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="27" id="mark-6173ec12-6b8c-4ab6-92b6-4bdf80108bdf" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-26="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="28" id="mark-5f254d4b-b4f2-44ef-b85c-2a5d9e03d428" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-27="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="29" id="mark-0badaecc-1691-4415-a0ad-461f77c562b2" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-28="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="30" id="mark-8fade832-37a2-4622-bbfd-204ee53fd24c" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-29="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="31" id="mark-61534726-5b3e-4dbb-91dc-fceac82a481a" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-30="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="32" id="mark-250e82f0-5a08-4726-b3d8-ea47747c0664" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-31="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="33" id="mark-f0a6e108-6a74-4d00-bc46-1bacbc5cda04" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-32="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="34" id="mark-4786f36f-61a4-42ff-9274-16e01b7e0f5e" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-33="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="35" id="mark-54fb1108-65bc-4467-b998-8cc3c0d98a4d" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-34="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="36" id="mark-07d1432b-4b6b-4154-814f-0a06bf200c40" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-35="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="37" id="mark-d26f5d62-8a85-431e-aa9f-783a05fb0328" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-36="0,0"><div style="height: auto;"></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="38" id="mark-e216ecff-ce61-45e6-937f-e202217b3197" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-37="0,0"><div style="height: auto;"><span style="display: inline;"><div><div><div><paragraphpositioning data-position-37="0,0"></paragraphpositioning></div></div></div><div><div><div>We observed a consistent pattern of performance degradation as reasoning depth increased. The general trend is consistent and suggests that the complexity of the tasks grows with the number of hops.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">我们观察到，随着推理深度的增加，性能下降呈现出一致的模式。总体趋势是一致的，这表明任务的复杂性随着跳数的增加而增加。</div></div></div></div><div><br></div><div><div><div>The success of LLM + ASP can be attributed to several key factors. The simplified predicate structure, utilizing only is/3 and query/2 predicates, provides a clear bridge between natural language and logical forms. This simplification, combined with our well-designed knowledge module, enables efficient handling of spatial relationships while maintaining robust error detection capabilities.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">大语言模型 + 答案集编程（LLM + ASP）的成功可归因于几个关键因素。简化的谓词结构仅使用is/3和query/2谓词，为自然语言和逻辑形式之间提供了清晰的桥梁。这种简化与我们精心设计的知识模块相结合，能够在有效处理空间关系的同时，保持强大的错误检测能力。</div></div></div></div><div><br></div><h2><div><div>C3: Error analysis<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">C3：错误分析</div></div></div></h2><div><br></div><div><div><div>The ASP solver outputs can be categorized into three types: 1). Parsing Errors: Syntax mistakes, inconsistent variables, or incomplete code (rare, <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12015" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c3C"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mi class="mjx-n"><mjx-c class="mjx-c25"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><mn>2</mn><mi mathvariant="normal">%</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container> ; 2). Satisfiable but No Query Results: No syntax errors but solver cannot find valid solutions (rare, <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12016" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c3C"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mi class="mjx-n"><mjx-c class="mjx-c25"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><mn>2</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container> ); 3). Inconsistency with Ground Truth Labels: Most common error, typically due to ambiguous language expressions.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">答案集编程（ASP）求解器的输出可分为三种类型：1）解析错误：语法错误、变量不一致或代码不完整（罕见，<mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12017" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c3C"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mi class="mjx-n"><mjx-c class="mjx-c25"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><mn>2</mn><mi mathvariant="normal">%</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container>）；2）可满足但无查询结果：无语法错误，但求解器无法找到有效解决方案（罕见，<mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12018" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mo class="mjx-n"><mjx-c class="mjx-c3C"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="4"><mjx-c class="mjx-c32"></mjx-c></mjx-mn><mjx-mi class="mjx-n"><mjx-c class="mjx-c25"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo><mn>2</mn><mi mathvariant="normal">%</mi></math></mjx-assistive-mml></mjx-container>）；3）与真实标签不一致：最常见的错误，通常是由于语言表达模糊造成的。</div></div></div></div><div><br></div><div><div><div>For example, consider this scenario:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">例如，考虑以下场景：</div></div></div></div><div><br><ul><li>Story: `"D is on the left side of and below E. M is over G. M is diagonally left and below E. B is under G."`</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>故事：“D在E的左侧且下方。M在G的上方。M在E的左下方斜对角处。B在G的下方。”</li></ul></div><br><ul><li>Question: `"What is the relation of agent <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12019" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></mjx-assistive-mml></mjx-container> to agent <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12020" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi></math></mjx-assistive-mml></mjx-container> ?"`</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>问题：“主体<mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12021" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></mjx-assistive-mml></mjx-container>与主体<mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12022" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D438 TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi></math></mjx-assistive-mml></mjx-container>的关系是什么？”</li></ul></div><br><ul><li>Ground-Truth Label: `"down_left"`.</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>真实标签：“左下方”。</li></ul></div><br></div><div><div><div>When mapped to facts:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">当映射为事实时：</div></div></div></div><div><br><ul><li>is ( `"D"`, left, `"E"` ) .</li></ul><br><ul><li>is (`"D"`, down, `"E"`).</li></ul><br><ul><li>is (`"M"`, top, `"G"`).</li></ul></div><div><div><div></div></div></div></span></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="39" id="mark-d685605e-9138-45ad-aa6d-552d3e092aeb" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-38="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-38="0,0"></paragraphpositioning></div></div></div><div><ul><li>is (`"M"`, down_left, `"E"`).</li></ul><br><ul><li>is (`"B"`, down, `"G"`).</li></ul><br><ul><li>query (`"G"`, `"E"`).</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>查询(`"G"`, `"E"`)。</li></ul></div><br></div><div><div><div>The ASP solver returns multiple possible relations ("down_left, down, down_right, left, top_left") due to ambiguous language interpretation. Llama 70B showed more instances of multiple relation results and "satisfiable but no query results" compared to Deepseek, suggesting lower semantic parsing effectiveness.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">由于语言解释存在歧义，Answer Set Programming（ASP）求解器返回了多种可能的关系（“左下、下、右下、左、左上”）。与Deepseek相比，Llama 70B出现更多返回多种关系结果以及“可满足但无查询结果”的情况，这表明其语义解析效果较差。</div></div></div></div><div><br></div><div><div><div>The StepGame benchmark’s simplicity (95% of sentences contain single is/3 relation facts) and clear agent definitions make it suitable for testing smaller LLMs or specialized semantic parsers paired with ASP solvers. While testing with smaller models (Openchat, Mistral 8B, Llama 8B, Gemma 8B) remains pending, the LLM + ASP approach is expected to yield higher accuracy than baseline prompting.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">StepGame基准测试的简单性（95%的句子仅包含单个is/3关系事实）和明确的智能体定义，使其适合测试较小的大语言模型（LLM）或与ASP求解器配合使用的专用语义解析器。虽然使用较小模型（Openchat、Mistral 8B、Llama 8B、Gemma 8B）的测试尚未进行，但预计LLM + ASP方法将比基线提示方法产生更高的准确率。</div></div></div></div><div><br></div><h2><div><div>Appendix D: The code and examples in experiment in SparQA<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">附录D：SparQA实验中的代码和示例</div></div></div></h2><div><br></div><div><div><div>Compared with the offset -based rule in StepGame, this knowledge module used in SparQA is not very complicated, as it relies on the logical rule to infer the new relations.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">与StepGame中基于偏移量的规则相比，SparQA中使用的这个知识模块并不复杂，因为它依靠逻辑规则来推断新的关系。</div></div></div></div><div><br></div><div><div><div>The symbolic reasoning module involves executing the ASP solver on the generated facts and rules. The ASP solver outputs all answer sets or facts that satisfy the given conditions. For Yes/No, Find Relations (FR), and Find Block (FB) questions, there is no need for post-processing to calculate accuracy against the ground truth label to evaluate the performance of the language model. However, for Choose Object (CO) questions, a manual review of the ASP results is necessary for evaluation.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">符号推理模块涉及对生成的事实和规则执行ASP求解器。ASP求解器输出所有满足给定条件的答案集或事实。对于是非题、查找关系（FR）和查找方块（FB）问题，无需进行后处理以对照真实标签计算准确率来评估语言模型的性能。然而，对于选择对象（CO）问题，需要手动审查ASP结果以进行评估。</div></div></div></div><div><br></div><div><div><div>To illustrate this point, consider the following example: "What object is not above the purple rectangle? The orange triangle or the white square?" The actual answer is "['the white square']." In this case, the query can be expressed as query(Object) :- object(Object, _, _, _, _), object(purple_rectangle, _, purple, rectangle, _), not is(Object, above, purple_rectangle). When executed, the ASP solver will return all objects that are not above the purple rectangle. For instance, if the output is "small_white_square, small_black_square, large_yellow_square," we observe that small_white_square is included in this result while the orange triangle is not. Since this satisfies the condition of the query correctly, we consider this ASP result as valid. The complete set of prompts for semantic parsing is seen in the following section.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">为了说明这一点，考虑以下示例：“哪个对象不在紫色矩形上方？是橙色三角形还是白色正方形？”实际答案是“['白色正方形']”。在这种情况下，查询可以表示为query(Object) :- object(Object, _, _, _, _), object(purple_rectangle, _, purple, rectangle, _), not is(Object, above, purple_rectangle)。执行时，ASP求解器将返回所有不在紫色矩形上方的对象。例如，如果输出是“small_white_square, small_black_square, large_yellow_square”，我们会发现小白色正方形包含在这个结果中，而橙色三角形不在。由于这正确满足了查询条件，我们认为这个ASP结果是有效的。语义解析的完整提示集见下一节。</div></div></div></div><div><div><div></div></div></div></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="40" id="mark-0e95248e-5273-4e8d-b054-9daa3de6e7ff" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-39="0,0"><div style="height: auto;"><span style="display: inline;"><div><div><div><paragraphpositioning data-position-39="0,0"></paragraphpositioning></div></div></div><div><!-- Media --><br><hr></div><h2><div><div>ASP Code Sample<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">ASP代码示例</div></div></div></h2><div><br><ul><li>% Inverse relations</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>% 逆关系</li></ul></div><br></div><div><div><div>inverse ( left , right ;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">逆关系 ( 左 , 右 ;</div></div></div></div><div><br></div><div><div><div>right, left;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">右, 左;</div></div></div></div><div><br></div><div><div><div>front, behind;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">前, 后;</div></div></div></div><div><br></div><div><div><div>behind, front;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">后, 前;</div></div></div></div><div><br></div><div><div><div>above, below;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">上, 下;</div></div></div></div><div><br></div><div><div><div>below, above).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">下, 上).</div></div></div></div><div><br></div><div><div><div><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11982" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>Y</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow><mo>,</mo><mi>X</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>X</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mi>Y</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container> ,inverse <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11983" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mi>X</mi><mo>!</mo><mo>=</mo><mi>Y</mi></math></mjx-assistive-mml></mjx-container> .<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11984" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>Y</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow><mo>,</mo><mi>X</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>X</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mi>Y</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container> ，逆关系 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11985" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mi>X</mi><mo>!</mo><mo>=</mo><mi>Y</mi></math></mjx-assistive-mml></mjx-container> 。</div></div></div></div><div><br></div><div><div><div>...</div></div></div><div><br></div><div><div><div>% Symmetric relations<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 对称关系（Symmetric relations）</div></div></div></div><div><br></div><div><div><div>symmetric(touching; disconnected; overlapping;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">对称（接触；分离；重叠；</div></div></div></div><div><br></div><div><div><div>adjacent; near; far).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">相邻；接近；远离）。</div></div></div></div><div><br></div><div><div><div><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11986" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>Y</mi><mo>,</mo><mi>R</mi><mo>,</mo><mi>X</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>X</mi><mo>,</mo><mi>R</mi><mo>,</mo><mi>Y</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container> ,symmetric <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11987" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mi>R</mi><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mi>X</mi><mo>!</mo><mo>=</mo><mi>Y</mi></math></mjx-assistive-mml></mjx-container> .<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11988" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>Y</mi><mo>,</mo><mi>R</mi><mo>,</mo><mi>X</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>X</mi><mo>,</mo><mi>R</mi><mo>,</mo><mi>Y</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container> ，对称 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11989" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mi>R</mi><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mi>X</mi><mo>!</mo><mo>=</mo><mi>Y</mi></math></mjx-assistive-mml></mjx-container> 。</div></div></div></div><div><br></div><div><div><div>	...</div></div></div><div><br></div><div><div><div>% Intra-block object relations<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 块内对象关系（Intra - block object relations）</div></div></div></div><div><br></div><div><div><div>is <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11990" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c52"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mn>01</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">R</mi></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mn>02</mn></mrow></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo></math></mjx-assistive-mml></mjx-container> object(01,L,L,L,Block),<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">是 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11991" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c52"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mn>01</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">R</mi></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mn>02</mn></mrow></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo></math></mjx-assistive-mml></mjx-container> 对象(01,L,L,L,块)，</div></div></div></div><div><br></div><div><div><div>object(02, _, _, _, Block),<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">对象(02, _, _, _, 块)，</div></div></div></div><div><br></div><div><div><div>is(01,R,02),<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">是(01,R,02)，</div></div></div></div><div><br></div><div><div><div><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11992" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mn>01</mn></mrow><mo>!</mo><mo>=</mo><mrow data-mjx-texclass="ORD"><mn>02</mn></mrow></math></mjx-assistive-mml></mjx-container></div></div></div><div><br><hr></div><div><div><div>Figure 6: ASP code sample<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">图 6：ASP 代码示例</div></div></div></div><div><br><!-- Media --><br></div><div><div><div></div></div></div></span></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="41" id="mark-72b3e7d3-823b-4555-a14a-c0a211a6b6d5" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-40="0,0"><div style="height: auto;"><span style="display: inline;"><div><div><div><paragraphpositioning data-position-40="0,0">ASP code is implemented in the module of "Proposed LLM + ASP", as shown as follows.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">ASP 代码在“提议的大语言模型 + ASP”模块中实现，如下所示。</div></paragraphpositioning></div></div></div><div><br><!-- Media --><br><hr></div><h2><div><div>ASP Code Sample<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">ASP 代码示例</div></div></div></h2><div><br></div><div><div><div>% Inverse relations<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 逆关系（Inverse relations）</div></div></div></div><div><br></div><div><div><div>inverse(left, right; right, left;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">逆（左，右；右，左；</div></div></div></div><div><br></div><div><div><div>front, behind; behind, front;<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">前，后；后，前；</div></div></div></div><div><br></div><div><div><div>above, below; below, above).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">上，下；下，上）。</div></div></div></div><div><br></div><div><div><div><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11993" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>Y</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow><mo>,</mo><mi>X</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>X</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mi>Y</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container> ,inverse <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11994" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mi>X</mi><mo>!</mo><mo>=</mo><mi>Y</mi></math></mjx-assistive-mml></mjx-container> .<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11995" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-n"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3A"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c2212"></mjx-c></mjx-mo><mjx-mi class="mjx-n" space="2"><mjx-c class="mjx-c69"></mjx-c><mjx-c class="mjx-c73"></mjx-c></mjx-mi><mjx-mrow space="2"><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>Y</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow><mo>,</mo><mi>X</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>:</mo><mo>−</mo><mi>is</mi><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mi>X</mi><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mi>Y</mi></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow></math></mjx-assistive-mml></mjx-container> ，逆 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11996" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D445 TEX-I"></mjx-c></mjx-mi><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i" space="4"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>1</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi>R</mi><mn>2</mn></mrow></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mi>X</mi><mo>!</mo><mo>=</mo><mi>Y</mi></math></mjx-assistive-mml></mjx-container> 。</div></div></div></div><div><br></div><div><div><div>% Symmetric relations<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 对称关系（Symmetric relations）</div></div></div></div><div><br></div><div><div><div>	...</div></div></div><div><br></div><div><div><div>% Inter-block object relations<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 块间对象关系（Inter-block object relations）</div></div></div></div><div><br></div><div><div><div>is(01, R, 02) :- object(01, _, _, _, B1),</div></div></div><div><br></div><div><div><div>object(02, _, _, _, B2),</div></div></div><div><br></div><div><div><div>is <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11997" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c52"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mstyle><mjx-mspace style="width: 0.278em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">B</mi></mrow><mn>1</mn><mo>,</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">R</mi></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">B</mi></mrow><mn>2</mn></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mn>01</mn></mrow><mo>!</mo><mo>=</mo><mrow data-mjx-texclass="ORD"><mn>02</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mstyle scriptlevel="0"><mspace width="0.278em"></mspace></mstyle><mi mathvariant="normal">B</mi></mrow><mn>1</mn><mo>!</mo><mo>=</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">B</mi></mrow><mn>2</mn></math></mjx-assistive-mml></mjx-container> .<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">是 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11998" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c52"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-mrow><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c31"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mn class="mjx-n"><mjx-c class="mjx-c30"></mjx-c><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-texatom space="2" texclass="ORD"><mjx-mstyle><mjx-mspace style="width: 0.278em;"></mjx-mspace></mjx-mstyle><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c31"></mjx-c></mjx-mn><mjx-mo class="mjx-n"><mjx-c class="mjx-c21"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-texatom space="4" texclass="ORD"><mjx-mi class="mjx-n"><mjx-c class="mjx-c42"></mjx-c></mjx-mi></mjx-texatom><mjx-mn class="mjx-n"><mjx-c class="mjx-c32"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="INNER"><mo data-mjx-texclass="OPEN">(</mo><mrow data-mjx-texclass="ORD"><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">B</mi></mrow><mn>1</mn><mo>,</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">R</mi></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">B</mi></mrow><mn>2</mn></mrow><mo data-mjx-texclass="CLOSE">)</mo></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mn>01</mn></mrow><mo>!</mo><mo>=</mo><mrow data-mjx-texclass="ORD"><mn>02</mn></mrow><mo>,</mo><mrow data-mjx-texclass="ORD"><mstyle scriptlevel="0"><mspace width="0.278em"></mspace></mstyle><mi mathvariant="normal">B</mi></mrow><mn>1</mn><mo>!</mo><mo>=</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="normal">B</mi></mrow><mn>2</mn></math></mjx-assistive-mml></mjx-container> 。</div></div></div></div><div><br><hr></div><div><div><div>Figure 7: ASP code sample<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">图7：ASP代码示例</div></div></div></div><div><br><!-- Media --><br></div><h2><div><div>Appendix E: Prompts samples<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">附录E：提示示例</div></div></div></h2><div><br></div><h2><div><div>E1: Visualization Prompts for StepGame<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">E1：StepGame的可视化提示</div></div></div></h2><div><br></div><div><div><div>Role: A spatial visualization expert specializing in converting textual spatial relationships into grid layouts.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">角色：一位擅长将文本空间关系转换为网格布局的空间可视化专家。</div></div></div></div><div><br></div><div><div><div>Task: Given a story describing spatial relations and a position query between two agents, create a step-by-step grid visualization to determine the answer. Process: 1). Initial Grid Setup<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">任务：给定一个描述空间关系的故事以及两个主体之间的位置查询，创建一个逐步的网格可视化来确定答案。过程：1). 初始网格设置</div></div></div></div><div><br><ul><li>Create <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="11999" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mn class="mjx-n"><mjx-c class="mjx-c35"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c35"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>5</mn><mo>×</mo><mn>5</mn></math></mjx-assistive-mml></mjx-container> or <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12000" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mn class="mjx-n"><mjx-c class="mjx-c37"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c37"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>7</mn><mo>×</mo><mn>7</mn></math></mjx-assistive-mml></mjx-container> grid with periods (.)</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>用句点 (.) 创建 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12001" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mn class="mjx-n"><mjx-c class="mjx-c35"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c35"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>5</mn><mo>×</mo><mn>5</mn></math></mjx-assistive-mml></mjx-container> 或 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12002" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mn class="mjx-n"><mjx-c class="mjx-c37"></mjx-c></mjx-mn><mjx-mo class="mjx-n" space="3"><mjx-c class="mjx-cD7"></mjx-c></mjx-mo><mjx-mn class="mjx-n" space="3"><mjx-c class="mjx-c37"></mjx-c></mjx-mn></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>7</mn><mo>×</mo><mn>7</mn></math></mjx-assistive-mml></mjx-container> 网格</li></ul></div><br><ul><li>Place query's second agent at center as anchor</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>将查询中的第二个主体放置在中心作为锚点</li></ul></div><br></div><div><div><div>2). Sequential Agent Placement<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">2). 顺序主体放置</div></div></div></div><div><div><div></div></div></div></span></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="42" id="mark-5ea7aefb-9626-4c1a-b6e5-0138b6810c83" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-41="0,0"><div style="height: auto;"><span style="display: inline;"><div><div><div><paragraphpositioning data-position-41="0,0"></paragraphpositioning></div></div></div><div><ul><li>Build from anchor agent</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>从锚点主体开始构建</li></ul></div><br><ul><li>Place agents based on explicit relations only</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>仅根据明确的关系放置主体</li></ul></div><br><ul><li>Each placement must connect to existing agents</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>每次放置都必须与现有主体相连</li></ul></div><br></div><div><div><div>3). Validation and Optimization ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">3). 验证与优化...</div></div></div></div><div><br></div><div><div><div>4). Answer Generation ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">4). 答案生成...</div></div></div></div><div><br></div><div><div><div>Example output:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">示例输出：</div></div></div></div><div><br></div><div><div><div>Story: "D is left of E. M is above E. B is below E." Question: "What is the relation of B to M?"<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">故事：“D 在 E 的左边。M 在 E 的上方。B 在 E 的下方。”问题：“B 与 M 是什么关系？”</div></div></div></div><div><br></div><h2><div><div>E2:Symbolic Fact Representation and Logical Rules<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">E2：符号事实表示与逻辑规则</div></div></div></h2><div><br></div><div><div><div>Module 1: Natural Language to ASP Facts<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">模块 1：自然语言转换为 Answer Set Programming（ASP）事实</div></div></div></div><div><br></div><div><div><div>Given a context and spatial question, extract all facts using three predicates:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">给定一个上下文和空间问题，使用三个谓词提取所有事实：</div></div></div></div><div><br><ul><li>block/1: block(name)</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>block/1：块（名称）</li></ul></div><br><ul><li>object/5: object(distinct_name, size, color, shape, block)</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>object/5：对象（唯一名称，大小，颜色，形状，块）</li></ul></div><br><ul><li>relation/2: relation (object1, object2)</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>relation/2：关系（对象 1，对象 2）</li></ul></div><br></div><div><div><div>Example:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">示例：</div></div></div></div><div><br></div><div><div><div>block(a) .<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">块(a) .</div></div></div></div><div><br></div><div><div><div>object(large_blue_triangle, large, blue, triangle, a).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">对象(大蓝色三角形, 大, 蓝色, 三角形, a)。</div></div></div></div><div><br></div><div><div><div>%object(blue_oval, unknown, blue, oval, b).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">%对象(蓝色椭圆形, 未知, 蓝色, 椭圆形, b)。</div></div></div></div><div><br></div><div><div><div>left(large_blue_triangle, blue_oval).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">左(大蓝色三角形, 蓝色椭圆形)。</div></div></div></div><div><br></div><div><div><div>Module 2: Logical Rules Application<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">模块 2：逻辑规则应用</div></div></div></div><div><br></div><div><div><div>Apply spatial logical rules to connect facts with queries:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">应用空间逻辑规则将事实与查询关联起来：</div></div></div></div><div><br></div><div><div><div>Inverse Relations:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">逆关系：</div></div></div></div><div><br></div><div><div><div>% If <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12003" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></mjx-assistive-mml></mjx-container> is [Relation1] of <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12004" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi></math></mjx-assistive-mml></mjx-container> ,and [Relation1] is inverse of [Relation2],<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 如果 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12005" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></mjx-assistive-mml></mjx-container> 是 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12006" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi></math></mjx-assistive-mml></mjx-container> 的 [关系1]，且 [关系1] 是 [关系2] 的逆关系，</div></div></div></div><div><br></div><div><div><div>% then <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12007" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi></math></mjx-assistive-mml></mjx-container> is [Relation2] of <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12008" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></mjx-assistive-mml></mjx-container><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 那么 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12009" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44C TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Y</mi></math></mjx-assistive-mml></mjx-container> 是 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12010" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44B TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>X</mi></math></mjx-assistive-mml></mjx-container> 的 [关系2]</div></div></div></div><div><br></div><div><div><div>Symmetric Relations: ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">对称关系：...</div></div></div></div><div><br></div><div><div><div>Inter-block Relations: ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">块间关系：...</div></div></div></div><div><br></div><div><div><div>Output format:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">输出格式：</div></div></div></div><div><br></div><div><div><div>{</div></div></div><div><br></div><div><div><div>"Reasoning": "step 1, 2, 3 ...",<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">"推理过程": "步骤 1, 2, 3 ...",</div></div></div></div><div><br></div><div><div><div>"Answer": "Your answer"<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">"答案": "你的答案"</div></div></div></div><div><br></div><div><div><div>}</div></div></div><div><div><div></div></div></div></span></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="43" id="mark-101ff6b2-bc4f-4be3-a838-4a1655fdd33c" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-42="0,0"><div style="height: auto;"><span style="display: inline;"><div><div><div><paragraphpositioning data-position-42="0,0"></paragraphpositioning></div></div></div><div><div><div>E3:NL-Facts Module Prompts for StepGame<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">E3：步骤游戏的自然语言事实模块提示</div></div></div></div><div><br></div><div><div><div>Role: Expert semantic parser converting context sentences into atomic facts. Fact Types:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">角色：将上下文句子转换为原子事实的专业语义解析器。事实类型：</div></div></div></div><div><br><ol><li value="1">Relation facts: is (`"A"`, relation, `"B"`)</li></ol><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ol><li value="1">关系事实：is (`"A"`, 关系, `"B"`)</li></ol></div><br><ol><li value="2">Query facts: query ( `" A "` , `" B "` )</li></ol><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ol><li value="2">查询事实：query ( `" A "` , `" B "` )</li></ol></div><br></div><div><div><div>Relation Set:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">关系集合：</div></div></div></div><div><br><ul><li>left, right, top, down</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>左，右，上，下</li></ul></div><br><ul><li>top_left, top_right</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>左上，右上</li></ul></div><br><ul><li>down_left, down_right</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>左下，右下</li></ul></div><br></div><div><div><div>Mapping Rules:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">映射规则：</div></div></div></div><div><br></div><div><div><div>1). Clock Positions:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">1). 时钟位置：</div></div></div></div><div><br></div><div><div><div>12:00 -&gt; top 1-2:00 -&gt; top_right<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">12:00 -&gt; 上 1 - 2:00 -&gt; 右上</div></div></div></div><div><br></div><div><div><div>3:00 -&gt; right 4-5:00 -&gt; down_right<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">3:00 -&gt; 右 4 - 5:00 -&gt; 右下</div></div></div></div><div><br></div><div><div><div>...</div></div></div><div><br></div><div><div><div>2). Cardinal Directions: ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">2). 方位方向：...</div></div></div></div><div><br></div><div><div><div>Example: Input story:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">示例：输入故事：</div></div></div></div><div><br></div><div><div><div>"U and V are parallel, and U is to the left of V."<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">"U 和 V 平行，且 U 在 V 的左侧。"</div></div></div></div><div><br></div><div><div><div>"T and G are parallel, and T on the left of G."<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">"T 和 G 平行，且 T 在 G 的左侧。"</div></div></div></div><div><br></div><div><div><div>"V is positioned in the front right corner of Z."<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">"V 位于 Z 的右前角。"</div></div></div></div><div><br></div><div><div><div>...</div></div></div><div><br></div><div><div><div>Question: "What is the relation of the agent <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12011" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></mjx-assistive-mml></mjx-container> to the agent <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12012" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44D TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Z</mi></math></mjx-assistive-mml></mjx-container> ?" Output: is("U",left,"V"). is("T",left,"G"). is("V",top_right,"Z"). ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">问题：“主体 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12013" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D43A TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></mjx-assistive-mml></mjx-container> 与主体 <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="12014" style="font-size: 113.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44D TEX-I"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Z</mi></math></mjx-assistive-mml></mjx-container> 的关系是什么？” 输出：is("U",left,"V"). is("T",left,"G"). is("V",top_right,"Z"). ...</div></div></div></div><div><br></div><h2><div><div>E4: ASP Refinement Module Prompts for StepGame<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">E4：StepGame 的 ASP 细化模块提示</div></div></div></h2><div><br></div><div><div><div>Step 1: Analysis Checklist<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">步骤 1：分析清单</div></div></div></div><div><br><ul><li>Completeness: Verify all story elements are represented</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>完整性：验证所有故事元素均有体现</li></ul></div><br><ul><li>Syntax: Check format ... - Safety: Confirm - Arguments in quotes - Relations unquoted and lowercase - Consistency: Verify relations use standard set:</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>语法：检查格式 ... - 安全性：确认 - 参数加引号 - 关系不加引号且为小写 - 一致性：验证关系使用标准集合：</li></ul></div></div><div><div><div></div></div></div></span></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="44" id="mark-94b15214-fd0a-473a-a778-0bcd7ff876a1" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-43="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-43="0,0"></paragraphpositioning></div></div></div><div><div><div>{left, right, top, down, top_left,<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">{左，右，上，下，左上，</div></div></div></div><div><br></div><div><div><div>top_right, down_left, down_right}<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">右上，左下，右下}</div></div></div></div><div><br></div><div><div><div>...</div></div></div><div><br><ul><li>Each fact on separate line</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>每个事实单独一行</li></ul></div><br><ul><li>No extra punctuation</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>无额外标点符号</li></ul></div><br><ul><li>Query: Verify question correctly represented</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>查询：验证问题是否正确表示</li></ul></div><br></div><div><div><div>Step 2: Refinement Process ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">步骤2：细化过程...</div></div></div></div><div><br></div><div><div><div>Step 3: Final Output Format<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">步骤3：最终输出格式</div></div></div></div><div><br></div><div><div><div>is ("A", left, "B") .<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">是 ("A", 左, "B") 。</div></div></div></div><div><br></div><div><div><div>is("C",top_right,"D").<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">是("C", 右上, "D")。</div></div></div></div><div><br></div><div><div><div>query("E","F").<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">查询("E", "F")。</div></div></div></div><div><br></div><h2><div><div>E5: Natural Language to ASP Conversion Prompts for SparQA<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">E5：SparQA的自然语言到回答集编程（ASP）转换提示</div></div></div></h2><div><br></div><div><div><div>Module 1: Initial ASP Code Generation<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">模块1：初始ASP代码生成</div></div></div></div><div><br></div><div><div><div>Role: Expert parser for converting natural language to logical represen-<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">角色：将自然语言转换为逻辑表示的专业解析器</div></div></div></div><div><br></div><div><div><div>tations.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">表示。</div></div></div></div><div><br></div><div><div><div>Step 1: Fact Extraction<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">步骤1：事实提取</div></div></div></div><div><br></div><div><div><div>Three essential predicates:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">三个基本谓词：</div></div></div></div><div><br><ol><li value="1">block (name)</li></ol><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ol><li value="1">块（名称）</li></ol></div><br></div><div><div><div>Example: block(a). block(a;b;c).<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">示例：block(a)。block(a;b;c)。</div></div></div></div><div><br></div><div><div><div>...</div></div></div><div><br></div><div><div><div>Critical Rules: ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">关键规则：...</div></div></div></div><div><br></div><div><div><div>Example Context Translation:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">示例上下文翻译：</div></div></div></div><div><br></div><div><div><div>Context: "There is a block A below block B. In A, there is a large blue triangle to the left of and below a large black square. Far above the square is a large black circle."<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">上下文：“在方块B下方有一个方块A。在A中，有一个蓝色大三角形位于黑色大正方形的左下方。在正方形的上方远处有一个黑色大圆圈。”</div></div></div></div><div><br></div><div><div><div>...</div></div></div><div><div><div></div></div></div></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"></div><div><div data-page="45" id="mark-e4ff16e6-1671-4893-af63-e08abc254c60" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate alive_postion_page_md" data-positiontag-44="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-44="0,0"></paragraphpositioning></div></div></div><div><div><div>Step 2: Query Generation<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">步骤2：查询生成</div></div></div></div><div><br></div><div><div><div>Query formats:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">查询格式：</div></div></div></div><div><br><ul><li>Yes/No questions: query (yes) and query (no)</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>是非问题：query (yes) 和 query (no)</li></ul></div><br><ul><li>Wh-Questions: query(relation), query(object), or query(block)</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>特殊疑问句：query(关系)，query(对象) 或 query(方块)</li></ul></div><br></div><div><div><div>Example queries:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">示例查询：</div></div></div></div><div><br></div><div><div><div>% Are all squares in B?<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 所有正方形都在B中吗？</div></div></div></div><div><br></div><div><div><div>query(no) :- object(_,_,_, square, Block), Block != b.<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">query(no) :- 对象(_,_,_, 正方形, 方块), 方块 != b。</div></div></div></div><div><br></div><div><div><div>query(yes) : - not query(no). ...<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">query(yes) : - 非 query(no)。...</div></div></div></div><div><br></div><h2><div><div>Module 2: ASP Refinement Refinement Process:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">模块2：ASP细化 细化过程：</div></div></div></h2><div><br><ol><li value="1">Check facts: - Validate predicates and argument counts - Verify relation names - Ensure consistent variable naming 2. Verify query: - Appropriate query type - Logical consistency - Variable safety 3. Format output: ... Common Errors and Fixes:</li></ol><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ol><li value="1">检查事实： - 验证谓词和参数数量 - 验证关系名称 - 确保变量命名一致 2. 验证查询： - 合适的查询类型 - 逻辑一致性 - 变量安全性 3. 格式化输出：... 常见错误及修复方法：</li></ol></div><br><ul><li>Syntax: Ensure head :- body. structure</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>语法：确保遵循 头部 :- 主体。的结构</li></ul></div><br><ul><li>Unsafe variables: Bind all variables in positive literals</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>不安全变量：绑定正文字中的所有变量</li></ul></div><br><ul><li>Grounding: Verify predicate argument counts</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>基础检查：验证谓词参数数量</li></ul></div><br><ul><li>Undefined predicates: Define all used predicates</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>未定义的谓词：定义所有使用的谓词</li></ul></div><br><ul><li>Inconsistent rules: Resolve contradictions</li></ul><div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;"><ul><li>不一致的规则：解决矛盾</li></ul></div><br></div><div><div><div>Final ASP Structure:<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">最终的回答集编程（ASP）结构：</div></div></div></div><div><div><div></div></div></div></div></div></div></div></div></div><div><div class="relative cursor-pointer md-tranlate-menu-layout"><div><div data-page="46" id="mark-119536f8-edbf-4b57-9d33-16fd3163b8bd" class="markdown-parser-view mb-5 relative cursor-pointer"><div class="locator-translate" data-positiontag-45="0,0"><div style="height: auto;"><div><div><div><paragraphpositioning data-position-45="0,0"></paragraphpositioning></div></div></div><div><hr></div><div><div><div>% Facts<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 事实</div></div></div></div><div><br><facts><br></facts></div><div><div><div>% Rules<div style="background-color: #e3e4e588;border-radius: 4px;margin: 8px 0;padding: 12px;">% 规则</div></div></div></div><div><br></div><div><div><div>		<rules></rules></div></div></div><div><br></div><div><div><div>	...</div></div></div><div><br><hr></div></div></div></div></div></div></div>
      </body>
    </html>
  